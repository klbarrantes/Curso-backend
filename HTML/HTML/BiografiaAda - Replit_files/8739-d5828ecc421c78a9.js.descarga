"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8739],{84197:function(e,n,r){var t=r(94660),l=r(29356),i=r.n(l);r(59496);n.Z=function(e){var n=e.maxLength,r=void 0===n?140:n,l=e.value,a=void 0===l?"":l,o=e.hideLabel,u=void 0!==o&&o;return(0,t.BX)("div",{className:"jsx-59d2089b8a0ab881",children:[a.length," / ",r," ",u?"":"characters",(0,t.tZ)(i(),{id:"59d2089b8a0ab881",children:"div.jsx-59d2089b8a0ab881{color:var(--foreground-dimmer);font-size:.75em;text-align:right;margin-top:var(--space-8)}"})]})}},73728:function(e,n,r){r.d(n,{Z:function(){return P}});var t=r(72006),l=r(4405),i=r(2272),a=r(94660),o=r(59496),u=r(88254),c=r(75408),s=r(58530),d=r(56474),v=r(58722),p=r(87392),h=r(44135),f=r(84197),m=r(21793),g=r(11620),Z=r(38034),R=r(77705),w=r(43119),k=r(71440),b=r(97091),y=r(53486);function _(){var e=(0,w.Z)(["\n  query ForkModal {\n    currentUser {\n      id\n      url\n      image\n      username\n      ...ReplOwnerCurrentUser\n      teams {\n        id\n        ...ReplOwnerTeam\n      }\n    }\n  }\n  ","\n  ","\n"]);return _=function(){return e},e}var x={},E=(0,k.Ps)(_(),b.s,b.a);var U=r(74137),B=function(e){var n=e.onFork,r=e.hideModal,t=e.initialTitle,l=e.initialDescription,u=void 0===l?"":l,d=e.initialPrivacy,w=e.teamContext,k=e.currentUser,b=e.template,y=o.useRef(null),_=(0,h.H)(),x=(0,i.Z)((0,g.Y)(k,w),2),E=x[0],B=x[1],P=(0,i.Z)((0,U.c)(E,k,d||!1),3),T=P[0],C=P[1],G=P[2],I=(0,c.Y)(t,(function(e){if(e)return e.length>60?{message:"Must be no longer than 60 characters"}:void 0})),F=(0,c.Y)(u,(function(e){if(e&&e.length>p.p)return{message:"Must be no longer than ".concat(p.p," characters")}}));o.useEffect((function(){y.current&&y.current.focus()}),[y]);var S="Team"===E.__typename?E.id:null;return(0,a.tZ)("form",{onSubmit:function(e){e.preventDefault(),I.validate()||F.validate()||(n(S,I.value,F.value,T),r())},children:(0,a.BX)(s.G7,{css:[s.l0.colWithGap(16)],children:[(0,a.tZ)(s.h4,{variant:"headerDefault",level:2,children:b?"Use Template":"Fork Repl"}),(0,a.BX)(s.G7,{css:[s.l0.colWithGap(16)],children:[(0,a.BX)(s.G7,{css:[s.l0.colWithGap(4)],children:[(0,a.BX)(s.G7,{css:[s.l0.flex.row,s.l0.justify.spaceBetween,s.l0.align.end],children:[(0,a.tZ)(m._,{for:_("name"),children:"Name"}),(0,a.tZ)(f.Z,{maxLength:60,value:I.value,hideLabel:!0})]}),(0,a.tZ)(s.II,{ref:y,className:"repl-title-input",placeholder:"Name your Repl",onChange:function(e){return I.setValue(e.target.value)},onFocus:function(e){return e.target.select()},value:I.value,onBlur:I.handleBlur,id:_("name")}),I.error?(0,a.tZ)(s.xv,{css:[s.l0.color.accentNegativeStronger],children:I.error.message}):null]}),(0,a.BX)(s.G7,{css:[s.l0.colWithGap(4)],children:[(0,a.BX)(s.G7,{css:[s.l0.flex.row,s.l0.justify.spaceBetween,s.l0.align.end],children:[(0,a.tZ)(m._,{for:_("description"),children:"Description"}),(0,a.tZ)(f.Z,{maxLength:p.p,value:F.value,hideLabel:!0})]}),(0,a.tZ)(s.B,{maxLength:p.p,value:F.value,onChange:function(e){return F.setValue(e.target.value)},placeholder:"What does this Repl do?",css:[s.l0.minHeight(96),s.l0.maxHeight(128),{resize:"vertical"}],id:_("description")})]}),(0,a.tZ)(R.P,{context:"fork_modal",isPrivate:T,setIsPrivate:C,privacyState:G})]}),k.teams.length>0?(0,a.BX)(s.G7,{css:[s.l0.colWithGap(8)],children:[(0,a.tZ)(m._,{for:_("owner"),children:"Owner"}),(0,a.tZ)(Z.Z,{id:_("owner"),currentUser:k,initialSelectedUsername:E.username,onChange:function(e){return B(e.username)}})]}):null,(0,a.BX)(s.G7,{css:[s.l0.rowWithGap(12),s.l0.justify.end],children:[(0,a.tZ)(s.zx,{onClick:r,text:"Cancel",type:"button"}),(0,a.tZ)(s.zx,{colorway:"primary",type:"submit",disabled:Boolean(I.error||F.error),text:b?(0,a.tZ)(a.HY,{children:"Use Template"}):(0,a.tZ)(a.HY,{children:"Fork Repl"}),iconLeft:(0,a.tZ)(v.Z,{})})]})]})})};function P(e){var n=function(e){var n=(0,t.Z)({},x,e);return y.a(E,n)}({fetchPolicy:"cache-and-network",onError:function(e){u.$e((function(n){n.setTag("fork-modal",!0),u.Tb(e)}))}}),r=n.data,i=n.loading,o=n.error;if(i)return(0,a.tZ)(s.xv,{color:"dimmer",children:"Loading..."});if(o)return(0,a.tZ)(s.xv,{children:"Something went wrong."});if(!r)return null;var c=r.currentUser;return c?(0,a.tZ)(B,(0,l.Z)((0,t.Z)({},e),{currentUser:c})):(0,a.tZ)(d.Z,{title:"Sign up or log in to fork this Repl",onSuccess:function(){},source:"fork"})}},65292:function(e,n,r){r.d(n,{Z:function(){return R}});var t=r(72006),l=r(4405),i=r(2272),a=r(59496),o=r(54703),u=r(99340),c=r(43119),s=r(71440),d=r(46653);function v(){var e=(0,c.Z)(["\n  mutation ForkReplCreateRepl($input: CreateReplInput!) {\n    createRepl(input: $input) {\n      ... on Repl {\n        id\n        url\n        isPrivate\n        language\n        origin {\n          id\n          isOwner\n        }\n        source {\n          release {\n            id\n            repl {\n              id\n              title\n              owner {\n                ... on User {\n                  id\n                  username\n                }\n                ... on Team {\n                  id\n                  username\n                }\n              }\n            }\n          }\n        }\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return v=function(){return e},e}var p={},h=(0,s.Ps)(v());function f(e){var n=(0,t.Z)({},p,e);return d.D(h,n)}var m=r(65517),g=r(10063),Z=r(38181);function R(){var e,n,r,c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=c.onFork,d=c.onError,v=(0,o.useRouter)(),p=(0,u.Z)().showError,h=(0,m.Z)(),R=(0,i.Z)(f({onCompleted:function(e){var n="Repl"===(null===e||void 0===e?void 0:e.createRepl.__typename)?e.createRepl:null;if(n)if(s&&s(e),"/replEnvironmentDesktop"!==v.pathname&&"/replEnvironmentMobile"!==v.pathname)v.push({pathname:h,query:{replUrl:n.url}},{pathname:n.url});else{var r=n.url+(v.query.lite?"?lite=".concat(v.query.lite.toString()):"");window.location.href=r}}}),2),w=R[0],k=R[1],b="UserError"===(null===(e=k.data)||void 0===e?void 0:e.createRepl.__typename)?null===(n=k.data)||void 0===n?void 0:n.createRepl.message:null===(r=k.error)||void 0===r?void 0:r.message;a.useEffect((function(){b&&(p(b),d&&d())}),[b,p,d]);var y=a.useCallback((function(e){var n=e.originId,r=e.replReleaseId,i=e.teamId,a=e.title,o=e.description,u=e.isPrivate,c=e.trackingData,s=e.forkToPersonal;(0,g.j)(g.U3.FORK_REQUESTED,c),w({variables:{input:{originId:n,replReleaseId:r,teamId:i,title:a,isPrivate:u,description:o,forkToPersonal:s,gitRemoteUrl:""}}}).then((function(e){var i,a,o,u,s,d,v,p,h,f,m,R,w,k,b="Repl"===(null===(i=e.data)||void 0===i?void 0:i.createRepl.__typename)?e.data.createRepl:null;b&&(0,g.j)(g.U3.REPL_CREATED,(0,l.Z)((0,t.Z)({isSignup:!1,isOnboarding:!1},c),{isForked:!0,isPrivate:b.isPrivate,replId:b.id,isRenamed:!1,language:b.language,isSelfForked:!!(null===(a=b.origin)||void 0===a?void 0:a.isOwner),isTemplateFork:Boolean(r),originId:n,templateReplId:(null===(o=b.source)||void 0===o||null===(u=o.release)||void 0===u||null===(s=u.repl)||void 0===s?void 0:s.id)||void 0,templateTitle:null===(d=b.source)||void 0===d||null===(v=d.release)||void 0===v||null===(p=v.repl)||void 0===p?void 0:p.title,templateOwner:null===(h=b.source)||void 0===h||null===(f=h.release)||void 0===f||null===(m=f.repl)||void 0===m||null===(R=m.owner)||void 0===R?void 0:R.username,templateType:(null===(w=b.source)||void 0===w||null===(k=w.release)||void 0===k?void 0:k.repl)?(0,Z.lw)(b.source.release.repl):void 0}))}))}),[w]),_=!!(k.loading||k.data&&"Repl"===k.data.createRepl.__typename);return[y,{loading:_}]}},87392:function(e,n,r){r.d(n,{p:function(){return t}});var t=1e3}}]);
//# sourceMappingURL=8739-d5828ecc421c78a9.js.map