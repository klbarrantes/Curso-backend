(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4951],{89456:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/cycles",function(){return n(75369)}])},91640:function(e,t,n){"use strict";n.d(t,{T:function(){return a}});var r=n(57389),l=n(94660),i=n(3289),o=n(58530),c=n(58868),s=n(10430);function a(e){var t,n=e.includeMyCyclesCTA,a=void 0===n||n,u=(0,i.Fc)(),d=u.data,p=u.loading,h="CyclesForecast"===(null===d||void 0===d||null===(t=d.currentUser)||void 0===t?void 0:t.cycles.forecast.__typename)?d.currentUser.cycles.forecast.hasSufficientCycles:void 0;return p||null==h||h?null:(0,l.BX)(o.G7,{css:[o.l0.rowWithGap(16),(0,r.Z)({},(0,s.EM)("mobileMax"),o.l0.colWithGap(16)),o.l0.justify.center,o.l0.align.center,o.l0.color.foregroundDefault,o.l0.backgroundColor.accentPrimaryDimmest,o.l0.width("100%"),o.l0.minHeight(58),o.l0.p(12),{borderColor:o.TV.accentPrimaryDimmer,borderStyle:"solid",borderWidth:"1px 0px"}],children:[(0,l.tZ)(o.xv,{multiline:!0,css:[o.l0.flex.shrink(1),o.l0.textAlign.left],children:"Based on your usage, you'll run out of Cycles soon!"}),!!a&&(0,l.tZ)(o.ZP,{href:"/cycles/buy",text:"Buy more and set up Auto-Refill",colorway:"primary",iconLeft:(0,l.tZ)(c.Cycles,{})})]})}},94425:function(e,t,n){"use strict";n.d(t,{o:function(){return r},p:function(){return l}});var r=function(e){var t=new Date(e),n=t.getHours(),r=t.getMinutes(),i="AM";return n>=12&&(i="PM"),0===(n%=12)&&(n="12"),r<10&&(r="0"+r),l(e)+" ".concat(n,":").concat(r," ").concat(i)},l=function(e){var t=new Date(e),n=t.getMonth()+1,r=t.getDate(),l=t.getFullYear();return"".concat(n,"/").concat(r,"/").concat(l)}},90130:function(e,t,n){"use strict";n.d(t,{P:function(){return s},_:function(){return c}});var r=n(43119),l=n(71440);function i(){var e=(0,r.Z)(["\n  fragment UserLinkUser on User {\n    id\n    url\n    username\n  }\n"]);return i=function(){return e},e}function o(){var e=(0,r.Z)(["\n  fragment UserLinkCurrentUser on CurrentUser {\n    id\n    url\n    username\n  }\n"]);return o=function(){return e},e}var c=(0,l.Ps)(i()),s=(0,l.Ps)(o())},75369:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return gt}});var r=n(57135),l=n(57389),i=n(2272),o=n(96583),c=n(94660),s=n(12813),a=n(6544),u=n(82077),d=n(91834),p=n(31229),h=n(78316),v=n(72006),Z=n(43119),f=n(71440),w=n(53486);function g(){var e=(0,Z.Z)(["\n  query CyclesBalanceWidget {\n    currentUser {\n      id\n      cycles {\n        hasSubscription\n      }\n    }\n  }\n"]);return g=function(){return e},e}var y={},m=(0,f.Ps)(g());var U=n(93658),x=n(10063),G=n(58530),P=n(58868),B=n(56574),T=n(15667),_=n.n(T),b=n(26860);function C(e){var t=e.showLearnMoreLink,n=(0,U.Z)({forceFetch:!1}),r=n.formattedBalanceWithDecimals,l=n.loading;return n.error?null:l?(0,c.tZ)(G.xv,{variant:"headerDefault",children:"My Cycles"}):(0,c.BX)(G.G7,{css:[G.l0.colWithGap(8)],children:[(0,c.BX)(G.G7,{css:[G.l0.flex.row,G.l0.justify.spaceBetween,G.l0.align.baseline],children:[(0,c.tZ)(G.xv,{variant:"subheadDefault",color:"dimmer",children:"Cycles balance"}),t?(0,c.tZ)(_(),{href:b.TT.CYCLES_FAQ,children:(0,c.tZ)("a",{children:"Learn more"})}):null]}),(0,c.BX)(G.G7,{css:[G.l0.flex.row,G.l0.align.center],children:[(0,c.tZ)(B.Z,{size:32,css:{marginRight:6}}),(0,c.tZ)(G.xv,{variant:"headerBig",children:r})]})]})}function S(e){var t,n=e.hasCyclesTransactions,r=e.showAutoRefillHintTooltip,l=e.onRequestUpgradeModal,i=function(e){var t=(0,v.Z)({},y,e);return w.a(m,t)}().data,o=null===i||void 0===i||null===(t=i.currentUser)||void 0===t?void 0:t.cycles.hasSubscription;return(0,c.tZ)(G.Tg,{elevated:!0,css:[G.l0.flex.column,G.l0.borderRadius(16)],children:(0,c.BX)(G.G7,{css:[G.l0.colWithGap(16)],children:[(0,c.BX)(G.G7,{css:[G.l0.colWithGap(12),G.l0.px(n?16:32),G.l0.pt(n?16:24),G.l0.pb(n?0:24)],children:[(0,c.tZ)(C,{showLearnMoreLink:n}),n?(0,c.BX)(G.G7,{css:[G.l0.rowWithGap(4)],children:[(0,c.tZ)(G.xv,{children:" Your Power Ups are using "}),(0,c.tZ)(h.Z,{})]}):null]}),n?(0,c.BX)(c.HY,{children:[(0,c.tZ)(G.RX,{}),(0,c.BX)(G.G7,{css:[G.l0.rowWithGap(16),G.l0.px(16),G.l0.pb(16)],children:[(0,c.tZ)(d.Z,{onClick:function(){l({autoRefill:!1}),(0,x.j)(x.U3.UPGRADE_SELECTED,{source:"cycles_page"})}}),o?(0,c.tZ)(p.Z,{compact:!0,showAutoRefillHintTooltip:r}):(0,c.tZ)(G.zx,{text:"Set up Auto-Refill",iconLeft:(0,c.tZ)(P.RefreshCw,{}),onClick:function(){l({autoRefill:!0}),(0,x.j)(x.U3.UPGRADE_SELECTED,{source:"cycles_page"})}})]})]}):null]})})}var R=n(4405),X=n(79900),D=n(12922),E=n(24880),k=n(26807),W=n(59496),M=n(99340),O=n(18873),A=n(96148),L=n(46653);function H(){var e=(0,Z.Z)(["\n  mutation GhostwriterPowerUpToggle($input: UpdateGhostwriterPowerUpInput!) {\n    updateGhostwriterPowerUp(input: $input) {\n      ... on CurrentUser {\n        id\n        ...PowerUpMutationReturnFields\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return H=function(){return e},e}function I(){var e=(0,Z.Z)(["\n  query GhostwriterPowerUpToggleUserPowerUps {\n    currentUser {\n      id\n      userPowerUpsByType {\n        __typename\n        ... on UserPowerUpsTypes {\n          ghostwriter {\n            ... on UserPowerUpDescriptionByType {\n              ...UserPowerUpByType\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return I=function(){return e},e}var j={},N=(0,f.Ps)(H(),A.E_);var V=(0,f.Ps)(I(),A.QP);var q=n(79960),z=n(38094);function Y(e){var t,n,l=e.powerUpData,s=e.context,a=e.loading,u=e.type,d=e.togglePowerUp,p=(0,i.Z)(W.useState(!1),2),h=p[0],v=p[1],Z=(0,M.Z)().showError,f=null===l||void 0===l||null===(t=l.cost)||void 0===t?void 0:t.explanation,w=function(){if(!a)if((0,x.j)(x.U3.POWER_UP_TOGGLE_REQUESTED,{powerUp:u,setting:!(null===l||void 0===l?void 0:l.willRenew),source:s,costExplanation:f}),"NEEDS_CYCLES"!==f&&"SPEND_CYCLES"!==f){if("INCLUDED_IN_EXISTING_ORDER"!==f){if("INCLUDED_IN_SUBSCRIPTION"===f)return(null===l||void 0===l?void 0:l.willRenew)?void d():void Z("".concat(u," is already included in your subscription"));throw new Error("Unexpected cost explanation for enabling ".concat(u,": ").concat(f))}d()}else v(!0)};return(0,c.BX)(c.HY,{children:[(null===l||void 0===l?void 0:l.active)&&!l.isTrial?(0,c.BX)(G.G7,{css:[G.l0.rowWithGap(4),G.l0.align.center],children:[a?(0,c.tZ)(E.Z,{}):null,(0,c.tZ)(z.Z,{isOn:null!==(n=l.willRenew)&&void 0!==n&&n,onChange:w})]}):(0,c.tZ)(G.zx,{text:(null===l||void 0===l?void 0:l.isTrial)?"Subscribe Now":"Activate",colorway:"primary",onClick:w}),(0,c.tZ)(q.Z,{context:s,isOpen:h,onRequestClose:function(){return v(!1)},uponPurchaseGoTo:"cyclesPage",onRequestPowerUp:(0,r.Z)((function(){return(0,o.__generator)(this,(function(e){switch(e.label){case 0:return d(),[4,new Promise((function(e){return setTimeout(e,3e3)}))];case 1:return e.sent(),v(!1),[2]}}))})),powerUp:u})]})}function F(e){var t,n=e.context,r=(0,M.Z)().showError,l=(0,i.Z)(function(e){var t=(0,v.Z)({},j,e);return L.D(N,t)}({onCompleted:function(e){"UserError"===e.updateGhostwriterPowerUp.__typename&&r(e.updateGhostwriterPowerUp.message)},onError:function(e){return r((0,O.Z)(e.message))}}),2),o=l[0],s=l[1].loading,a=function(e){var t=(0,v.Z)({},j,e);return w.a(V,t)}(),u=a.data,d=a.loading,p="UserPowerUpsTypes"===(null===u||void 0===u||null===(t=u.currentUser)||void 0===t?void 0:t.userPowerUpsByType.__typename)?u.currentUser.userPowerUpsByType.ghostwriter:null;return(0,c.tZ)(Y,{powerUpData:p,type:"ghostwriter",context:n,loading:s||d,togglePowerUp:function(){return o({variables:{input:{active:!(null===p||void 0===p?void 0:p.willRenew)}}})}})}var $=n(11939),Q=n(48030),K=n(9362),J=n(18583),ee=n(81718),te=n(5298);var ne=function(e){var t=e.powerUp,n="willRenew"in t?t.willRenew:t.active,r="timeFulfillmentDue"in t?t.timeFulfillmentDue:t.time_fulfillment_due;if(!r)return null;var l=new Date(r);return l<=function(e,t){(0,te.Z)(2,arguments);var n=(0,J.Z)(t);return(0,ee.Z)(e,6e4*n)}(new Date,30)?n?(0,c.tZ)(G.xv,{variant:"small",color:"dimmest",children:"Renewing soon..."}):(0,c.tZ)(G.xv,{variant:"small",color:"dimmest",children:"Expiring soon..."}):n?(0,c.BX)(G.G7,{css:[G.l0.flex.row,G.l0.align.center],children:[(0,c.tZ)(G.xv,{variant:"small",color:"dimmest",children:"Renews"}),(0,c.tZ)(G.EK,{date:l,dateFormat:"switch",textVariant:"small",textColor:"dimmest"})]}):(0,c.BX)(G.G7,{css:[G.l0.flex.row,G.l0.align.center],children:[(0,c.tZ)(G.xv,{variant:"small",color:"dimmest",children:"Expires"}),(0,c.tZ)(G.EK,{date:l,dateFormat:"switch",textVariant:"small",textColor:"dimmest"})]})};function re(e){var t=e.type,n=e.children,r=e.learnContent,i=e.powerUpData,o=e.userSubscriptionType,s="SUBSCRIPTION"===(null===i||void 0===i?void 0:i.methodOfPayment);return(0,c.tZ)(c.HY,{children:(0,c.BX)(G.Tg,{elevated:!0,css:[G.l0.flex.column,G.l0.borderRadius(16)],children:[(0,c.BX)(G.G7,{css:[G.l0.rowWithGap(12),G.l0.p(16),G.l0.borderRadius(16),G.l0.align.start,G.l0.justify.spaceBetween],children:[(0,c.BX)(G.G7,{css:[G.l0.colWithGap(12)],children:[(0,c.tZ)(G.G7,{css:[G.l0.flex.row,G.l0.justify.spaceBetween,G.l0.align.center],children:(0,c.BX)(G.G7,{css:[G.l0.rowWithGap(8),G.l0.align.center],children:[X.S0[t].icon,(0,c.tZ)(G.h4,{level:2,variant:"subheadDefault",children:X.S0[t].title})]})}),(0,c.tZ)(G.G7,{css:[G.l0.flex.row,G.l0.justify.spaceBetween,G.l0.align.center],children:(0,c.tZ)(G.G7,{css:[G.l0.rowWithGap(2),G.l0.align.center,G.l0.flex.growAndShrink(1),G.l0.pr(24)],children:s&&o?(0,c.BX)(G.xv,{variant:"small",color:"dimmer",children:["Included in your"," ",(0,Q.oc)(o)," plan"]}):(0,c.BX)(c.HY,{children:[(0,c.BX)(G.G7,{css:[G.l0.rowWithGap(4),(0,l.Z)({},G.BC.max("mobileMax"),[G.l0.colWithGap(4)])],children:[(0,c.BX)(G.G7,{css:[G.l0.rowWithGap(4),G.l0.align.center],children:[(0,c.tZ)(B.Z,{color:G.TV.foregroundDimmer,size:12}),(0,c.BX)(G.xv,{variant:"small",color:"dimmer",children:[X.S0[t].formattedCyclesPowerUpCost," per"," ",X.S0[t].orderDuration,X.S0[t].unlimited?", ":null," "]})]}),(0,c.BX)(G.xv,{variant:"small",color:"dimmer",children:[X.S0[t].unlimited?"unlimited":null," ","Repls"]})]}),"private_new"===t?(0,c.tZ)(G.u,{tooltip:"If you purchased Private Repls before repricing, you will continue paying 150 Cycles per month until April 3rd, 2023",children:(0,c.tZ)(K.Z,{})}):null]})})})]}),s?null:(0,c.BX)(G.G7,{css:[G.l0.colWithGap(8),G.l0.align.end],children:[n,i?(0,c.tZ)(ne,{powerUp:i}):null]})]}),!r||(null===i||void 0===i?void 0:i.active)||(null===i||void 0===i?void 0:i.isTrial)?null:(0,c.BX)(c.HY,{children:[(0,c.tZ)(G.RX,{}),(0,c.tZ)(G.xv,{variant:"small",css:[G.l0.p(16)],children:r})]}),(null===i||void 0===i?void 0:i.isTrial)&&i.timeTrialExpiry?(0,c.BX)(c.HY,{children:[(0,c.tZ)(G.RX,{}),(0,c.tZ)(G.xv,{variant:"small",color:"dimmer",css:[G.l0.p(16)],children:(0,$.h)(new Date(i.timeTrialExpiry),t)})]}):null]})})}function le(e){var t=e.ghostwriterPowerUp,n=e.userSubscriptionType,r=e.context;return(0,c.tZ)(re,{type:"ghostwriter",powerUpData:t,userSubscriptionType:n,learnContent:(0,c.tZ)("a",{href:X.$q,onClick:function(){return(0,x.j)(x.U3.EXTERNAL_LINK_VIEWED,{url:X.$q,source:"my_cycles"})},children:"Learn more about Ghostwriter"}),children:(0,c.tZ)(F,{context:r})})}var ie=n(90130);function oe(){var e=(0,Z.Z)(["\n  query CyclesUsage {\n    currentUser {\n      id\n      userSubscriptionType\n      ...UserLinkCurrentUser\n      ...CurrentUserPowerUps\n    }\n  }\n  ","\n  ","\n"]);return oe=function(){return e},e}function ce(){var e=(0,Z.Z)(["\n  query PowerUpsIncludedInPlan {\n    currentUser {\n      id\n      replPowerUpsByMethodOfPayment(methodOfPayment: SUBSCRIPTION) {\n        __typename\n        ... on CurrentUserReplPowerUpsByMethodOfPaymentSuccess {\n          powerUps {\n            repl {\n              id\n              iconUrl\n              ...CyclesUsageRepl\n            }\n            methodOfPayment\n            powerUpType\n            sku\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return ce=function(){return e},e}var se={},ae=(0,f.Ps)(oe(),ie.P,A.UV);var ue=(0,f.Ps)(ce(),A.AD);var de=n(27297),pe=n(28257),he="neon-database-preview";function ve(e){var t=e.neonDatabasePreviewPowerUps,n=e.user;return(0,c.BX)(G.Tg,{elevated:!0,css:[G.l0.borderRadius(16),G.l0.overflow("hidden")],children:[(0,c.BX)(G.G7,{css:[G.l0.flex.row,G.l0.justify.spaceBetween,G.l0.align.center,G.l0.p(16),G.l0.pb(12),(0,l.Z)({borderBottom:"1px solid "+G.TV.backgroundHighest},G.BC.max("mobileMax"),[G.l0.colWithGap(8),G.l0.align.start])],children:[(0,c.BX)(G.G7,{css:[G.l0.rowWithGap(8),G.l0.align.center],children:[X.S0[he].icon,(0,c.BX)(G.h4,{level:2,variant:"subheadDefault",children:[" ",X.S0[he].title]})]}),(0,c.tZ)(G.G7,{css:[G.l0.flex.row,G.l0.justify.spaceBetween,G.l0.align.center],children:(0,c.BX)(G.G7,{css:[G.l0.rowWithGap(2),G.l0.align.center,G.l0.flex.growAndShrink(1)],children:[(0,c.tZ)(B.Z,{color:G.TV.foregroundDimmer,size:12}),(0,c.BX)(G.xv,{variant:"small",color:"dimmer",children:[X.S0[he].formattedCyclesPowerUpCost," per"," ",X.S0[he].orderDuration," per database"]})]})})]}),(0,c.tZ)(G.G7,{css:[G.l0.pt(8),G.l0.pb(12)],children:t.length>0?t.map((function(e){return(0,W.createElement)(_(),(0,R.Z)((0,v.Z)({passHref:!0},(0,de.aq)(e.connectedRepls[0])),{key:e.neonDatabaseName}),(0,c.BX)(G.G7,{css:[G.gU.listItem,G.l0.rowWithGap(16),G.l0.justify.spaceBetween,G.l0.px(16),G.l0.py(8),G.l0.align.center],children:[(0,c.BX)(G.G7,{css:[G.l0.rowWithGap(8),G.l0.align.center,G.l0.flex.growAndShrink(1),G.l0.pr(32)],children:[(0,c.tZ)(G.G7,{css:[G.l0.borderRadius(4),G.l0.overflow("hidden")],children:(0,c.tZ)(pe.Z,{iconUrl:e.connectedRepls[0].iconUrl,alt:e.connectedRepls[0].title,size:16,css:{img:{borderRadius:4}}})}),(0,c.tZ)(G.xv,{css:{fontWeight:G.TV.fontWeightMedium},children:e.connectedRepls[0].title})]}),(0,c.tZ)(G.G7,{css:[G.l0.ml(32)],children:(0,c.tZ)(ne,{powerUp:e})})]}))})):(0,c.BX)(G.G7,{css:[G.l0.colWithGap(12),G.l0.justify.center,G.l0.align.center,G.l0.p(12)],children:[(0,c.tZ)(G.xv,{variant:"small",color:"dimmer",multiline:!0,css:[G.l0.textAlign.center],children:X.S0[he].description}),n?(0,c.tZ)(G.ZP,(0,R.Z)((0,v.Z)({},(0,k.Ru)(n)),{prefetch:!1,text:"Go to My Repls",small:!0})):null]})})]})}function Ze(){var e=(0,Z.Z)(["\n  mutation PrivatePowerUpToggle($active: Boolean!) {\n    updatePrivatePowerUp2(active: $active) {\n      ... on CurrentUser {\n        id\n        ...PowerUpMutationReturnFields\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return Ze=function(){return e},e}function fe(){var e=(0,Z.Z)(["\n  query PrivatePowerUpToggleUserPowerUps {\n    currentUser {\n      id\n      userPowerUpsByType {\n        __typename\n        ... on UserPowerUpsTypes {\n          privateRepls {\n            ... on UserPowerUpDescriptionByType {\n              ...UserPowerUpByType\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return fe=function(){return e},e}var we={},ge=(0,f.Ps)(Ze(),A.E_);var ye=(0,f.Ps)(fe(),A.QP);function me(e){var t,n=e.context,r=(0,M.Z)().showError,l=(0,i.Z)(function(e){var t=(0,v.Z)({},we,e);return L.D(ge,t)}({onCompleted:function(e){"UserError"===e.updatePrivatePowerUp2.__typename&&r(e.updatePrivatePowerUp2.message)},onError:function(e){return r((0,O.Z)(e.message))}}),2),o=l[0],s=l[1].loading,a=function(e){var t=(0,v.Z)({},we,e);return w.a(ye,t)}(),u=a.data,d=a.loading,p="UserPowerUpsTypes"===(null===u||void 0===u||null===(t=u.currentUser)||void 0===t?void 0:t.userPowerUpsByType.__typename)?u.currentUser.userPowerUpsByType.privateRepls:null;return(0,c.tZ)(Y,{powerUpData:p,type:"private",context:n,loading:s||d,togglePowerUp:function(){return o({variables:{active:!(null===p||void 0===p?void 0:p.willRenew)}})}})}function Ue(e){var t=e.privatePowerUp,n=e.userSubscriptionType,r=e.context;return(0,c.tZ)(re,{type:"private_new",powerUpData:t,userSubscriptionType:n,children:(0,c.tZ)(me,{context:r})})}var xe,Ge=n(66908),Pe=n(74296),Be=n(5581),Te=(xe={},(0,l.Z)(xe,Pe._h.BoostLegacy,"boost_legacy"),(0,l.Z)(xe,Pe._h.Boost_2cpu_2ram,"boost_2cpu_2ram"),(0,l.Z)(xe,Pe._h.Boost_4cpu_4ram,"boost_4cpu_4ram"),(0,l.Z)(xe,Pe._h.Boost_8cpu_8ram,"boost_8cpu_8ram"),(0,l.Z)(xe,Pe._h.Boost_16cpu_16ram,"boost_16cpu_16ram"),(0,l.Z)(xe,Pe._h.AlwaysOnLegacy,null),(0,l.Z)(xe,Pe._h.AlwaysOn,null),(0,l.Z)(xe,Pe._h.Unknown,null),(0,l.Z)(xe,Pe._h.GpuK80,null),(0,l.Z)(xe,Pe._h.HostingTierE2Micro,null),(0,l.Z)(xe,Pe._h.HostingTierE2Small,null),(0,l.Z)(xe,Pe._h.HostingTierE2Medium,null),(0,l.Z)(xe,Pe._h.HostingTierE2Medium,null),(0,l.Z)(xe,Pe._h.HostingTierE2Standard_1,null),(0,l.Z)(xe,Pe._h.HostingTierE2Standard_2,null),(0,l.Z)(xe,Pe._h.HostingTierE2Standard_4,null),xe),_e=function(e){var t=e.powerUp,n=Te[t.sku];if(null==n||"boost"!==t.type)return null;var r="boost_legacy"===n;return(0,c.tZ)(G.G7,{css:[G.l0.rowWithGap(8)],children:(0,c.tZ)(G.u,{tooltip:(0,c.BX)(G.G7,{css:[G.l0.colWithGap(8)],children:[(0,c.BX)(G.G7,{css:[G.l0.rowWithGap(2),G.l0.justify.center],children:[(0,c.tZ)(B.Z,{size:16}),(0,c.BX)(G.xv,{variant:"small",children:[r?2..toLocaleString():Be.z4[n].toLocaleString(),"/",X.S0[t.type].orderDuration]})]}),r?(0,c.tZ)(G.xv,{variant:"small",color:"dimmest",children:"This Repl is Boosted using the old price"}):null]}),children:(0,c.tZ)(Ge.Z,{variant:n})})})};function be(e){var t=e.powerUp;return(0,c.tZ)(_(),(0,R.Z)((0,v.Z)({passHref:!0},(0,de.aq)(t.repl)),{children:(0,c.BX)(G.G7,{css:[G.gU.listItem,G.l0.rowWithGap(16),G.l0.justify.spaceBetween,G.l0.px(16),G.l0.py(8),G.l0.align.center],children:[(0,c.BX)(G.G7,{css:[G.l0.rowWithGap(8),G.l0.align.center,G.l0.flex.growAndShrink(1),G.l0.pr(32)],children:[(0,c.tZ)(G.G7,{css:[G.l0.borderRadius(4),G.l0.overflow("hidden")],children:(0,c.tZ)(pe.Z,{iconUrl:t.repl.iconUrl,alt:t.repl.title,size:16,css:{" img":{borderRadius:4}}})}),(0,c.tZ)(G.xv,{css:{fontWeight:G.TV.fontWeightMedium},children:t.repl.title}),(0,c.tZ)(_e,{powerUp:t})]}),(0,c.tZ)(G.G7,{css:[G.l0.ml(32)],children:(0,c.tZ)(ne,{powerUp:t})})]})}))}var Ce,Se=n(3116),Re=n(10430),Xe=n(5496),De="egress",Ee=[G.l0.px(16),G.l0.py(4),G.l0.textAlign.center,(0,l.Z)({},(0,Re.EM)("mobileMax"),[G.l0.px(8)])];function ke(e){var t=e.egressPowerUps,n=e.context;return(0,c.tZ)(c.HY,{children:(0,c.BX)(G.Tg,{elevated:!0,css:[G.l0.borderRadius(16),G.l0.overflow("hidden")],children:[(0,c.BX)(G.G7,{css:[G.l0.flex.row,G.l0.justify.spaceBetween,G.l0.align.center,G.l0.p(16),G.l0.pb(12),(0,l.Z)({borderBottom:"1px solid "+G.TV.backgroundHighest},G.BC.max("mobileMax"),[G.l0.colWithGap(8),G.l0.align.start])],children:[(0,c.BX)(G.G7,{css:[G.l0.rowWithGap(8),G.l0.align.center],children:[X.S0[De].icon,(0,c.tZ)(G.h4,{level:2,variant:"subheadDefault",children:X.S0[De].title})]}),(0,c.tZ)(G.G7,{css:[G.l0.flex.row,G.l0.justify.spaceBetween,G.l0.align.center],children:(0,c.BX)(G.G7,{css:[G.l0.rowWithGap(2),G.l0.align.center,G.l0.flex.growAndShrink(1)],children:[(0,c.tZ)(B.Z,{color:G.TV.foregroundDimmer,size:12}),(0,c.tZ)(G.xv,{variant:"small",color:"dimmer",children:X.S0[De].formattedCyclesPowerUpCost})]})})]}),(0,c.BX)(G.G7,{css:[G.l0.colWithGap(16),G.l0.p(16)],children:[(0,c.tZ)(Se.Z,{title:"Monthly Usage",titleShort:"Monthly",context:n}),0!==t.length?(0,c.BX)("table",{children:[(0,c.tZ)("thead",{children:(0,c.BX)("tr",{children:[(0,c.tZ)("th",{css:Ee,children:"Boost"}),(0,c.tZ)("th",{css:Ee,children:"Purchased"}),(0,c.tZ)("th",{css:Ee,children:"Expires"})]})}),(0,c.tZ)("tbody",{children:t.map((function(e,t){return(0,c.BX)("tr",{children:[(0,c.tZ)("td",{css:Ee,children:(0,c.tZ)(G.xv,{children:e.sku?(0,Xe.hq)(e.sku):"Unknown"})}),(0,c.tZ)("td",{css:Ee,children:(0,c.tZ)(G.xv,{children:e.timePurchased?new Date(e.timePurchased).toLocaleDateString("default"):"Unknown"})}),(0,c.tZ)("td",{css:Ee,children:(0,c.tZ)(G.xv,{children:e.timeFulfillmentDue?new Date(e.timeFulfillmentDue).toLocaleDateString("default"):"Unknown"})})]},"egress-".concat(t))}))})]}):null,0===t.length?(0,c.tZ)(G.xv,{variant:"small",color:"dimmer",css:[G.l0.textAlign.center],children:"You haven't purchased additional Outbound Data Transfer"}):null]})]})})}function We(e){var t=e.powerUpType,n=e.user;return(0,c.BX)(G.G7,{css:[G.l0.colWithGap(12),G.l0.justify.center,G.l0.align.center,G.l0.p(12)],children:[(0,c.tZ)(G.xv,{variant:"small",color:"dimmer",multiline:!0,css:[G.l0.textAlign.center],children:X.S0[t].description}),n?(0,c.tZ)(G.ZP,(0,R.Z)((0,v.Z)({},(0,k.Ru)(n)),{prefetch:!1,text:"Go to My Repls",small:!0})):null]})}function Me(e){var t=e.powerUpType;return(0,c.BX)(G.G7,{css:[G.l0.flex.row,G.l0.justify.spaceBetween,G.l0.align.center,G.l0.p(16),G.l0.pb(12),{borderBottom:"1px solid "+G.TV.backgroundHighest}],children:[(0,c.BX)(G.G7,{css:[G.l0.rowWithGap(8),G.l0.align.center],children:[X.S0[t].icon,(0,c.BX)(G.h4,{level:2,variant:"subheadDefault",children:[" ",X.S0[t].title]})]}),(0,c.tZ)(G.G7,{css:[G.l0.rowWithGap(8),G.l0.align.center]})]})}var Oe=(Ce={},(0,l.Z)(Ce,Pe.O8.AlwaysOn,"Always On"),(0,l.Z)(Ce,Pe.O8.Boost,"Boosted"),(0,l.Z)(Ce,Pe.O8.Gpu,"paired with a GPU"),(0,l.Z)(Ce,Pe.O8.HostingTier,"Hosted"),Ce);function Ae(e){var t=e.children,n=e.header,r=e.planIncludedReplPowerUps,l=void 0===r?[]:r,i=e.powerUpType;return(0,c.BX)(G.Tg,{elevated:!0,css:[G.l0.borderRadius(16),G.l0.overflow("hidden")],children:[n,(0,c.tZ)(G.G7,{css:[G.l0.pt(8),G.l0.pb(12)],children:t}),l.length?(0,c.BX)(c.HY,{children:[(0,c.tZ)(G.RX,{}),(0,c.tZ)(G.G7,{css:[G.l0.p(16),G.l0.rowWithGap(8)],children:(0,c.tZ)(G.u,{placement:"bottom-end",tooltip:(0,c.tZ)(c.HY,{children:l.map((function(e,t){return(0,c.BX)(G.G7,{css:[G.l0.rowWithGap(8),G.l0.align.center],children:[(0,c.tZ)("img",{src:e.iconUrl,width:16,height:16,alt:e.title+"'s icon",css:[G.l0.borderRadius(2)]}),(0,c.tZ)(G.G7,{css:[G.l0.flex.growAndShrink(1)],children:(0,c.tZ)(G.xv,{children:e.title})})]},t)}))}),children:(0,c.BX)(G.G7,{css:[G.l0.flex.row,G.l0.rowWithGap(8),{cursor:"default"}],children:[(0,c.BX)(G.xv,{color:"dimmer",children:[l.length," ",1===l.length?"Repl is":"Repls Are"," ",i?Oe[i]:"Powered Up"," ","via your plan."]}),(0,c.tZ)(K.Z,{size:16,color:G.TV.foregroundDimmer})]})})})]}):null]})}function Le(e){var t,n,r,l,i,o=e.context,s=function(e){var t=(0,v.Z)({},se,e);return w.a(ae,t)}({fetchPolicy:"network-only",nextFetchPolicy:"cache-first",ssr:!1}),a=s.data,u=s.loading,d=(0,D.P)({controlName:"flag-gpus"}),p=(0,D.P)({controlName:"flag-neon-databases"}),h=(0,D.P)({controlName:"flag-egress-add-on"}),Z=function(e){var t=(0,v.Z)({},se,e);return w.a(ue,t)}().data,f=(0,W.useCallback)((function(e){var t,n;return"CurrentUserReplPowerUpsByMethodOfPaymentSuccess"===(null===Z||void 0===Z||null===(t=Z.currentUser)||void 0===t?void 0:t.replPowerUpsByMethodOfPayment.__typename)?null===Z||void 0===Z||null===(n=Z.currentUser)||void 0===n?void 0:n.replPowerUpsByMethodOfPayment.powerUps.filter((function(t){return t.powerUpType===e})).map((function(e){return e.repl})):[]}),[Z]);if(u)return(0,c.tZ)(G.G7,{css:[G.l0.center,G.l0.mt(48)],children:(0,c.tZ)(E.Z,{})});var g,y,m,U,x=null===a||void 0===a||null===(t=a.currentUser)||void 0===t?void 0:t.replPowerUps,P="UserPowerUpsTypes"===(null===a||void 0===a||null===(n=a.currentUser)||void 0===n?void 0:n.userPowerUpsByType.__typename)?null===a||void 0===a||null===(r=a.currentUser)||void 0===r?void 0:r.userPowerUpsByType:null,B=(null===x||void 0===x?void 0:x.filter((function(e){return"alwaysOn"===e.type})))||[],T=(null===x||void 0===x?void 0:x.filter((function(e){return"boost"===e.type})))||[],_=(null===x||void 0===x?void 0:x.filter((function(e){return"gpu"===e.type})))||[],b=(null===a||void 0===a||null===(l=a.currentUser)||void 0===l?void 0:l.userSubscriptionType)||null,C=null!==(g=null===P||void 0===P?void 0:P.privateRepls)&&void 0!==g?g:null,S=null!==(y=null===P||void 0===P?void 0:P.ghostwriter)&&void 0!==y?y:null,R=null!==(m=null===P||void 0===P||null===(i=P.neonDatabasePreview)||void 0===i?void 0:i.filter((function(e){var t;return(null===e||void 0===e||null===(t=e.connectedRepls)||void 0===t?void 0:t.length)>0})))&&void 0!==m?m:[],X=null!==(U=null===P||void 0===P?void 0:P.egress)&&void 0!==U?U:[];return(0,c.BX)(G.G7,{css:G.l0.colWithGap(8),children:[(0,c.tZ)(G.xv,{variant:"subheadDefault",color:"dimmer",children:"Power Ups"}),(0,c.BX)(G.G7,{css:G.l0.colWithGap(16),children:[(0,c.tZ)(Ue,{userSubscriptionType:b,privatePowerUp:C,context:o}),(0,c.tZ)(le,{userSubscriptionType:b,ghostwriterPowerUp:S,context:o}),h?(0,c.tZ)(ke,{userSubscriptionType:b,egressPowerUps:X,context:o}):null,(0,c.tZ)(Ae,{header:(0,c.tZ)(Me,{powerUpType:"always-on"}),powerUpType:Pe.O8.AlwaysOn,planIncludedReplPowerUps:f(Pe.O8.AlwaysOn),children:B.length?B.map((function(e){return(0,c.tZ)(be,{powerUp:e},e.id)})):(0,c.tZ)(We,{powerUpType:"always-on",user:null===a||void 0===a?void 0:a.currentUser})}),(0,c.tZ)(Ae,{header:(0,c.tZ)(Me,{powerUpType:"boost"}),powerUpType:Pe.O8.Boost,planIncludedReplPowerUps:f(Pe.O8.Boost),children:T.length?T.map((function(e){return(0,c.tZ)(be,{powerUp:e},e.id)})):(0,c.tZ)(We,{powerUpType:"boost",user:null===a||void 0===a?void 0:a.currentUser})}),d?(0,c.tZ)(Ae,{header:(0,c.tZ)(Me,{powerUpType:"gpu"}),children:_.length?_.map((function(e){return(0,c.tZ)(be,{powerUp:e},e.id)})):(0,c.tZ)(We,{powerUpType:"gpu",user:null===a||void 0===a?void 0:a.currentUser})}):null,p?(0,c.tZ)(ve,{neonDatabasePreviewPowerUps:R,user:null===a||void 0===a?void 0:a.currentUser}):null]})]})}var He=n(9970),Ie=n(94425);function je(e){return function(e){var t={};return e.forEach((function(e){var n,r=(0,Ie.p)(e.time_created),l="".concat(e.category,":").concat(r);t[l]?(t[l].transactions.push(e),t[l].totalCycles+=e.cycles):t[l]={date:e.time_created,category:null!==(n=e.category)&&void 0!==n?n:Pe.d1.Uncategorized,transactions:[e],totalCycles:e.cycles}})),Object.values(t).sort((function(e,t){return new Date(e.date)>new Date(t.date)?-1:1}))}(e)}function Ne(){var e=(0,Z.Z)(["\n  query CyclesTransactionTable($count: Int!, $after: String!) {\n    currentUser {\n      id\n      cycles {\n        transactions(count: $count, after: $after) {\n          items {\n            id\n            cycles\n            type\n            time_created\n            category\n            category_sub_type\n          }\n          pageInfo {\n            hasNextPage\n            nextCursor\n          }\n        }\n      }\n    }\n  }\n"]);return Ne=function(){return e},e}var Ve={},qe=(0,f.Ps)(Ne());var ze,Ye,Fe=n(61129),$e=n(12512),Qe=n(19736),Ke=(ze={},(0,l.Z)(ze,Pe.d1.Marketplace,{icon:(0,c.tZ)(P.UserMultiplayer,{}),description:"Marketplace"}),(0,l.Z)(ze,Pe.d1.Uncategorized,{icon:(0,c.tZ)(B.Z,{}),description:"Cycles Usage"}),(0,l.Z)(ze,Pe.d1.Adjustments,{icon:(0,c.tZ)(P.Sort,{}),description:"Adjustments"}),(0,l.Z)(ze,Pe.d1.Credits,{icon:(0,c.tZ)(B.Z,{}),description:"Credits"}),(0,l.Z)(ze,Pe.d1.Earnings,{icon:(0,c.tZ)(P.Sparkle,{}),description:"Earnings"}),(0,l.Z)(ze,Pe.d1.PowerUps,{icon:(0,c.tZ)(P.Bolt,{}),description:"Power Ups"}),ze),Je=(Ye={},(0,l.Z)(Ye,Pe.kc.Bounty,{icon:(0,c.tZ)(P.UserDefault,{}),description:"Bounty"}),(0,l.Z)(Ye,Pe.kc.CashedOut,{icon:(0,c.tZ)(B.Z,{}),description:"Cashed Out"}),(0,l.Z)(Ye,Pe.kc.FeeCharged,{icon:(0,c.tZ)(B.Z,{}),description:"Tip fee"}),(0,l.Z)(Ye,Pe.kc.Granted,{icon:(0,c.tZ)(P.Gift,{}),description:"Granted"}),(0,l.Z)(Ye,Pe.kc.Purchased,{icon:(0,c.tZ)(P.CreditCard,{}),description:"Purchased"}),(0,l.Z)(Ye,Pe.kc.Redeemed,{icon:(0,c.tZ)(B.Z,{}),description:"Redeemed"}),(0,l.Z)(Ye,Pe.kc.Retired,{icon:(0,c.tZ)(P.ArrowDown,{}),description:"Retired"}),(0,l.Z)(Ye,Pe.kc.Transferred,{icon:(0,c.tZ)(B.Z,{}),description:"Transferred"}),(0,l.Z)(Ye,Pe.kc.Earned,{icon:(0,c.tZ)(P.Sparkle,{}),description:"Earned"}),(0,l.Z)(Ye,Pe.kc.AlwaysOn,{icon:(0,c.tZ)(P.Sun,{}),description:"Always on"}),(0,l.Z)(Ye,Pe.kc.Boost,{icon:(0,c.tZ)(P.Rocket,{}),description:"Boost"}),(0,l.Z)(Ye,Pe.kc.Ghostwriter,{icon:(0,c.tZ)(P.Ghostwriter,{}),description:"Ghostwriter - 1 month"}),(0,l.Z)(Ye,Pe.kc.Uncategorized,{icon:(0,c.tZ)(B.Z,{}),description:"Uncategorized"}),(0,l.Z)(Ye,Pe.kc.PrivateRepl,{icon:(0,c.tZ)(P.LockLocked,{}),description:"Unlimited Private Repls - 1 month"}),(0,l.Z)(Ye,Pe.kc.Gpu,{icon:(0,c.tZ)(B.Z,{}),description:"GPU"}),(0,l.Z)(Ye,Pe.kc.Tips,{icon:(0,c.tZ)(B.Z,{}),description:"Tip"}),(0,l.Z)(Ye,Pe.kc.Egress,{icon:(0,c.tZ)(Qe.Z,{}),description:"Outbound Data Transfer"}),Ye),et="@media screen and (max-width: ".concat($e.j.mobileMax,"px)"),tt=function(e){var t=e.transactionGroup,n=t.totalCycles>0?G.TV.accentPositiveStronger:G.TV.foregroundDimmer,r=(0,c.BX)(c.HY,{children:[(0,c.BX)(G.G7,{css:[G.l0.rowWithGap(32),G.l0.flex.grow(1),(0,l.Z)({},et,{display:"flex",flexDirection:"column"})],children:[(0,c.tZ)(G.G7,{css:[G.l0.rowWithGap(2),G.l0.width(90),G.l0.align.center,G.l0.p(4)],children:(0,c.tZ)(G.xv,{children:(0,Ie.p)(t.date)})}),(0,c.BX)(G.G7,{css:[G.l0.rowWithGap(8),G.l0.align.center,G.l0.p(4)],children:[Ke[t.category].icon,(0,c.BX)(G.xv,{children:[" ",Ke[t.category].description]}),(0,c.tZ)(G.DR,{css:[(0,l.Z)({},et,{display:"none"})],text:t.transactions.length.toString()}),"uncategorized"===t.category?(0,c.tZ)(G.u,{tooltip:"Due to improvements in how we track transactions, old transactions will appear under 'Cycles Usage'",children:(0,c.tZ)(K.Z,{})}):(0,c.tZ)(c.HY,{})]})]}),(0,c.tZ)(G.G7,{css:[G.l0.rowWithGap(2),G.l0.align.center,G.l0.p(4)],children:(0,c.BX)(G.xv,{css:[{color:n}],children:[t.totalCycles<0?"-":"+",(0,c.tZ)(B.Z,{})," ","",(0,Fe.H2)(Math.abs(t.totalCycles))]})})]});return(0,c.tZ)(G.Tg,{elevated:!0,children:(0,c.BX)(G.Qd,{chevron:"end",headerContent:r,round:!1,children:[" ",t.transactions.map((function(e){return(0,c.tZ)(nt,{transactionItem:e},e.id)}))]})})},nt=function(e){var t=e.transactionItem,n=t.cycles>0?G.TV.accentPositiveStronger:G.TV.foregroundDimmer;return(0,c.BX)(G.G7,{css:[G.l0.px(24),G.l0.py(16),G.l0.rowWithGap(12),G.l0.flex.grow(1),(0,l.Z)({},et,{paddingLeft:0,paddingRight:0}),{background:G.TV.backgroundOverlay,borderTop:"1px solid var(--background-default)"}],children:[(0,c.BX)(G.G7,{css:[G.l0.colWithGap(4),G.l0.pl(8)],children:[(0,c.BX)(G.G7,{css:[G.l0.rowWithGap(4),G.l0.align.center],children:[t.category_sub_type?Je[t.category_sub_type].icon:(0,c.tZ)(B.Z,{}),(0,c.tZ)(G.xv,{css:[(0,l.Z)({},et,{maxWidth:150})],multiline:!0,children:t.category_sub_type?Je[t.category_sub_type].description:t.type})]}),(0,c.BX)(G.xv,{variant:"small",css:[G.l0.color.foregroundDimmest,(0,l.Z)({},et,{display:"none"})],children:["# ",t.id.split("-")[0]]})]}),(0,c.tZ)(G.G7,{dataCy:"cycles-transaction-details-amount",css:[G.l0.flex.grow(1),G.l0.align.end],children:(0,c.BX)(G.xv,{css:[G.l0.pr(12),{color:n}],children:[t.cycles<0?"-":"+",(0,c.tZ)(B.Z,{})," ","",(0,Fe.H2)(Math.abs(t.cycles))]})})]})};function rt(){var e,t,n,l,i,s=(0,M.Z)().showError,a=function(e){var t=(0,v.Z)({},Ve,e);return w.a(qe,t)}({notifyOnNetworkStatusChange:!0,variables:{count:100,after:"0"},fetchPolicy:"network-only",nextFetchPolicy:"cache-first",ssr:!1}),u=a.data,d=a.error,p=a.loading,h=a.fetchMore,Z=je((null===u||void 0===u||null===(e=u.currentUser)||void 0===e||null===(t=e.cycles)||void 0===t||null===(n=t.transactions)||void 0===n?void 0:n.items)||[]),f=function(){var e=(0,r.Z)((function(){var e,t,n;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:return p?[2]:(n=(null===(t=null===u||void 0===u||null===(e=u.currentUser)||void 0===e?void 0:e.cycles.transactions)||void 0===t?void 0:t.pageInfo.nextCursor)||"0",[4,h({variables:{after:n,count:100},updateQuery:function(e,t){var n,r,l,i=t.fetchMoreResult,o=(0,v.Z)({},i);return(null===(n=o.currentUser)||void 0===n?void 0:n.cycles.transactions)?(o.currentUser.cycles.transactions=(0,R.Z)((0,v.Z)({},o.currentUser.cycles.transactions),{items:(0,He.Z)((null===(l=null===(r=e.currentUser)||void 0===r?void 0:r.cycles.transactions)||void 0===l?void 0:l.items)||[]).concat((0,He.Z)(o.currentUser.cycles.transactions.items||[]))}),o):e}})]);case 1:return r.sent(),[2]}}))}));return function(){return e.apply(this,arguments)}}();return d?(s(d),(0,c.tZ)(G.xv,{children:d.message})):p&&!u?(0,c.tZ)(G.G7,{css:[G.l0.pt(32),G.l0.align.center],children:(0,c.tZ)(E.Z,{size:24})}):(0,c.BX)(G.G7,{children:[(0,c.tZ)(G.G7,{css:[G.l0.borderRadius(8),{"> div:first-child button":{borderRadius:"8px 8px 0 0"},"> div:last-child button":{borderRadius:"0 0 8px 8px"},"> div:first-child > div":{borderRadius:"8px 8px 0 0"},"> div:last-child > div":{borderRadius:"0 0 8px 8px"}}],children:Z.map((function(e,t){return(0,c.tZ)(G.G7,{dataCy:"cycles-transaction-group",css:[{":not(:first-child)":{paddingTop:G.TV.space2}}],children:(0,c.tZ)(tt,{transactionGroup:e})},t)}))}),(null===(i=null===u||void 0===u||null===(l=u.currentUser)||void 0===l?void 0:l.cycles.transactions)||void 0===i?void 0:i.pageInfo.hasNextPage)?(0,c.tZ)(G.G7,{css:[G.l0.mt(16)],children:(0,c.tZ)(G.zx,{outlined:!0,text:p?"Loading":"Load more",disabled:p,onClick:f})}):null]})}var lt=function(e){var t,n=e.setBuyCyclesDefaultAutoRefill,r=e.setShowUpgradeModal,o=e.pageStatus,s=(0,i.Z)(W.useState("Overview"),2),a=s[0],u=s[1],d=function(e){var t=e.text,n=e.active,r=e.onClick,l=e.dataCy;return(0,c.tZ)(G.G7,{dataCy:l,css:[G.l0.cursor.pointer,n?G.l0.color.foregroundDefault:G.l0.color.foregroundDimmest,{":hover":{color:G.TV.foregroundDefault}}],onClick:r,children:(0,c.tZ)(G.xv,{variant:"subheadBig",children:t})})};return(0,c.BX)(G.G7,{css:[G.l0.p(16),G.l0.pt(48),G.l0.flex.column,G.l0.width("100%"),G.l0.maxWidth(600),{gap:G.TV.space24,margin:"0 auto"},(t={},(0,l.Z)(t,(0,Re.EM)("tabletMax"),[G.l0.flex.column,G.l0.maxWidth(512),{gap:G.TV.space24}]),(0,l.Z)(t,(0,Re.EM)("mobileMax"),[G.l0.pt(16)]),t)],children:[(0,c.BX)(G.G7,{css:[G.l0.width("100%"),G.l0.colWithGap(24),G.l0.flex.growAndShrink(1)],children:[(0,c.tZ)(S,{hasCyclesTransactions:!0,onRequestUpgradeModal:function(e){var t=e.autoRefill;n(t),r(!0)},showAutoRefillHintTooltip:o===b.S$.AutoRefillSetUpSuccess}),(0,c.BX)(G.G7,{css:[G.l0.rowWithGap(16)],children:[(0,c.tZ)(d,{active:"Overview"===a,onClick:function(){return u("Overview")},text:"Overview"}),(0,c.tZ)(d,{dataCy:"cycles-transactions-tab",active:"Transactions"===a,onClick:function(){return u("Transactions")},text:"Transactions"})]}),"Overview"===a?(0,c.tZ)(Le,{context:"cycles_page"}):null]}),"Transactions"===a?(0,c.tZ)(rt,{}):null]})},it=n(14047),ot=n(54372);function ct(e){var t=e.onReactivateClick;return W.useEffect((function(){(0,x.j)(x.U3.MODAL_VIEWED,{modalName:"reactivate_ghostwriter"})}),[]),(0,c.BX)(G.G7,{css:[G.l0.p(24),G.l0.colWithGap(24),G.l0.textAlign.center],children:[(0,c.tZ)(G.G7,{css:[{opacity:.7}],children:(0,c.tZ)(it.Z,{src:"/public/images/ghostwriter/ghost-floating.svg",alt:"Ghostwriter",width:200,height:200})}),(0,c.tZ)(G.xv,{variant:"subheadDefault",multiline:!0,children:"Without enough Cycles, you'll lose access to Ghostwriter."}),(0,c.tZ)(G.zx,{text:"Set up auto-refill",colorway:"primary",onClick:function(){(0,x.j)(x.U3.UPGRADE_SELECTED,{source:"reactivate_ghostwriter_modal"}),t()}})]})}function st(e){var t,n=e.isOpen,r=e.onRequestClose,l=e.uponPurchaseGoTo,o=(0,i.Z)(W.useState(!1),2),s=o[0],a=o[1];return t=s?(0,c.tZ)(ot.Z,{defaultSelectAutoRefill:!0,context:"reactivate_ghostwriter_modal",uponPurchaseGoTo:l,initialTab:"cycles"}):(0,c.tZ)(ct,{onReactivateClick:function(){return a(!0)}}),(0,c.tZ)(c.HY,{children:(0,c.tZ)(G.u_,{isOpen:n,onRequestClose:r,maxWidth:s?ot.W:340,children:t})})}var at=n(91640),ut=n(33756),dt=n(7330),pt=n(13168),ht=n(99231);function vt(){var e=(0,Z.Z)(["\n  query CyclesPage {\n    currentUser {\n      id\n      cycles {\n        transactions(count: 1) {\n          items {\n            id\n            time_created\n          }\n        }\n      }\n      userPowerUpsByType {\n        __typename\n        ... on UserPowerUpsTypes {\n          ghostwriter {\n            active\n            isTrial\n          }\n        }\n      }\n    }\n  }\n"]);return vt=function(){return e},e}var Zt={},ft=(0,f.Ps)(vt());var wt=function(e){var t,n,r,o,d,p=e.pageStatus,h=function(e){var t=(0,v.Z)({},Zt,e);return w.a(ft,t)}({onCompleted:function(e){var t;p===b.S$.BuyGhostwriter&&("UserPowerUpsTypes"===(null===e||void 0===e||null===(t=e.currentUser)||void 0===t?void 0:t.userPowerUpsByType.__typename)&&e.currentUser.userPowerUpsByType.ghostwriter.active&&!e.currentUser.userPowerUpsByType.ghostwriter.isTrial||C(!0))}}),Z=h.data,f=h.loading,g=h.error,y=null!=(null===(n=null===Z||void 0===Z||null===(t=Z.currentUser)||void 0===t?void 0:t.cycles.transactions)||void 0===n?void 0:n.items.length)&&(null===(o=null===Z||void 0===Z||null===(r=Z.currentUser)||void 0===r?void 0:r.cycles.transactions)||void 0===o?void 0:o.items.length)>0,m=(0,i.Z)(W.useState(p===b.S$.Buy),2),U=m[0],x=m[1],B=(0,i.Z)(W.useState(!1),2),T=B[0],C=B[1],R=(0,i.Z)(W.useState(p===b.S$.ReactivateGhostwriter),2),X=R[0],D=R[1],k=(0,i.Z)(W.useState(!1),2),M=k[0],O=k[1];return f?(0,c.tZ)(s.Z,{title:"My Cycles",children:(0,c.tZ)(G.G7,{css:[dt.l0.center,dt.l0.mt(48)],children:(0,c.tZ)(E.Z,{})})}):g?(0,c.tZ)(s.Z,{title:"My Cycles",children:"An unexpected error occurred. Please reload the page and try again."}):(0,c.BX)(s.Z,{title:"My Cycles",children:[(0,c.tZ)(q.Z,{context:"cycles_page",isOpen:T,onRequestClose:function(){return C(!1)},powerUp:"ghostwriter",uponPurchaseGoTo:"cyclesPage"}),(0,c.tZ)(pt.Z,{isOpen:U,defaultSelectAutoRefill:M,onRequestClose:function(){return x(!1)},context:"cycles_page",initialTab:"cycles"}),(0,c.tZ)(st,{isOpen:X,onRequestClose:function(){return D(!1)},uponPurchaseGoTo:"cyclesPage"}),(0,c.tZ)(at.T,{includeMyCyclesCTA:!1}),y?(0,c.tZ)(lt,{setBuyCyclesDefaultAutoRefill:O,setShowUpgradeModal:x,pageStatus:p}):(0,c.BX)(G.G7,{css:[dt.l0.p(16),dt.l0.pt(48),dt.l0.flex.row,dt.l0.width("100%"),dt.l0.maxWidth(1024),{gap:dt.TV.space48,margin:"0 auto"},(d={},(0,l.Z)(d,(0,Re.EM)("tabletMax"),[y?dt.l0.flex.column:dt.l0.flex.columnReverse,dt.l0.maxWidth(432),{gap:dt.TV.space24}]),(0,l.Z)(d,(0,Re.EM)("mobileMax"),[dt.l0.pt(16)]),d)],children:[(0,c.BX)(G.G7,{css:[dt.l0.width("100%"),dt.l0.colWithGap(24),y&&dt.l0.maxWidth(432),dt.l0.flex.growAndShrink(4)],children:[(0,c.tZ)(S,{hasCyclesTransactions:y,onRequestUpgradeModal:function(e){var t=e.autoRefill;O(t),x(!0)},showAutoRefillHintTooltip:p===b.S$.AutoRefillSetUpSuccess}),(0,c.BX)(G.G7,{css:[dt.l0.align.center,dt.l0.colWithGap(16)],children:[(0,c.tZ)(G.Tg,{elevated:!0,css:[dt.l0.p(32),dt.l0.borderRadius(16),dt.l0.width("100%")],children:(0,c.tZ)(u.Z,{context:"cycles_page",showChooseEnoughCTA:y})}),(0,c.tZ)(_(),{href:"/pricing",children:(0,c.tZ)("a",{children:(0,c.BX)(G.xv,{color:"dimmer",variant:"small",children:["Or choose from one of our other plans ",(0,c.tZ)(P.ExternalLink,{})]})})})]})]}),(0,c.tZ)(G.Tg,{elevated:!0,css:[dt.l0.p(32),dt.l0.borderRadius(16),{alignSelf:"flex-start"},dt.l0.flex.growAndShrink(1)],children:(0,c.tZ)(a.Z,{context:"cycles_page"})})]})]})};wt.getInitialProps=function(){var e=(0,r.Z)((function(e){var t,n,r;return(0,o.__generator)(this,(function(l){switch(l.label){case 0:return t=e.req,n=e.store,[4,(0,ut.Z)(t,n)];case 1:return l.sent(),"string"===typeof(null===t||void 0===t?void 0:t.params.pageStatus)&&(0,ht.SG)(Object.values(b.S$),null===t||void 0===t?void 0:t.params.pageStatus)&&(r=null===t||void 0===t?void 0:t.params.pageStatus),[2,{pageStatus:r}]}}))}));return function(t){return e.apply(this,arguments)}}();var gt=wt}},function(e){var t=function(t){return e(e.s=t)};e.O(0,[8236,8201,3635,9272,2804,749,5845,9774,2888,179],(function(){return t(54186),t(89456)}));var n=e.O();_N_E=n}]);
//# sourceMappingURL=cycles-e453ec7310161d44.js.map