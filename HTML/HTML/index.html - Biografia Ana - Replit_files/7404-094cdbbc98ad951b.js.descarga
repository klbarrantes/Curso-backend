"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7404],{32338:function(n,e,t){t.d(e,{Z:function(){return s}});var r=t(94660),i=t(39918),o=t(58530),a=t(56574),c=t(63729),l=t(26807);function s(n){var e=n.leaderboardTitle,t=n.topTippers;return(0,r.BX)(o.G7,{css:[o.l0.colWithGap(24),o.l0.maxHeight("70vh"),o.l0.overflowY("scroll")],children:[(0,r.tZ)(o.xv,{variant:"headerDefault",children:e}),(0,r.tZ)(o.G7,{css:[o.l0.flex.column],children:t.map((function(n,e){var t=n.user,s=n.totalCyclesTipped;return t?(0,r.BX)(o.G7,{tabIndex:0,css:[o.l0.cursor.pointer,o.l0.rowWithGap(12),o.l0.align.center,o.l0.borderRadius(8),o.l0.px(12),o.l0.py(8),o.gU.listItem,{flex:1,"> .popover-control-container":[{width:"100%"},o.l0.mr(0)]}],children:[(0,r.tZ)(o.xv,{css:[o.l0.fontWeight.medium],children:e+1}),(0,r.tZ)(c.Z,{username:t.username,children:(0,r.tZ)(l.ZP,{user:t,children:(0,r.BX)(o.G7,{css:[o.l0.flex.row,o.l0.justify.spaceBetween,o.l0.align.center],children:[(0,r.BX)(o.G7,{css:[o.l0.rowWithGap(8),o.l0.align.center],children:[(0,r.tZ)(o.qE,{src:t.image,username:t.username,size:32,layout:"intrinsic"}),(0,r.tZ)(o.xv,{children:t.username})]}),(0,r.BX)(o.G7,{css:[o.l0.rowWithGap(4),o.l0.pl(4),o.l0.align.center],children:[(0,r.tZ)(a.Z,{size:16}),(0,r.BX)(o.xv,{children:[" ","".concat((0,i.d)(s))]})]})]})})})]},e):null}))})]})}},31039:function(n,e,t){t.d(e,{M:function(){return Z},_d:function(){return f},bg:function(){return m},fP:function(){return v}});var r=t(72006),i=t(43119),o=t(71440),a=t(61925),c=t(14e3),l=t(46653);function s(){var n=(0,i.Z)(["\n  fragment TipReplFragment on Repl {\n    id\n    slug\n    user {\n      id\n    }\n    totalCyclesTips\n    currentUserTotalTips\n  }\n"]);return s=function(){return n},n}function u(){var n=(0,i.Z)(["\n  fragment TipThemeFragment on CustomTheme {\n    id\n    slug\n    author {\n      id\n    }\n    totalCyclesTips\n    currentUserTotalTips\n  }\n"]);return u=function(){return n},n}function p(){var n=(0,i.Z)(["\n  mutation TipSendTip($input: SendTipInput!) {\n    sendTip(input: $input) {\n      ... on UserError {\n        __typename\n        message\n      }\n      ... on NotFoundError {\n        __typename\n        message\n      }\n      ... on UnauthorizedError {\n        __typename\n        message\n      }\n      ... on SendTipResult {\n        __typename\n        repl {\n          id\n          ...TipReplFragment\n          ...TopTipperReplLeaderboard\n        }\n        theme {\n          id\n          ...TipThemeFragment\n          ...TopTipperThemeLeaderboard\n        }\n        currentUser {\n          id\n          ...CyclesBalanceFragment\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return p=function(){return n},n}function d(){var n=(0,i.Z)(["\n  mutation TippingCyclesPurchaseStripeCheckoutSession(\n    $input: CreateCyclesStripeCheckoutSessionInput!\n  ) {\n    createCyclesStripeCheckoutSession(input: $input) {\n      ... on CreateCyclesStripeCheckoutSessionResult {\n        sessionUrl\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return d=function(){return n},n}var h={},m=(0,o.Ps)(s()),f=(0,o.Ps)(u()),T=(0,o.Ps)(p(),m,a.pT,f,a.h1,c.KD);function v(n){var e=(0,r.Z)({},h,n);return l.D(T,e)}var g=(0,o.Ps)(d());function Z(n){var e=(0,r.Z)({},h,n);return l.D(g,e)}},53694:function(n,e,t){t.d(e,{R1:function(){return f},SI:function(){return Z},ir:function(){return b},rd:function(){return v}});var r=t(72006),i=t(43119),o=t(71440),a=t(31039),c=t(61925),l=t(53486);function s(){var n=(0,i.Z)(["\n  fragment IsTippingAvailableForRecipient on User {\n    id\n    hasPrivacyRole\n    isVerified\n  }\n"]);return s=function(){return n},n}function u(){var n=(0,i.Z)(["\n  fragment TipSurfaceOwnerFragment on User {\n    id\n    username\n    ...IsTippingAvailableForRecipient\n  }\n  ","\n"]);return u=function(){return n},n}function p(){var n=(0,i.Z)(["\n  fragment IsTippingAvailableForSender on CurrentUser {\n    id\n    hasPrivacyRole\n    isVerified\n  }\n"]);return p=function(){return n},n}function d(){var n=(0,i.Z)(["\n  query TipRepl($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        user {\n          ... on User {\n            id\n            ...TipSurfaceOwnerFragment\n          }\n        }\n        ...TipReplFragment\n        ...TopTipperReplLeaderboard\n      }\n    }\n    currentUser {\n      id\n      ...IsTippingAvailableForSender\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return d=function(){return n},n}function h(){var n=(0,i.Z)(["\n  query TipTheme($input: CustomThemeByIdInput!) {\n    customThemeById(input: $input) {\n      ... on CustomTheme {\n        author {\n          ... on User {\n            id\n            ...TipSurfaceOwnerFragment\n          }\n        }\n        ...TipThemeFragment\n        ...TopTipperThemeLeaderboard\n      }\n    }\n    currentUser {\n      id\n      ...IsTippingAvailableForSender\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return h=function(){return n},n}var m={},f=(0,o.Ps)(s()),T=(0,o.Ps)(u(),f),v=(0,o.Ps)(p()),g=(0,o.Ps)(d(),T,a.bg,c.pT,v);function Z(n){var e=(0,r.Z)({},m,n);return l.a(g,e)}var y=(0,o.Ps)(h(),T,a._d,c.h1,v);function b(n){var e=(0,r.Z)({},m,n);return l.a(y,e)}},37404:function(n,e,t){t.d(e,{Z:function(){return hn},L:function(){return ln}});var r=t(57389),i=t(2272),o=t(94660),a=t(58530),c=t(56574),l=t(24880),s=t(57135),u=t(9970),p=t(96583),d=t(31039),h=t(93658),m=t(59496),f=t(99340),T=t(10063),v=t(72030),g=t(10430),Z=t(39918),y=(0,v.F4)({"0%":{width:"100%"},"100%":{width:"0%"}}),b=function(n){var e=n.tipAmount,t=n.onUndo,i=n.show,l=n.undoTime;return i?(0,o.BX)(a.Tg,{css:[a.l0.position.fixed,a.l0.bottom(24),a.l0.right(24),a.l0.zIndex(100),a.l0.borderRadius(8),a.l0.backgroundColor.accentPrimaryDimmer,a.l0.cursor.pointer,a.l0.overflow("hidden"),(0,r.Z)({},(0,g.EM)("mobileMax"),[a.l0.bottom(16),a.l0.left(16),a.l0.width("calc(100% - 32px)")])],onClick:t,children:[(0,o.BX)(a.G7,{css:[a.l0.pb(24),a.l0.pt(12),a.l0.px(12),a.l0.zIndex(2),a.l0.rowWithGap(48),a.l0.align.center,a.l0.justify.spaceBetween],children:[(0,o.BX)(a.G7,{css:[a.l0.colWithGap(8)],children:[(0,o.tZ)(a.xv,{variant:"subheadBig",children:"Woohoo!"}),(0,o.BX)(a.G7,{css:[a.l0.rowWithGap(2),a.l0.align.center],children:[(0,o.tZ)(a.xv,{children:"You just tipped"}),(0,o.tZ)(c.Z,{size:16}),(0,o.BX)(a.xv,{children:[" ","".concat((0,Z.d)(e))]})]})]}),(0,o.tZ)(a.G7,{css:[a.l0.colWithGap(4),a.l0.align.end],children:(0,o.tZ)(a.xv,{multiline:!0,css:[a.l0.textAlign.center,a.l0.fontWeight.medium,a.l0.pt(4)],children:"Cancel Tip"})})]}),(0,o.tZ)(a.G7,{css:[a.l0.height(6),a.l0.position.absolute,a.l0.bottom(0),a.l0.left(0),a.l0.right(24),a.l0.zIndex(1),a.l0.backgroundColor.accentPrimaryDefault,{animation:"".concat(y," ").concat(l+100,"ms linear")}]})]}):null},x=t(76804),w=t(65749),C=t(5109),U=(0,C.cn)("ready"),S={100:"\ud83c\udf6c",500:"\ud83c\udf55",1e3:"\ud83c\udf2f"};function G(n){var e=n.tipAmount;return n.sending?(0,o.tZ)(o.HY,{children:"Sending\u2026"}):(0,o.BX)(a.G7,{css:[a.l0.colWithGap(8)],children:[(0,o.tZ)(a.xv,{variant:"subheadBig",children:S[e]}),(0,o.BX)(a.G7,{css:[a.l0.rowWithGap(2),a.l0.align.center],children:[(0,o.tZ)(a.xv,{css:[a.l0.pr(4)],children:"Tip"}),(0,o.tZ)(c.Z,{size:16}),(0,o.tZ)(a.xv,{children:"".concat((0,Z.d)(e))})]})]})}var B=t(54703),_=t(74296),R=t(84706),I=t(12922),P=t(5581),W=t(61262),X=(0,v.F4)({"10%":{transform:"translate3d(-1px, 0, 0)"},"20%":{transform:"translate3d(2px, 0, 0)"},"30%":{transform:"translate3d(-4px, 0, 0)"},"50%":{transform:"translate3d(-4px, 0, 0)"},"70%":{transform:"translate3d(-4px, 0, 0)"},"80%":{transform:"translate3d(2px, 0, 0)"},"40%":{transform:"translate3d(4px, 0, 0)"},"60%":{transform:"translate3d(4px, 0, 0)"},"90%":{transform:"translate3d(-1px, 0, 0)"}}),E=function(n){return n.charAt(0).toUpperCase()+n.slice(1)};function k(n){var e,t=n.tipAmount,c=n.currentUser,l=n.tipTarget,v=l.id,g=l.type,Z=l.slug,y=l.owner,S=y.id,k=y.username,F="@".concat(k,"/").concat(Z),A=(0,I.P)({controlName:"flag-tip-balance-top-up-behavior",type:"string",default:"off"}),D=(0,i.Z)((0,C.KO)(U),2),q=D[0],z=D[1],j=(0,f.Z)().showError,O=(0,m.useRef)(void 0),Y=(0,m.useState)(!1),M=Y[0],$=Y[1],V=(0,h.Z)({forceFetch:!1}).cycles,L=(0,x.$0)().fireCircularBurstFrom,H=(0,m.useRef)(null),N=(0,w.T)(),K=(0,m.useState)(!1),Q=K[0],J=K[1],nn="repl"===g?"replId":"themeId",en=(0,i.Z)((0,d.fP)({onError:function(n){return j(n)},onCompleted:function(n){z("ready"),"SendTipResult"!==n.sendTip.__typename&&(n.sendTip.message?j(n.sendTip.message):j("Something went wrong"))}}),2),tn=en[0],rn=en[1].loading,on=(0,B.useRouter)(),an=(0,i.Z)((0,d.M)({onCompleted:function(n){var e=n.createCyclesStripeCheckoutSession;if(e&&void 0!==e.__typename)return"UnauthorizedError"===e.__typename||"UserError"===e.__typename?(z("ready"),void j(e.message)):void("CreateCyclesStripeCheckoutSessionResult"===e.__typename&&on.push(e.sessionUrl))}}),2),cn=an[0],ln=an[1].loading,sn="ready"===q&&!!(null===c||void 0===c?void 0:c.isVerified)&&c.id!==S&&!rn&&!M&&!ln,un=function(){var n=(0,s.Z)((function(){var n,e,i,o;return(0,p.__generator)(this,(function(a){switch(a.label){case 0:if(!sn)return[2];if((0,T.j)(T.U3.TIP_USED,(n={action:"tip-send-requested"},(0,r.Z)(n,g,F),(0,r.Z)(n,"tipTargetType",g),(0,r.Z)(n,"amount",t),n)),V&&!(t>V))return[3,4];if((0,T.j)(T.U3.TIP_USED,(e={action:"insufficient-balance"},(0,r.Z)(e,g,F),(0,r.Z)(e,"tipTargetType",g),(0,r.Z)(e,"amount",t),e)),"immediate-checkout"!==A)return[3,2];switch(z("toppingUp"),J(!0),i=Math.max(t,P.q2),g){case"repl":o=R.oj.Repl;break;case"theme":o=R.oj.Theme;break;default:(0,W.Z)(g)}return[4,cn({variables:{input:{purchaseType:_.pO.OneTime,quantity:i,redirectDestination:R.ac.TipSurface,redirectTipSurface:{desiredAmount:t,slug:Z,surfaceType:o,username:k}}}})];case 1:return a.sent(),[3,3];case 2:z("insufficientBalance"),a.label=3;case 3:return[2];case 4:return z("sending"),H.current&&!N&&L({element:H.current}),$(!0),O.current=setTimeout((function(){$(!1),tn({variables:{input:(0,r.Z)({amount:t},nn,v)}})}),5e3),[2]}}))}));return function(){return n.apply(this,arguments)}}();sn?(e=t>=1e3?"Super-donor \u2014 ":t>=500?"Benefactor \u2014 ":"Supporter \u2014\xa0",e+="Tip this ".concat(E(g)," to show your support for @").concat(l.owner.username)):c&&!c.isVerified?e="You must be verified to tip":c&&c.id===S?e="You cannot tip your own ".concat(E(g)):c||(e="You must be logged in to tip");var pn=(0,o.tZ)(a.G7,{innerRef:H,css:(0,u.Z)(Q?[{animation:"".concat(X," 1s"),"animation-iteration-count":1,"transition-timing-function":"cubic-bezier(0.4, 0, 0.2, 1)"}]:[]),onAnimationEnd:function(){J(!1)},children:(0,o.tZ)(a.u,{tooltip:e,placement:"top",isDisabled:rn||M||"ready"!==q,children:(0,o.tZ)(a.zx,{disabled:!sn,css:[a.l0.px(12),a.l0.py(8),a.l0.height(72),a.l0.width(96)],onClick:function(){sn&&un()},text:(0,o.tZ)(G,{tipAmount:t,sending:rn||M})})})});return(0,o.BX)(o.HY,{children:[pn,(0,o.tZ)(b,{tipAmount:t,undoTime:5e3,show:M,onUndo:function(){var n;(0,T.j)(T.U3.TIP_USED,(n={action:"tip-undone"},(0,r.Z)(n,g,F),(0,r.Z)(n,"tipTargetType",g),(0,r.Z)(n,"amount",t),n)),clearTimeout(O.current),J(!0),$(!1),z("ready")}})]})}var F=t(53694),A=t(32338),D=function(n){var e=n.tipTarget,t=e.topTippers,i=e.type,l=e.slug,s=e.totalCyclesTips,u=(0,m.useState)(!1),p=u[0],d=u[1],h=t[0],f=h.user,v=h.totalCyclesTipped;if(!f)return null;var g=(0,o.BX)(a.G7,{css:[a.l0.rowWithGap(8),a.l0.align.center,a.l0.backgroundColor.backgroundDefault],children:[(0,o.tZ)(a.qE,{src:f.image,username:f.username,size:24,layout:"intrinsic"}),(0,o.tZ)(a.xv,{children:f.username}),(0,o.BX)(a.G7,{css:[a.l0.rowWithGap(2),a.l0.pl(4),a.l0.align.center],children:[(0,o.tZ)(c.Z,{size:16}),(0,o.BX)(a.xv,{children:[" ","".concat((0,Z.d)(v))]})]})]}),y=1===t.length?g:(0,o.tZ)(a.u,{tooltip:"See the leaderboard of the best supporters",children:(0,o.tZ)(a.G7,{onClick:function(){var n;d(!0),(0,T.j)(T.U3.TIP_USED,(n={action:"leaderboard-opened"},(0,r.Z)(n,i,l),(0,r.Z)(n,"tipTargetType",i),(0,r.Z)(n,"amount",s),n))},css:[a.l0.cursor.pointer],children:g})});return(0,o.BX)(o.HY,{children:[y,(0,o.tZ)(a.u_,{isOpen:p,onRequestClose:function(){return d(!1)},children:(0,o.tZ)(a.G7,{css:[a.l0.px(8),a.l0.py(4)],children:(0,o.tZ)(A.Z,{leaderboardTitle:"Supporters Leaderboard",topTippers:t})})})]})},q=t(13168),z=t(72006),j=t(4405),O=t(3289),Y=t(14e3),M="2px",$="12px",V=a.TV.accentPrimaryDefault,L=a.TV.orangeDefault,H="-".concat(M," ").concat(M),N="".concat(M," ").concat(M),K="".concat(M," -").concat(M),Q="-".concat(M," -").concat(M),J=(0,v.F4)("\n  0% { box-shadow: ".concat(H," ").concat($," ").concat(V,", ").concat(K," ").concat($," ").concat(L,"; }\n  25% { box-shadow: ").concat(N," ").concat($," ").concat(V,", ").concat(Q," ").concat($," ").concat(L,"; }\n  50% { box-shadow: ").concat(K," ").concat($," ").concat(V,", ").concat(H," ").concat($," ").concat(L,"; }\n  75% { box-shadow: ").concat(Q," ").concat($," ").concat(V,", ").concat(N," ").concat($," ").concat(L,"; }\n  100% { box-shadow: ").concat(H," ").concat($," ").concat(V,", ").concat(K," ").concat($," ").concat(L,"; }\n")),nn=(0,v.F4)("\n  from { text-shadow: 0 0 8px rgba(255, 255, 255, 0.3); }\n  to { text-shadow: 0 0 8px rgba(255, 255, 255, 0.7); }\n"),en=function(n){var e="string"===typeof n.query.replUrl?n.query.replUrl:void 0;n.replace({pathname:n.pathname,query:(0,j.Z)((0,z.Z)({},n.query),{checkout:void 0,amount:void 0})},e)},tn=(0,a.Xb)({modal:[a.l0.colWithGap(16),a.l0.p(8)],buttonContainer:[a.l0.flex.row,a.l0.justify.center],button:[a.l0.px(12),a.l0.py(8),a.l0.height(72),a.l0.width(144),(0,v.iv)({marginTop:16,transition:"box-shadow 240ms ease-out, border-color 120ms ease-out, transform 240ms ease-out, background-color 120ms ease-out",boxShadow:"-".concat(M," ").concat(M," ").concat($," ").concat(V,", ").concat(M," -").concat(M," ").concat($," ").concat(L),animation:J+" 1500ms linear infinite 240ms"," span":{textShadow:"0 0 8px #ffffff80",animation:nn+" 1200ms ease-in-out infinite alternate 120ms"}})]}),rn={query:Y.s8},on={query:O.BW},an=function(n){var e=n.desiredAmount,t=n.tipTarget,c=t.id,l=t.type,s=t.slug,u=(0,B.useRouter)(),p=(0,m.useState)(!0),h=p[0],v=p[1],g=(0,i.Z)((0,C.KO)(U),2)[1],Z=(0,f.Z)().showError,y=(0,x.$0)().fireCircularBurstFrom,b=(0,m.useRef)(null),S=(0,w.T)(),_="repl"===l?"replId":"themeId",R=(0,i.Z)((0,d.fP)({onError:function(n){return Z(n)},onCompleted:function(n){g("ready"),"SendTipResult"!==n.sendTip.__typename?n.sendTip.message?Z(n.sendTip.message):Z("Something went wrong"):en(u)},refetchQueries:[rn,on]}),2),I=R[0],P=R[1].loading;return(0,o.tZ)(a.u_,{isOpen:h,onRequestClose:function(){var n;P||(v(!1),en(u),(0,T.j)(T.U3.TIP_USED,(n={action:"post-checkout-modal-closed"},(0,r.Z)(n,l,s),(0,r.Z)(n,"tipTargetType",l),(0,r.Z)(n,"amount",e),n)))},children:(0,o.BX)(a.G7,{css:tn.modal,children:[(0,o.tZ)(a.xv,{variant:"subheadBig",children:"Awesome!"}),(0,o.tZ)(a.xv,{multiline:!0,children:"You successfully topped up your Cycles balance. You can now tip this creator and show them your support."}),(0,o.tZ)(a.G7,{css:tn.buttonContainer,children:(0,o.tZ)(a.zx,{ref:b,text:(0,o.tZ)(G,{tipAmount:e,sending:P}),disabled:P,onClick:function(){var n;P||((0,T.j)(T.U3.TIP_USED,(n={action:"tip-send-requested"},(0,r.Z)(n,l,s),(0,r.Z)(n,"tipTargetType",l),(0,r.Z)(n,"amount",e),n)),g("sending"),b.current&&!S&&y({element:b.current}),I({variables:{input:(0,r.Z)({amount:e},_,c)}}))},css:tn.button})})]})})};function cn(n){var e=n.tipTarget,t=n.currentUser,r=(0,B.useRouter)();if(!(null===t||void 0===t?void 0:t.isVerified)||t.id===e.owner.id)return null;var i,a=r.query,c=a.checkout,l=a.amount,s=parseInt(l,10);return"success"===c&&s&&(100===(i=s)||500===i||1e3===i)&&"success"===c&&s?(0,o.tZ)(an,{tipTarget:e,desiredAmount:s}):null}var ln=function(n){var e=n.replOwner,t=n.currentUser;return!(!e||!e.isVerified||e.hasPrivacyRole)&&!(null===t||void 0===t?void 0:t.hasPrivacyRole)},sn={tips:[a.l0.py(8),a.l0.rowWithGap(32),(0,v.iv)((0,r.Z)({},(0,g.EM)("tabletMin"),[a.l0.colWithGap(16)])),a.l0.align.center],tips2:[a.l0.colWithGap(16),a.l0.justify.center],tipButtons:[a.l0.rowWithGap(12),(0,v.iv)((0,r.Z)({},(0,g.EM)("tabletMin"),[a.l0.mr(0)]))],tipsStats:[a.l0.rowWithGap(16)],totalTipsYouTippedWrapper:[a.l0.rowWithGap(16),(0,v.iv)((0,r.Z)({},(0,g.EM)("mobileMax"),[a.l0.mr(0),a.l0.justify.center]))],tipSection:[a.l0.colWithGap(4)],tipSectionTitle:[a.l0.color.foregroundDimmer,a.l0.pb(2)],tipSectionCycles:[a.l0.py(8),a.l0.px(16),a.l0.borderRadius(4),a.l0.rowWithGap(2),a.l0.justify.center,a.l0.backgroundColor.backgroundDefault,a.l0.height(40),a.l0.align.center,(0,v.iv)({borderRadius:"40px",minWidth:70})],topTipperContainer:[a.l0.py(8),a.l0.pl(8),a.l0.pr(16),a.l0.borderRadius(4),a.l0.rowWithGap(2),a.l0.justify.spaceEvenly,a.l0.backgroundColor.backgroundDefault,(0,v.iv)({borderRadius:"100px",minWidth:80})]},un=function(n){var e,t,r,l=n.tipTarget,s=n.currentUser,u=(0,i.Z)((0,C.KO)(U),2),p=u[0],d=u[1],h=s&&s.id===l.owner.id,m=(0,I.P)({controlName:"flag-new-cover-page",identifyWhenAnonymous:!0});return(0,o.BX)(o.HY,{children:[(0,o.tZ)(a.G7,{css:[a.l0.colWithGap(8)],id:"tips",children:(0,o.BX)(a.G7,{css:m?sn.tips2:sn.tips,children:[h?null:(0,o.BX)(a.G7,{css:[sn.tipButtons],children:[(0,o.tZ)(k,{currentUser:s,tipAmount:100,tipTarget:l}),(0,o.tZ)(k,{currentUser:s,tipAmount:500,tipTarget:l}),(0,o.tZ)(k,{currentUser:s,tipAmount:1e3,tipTarget:l})]}),(0,o.BX)(a.G7,{css:[sn.tipsStats],children:[(0,o.BX)(a.G7,{css:sn.totalTipsYouTippedWrapper,children:[(0,o.BX)(a.G7,{css:sn.tipSection,children:[(0,o.tZ)(a.xv,{css:sn.tipSectionTitle,children:"Total Tips"}),(0,o.BX)(a.G7,{css:sn.tipSectionCycles,children:[(0,o.tZ)(c.Z,{css:[a.l0.mt(2)],size:16}),(0,o.tZ)(a.xv,{children:"".concat((0,Z.d)(l.totalCyclesTips))})]})]}),l.currentUserTotalTips&&l.currentUserTotalTips>0?(0,o.BX)(a.G7,{css:sn.tipSection,children:[(0,o.tZ)(a.xv,{css:sn.tipSectionTitle,children:"You tipped"}),(0,o.BX)(a.G7,{css:sn.tipSectionCycles,children:[(0,o.tZ)(c.Z,{css:[a.l0.mt(2)],size:16}),(0,o.tZ)(a.xv,{children:"".concat((0,Z.d)(l.currentUserTotalTips))})]})]}):null]}),(null===(e=l.topTippers)||void 0===e?void 0:e.length)>0&&null!==(null===(t=l.topTippers[0])||void 0===t?void 0:t.user)?(0,o.BX)(a.G7,{css:sn.tipSection,children:[(0,o.BX)(a.xv,{css:sn.tipSectionTitle,children:["Top Supporter",(null===(r=l.topTippers)||void 0===r?void 0:r.length)>1?"s":""]}),(0,o.tZ)(a.G7,{css:sn.topTipperContainer,children:(0,o.tZ)(D,{tipTarget:l})})]}):null]})]})}),(0,o.tZ)(cn,{tipTarget:l,currentUser:s}),(0,o.tZ)(q.Z,{isOpen:"insufficientBalance"===p,context:"tipping_replView",initialTab:"cycles",onRequestClose:function(){d("ready")}})]})},pn=function(n){var e,t,r,i=n.replId,a=(0,F.SI)({variables:{id:i}}),c=a.data,s=a.loading,u="Repl"===(null===c||void 0===c?void 0:c.repl.__typename)?c.repl:null,p="CurrentUser"===(null===c||void 0===c||null===(e=c.currentUser)||void 0===e?void 0:e.__typename)?c.currentUser:null;if(!u||!ln({replOwner:null===u||void 0===u?void 0:u.user,currentUser:p}))return null;if(!(null===u||void 0===u||null===(t=u.user)||void 0===t?void 0:t.id)||!(null===u||void 0===u||null===(r=u.user)||void 0===r?void 0:r.username))throw new Error("Expected repl id to be set");if(s)return(0,o.tZ)(l.Z,{});var d={id:u.id,slug:u.slug,type:"repl",owner:u.user,totalCyclesTips:u.totalCyclesTips,topTippers:u.topTippers,currentUserTotalTips:u.currentUserTotalTips};return(0,o.tZ)(un,{tipTarget:d,currentUser:p})},dn=function(n){var e,t=n.themeId,r=(0,F.ir)({variables:{input:{themeId:t}}}),i=r.data,a=r.loading,c="CustomTheme"===(null===i||void 0===i?void 0:i.customThemeById.__typename)?i.customThemeById:null,s="CurrentUser"===(null===i||void 0===i||null===(e=i.currentUser)||void 0===e?void 0:e.__typename)?i.currentUser:null;if(!c||!ln({replOwner:null===c||void 0===c?void 0:c.author,currentUser:s}))return null;if(a)return(0,o.tZ)(l.Z,{});if(!c.author)return null;var u={id:c.id,slug:c.slug,type:"theme",owner:c.author,totalCyclesTips:c.totalCyclesTips,topTippers:c.topTippers,currentUserTotalTips:c.currentUserTotalTips};return(0,o.tZ)(un,{tipTarget:u,currentUser:s})};function hn(n){if("replId"in n)return(0,o.tZ)(pn,{replId:n.replId});if("themeId"in n)return(0,o.tZ)(dn,{themeId:n.themeId});throw new Error("Tips component requires a tippable target.")}},61925:function(n,e,t){t.d(e,{h1:function(){return u},pT:function(){return s}});var r=t(43119),i=t(71440);function o(){var n=(0,r.Z)(["\n  fragment TopTippersFragment on TipperUser {\n    user {\n      id\n      username\n      url\n      image\n    }\n    totalCyclesTipped\n  }\n"]);return o=function(){return n},n}function a(){var n=(0,r.Z)(["\n  fragment TopTipperReplLeaderboard on Repl {\n    id\n    topTippers {\n      ...TopTippersFragment\n    }\n  }\n  ","\n"]);return a=function(){return n},n}function c(){var n=(0,r.Z)(["\n  fragment TopTipperThemeLeaderboard on CustomTheme {\n    id\n    topTippers {\n      ...TopTippersFragment\n    }\n  }\n  ","\n"]);return c=function(){return n},n}var l=(0,i.Ps)(o()),s=(0,i.Ps)(a(),l),u=(0,i.Ps)(c(),l)}}]);
//# sourceMappingURL=7404-094cdbbc98ad951b.js.map