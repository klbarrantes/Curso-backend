"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6695,8654,3325,8739],{87453:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(94660),i=n(29356),o=n.n(i),a=(n(59496),n(97754)),l=n.n(a);function c(e){var t=e.unreadDot,n=e.size,i=void 0===n?12:n,a=e.count,c=void 0===a?null:a,s=c&&c>99,u=s?"99+":null===c||void 0===c?void 0:c.toString();return(0,r.BX)("span",{className:"jsx-1c7f3b9066c4c334",children:[(0,r.tZ)("svg",{width:i,height:i,viewBox:"0 0 24 24",fill:"none",style:{color:"currentColor"},xmlns:"http://www.w3.org/2000/svg",className:"jsx-1c7f3b9066c4c334",children:(0,r.tZ)("path",{d:"M21 15C21 15.5304 20.7893 16.0391 20.4142 16.4142C20.0391 16.7893 19.5304 17 19 17H7L3 21V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H19C19.5304 3 20.0391 3.21071 20.4142 3.58579C20.7893 3.96086 21 4.46957 21 5V15Z",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",className:"jsx-1c7f3b9066c4c334"})}),t?(0,r.tZ)("div",{className:"jsx-1c7f3b9066c4c334 unread-indicator"}):null,Boolean(c)&&(0,r.tZ)("div",{className:"jsx-1c7f3b9066c4c334 "+(l()("count",{overflow:s})||""),children:u}),(0,r.tZ)(o(),{id:"1c7f3b9066c4c334",children:"span.jsx-1c7f3b9066c4c334{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex}.unread-indicator.jsx-1c7f3b9066c4c334{width:5px;height:5px;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;background-color:var(--accent-red-default);-webkit-transform:translate(8px,-1px);-moz-transform:translate(8px,-1px);-ms-transform:translate(8px,-1px);-o-transform:translate(8px,-1px);transform:translate(8px,-1px);position:absolute}.count.jsx-1c7f3b9066c4c334{-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;background-color:var(--accent-negative-default);-webkit-transform:translate(50%,-50%);-moz-transform:translate(50%,-50%);-ms-transform:translate(50%,-50%);-o-transform:translate(50%,-50%);transform:translate(50%,-50%);position:absolute;min-width:16px;padding:2px 3px;height:16px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;color:white;font-size:var(--font-size-small)}.overflow.jsx-1c7f3b9066c4c334{-webkit-transform:translate(25%,-50%);-moz-transform:translate(25%,-50%);-ms-transform:translate(25%,-50%);-o-transform:translate(25%,-50%);transform:translate(25%,-50%)}"})]})}},72147:function(e,t,n){n.d(t,{AS:function(){return R},Hj:function(){return B},Rp:function(){return I},Tt:function(){return A},gE:function(){return D},j7:function(){return k},xT:function(){return E},yi:function(){return S}});var r=n(72006),i=n(43119),o=n(71440),a=n(53486),l=n(46653),c=n(61391);function s(){var e=(0,i.Z)(["\n  fragment AnnotationsUser on User {\n    id\n    username\n    image\n  }\n"]);return s=function(){return e},e}function u(){var e=(0,i.Z)(["\n  fragment AnnotationMessageContent on MessageContentType {\n    __typename\n    ... on TextMessageContentType {\n      text\n    }\n    ... on PreviewMessageContentType {\n      preview\n    }\n    ... on StatusMessageContentType {\n      status\n    }\n  }\n"]);return u=function(){return e},e}function d(){var e=(0,i.Z)(["\n  fragment AnnotationsUIMessage on AnnotationMessage {\n    id\n    user {\n      id\n      ...AnnotationsUser\n    }\n    anchor {\n      id\n    }\n    timeCreated\n    content {\n      __typename\n      ...AnnotationMessageContent\n    }\n    currentUserIsAuthor\n    seen\n  }\n  ","\n  ","\n"]);return d=function(){return e},e}function f(){var e=(0,i.Z)(["\n  fragment AnnotationsUIAnchor on AnnotationAnchor {\n    id\n    user {\n      id\n      ...AnnotationsUser\n    }\n    path\n    otVersion\n    indexStart\n    indexEnd\n    isResolved\n    isGeneral\n    messages {\n      id\n      ...AnnotationsUIMessage\n    }\n  }\n  ","\n  ","\n"]);return f=function(){return e},e}function h(){var e=(0,i.Z)(["\n  query AnnotationAnchorsByRepl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        annotationAnchors {\n          id\n          ...AnnotationsUIAnchor\n        }\n      }\n    }\n    currentUser {\n      id\n      username\n      image\n    }\n  }\n  ","\n"]);return h=function(){return e},e}function p(){var e=(0,i.Z)(["\n  mutation CreateAnnotationAnchor(\n    $annotationAnchor: AnnotationAnchorInput!\n    $annotationMessage: AnnotationMessageInput\n    $highlight: AnnotationHighlightInput\n  ) {\n    createAnnotationAnchor(\n      annotationAnchor: $annotationAnchor\n      annotationMessage: $annotationMessage\n      highlight: $highlight\n    ) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return p=function(){return e},e}function v(){var e=(0,i.Z)(["\n  mutation UpdateAnnotationAnchor(\n    $id: String!\n    $changes: AnnotationAnchorChangesInput!\n  ) {\n    updateAnnotationAnchor(id: $id, changes: $changes) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return v=function(){return e},e}function m(){var e=(0,i.Z)(["\n  mutation CreateAnnotationMessage(\n    $replId: String!\n    $anchorId: String!\n    $annotationMessage: AnnotationMessageInput!\n    $highlight: AnnotationHighlightInput\n  ) {\n    createAnnotationMessage(\n      replId: $replId\n      anchorId: $anchorId\n      annotationMessage: $annotationMessage\n      highlight: $highlight\n    ) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return m=function(){return e},e}function g(){var e=(0,i.Z)(["\n  mutation updateThreadPreview(\n    $threadId: String!\n    $messageId: String!\n    $message: String\n  ) {\n    updateThreadPreview(\n      threadId: $threadId\n      messageId: $messageId\n      message: $message\n    )\n  }\n"]);return g=function(){return e},e}function Z(){var e=(0,i.Z)(["\n  subscription AnnotationUpdates($replId: String!) {\n    updatedAnnotation: annotationUpdatesByRepl(replId: $replId) {\n      id\n      ...AnnotationsUIAnchor\n    }\n  }\n  ","\n"]);return Z=function(){return e},e}function y(){var e=(0,i.Z)(["\n  subscription MessagePreview($threadId: String!) {\n    threadPreview(threadId: $threadId) {\n      userId\n      messageId\n      message\n    }\n  }\n"]);return y=function(){return e},e}var b={},w=(0,o.Ps)(s()),x=(0,o.Ps)(u()),C=(0,o.Ps)(d(),w,x),k=(0,o.Ps)(f(),w,C),S=(0,o.Ps)(h(),k);function E(e){var t=(0,r.Z)({},b,e);return a.a(S,t)}var T=(0,o.Ps)(p(),k);function R(e){var t=(0,r.Z)({},b,e);return l.D(T,t)}var _=(0,o.Ps)(v(),k);function I(e){var t=(0,r.Z)({},b,e);return l.D(_,t)}var G=(0,o.Ps)(m(),k);function D(e){var t=(0,r.Z)({},b,e);return l.D(G,t)}var P=(0,o.Ps)(g());function B(e){var t=(0,r.Z)({},b,e);return l.D(P,t)}var U=(0,o.Ps)(Z(),k);function A(e){var t=(0,r.Z)({},b,e);return c.m(U,t)}y()},53674:function(e,t,n){n.d(t,{Ft:function(){return f},Vy:function(){return v},kL:function(){return p}});var r=n(57135),i=n(2272),o=n(96583),a=n(59496),l=n(88254),c=n(66693);function s(e,t,n){return u.apply(this,arguments)}function u(){return(u=(0,r.Z)((function(e,t,n){var r;return(0,o.__generator)(this,(function(i){switch(i.label){case 0:return e.path&&"number"===typeof e.indexStart&&"number"===typeof e.indexEnd&&e.otVersion?n===e.otVersion?[2,{path:e.path,indexStart:e.indexStart,indexEnd:e.indexEnd,otVersion:e.otVersion}]:[4,t({indexStart:e.indexStart,indexEnd:e.indexEnd,versionFrom:e.otVersion,versionTo:n})]:[2];case 1:return r=i.sent(),[2,{path:e.path,indexStart:r.indexStart,indexEnd:r.indexEnd,otVersion:n}]}}))}))).apply(this,arguments)}var d=n(56579);function f(e){return h.apply(this,arguments)}function h(){return(h=(0,r.Z)((function(e){var t,n,r,i,a;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return t=e.anchor,n=e.version,r=e.transformSelection,i=e.content,t.path?[4,s(t,r,n)]:[2,null];case 1:return(a=o.sent())?[2,{anchor:t,newSelection:a,newPosition:undefined,getHighlight:function(){if(a){var e=a.indexStart,t=a.indexEnd;try{var n=c.xv.of(i.split("\n")),r=n.lineAt(e),o=n.lineAt(t),s=n.sliceString(n.line(Math.max(r.number-2,1)).from,e),u=n.sliceString(t,n.line(Math.min(o.number+2,n.lines)).to);return{precode:s,code:n.sliceString(e,t),postcode:u}}catch(d){l.Tb(d)}}},getSnippet:function(){try{for(var e=c.xv.of(i.split("\n")),t=e.lineAt(a.indexStart),n=e.lineAt(a.indexEnd),r=[],o=t.number===n.number?Math.max(0,t.number-1):t.number,s=Math.min(e.lines,n.number+1),u=o;u<=s;u++)r.push(e.line(u).text);return{startLineNumber:o,lines:r}}catch(d){l.Tb(d)}}}]:[2,null]}}))}))).apply(this,arguments)}function p(e){var t=(0,d.Z)().fs,n=a.useRef(null),r=a.useRef(null),o=(0,i.Z)(a.useState(!1),2),l=o[0],c=o[1];return a.useEffect((function(){if(e){var i=function(){r.current=null,c(!1)},o=t.watchTextFile(e,{onReady:function(e){var t=e.transformSelection,i=e.initialContent;n.current=i.toString(),r.current=t,c(!0)},onMoveOrDelete:function(){i()},onError:function(){i()},onChange:function(e){var t=e.latestContent;n.current=t}});return function(){i(),o()}}}),[e,t]),{contentRef:n,transformSelectionRef:r,loadedFile:l}}function v(e){var t=(0,d.Z)().fs,n=(0,i.Z)(a.useState(null),2),r=n[0],o=n[1],l=p(null===e||void 0===e?void 0:e.path),c=l.contentRef,s=l.loadedFile,u=l.transformSelectionRef;return a.useEffect((function(){(null===e||void 0===e?void 0:e.path)&&s&&u.current&&null!==c.current&&f({anchor:e,version:t.getOTVersion(e.path),transformSelection:u.current,content:c.current}).then((function(e){o(e)})).catch((function(){o(null)}))}),[t,e,s]),r}},19513:function(e,t,n){n.d(t,{Q:function(){return r}});var r=(0,n(5109).cn)(null)},68925:function(e,t,n){n.d(t,{n:function(){return u}});var r=n(72006),i=n(43119),o=n(71440),a=n(46653);function l(){var e=(0,i.Z)(["\n  mutation MarkMessagesAsSeen(\n    $replId: String!\n    $threadId: String\n    $messageIds: [String!]\n  ) {\n    markMessagesAsSeen(\n      replId: $replId\n      threadId: $threadId\n      messageIds: $messageIds\n    ) {\n      ... on AnnotationMessageList {\n        messages {\n          id\n          seen\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}var c={},s=(0,o.Ps)(l());function u(e){var t=(0,r.Z)({},c,e);return a.D(s,t)}},79206:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(2272),i=n(59496),o=n(79351),a=n(68925);function l(e){var t=(0,o.Z)(),n=(0,r.Z)((0,a.n)(),1)[0];i.useEffect((function(){if(e){var r=e.messages.filter((function(e){return!e.seen})).map((function(e){return e.id}));0!==r.length&&n({variables:{replId:t,threadId:e.id,messageIds:r},optimisticResponse:{markMessagesAsSeen:{messages:r.map((function(e){return{id:e,seen:!0,__typename:"AnnotationMessage"}})),__typename:"AnnotationMessageList"}}})}}),[t,e,n])}},20465:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(72006),i=n(43119),o=n(71440),a=n(53486);function l(){var e=(0,i.Z)(["\n  query ThreadReplCollaborators($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        owner {\n          ... on User {\n            id\n            username\n            image\n          }\n          ... on Team {\n            id\n            username\n            image\n          }\n        }\n        permissions {\n          id\n          user {\n            id\n            username\n            image\n          }\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}var c={},s=(0,o.Ps)(l());var u=n(79351);function d(){var e,t=function(e){var t=(0,r.Z)({},c,e);return a.a(s,t)}({variables:{replId:(0,u.Z)()}}).data;if("Repl"!==(null===t||void 0===t?void 0:t.repl.__typename))return[];var n=[];(null===(e=t.repl.owner)||void 0===e?void 0:e.username)&&"User"===t.repl.owner.__typename&&n.push(t.repl.owner);var i=!0,o=!1,l=void 0;try{for(var d,f=t.repl.permissions[Symbol.iterator]();!(i=(d=f.next()).done);i=!0){var h,p=d.value;(null===(h=p.user)||void 0===h?void 0:h.username)&&n.push(p.user)}}catch(v){o=!0,l=v}finally{try{i||null==f.return||f.return()}finally{if(o)throw l}}return n}},56474:function(e,t,n){var r=n(72006),i=n(4405),o=n(2272),a=n(94660),l=n(29356),c=n.n(l),s=n(59496),u=n(79460),d=n(51808),f=n(58530),h=n(60595),p=n(46132),v=n(26303);t.Z=function(e){var t=e.title,n=void 0===t?"Sign up":t,l=e.description,m=void 0===l?"Code, create, and learn together on Replit":l,g=e.onSuccess,Z=void 0===g?function(){}:g,y=e.onFailure,b=void 0===y?function(){}:y,w=e.onAnonSuccess,x=void 0===w?function(){}:w,C=e.showLoginFirst,k=void 0!==C&&C,S=e.isTeacher,E=void 0!==S&&S,T=e.toggleTeacher,R=void 0===T?function(){}:T,_=e.allowAnon,I=void 0!==_&&_,G=e.showForm,D=void 0===G||G,P=e.showSuccess,B=void 0!==P&&P,U=e.source,A=(0,o.Z)(s.useState(k),2),N=A[0],L=A[1],X=(0,v.Z)();return(0,a.BX)("div",{"data-cy":"auth-modal",className:"jsx-17a5f6998e0a3cdd auth-modal",children:[(0,a.BX)(u.gC,{align:"center",spacing:2,children:[(0,a.tZ)("div",{className:"jsx-17a5f6998e0a3cdd auth-modal-title",children:n}),(0,a.tZ)("div",{className:"jsx-17a5f6998e0a3cdd auth-modal-description",children:m}),(0,a.tZ)(h.Z,{path:"/public/animations/success.json",css:[f.l0.position.absolute,f.l0.left(0),f.l0.top(0),f.l0.right(0)],show:B})," ",D?(0,a.tZ)(d.Z,{onChangeAuth:function(){X.current&&L(!N)},isTeacher:E,isLogin:N,onSubmit:function(e){if("error"in e)b(e);else if("user"in e&&e.user){N&&!e.social||e.social&&!e.newUser||(0,p.j)(e.user.id.toString()),Z((0,i.Z)((0,r.Z)({},e),{isLogin:N}))}},toggleTeacher:R,source:U}):null,I?(0,a.tZ)("div",{className:"jsx-17a5f6998e0a3cdd auth-modal-anon",children:(0,a.tZ)("a",{onClick:x,role:"button",tabIndex:0,onKeyDown:x,className:"jsx-17a5f6998e0a3cdd",children:"continue as Anonymous"})}):null]}),(0,a.tZ)(c(),{id:"17a5f6998e0a3cdd",children:".auth-modal.jsx-17a5f6998e0a3cdd{max-width:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;padding:var(--space-32)var(--space-16)}.title-container.jsx-17a5f6998e0a3cdd{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;margin-bottom:var(--space-16)}.auth-modal-title.jsx-17a5f6998e0a3cdd{text-align:center;color:var(--foreground-default);font-size:var(--font-size-header-big);font-weight:var(--font-weight-medium)}.auth-modal-description.jsx-17a5f6998e0a3cdd{text-align:center;color:var(--foreground-dimmer);font-size:var(--font-size-subhead-default)}.auth-modal-anon.jsx-17a5f6998e0a3cdd{margin-top:14px;font-size:14px}.auth-modal-anon.jsx-17a5f6998e0a3cdd a.jsx-17a5f6998e0a3cdd{color:var(--accent-primary-default);text-decoration:none;cursor:pointer}"})]})}},60350:function(e,t,n){n.d(t,{S:function(){return o}});var r=n(53698),i=n(7225);function o(e,t,n){if(i.mY.is(e))t.request.executeCommand(e.command,e.arguments);else{var o=e.edit,a=e.command;if(o&&(0,r.w)({edit:o,fs:n,client:t}),a&&"java.apply.workspaceEdit"===a.command&&a.arguments){var l=!0,c=!1,s=void 0;try{for(var u,d=a.arguments[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var f=u.value;i.Db.is(f)&&(0,r.w)({edit:f,fs:n,client:t})}}catch(h){c=!0,s=h}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}}a&&t.request.executeCommand(a.command,a.arguments)}}},88102:function(e,t,n){n.d(t,{R$:function(){return ee},Wo:function(){return Q},D2:function(){return H},XZ:function(){return ne},JJ:function(){return K},sN:function(){return ie},ZP:function(){return re},s3:function(){return J}});var r=n(57389),i=n(72006),o=n(4405),a=n(2272),l=n(94660),c=n(59496),s=n(7330),u=n(63463),d=n(19666),f=n(73415),h=n(27108),p=n(95360),v=n(65782),m=n(17007),g=n(65189),Z=n(27615),y=n(76280),b=n(72343),w=n(39792),x=n(96810),C=n(74840),k=n(78915),S=n(34477),E=n(51644),T=n(94841),R=n(64905),_=n(88254),I=n(10063),G=n(4817),D=n(34928),P=n(56579),B=n(24880),U=n(62687),A=n(42928),N=n(67837),L=n(53967),X=n(99340),M=n(72252),O=n(86832),W=n(44135),F=n(60350),j=n(69422);function z(e){var t=e.view,n=e.metadata,r=e.closeMenu,i=n.text,o=n.icon,f=(0,X.Z)().showError,h=c.useRef(!1),p=(0,a.Z)(c.useState(!1),2),v=p[0],m=p[1],g=(0,a.Z)(c.useState(null),2),Z=g[0],y=g[1],b=(0,P.Z)().fs,w=t.state.facet(j.Yp),x=(0,D.Z)(w||""),C=(0,W.H)(),k=C("label"),S=C("menu"),E=c.useRef(null),T=(0,a.Z)((0,M.XZ)(E,!1),4),R=(T[0],T[1]),z=T[2],H=T[3];return(0,M.Ym)(R,E),c.useEffect((function(){if(x&&w&&v&&x.isOpen(w)&&!h.current){var e=t.state,n=e.selection.main,r={start:(0,L.s)(e.doc,n.from),end:(0,L.s)(e.doc,n.to)};h.current=!0,x.request.codeActions(w,r).then((function(e){if((0,I.j)(I.U3.EDITOR_CONTEXT_MENU_CODE_ACTIONS_REQUESTED,{success:!("error"in e),numActions:"result"in e&&e.result?e.result.length:null}),"error"in e)return h.current=!1,y([]),f("Something went wrong fetching code actions"),void _.Tb(new Error(e.error.message));null!==e.result&&0!==e.result.length?y(e.result):y([])}))}}),[x,v,w,Z,t,f]),(0,l.BX)(d.G,{tag:"li",onClick:function(e){e.stopPropagation(),m((function(e){return!e}))},children:[(0,l.BX)(d.G,{css:[G.gU.listItem,s.l0.p(8),s.l0.flex.row,s.l0.align.center],children:[o,(0,l.tZ)(d.G,{css:[s.l0.pl(8)],children:(0,l.tZ)(u.xv,{id:k,children:i})}),(0,l.tZ)(d.G,{css:[s.l0.position.absolute,s.l0.right(4)],children:(0,l.tZ)(U.h,{alt:"Toggle Code Actions",tooltipHidden:!0,"aria-expanded":v,"aria-controls":S,onClick:function(){H(),m((function(e){return!e}))},innerRef:E,onKeyDown:z,children:(0,l.tZ)(N.Z,{rotate:v?90:0,style:{transition:"200ms ease"}})})})]}),v&&!Z?(0,l.BX)(d.G,{css:[s.l0.p(8),s.l0.flex.row,s.l0.align.center],children:[(0,l.tZ)(u.xv,{color:"dimmer",children:"Loading actions..."}),(0,l.tZ)(d.G,{css:[s.l0.align.center,s.l0.justify.center,s.l0.position.absolute,s.l0.right(4),s.l0.width(24),s.l0.height(24)],children:(0,l.tZ)(B.Z,{})})]}):null,v&&Z&&x?(0,l.BX)(d.G,{tag:"ul",role:"menubar","aria-orientation":"vertical","aria-labelledby":k,id:S,children:[Z.map((function(e,t){return(0,l.tZ)(O.Z,{onClick:function(){(0,F.S)(e,x,b),r()},children:(0,l.tZ)(d.G,{css:[G.gU.listItem,s.l0.p(8),s.l0.flex.row,s.l0.align.center],children:(0,l.BX)(d.G,{css:[s.l0.flex.row,s.l0.justify.spaceBetween,s.l0.width("100%")],children:[(0,l.tZ)(u.xv,{css:[s.l0.maxWidth("90%")],children:e.title}),(0,l.tZ)(d.G,{tag:"span",children:(0,l.tZ)(A.Z,{size:12})})]})})},t)})),0===Z.length?(0,l.tZ)(d.G,{css:[s.l0.p(8),s.l0.flex.row,s.l0.align.center],children:(0,l.tZ)(u.xv,{color:"dimmer",children:"No actions available"})}):null]}):null]})}var H,V,q=n(36877),$=n(75447),Y=n(11571),K="Divider";!function(e){e.Cut="Cut",e.Copy="Copy",e.Paste="Paste",e.JumpToDefinition="JumpToDefinition",e.JumpToTypeDefinition="JumpToTypeDefinition",e.JumpToImplementation="JumpToImplementation",e.FindReferences="FindReferences",e.Rename="Rename",e.SelectAllOccurrences="SelectAllOccurrences",e.CodeActions="CodeActions",e.CopyLinkToPos="CopyLinkToPos",e.ToggleBreakpoint="ToggleBreakpoint",e.StartThread="StartThread",e.ExplainCode="ExplainCode",e.GenerateCode="GenerateCode",e.TransformCode="TransformCode",e.SearchCode="SearchCode"}(H||(H={}));var Q=(V={},(0,r.Z)(V,H.Cut,{text:"Cut",icon:(0,l.tZ)(y.Z,{}),keyboardShortcut:{cmdOrCtrlKey:!0,key:"X"}}),(0,r.Z)(V,H.Copy,{text:"Copy",icon:(0,l.tZ)(b.Z,{}),keyboardShortcut:{cmdOrCtrlKey:!0,key:"C"}}),(0,r.Z)(V,H.Paste,{text:"Paste",icon:(0,l.tZ)(w.Z,{}),keyboardShortcut:{cmdOrCtrlKey:!0,key:"V"}}),(0,r.Z)(V,H.JumpToDefinition,{text:"Jump to definition",icon:(0,l.tZ)(x.Z,{}),keyboardShortcut:{cmdOrCtrlKey:!0,key:"F12"}}),(0,r.Z)(V,H.JumpToTypeDefinition,{text:"Jump to type definition",icon:(0,l.tZ)(T.Z,{})}),(0,r.Z)(V,H.JumpToImplementation,{text:"Jump to implementation",icon:(0,l.tZ)(R.Z,{})}),(0,r.Z)(V,H.FindReferences,{text:"Find references",icon:(0,l.tZ)(p.Z,{}),keyboardShortcut:{shiftKey:!0,key:"F12"}}),(0,r.Z)(V,H.Rename,{text:"Rename all occurrences",icon:(0,l.tZ)(v.Z,{}),keyboardShortcut:{key:"F2"}}),(0,r.Z)(V,H.SelectAllOccurrences,{text:"Select all occurrences",icon:(0,l.tZ)(h.Z,{}),keyboardShortcut:{key:"F2",cmdOrCtrlKey:!0}}),(0,r.Z)(V,H.CodeActions,{text:"Code actions",icon:(0,l.tZ)(E.Z,{}),keyboardShortcut:{key:".",cmdOrCtrlKey:!0}}),(0,r.Z)(V,H.CopyLinkToPos,{text:"Copy link to position",icon:(0,l.tZ)(m.Z,{})}),(0,r.Z)(V,H.ToggleBreakpoint,{text:"Toggle breakpoint",icon:(0,l.tZ)(g.Z,{})}),(0,r.Z)(V,H.StartThread,{text:"Start thread",icon:(0,l.tZ)(Z.Z,{}),keyboardShortcut:{key:"/",altKey:!0}}),(0,r.Z)(V,H.ExplainCode,{text:"Explain code",icon:(0,l.tZ)(S.Z,{})}),(0,r.Z)(V,H.GenerateCode,{text:"Generate code",icon:(0,l.tZ)(q.Z,{}),keyboardShortcut:{key:"g",altKey:!0}}),(0,r.Z)(V,H.TransformCode,{text:"Transform code",icon:(0,l.tZ)($.Z,{}),keyboardShortcut:{key:"t",altKey:!0}}),(0,r.Z)(V,H.SearchCode,{text:"Search code",icon:(0,l.tZ)(p.Z,{})}),V);function J(e){return e===K}var ee=35;function te(e){var t=e.dom,n=e.verticalOffset,r=e.coords,i=r.x,o=r.y,a=t.getBoundingClientRect().bottom,l=document.documentElement.clientWidth;if(i+275>l&&(i=l-275-5),o+n>a){var c=o-n;return c<0?{x:i+5,y:0}:{x:i,y:c}}return{x:i,y:o}}function ne(e){var t=e.view,n=e.coords,r=e.closeMenu,i=e.verticalOffset,o=e.children,u=e.width,h=void 0===u?275:u,p=t.dom,v=(0,f.Z)(r,[]),m=(0,a.Z)(c.useState((function(){return te({dom:p,verticalOffset:i,coords:n})})),2),g=m[0],Z=g.x,y=g.y,b=m[1];return c.useEffect((function(){b(te({dom:p,verticalOffset:i,coords:n}))}),[n,i,p]),(0,l.tZ)(C.T,{innerRef:v,background:"higher",className:"cm-custom-context-menu",css:[s.l0.position.fixed,s.l0.flex.column,s.l0.justify.center,s.l0.borderRadius(8),s.l0.shadow(1),s.l0.width(h),s.l0.zIndex(101),{border:"1px solid ".concat(s.TV.outlineDimmest)},{left:Z,top:y}],children:(0,l.tZ)(Y.ZP,{children:(0,l.tZ)(M.uP,{options:{direction:"vertical"},children:(0,l.tZ)(d.G,{tag:"ul",role:"menubar","aria-orientation":"vertical","aria-label":"Context",children:o})})})})}function re(e){var t=e.view,n=e.closeMenu,r=e.actions,a=e.onAction,c=r.filter((function(e){switch(e){case H.TransformCode:case H.ExplainCode:return!t.state.selection.main.empty;case H.StartThread:return 0!==t.state.doc.length;default:return!0}})),s=c.map((function(e){return J(e)?1:ee})).reduce((function(e,t){return e+t}),0);return(0,l.tZ)(ne,(0,o.Z)((0,i.Z)({verticalOffset:s},e),{children:c.map((function(e,r){return J(e)?(0,l.tZ)(d.G,{css:[{borderBottom:"1px solid var(--background-highest)"}]},r):e===H.CodeActions?(0,l.tZ)(z,{view:t,closeMenu:n,metadata:Q[e]},e):(0,l.tZ)(O.Z,{onClick:function(){a(e),n()},isFirst:0===r,isLast:r===c.length-1,children:(0,l.tZ)(oe,{item:e,isFirst:0===r,isLast:r===c.length-1})},e)}))}))}function ie(e){var t=e.children,n=e.isFirst,r=e.isLast,i=e.item;return(0,l.tZ)(d.G,{"data-cy":i?"context-menu-".concat(i):null,css:[s.l0.p(8),s.l0.flex.row,s.l0.align.center,n&&{borderRadius:"inherit"},r&&{borderRadius:"inherit"}],children:t})}function oe(e){var t=e.item,n=e.isFirst,r=e.isLast,i=Q[t],o=i.text,a=i.icon,c=i.keyboardShortcut;return(0,l.BX)(ie,{item:t,isFirst:n,isLast:r,children:[a,(0,l.tZ)(d.G,{css:[s.l0.px(8)],children:(0,l.tZ)(u.xv,{children:o})}),c?(0,l.tZ)(d.G,{css:[s.l0.position.absolute,s.l0.right(4)],children:(0,l.tZ)(k.ZP,{shortcut:c,small:!0,hideBorder:!0})}):null]})}},86832:function(e,t,n){var r=n(2272),i=n(94660),o=n(72252),a=n(58530),l=n(59496),c=a.KD.button;t.Z=function(e){var t=e.onClick,n=e.children,s=e.isFirst,u=e.isLast,d=l.useRef(null),f=(0,r.Z)((0,o.XZ)(d,!1),4),h=f[0],p=f[1],v=f[2],m=f[3];return(0,o.Ym)(p,d),(0,i.tZ)(c,{ref:d,role:"menuitem",css:[a.l0.reset.button,a.gU.listItem,s&&{borderTopLeftRadius:4,borderTopRightRadius:4},u&&{borderBottomLeftRadius:4,borderBottomRightRadius:4}],onClick:function(e){m(),t(e)},onKeyDown:v,tabIndex:h,children:n})}},64697:function(e,t,n){n.d(t,{q:function(){return I},J:function(){return _}});var r=n(72006),i=n(77637),o=n(2272),a=n(94660),l=n(66091),c=n(5683),s=n(45347),u=n(66693),d=n(86925),f=n(80469),h=d.tk.baseTheme({".cm-diff-inserted":{backgroundColor:"#0053A644",borderLeft:"#0053A6 solid 3px"},".cm-diff-deleted":{backgroundColor:"#c93c3733",borderLeft:"#c93c37 solid 3px"}}),p=d.p.line({attributes:{class:"cm-diff-inserted"}}),v=d.p.line({attributes:{class:"cm-diff-deleted"}}),m=u.Py.define({map:function(e,t){return e.map(t)}}),g=function(e){(0,c.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,l.Z)(this,n),t.apply(this,arguments)}var r=n.prototype;return r.toDOM=function(){var e=document.createElement("div");return e.className="cm-diff-alignment cm-line",e.innerHTML="&nbsp;",e},r.ignoreEvent=function(){return!1},n}(d.l9);function Z(e){var t=new u.f_,n=new g;e.sort((function(e,t){return e.character-t.character}));var r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0)for(var c=a.value,s=c.character,f=c.padding,h=0;h<f;h++)t.add(s,s,d.p.widget({widget:n,side:-1,block:!0}))}catch(p){i=!0,o=p}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return t.finish()}function y(e){var t=e.coloredLines,n=e.colorDecoration,r=d.lg.fromClass((function e(r){(0,l.Z)(this,e);var i=new u.f_,o=!0,a=!1,c=void 0;try{for(var s,d=t[Symbol.iterator]();!(o=(s=d.next()).done);o=!0){var f=s.value,h=r.state.doc.line(f);i.add(h.from,h.from,n)}}catch(p){a=!0,c=p}finally{try{o||null==d.return||d.return()}finally{if(a)throw c}}this.decorations=i.finish()}),{decorations:function(e){return e.decorations}}),i=u.QQ.define({create:function(){return d.p.none},update:function(e,t){var n=!0,r=!1,i=void 0;try{for(var o,a=t.effects[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;if(l.is(m))return l.value}}catch(c){r=!0,i=c}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t.docChanged?e.map(t.changes):e},provide:function(e){return d.tk.decorations.from(e)}});return[h,r,i]}var b=function(){var e=function(e,t){return d.tk.domEventHandlers({scroll:function(n,r){if(r===e&&n.target){var i=n.target;if(i.scrollTop){var o=i.scrollTop;t.scrollDOM.scrollTo({top:o})}}}})},t=new u.F6,n=new u.F6;return{extensions:function(){return{right:t.of([]),left:n.of([])}},setup:function(r,i){r.dispatch({effects:n.reconfigure(e(r,i))}),i.dispatch({effects:t.reconfigure(e(i,r))})}}},w=n(12922),x=n(59496),C=n(51274),k=n(83177),S=n(20345),E=b(),T=E.extensions,R=E.setup;function _(e){var t=e.left,n=e.right,a=t.code,l=(0,i.Z)(t,["code"]),c=n.code,s=(0,i.Z)(n,["code"]),d=(0,C.Z)((0,r.Z)({readOnly:!0,lineWrapping:!1,initialDoc:a,extensions:[T().left]},l)),h=d.view,g=d.ref,b=(0,C.Z)((0,r.Z)({readOnly:!0,lineWrapping:!1,initialDoc:c,extensions:[T().right]},s)),w=b.view,k=b.ref,S=(0,o.Z)(x.useState(!1),2),E=S[0],_=S[1],I=(0,o.Z)(x.useState(!1),2),G=I[0],D=I[1];return x.useEffect((function(){if(h&&w&&E&&G){var e=setTimeout((function(){R(h,w),function(e,t){var n=(0,f.Bz)(e.state.doc.sliceString(0),t.state.doc.sliceString(0));e.dispatch({effects:[u.Py.appendConfig.of(y({coloredLines:n.leftColored.sort((function(e,t){return e-t})),colorDecoration:v})),m.of(Z(n.leftPadded))]}),t.dispatch({effects:[u.Py.appendConfig.of(y({coloredLines:n.rightColored.sort((function(e,t){return e-t})),colorDecoration:p})),m.of(Z(n.rightPadded))]})}(h,w)}));return function(){return clearTimeout(e)}}}),[h,w,E,G]),x.useEffect((function(){h&&(h.dispatch({changes:{from:0,to:h.state.doc.length,insert:a}}),_(!0))}),[a,h]),x.useEffect((function(){w&&(w.dispatch({changes:{from:0,to:w.state.doc.length,insert:c}}),D(!0))}),[c,w]),{left:{view:h,ref:g,code:a,options:l,ready:E},right:{view:w,ref:k,code:c,options:s,ready:G}}}function I(e){var t,n=e.diffViewer,o=(0,i.Z)(e,["diffViewer"]),l=(0,w.P)({controlName:"flag-use-new-code-rendering"}),c=(0,r.Z)({},n.options,o);return(0,a.BX)(a.HY,{children:[(0,a.tZ)("div",{css:{height:n.ready?0:"auto"},ref:n.ref}),!n.ready&&(l?(0,a.tZ)(S.Z,{code:n.code,language:c.language,filePath:c.filePath,lineNumbers:!c.hideGutter,fontSize:c.fontSize}):(0,a.tZ)(k.PH,(0,r.Z)({code:null!==(t=n.code)&&void 0!==t?t:""},c)))]})}},80469:function(e,t,n){n.d(t,{Bz:function(){return v},PO:function(){return m}});var r=n(66091),i=n(2272),o=n(96583),a=n(85386),l=n.n(a),c=l().DIFF_DELETE,s=l().DIFF_INSERT,u=l().DIFF_EQUAL;function d(e,t){var n=new(l()),r=n.diff_linesToChars_(e,t),i=r.chars1,o=r.chars2,a=r.lineArray,c=n.diff_main(i,o,!1);return n.diff_charsToLines_(c,a),c}function f(e){return e.split("\n").length-1}function h(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0===t)return 0;var r=e.indexOf("\n",n);return-1===r?null:1===t?r+1:h(e,t-1,r+1)}function p(e,t,n){if(e>0){var r=h(n,t);if(null!==r)return{lineNumber:t,character:r,padding:e}}return null}function v(e,t){for(var n,r,o=d(e+((n="\n"===e[e.length-1])?"":"\n"),t+((r="\n"===t[t.length-1])?"":"\n")),a=0,l=0,h=[],v=[],m=[],g=[],Z=0,y=0,b=0;b<o.length;b++){var w=(0,i.Z)(o[b],2),x=w[0],C=f(w[1]);switch(x){case c:var k,S=(0,i.Z)(null!==(k=o[b+1])&&void 0!==k?k:[],2),E=S[0],T=S[1];a+=C;for(var R=0;R<C;R++)h.push(a-R);var _=C;E===s&&(_-=f(T));var I=p(_,l,t);I&&g.push(I);break;case s:var G,D=(0,i.Z)(null!==(G=o[b-1])&&void 0!==G?G:[],2),P=D[0],B=D[1];l+=C;for(var U=0;U<C;U++)v.push(l-U);var A=C;P===c&&(A-=f(B));var N=p(A,a,e);N&&m.push(N);break;case u:l>y&&(y=l),a>Z&&(Z=a),a+=C,l+=C}}var L=m.filter((function(e){return e.lineNumber<y})),X=g.filter((function(e){return e.lineNumber<Z}));return{leftPadded:L,rightPadded:X,leftColored:h,rightColored:v,changedTrailingNewline:n!==r,leftTrailingNewline:n,rightTrailingNewline:r}}var m=function(){function e(t,n){(0,r.Z)(this,e),this.deleted=new Set,this.inserted=new Map,this.linePositions=new Map,this.lineLengths=new Map,this.currentTrailingNewline="\n"===t[t.length-1],this.otherTrailingNewline="\n"===n[n.length-1],this.changedTrailingNewline=this.currentTrailingNewline!==this.otherTrailingNewline;var o=d(t,n),a=[],l=!0,f=!1,h=void 0;try{for(var p,v=o[Symbol.iterator]();!(l=(p=v.next()).done);l=!0){var m=(0,i.Z)(p.value,2),g=m[0],Z=m[1].split("\n");""===Z[Z.length-1]&&Z.pop();var y=!0,b=!1,w=void 0;try{for(var x,C=Z[Symbol.iterator]();!(y=(x=C.next()).done);y=!0){var k=x.value;a.push([g,k])}}catch(L){b=!0,w=L}finally{try{y||null==C.return||C.return()}finally{if(b)throw w}}}}catch(L){f=!0,h=L}finally{try{l||null==v.return||v.return()}finally{if(f)throw h}}this.currentTrailingNewline&&!this.otherTrailingNewline?a.push([c,""]):!this.currentTrailingNewline&&this.otherTrailingNewline?a.push([s,""]):this.currentTrailingNewline&&this.otherTrailingNewline&&a.push([u,""]);var S=1,E=0,T=1,R=!0,_=!1,I=void 0;try{for(var G,D=a[Symbol.iterator]();!(R=(G=D.next()).done);R=!0){var P=(0,i.Z)(G.value,2),B=P[0],U=P[1];switch(B){case c:this.linePositions.set(S,E),this.lineLengths.set(S,U.length),this.deleted.add(S),E+=U.length+1,S++;break;case s:var A=S-1,N=this.inserted.get(A);N||(N=[],this.inserted.set(A,N)),N.push({number:T,content:U}),T++;break;case u:this.linePositions.set(S,E),this.lineLengths.set(S,U.length),E+=U.length+1,S++,T++}}}catch(L){_=!0,I=L}finally{try{R||null==D.return||D.return()}finally{if(_)throw I}}}var t=e.prototype;return t.startInsertions=function(){var e=this.inserted.get(0);return e&&0!==e.length?e:null},t.lineIsDeleted=function(e){return this.deleted.has(e)},t.lineInsertions=function(e){var t=this.inserted.get(e);return t&&0!==t.length?t:null},t.lineInsertedContent=function(e){var t=this.lineInsertions(e);return t?t.map((function(e){return e.content})).join("\n"):null},t.offsetFor=function(e){var t,n,r=0;r+=null!==(n=null===(t=this.inserted.get(0))||void 0===t?void 0:t.length)&&void 0!==n?n:0;for(var i=1;i<e;i++){this.lineIsDeleted(i)&&r--;var o=this.lineInsertions(i);o&&(r+=o.length)}return r},t.linePosition=function(e){var t;return null!==(t=this.linePositions.get(e))&&void 0!==t?t:null},t.lineLength=function(e){var t;return null!==(t=this.lineLengths.get(e))&&void 0!==t?t:null},t.line=function(e){var t=this.linePosition(e),n=this.lineLength(e);return null===t||null===n?null:{number:e,from:t,to:t+n,length:n,offset:this.offsetFor(e),isDeleted:this.lineIsDeleted(e),insertions:this.lineInsertions(e)}},t.lines=function(){var e,t,n,r,a,l,c,s,u;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:e=!0,t=!1,n=void 0,o.label=1;case 1:o.trys.push([1,6,7,8]),r=this.linePositions[Symbol.iterator](),o.label=2;case 2:if(e=(a=r.next()).done)return[3,5];if(l=(0,i.Z)(a.value,1),c=l[0],!(s=this.line(c)))throw new Error("line should not be null");return[4,s];case 3:o.sent(),o.label=4;case 4:return e=!0,[3,2];case 5:return[3,8];case 6:return u=o.sent(),t=!0,n=u,[3,8];case 7:try{e||null==r.return||r.return()}finally{if(t)throw n}return[7];case 8:return[2]}}))},e}()},43758:function(e,t,n){n.d(t,{v:function(){return h}});var r=n(56580),i=n(21477),o=n(67192),a=n(72006),l=n(43119),c=n(71440),s=n(53486);function u(){var e=(0,l.Z)(['\n  query ChatEngine {\n    currentUser {\n      id\n      defaultEngine: gateVariation(feature: "flag-ghostwriter-chat-engine")\n      hasOverride: gate(feature: "flag-ghostwriter-chat-engine-override")\n    }\n  }\n']);return u=function(){return e},e}var d={},f=(0,c.Ps)(u());function h(){var e,t,n,l=(0,r.Z)().preferences,c=function(e){var t=(0,a.Z)({},d,e);return s.a(f,t)}().data,u=null===c||void 0===c||null===(e=c.currentUser)||void 0===e?void 0:e.hasOverride,h=null===l||void 0===l?void 0:l.chatEngine;return u&&h&&(0,i.uL)(h)?h:null!==(n=null===c||void 0===c||null===(t=c.currentUser)||void 0===t?void 0:t.defaultEngine)&&void 0!==n?n:o.Fp}},51832:function(e,t,n){n.d(t,{B2:function(){return s},NX:function(){return f},PE:function(){return u},PY:function(){return d},Pz:function(){return l},_7:function(){return c},co:function(){return r},ed:function(){return o},jr:function(){return i},vq:function(){return a}});var r=225,i=4,o=4e3,a=100,l=125,c=30,s=[50,1200],u=new Set(["bash","c","css","c#","c++","go","java","javascript","php","python","ruby","rust","typescript","svelte","html","r","sql","perl","json","yaml","toml","xml"]),d="self-hosted-large",f=new Set(["python"])},12791:function(e,t,n){n.d(t,{L:function(){return h}});var r=n(56580),i=n(34870),o=n(51832),a=n(72006),l=n(43119),c=n(71440),s=n(53486);function u(){var e=(0,l.Z)(['\n  query CompleteCodeEngine {\n    currentUser {\n      id\n      defaultEngine: gateVariation(feature: "flag-ghostwriter-complete-engine")\n      hasOverride: gate(feature: "flag-code-suggestion-engine")\n    }\n  }\n']);return u=function(){return e},e}var d={},f=(0,c.Ps)(u());function h(){var e,t,n,l=(0,r.Z)().preferences,c=function(e){var t=(0,a.Z)({},d,e);return s.a(f,t)}().data,u=null===l||void 0===l?void 0:l.completeCodeEngine;if(u&&(null===c||void 0===c||null===(e=c.currentUser)||void 0===e?void 0:e.hasOverride)&&i.v.has(u))return{engine:u,settings:i.U[u]};var h=null!==(n=null===c||void 0===c||null===(t=c.currentUser)||void 0===t?void 0:t.defaultEngine)&&void 0!==n?n:o.PY;return{engine:h,settings:i.U[h]}}},7955:function(e,t,n){function r(e){return e.split("").reverse().join("")}function i(e){if(!e[0]||1===e.length)return e[0]||"";for(var t=0;e[0][t]&&e.every((function(n){return n[t]===e[0][t]}));)t++;return e[0].substring(0,t)}function o(e){return r(i(e.map(r)))}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(e.length<1)return{halt:!1};for(var i=e[e.length-1],o=null!==r?i.split(r):e,a=1;a<=n;a++){var l=!1;if(o.length<a+t)break;for(var c=t;c>0;c--)if(o[o.length-c]!==o[o.length-c-a]){l=!0;break}if(!l)return{halt:!0,truncateLine:e.length-1}}return{halt:!1}}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;if(e.length<t)return{halt:!1};if(e[e.length-1].trim().length<n)return{halt:!1};var r=e[e.length-1]===e[e.length-t-1];return r?{halt:!0,truncateLine:e.length-t}:{halt:!1}}n.d(t,{cx:function(){return g},Hy:function(){return v}});var c=function(e,t){return e.length<t.length},s=function(e,t){var n=""===e?1:parseInt(e,10),r=parseInt(t,10);return!isNaN(n)&&!isNaN(r)&&n+1===r};function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:c,l=e;if(l.length<t)return{halt:!1};var s=l.slice(-1*t),u=i(s),d=o(s);if(u.length<n||d.length<r)return{halt:!1};for(var f=null,h=0;h<t;h++){var p=s[h].substring(u.length),v=p.substring(0,p.length-d.length);if(f&&!a(f,v))return{halt:!1};f=v}return{halt:!0,truncateLine:l.length-t}}var d=n(92555),f=n(77363);function h(e,t){return e.filter((function(e){return!function(e,t){var n=(0,d.LX)(t);return!!e.startsWith(n)||!!e.startsWith((0,f.Z)(t,"Language: "))||!!e.startsWith((0,f.Z)(t,"Path: "))}(e,t)}))}var p=[function(e){return function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=1;r<t;r++){var i=l(e,r,n);if(i.halt)return i}return{halt:!1}}(e,8,3)},function(e){return u(e,3,6,3,c)},function(e){return u(e,3,6,1,s)},function(e){return a(e,12,12," ")},function(e){return a(e,8,16,"")}];function v(e,t){return{replacementSuggestion:h(e.split("\n"),t).join("\n")}}var m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p;return function(t){for(var n=t.split("\n"),r=n.slice(0,-1),i=0;i<e.length;i++){var o=e[i](n);if(o.halt)return{haltAfter:!0,replacementSuggestion:n.slice(0,o.truncateLine).join("\n")};var a=e[i](r);if(a.halt)return{haltAfter:!0,replacementSuggestion:r.slice(0,a.truncateLine).join("\n")}}return{haltAfter:!1}}}();function g(e){return m(e)}},63110:function(e,t,n){var r=n(66693).q6.define();t.Z=r},99706:function(e,t,n){n.d(t,{X:function(){return u},f:function(){return a}});var r=n(9970),i=n(28879),o=n(34899),a=new Set(["Body","Block","FunctionDeclaration","ClassBody","CatchClause"]),l=new Set((0,r.Z)(a).concat(["ArgList","ArrayPattern","ArrayExpression","ForSpec","FormalParameters","ParamList","ParenthesizedExpression","String","JSXAttributeValue","JSXEndTag","JSXEscape","JSXOpenTag","ObjectExpression","ObjectPattern","ImportGroup","ExportGroup","TemplateString","TypeParamList","ArgumentList","ArrayInitializer","Dimension","InferredParameters","TypeParameters","CompoundStatement","LambdaCaptureSpecifier","ParameterList","PropertyName","SystemLibString","FieldDeclarationList"]));function c(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(l.has(t.type.name)){var r={from:t.to-1,to:t.to},i=e.sliceString(r.from,r.to);if(!o.T.has(i))return;return{start:{from:t.from,to:t.from+1},end:r,bracket:i}}if(n){var a=t.parent();if(a)return c(e,t)}}var s=new Set(["(","[","{","<","`",'"',"'"]);function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.selection.main.head,n=e.doc.sliceString(t-1,t),r=(0,i.qz)(e),o=c(e.doc,r.cursorAt(t),!s.has(n));if(o)return o;var a=(0,i.Um)(e,t-1,1);return(null===a||void 0===a?void 0:a.end)?{start:a.start,end:a.end,bracket:e.doc.sliceString(a.end.from,a.end.to)}:void 0}},34899:function(e,t,n){n.d(t,{T:function(){return r}});var r=new Set(['"',")","}","]",";",">","'","`"])},14176:function(e,t,n){n.d(t,{R3:function(){return a},dp:function(){return l},he:function(){return i},t8:function(){return o}});var r=n(66693),i=r.Py.define(),o=r.Py.define(),a=r.Py.define(),l=r.Py.define()},48074:function(e,t,n){n.d(t,{G0:function(){return B},yn:function(){return T},gT:function(){return P},_n:function(){return D},$o:function(){return I}});var r=n(66693),i=n(24263),o=n(86925),a=n(58530),l=n(14176),c=n(66091),s=n(57988),u=n(72006),d=n(4405),f=n(77637),h=n(5683),p=n(45347);function v(e,t){var n=new m(e);return{widget:n,range:o.p.widget({widget:n,side:1}).range(t)}}var m=function(e){(0,h.Z)(n,e);var t=(0,p.Z)(n);function n(e){var r;return(0,c.Z)(this,n),(r=t.call(this)).code=e,r}var r=n.prototype;return r.hide=function(){this.dom&&(this.dom.style.display="none")},r.toDOM=function(){var e=document.createElement("span");return e.className="gray-text",e.dataset.cy="ghost-text-line",this.updateDOM(e),e},r.updateDOM=function(e){if(this.dom=e,e.style.display="",e.innerText=this.code,!e.childNodes.length||"BR"!==e.childNodes[0].nodeName)return!0;var t=new Set,n=!0,r=!1,i=void 0;try{for(var o,a=e.childNodes[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;if(l.nodeType===Node.TEXT_NODE){var c=document.createElement("span");t.add(c),c.textContent=l.nodeValue,l.replaceWith(c)}}}catch(s){r=!0,i=s}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return!0},r.ignoreEvent=function(){return!1},n}(o.l9),g=n(11474),Z=n(99706),y=n(28879),b=n(34899),w=n(51832),x=function(){function e(t){(0,c.Z)(this,e),Object.assign(this,t)}return e.prototype.update=function(t){return new e((0,u.Z)({},this,t))},e}(),C=function(){function e(t){(0,c.Z)(this,e),Object.assign(this,t)}var t=e.prototype;return t.updateOnInput=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.selection.main.head,r=this,i=r.activeTextIndex,o=r.activeTextCursor,a=r.activeText,l=a.text.slice(o);if(a.text[o]===t[0]&&["()","[]","{}",'""',"''"].includes(t)){var c=t[1],s=e.update({changes:{from:n,insert:a.text.slice(o)}}),u=s.state,d=(0,Z.X)(u,n+1);if(!(null===d||void 0===d?void 0:d.end))return null;var f=d.end.to-a.startPos,h=[new x({text:a.text.slice(0,f-1),endBracket:c,startPos:a.startPos}),new x({text:a.text.slice(f),startPos:n+t.length,endBracket:a.endBracket})];return this.updateCursor((function(e){return e+1})).updateTexts((function(e,n){return n===i?h:n>i?e.update({startPos:e.startPos+t.length}):e}))}return l.startsWith(t)?this.updateCursor((function(e){return e+t.length})).updateTexts((function(e,n){return n>i?e.update({startPos:e.startPos+t.length}):e})):t?null:this},t.containsCursor=function(e){var t=this.activeText.startPos,n=t+this.activeTextCursor;return e>=t&&e<=n},t.update=function(t){return new e((0,u.Z)({},this,t))},t.updateCursor=function(e){return this.update({activeTextCursor:e(this.activeTextCursor)})},t.updateTexts=function(t){return e.of((0,d.Z)((0,u.Z)({},this),{texts:this.texts.flatMap(t).filter(Boolean)}))},t.asEffect=function(){return e.set.of(this)},t.asSpec=function(){return{effects:[this.asEffect()]}},t.asDecoration=function(){var e=this;return this.texts.map((function(t,n){var r=t.text,i=t.startPos;return n<e.activeTextIndex||!r?null:n===e.activeTextIndex?v(r.slice(e.activeTextCursor),i+e.activeTextCursor):v(r,i)})).filter(Boolean)},e.of=function(t){var n=t.texts,r=t.activeTextIndex,i=(0,f.Z)(t,["texts","activeTextIndex"]);return n=n.filter((function(e){return e.text.length})),r=Math.min(r,n.length-1),n.length?new e((0,d.Z)((0,u.Z)({},i),{texts:n,activeTextIndex:r})):null},e.fromCodeSuggestion=function(t){var n=t.inherits,r=t.editorState,i=t.codeSuggestion,o=t.cursor,a=void 0===o?r.selection.main.head:o,l=(0,u.Z)({activeTextCursor:0,activeTextIndex:0,complete:!1},n),c=(0,g._)(r,i,{excludeEndBracket:w.NX.has(l.language)});if(l.infill)return e.of((0,d.Z)((0,u.Z)({},l),{source:i,texts:[new x({text:c,startPos:a})]}));var s=e.of((0,d.Z)((0,u.Z)({},l),{source:i,texts:[new x({text:c,startPos:a})]})),f=(0,Z.X)(r,a);if(!f)return s;var h=r.update({changes:{from:a,to:r.doc.length,insert:c}}).state,p=function(){var e=(0,y.Um)(h,f.start.from,1);if(['"',"'"].includes(f.bracket)&&!(null===e||void 0===e?void 0:e.end)){var t=function(e,t){var n=-1;for(;-1!==(n=e.indexOf(t,n+1));)if("\\"!==e[n-1])return n;return-1}(h.sliceDoc(a),f.bracket);return-1===t?void 0:{from:a+t,to:a+t+1}}return null===e||void 0===e?void 0:e.end}();if(!p)return s;var v=p.from-a;if(c.length===v+f.bracket.length)return e.of((0,d.Z)((0,u.Z)({},l),{source:i,texts:[new x({text:c.slice(0,v).trimEnd(),startPos:a,endBracket:f.bracket})]}));for(var m=c.slice(v),C=f.end.to-1;C<r.doc.length;C++){if(r.sliceDoc(C,C+1)!==m[0])break;m=m.slice(1)}var k=r.sliceDoc(C,C+1);if(b.T.has(k)){var S=m.indexOf(k);-1!==S&&(m=m.slice(0,S))}var E=[new x({text:c.slice(0,v),startPos:a,endBracket:f.bracket}),new x({text:m,startPos:C})];return r.doc.lineAt(C).number-r.doc.lineAt(a).number>3&&E.pop(),E[0].text.trim().length?e.of((0,d.Z)((0,u.Z)({},l),{source:i,texts:E})):null},(0,s.Z)(e,[{key:"activeText",get:function(){return this.texts[this.activeTextIndex]}}]),e}();C.set=r.Py.define(),C.clearState=C.set.of(null);var k=n(63110),S=o.tk.baseTheme({".gray-text":{color:a.TV.foregroundDimmer,opacity:.75}}),E=new WeakMap,T=r.QQ.define({create:function(){return null},update:function(e,t){var n=!0,r=!1,i=void 0;try{for(var o,a=t.effects[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var c=o.value;c.is(C.set)?e=c.value:c.is(l.t8)?e=null==c.value?null:C.fromCodeSuggestion({editorState:t.state,codeSuggestion:c.value.code,inherits:{infill:c.value.infill,language:c.value.language}}):c.is(l.R3)?e=(null===e||void 0===e?void 0:e.source)?C.fromCodeSuggestion({inherits:e,editorState:t.state,codeSuggestion:e.source+c.value,cursor:e.texts[0].startPos}):null:c.is(l.dp)&&e&&(e=e.update({complete:c.value}))}}catch(s){r=!0,i=s}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return e},provide:function(e){return o.tk.decorations.from(e,(function(e){return function(t){var n,r;null===(n=E.get(t))||void 0===n||n.forEach((function(e){return e.hide()}));var i=null!==(r=null===e||void 0===e?void 0:e.asDecoration())&&void 0!==r?r:[];return E.set(t,i.map((function(e){return e.widget}))),i.length?o.p.set(i.map((function(e){return e.range})).sort((function(e,t){return e.from-t.from}))):o.p.none}}))}}),R=o.tk.updateListener.of((function(e){var t=e.view,n=t.state.field(T),r=e.state.selection.main;r.empty&&(null===n||void 0===n?void 0:n.containsCursor(r.head))||(e.docChanged?t.dispatch({effects:[C.set.of(null),l.he.of((0,i.G)(t.state,e.changes))]}):e.selectionSet&&t.dispatch({effects:[C.set.of(null),l.he.of(i.z.Stop)]}))})),_=r.yy.transactionExtender.of((function(e){var t=[];if(e.isUserEvent("delete.backward")){var n=e.startState.field(T);if(!n)return null;t.push(C.set.of(function(e){var t=e.activeTextCursor,n=e.activeTextIndex,r=e.texts;return t>0?e.updateCursor((function(e){return e-1})).updateTexts((function(e,t){return t>n?e.update({startPos:e.startPos-1}):e})):0===n?null:e.update({activeTextIndex:n-1,activeTextCursor:e.texts[e.activeTextIndex-1].text.length}).updateTexts((function(e,t){return t<n-1?e:t===n-1?e.update({text:e.text+(e.endBracket||"")+r[n].text,endBracket:r[n].endBracket}):t===n?null:e.update({startPos:e.startPos-1})}))}(n)))}else if(e.isUserEvent("input")){var o=e.startState.field(T);if(!o)return null;e.changes.iterChanges((function(n,r,a,c,s){if(o){var u=o.updateOnInput(e.state,s.toString(),a);u!==o?(t.push(C.set.of(u)),o=u):null===u&&(t.push(C.clearState,l.he.of(i.z.Enqueue)),o=null)}}))}else e.docChanged&&!e.annotation(r.YW.remote)&&t.push(C.clearState);return(t=t.filter(Boolean)).length?{effects:t}:null})),I=function(e){var t=e.state.field(T);if(!t)return!1;t.complete||e.dispatch({effects:l.he.of(i.z.Stop)});var n=t.activeTextCursor,r=t.activeTextIndex,o=t.texts,a=e.state.changes(o.map((function(e,t){return t<r?null:t===r?{from:e.startPos+n,insert:e.text.slice(n)}:{from:e.startPos,insert:e.text}})).filter(Boolean)),c=0;return a.iterChangedRanges((function(e,t,n,r){c=r})),e.dispatch({changes:a,selection:{anchor:c},scrollIntoView:!0,sequential:!0,effects:l.t8.of(null),annotations:k.Z.of(!0)}),!0},G=o.tk.inputHandler.of((function(e,t,n,r){var i=e.state.field(T);if(!i)return!1;var o=i.activeTextIndex,a=i.activeTextCursor,l=i.texts[o];if(l.text.length===a&&r===l.endBracket){var c=i.update({activeTextCursor:0,activeTextIndex:o+1});e.dispatch({effects:c.activeTextIndex>=c.texts.length?C.clearState:c.asEffect()})}return!1})),D=function(e){var t=e.state,n=e.dispatch,r=t.field(T);return!!r&&(n(t.update({effects:[l.t8.of(null),!r.complete&&l.he.of(i.z.Stop)].filter(Boolean)})),!0)},P=function(e){var t=e.state,n=e.dispatch,r=t.field(T);if(!r)return!1;var i=r.activeTextIndex,o=r.activeTextCursor,a=r.texts;if(!a[i])return!1;var l=a[i].text.slice(o).match(/^\n\s*/);return!!l&&(n(t.update(t.replaceSelection(l[0]),r.updateCursor((function(e){return e+l[0].length})).updateTexts((function(e,t){return t>i?e.update({startPos:e.startPos+l[0].length}):e})).asSpec())),!0)};function B(){return[R,_,T,S,r.Wl.high(G)]}},11474:function(e,t,n){n.d(t,{_:function(){return d},i:function(){return s}});var r=n(66091),i=n(57988),o=n(28879),a=n(99706),l=n(7955);function c(e){var t;return(null===(t=e.match(/^\s*/))||void 0===t?void 0:t[0].length)||0}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.selection.main.head,n=(0,o.qz)(e).resolveInner(t);return!!a.f.has(n.type.name)&&!e.sliceDoc(n.from+1,n.to-1).trim().length}var u=function(){function e(t,n,i){(0,r.Z)(this,e),this.state=t,this.suggestion=n,this.options=i}var t=e.prototype;return t.cutAtFirstLine=function(){return(this.suggestion+"\n").slice(0,this.suggestion.indexOf("\n"))},t.cutSuggestion=function(){var e,t;return s(this.state)?null!==(e=this.findLineWithLowerIndent())&&void 0!==e?e:this.suggestion:this.state.doc.sliceString(this.currentLine.from,this.cursorPos).trim().length?this.cutAtFirstLine():null!==(t=this.findLineWithLowerIndent())&&void 0!==t?t:this.cutAtFirstLine()},t.findLineWithLowerIndent=function(){var e=this.currentIndent,t=this.suggestion,n=t.split("\n").map((function(e,t,n){return e+(t===n.length-1?"":"\n")})),r=n.findIndex((function(t,n){return n>0&&c(t)<e||0===n&&/^\s*[)\]};]+\n?$/.test(t)}));if(-1!==r)return r===n.length-1?t:n.slice(0,r+(this.options.excludeEndBracket?0:1)).join("").slice(0,-1)},(0,i.Z)(e,[{key:"cursorPos",get:function(){return this.state.selection.main.head}},{key:"currentLine",get:function(){return this.state.doc.lineAt(this.cursorPos)}},{key:"currentIndent",get:function(){return c(this.currentLine.text)}}]),e}();function d(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r="";t=t.trimEnd().replace(/^\n*/,(function(e){return r=e,""})),r&&0===e.doc.lineAt(e.selection.main.head).text.length&&(r=r.slice(1));var i=new u(e,t,n).cutSuggestion().trimEnd(),o=(0,l.cx)(i).replacementSuggestion,a=i;return o&&(a=o),a?r+a:""}},24263:function(e,t,n){var r;function i(e,t){var n=e.doc.lineAt(e.selection.main.head);if(e.doc.sliceString(e.selection.main.head,n.to).replace(/[\s)\]}"'`]/g,"").length)return r.Stop;var i="";return t.iterChanges((function(e,t,n,r,o){i=o.toString()})),i?[":","(","[","{",'"',"'"].includes(i[0])?r.Now:r.Enqueue:r.Stop}n.d(t,{G:function(){return i},z:function(){return r}}),function(e){e[e.Stop=0]="Stop",e[e.Enqueue=1]="Enqueue",e[e.Now=2]="Now"}(r||(r={}))},36340:function(e,t,n){n.d(t,{Z:function(){return ye},S:function(){return Ze}});var r=n(88733),i=n(73012),o=n(11858),a=n(96583),l=n(94148),c=n(56580),s=n(79351),u=n(28609),d=n(51954),f=n(12018),h=n(56579),p=n(11279),v=n(59496),m=n(16345),g=n(66091),Z=n(57988),y=function e(t,n){(0,g.Z)(this,e),this.next=null,this.prev=null,this.key=t,this.data=n},b=function(){function e(){(0,g.Z)(this,e),this.size_=0,this.head=null,this.tail=null}var t=e.prototype;return t.addFront=function(e){this.tail||(this.tail=e),this.head&&(this.head.prev=e),e.next=this.head,this.head=e,this.size_++},t.popBack=function(){if(!this.tail)return null;var e=this.tail;return this.tail=e.prev,this.size_--,e.prev&&(e.prev.next=null,e.prev=null),e},t.moveToFront=function(e){this.head!==e&&(this.tail===e&&(this.tail=e.prev),e.next&&(e.next.prev=e.prev,e.next=null),e.prev&&(e.prev.next=e.next,e.prev=null),this.size_--,this.addFront(e))},(0,Z.Z)(e,[{key:"size",get:function(){return this.size_}}]),e}(),w=function(){function e(t){(0,g.Z)(this,e),this.items=Object.create(null),this.evictList=new b,this.maxSize=t}var t=e.prototype;return t.update=function(e,t){var n=this.items[e];if(n)return this.evictList.moveToFront(n),n.data=t(n.data),n.data;for(;this.evictList.size>=this.maxSize;){var r=this.evictList.popBack();if(!r)throw new Error("invariant violation: could not pop back of the list");delete this.items[r.key]}var i=new y(e,t());return this.evictList.addFront(i),this.items[e]=i,i.data},t.getOrAdd=function(e,t){return this.update(e,(function(e){return null!==e&&void 0!==e?e:t}))},t.set=function(e,t){this.update(e,(function(){return t}))},t.get=function(e){var t=this.items[e];return t?t.data:null},t.has=function(e){return e in this.items},(0,Z.Z)(e,[{key:"size",get:function(){return this.evictList.size}}]),e}(),x=n(51832),C=function(){function e(){(0,g.Z)(this,e),this.cache=new w(x.vq)}var t=e.prototype;return t.has=function(e){return this.cache.has(e)},t.get=function(e){return this.cache.get(e)},t.set=function(e,t){this.cache.set(e,t)},t.setSuggestion=function(e,t){this.cache.set(e,JSON.stringify({text:t})+"\n")},e}(),k=n(57135),S=n(72006),E=n(4405),T=n(88254),R=n(86925),_=n(66693),I=n(28879),G=n(86763),D=n.n(G),P=n(10063);var B=n(12165),U=n(37180);function A(e){var t=e.onComplete,n=e.onEscape,r=null,i=null;return R.tk.domEventHandlers({touchstart:function(e){i=null,r=e.targetTouches[0].clientX},touchmove:function(e){i=e.targetTouches[0].clientX},touchend:function(e,o){if(r&&i)return r-i<-50&&t(o),n(o),!0}})}var N,L=n(48074),X=n(24263),M=n(14176),O=n(11474),W=n(2272),F=n(94660),j=n(34621),z=n(23442),H=n(99340),V=n(26936),q=n(58530),$=n(58868),Y=function(e){var t=e.onClose,n=(0,H.Z)(),r=n.showNotice,i=n.hideMessage,o=(0,W.Z)(v.useState(!1),2),a=o[0],l=o[1];return(0,v.useEffect)((function(){var e=function(){l(!0),i(t)},t=r((0,F.BX)(q.G7,{css:[q.l0.rowWithGap(4),q.l0.align.center],children:[(0,F.tZ)($.Info,{}),(0,F.BX)(q.xv,{css:{fontSize:"calc(".concat(q.TV.fontSizeSubheadDefault," - 1px)"),"@media (max-width: 768px)":q.l0.fontSize(14)},children:["Thanks for trying Ghostwriter!",(0,F.tZ)("a",{role:"button",tabIndex:0,css:{color:"inherit",textDecoration:"underline",marginLeft:"3px"},onKeyPress:function(t){"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),e())},onClick:function(t){t.preventDefault(),e()},children:"Give feedback"})]})]}),0,{color:q.TV.accentPrimaryStrongest,fontWeight:q.TV.fontWeightRegular})}),[i,r,t]),(0,F.tZ)(z.b5,{children:(0,F.tZ)(q.u_,{isOpen:a,onRequestClose:function(){l(!1)},children:(0,F.tZ)(j.Z,{setFeedbackFormOpen:l,feature:j.l.GhostWriter})})})};!function(e){e.Acceptance="ghostWriter.acceptance",e.Rejection="ghostWriter.rejection"}(N||(N={}));var K=n(49500);function Q(e){var t=e.language,n=e.infill,i=e.completeCode,o=e.decorations,l=e.metadata,c=function(){var e;return{abort:function(){null===e||void 0===e||e.abort()},requestSignal:function(){var t=new AbortController;return null===e||void 0===e||e.abort(),e=t,t.signal}}}(),s=null,u=D()(function(){var e=(0,k.Z)((function(e){var o,u,d,f,h,p,v,m,g,Z,y,b,w,C,k,R,_,G,D,U;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:if(u=e.state,d=u.doc,f=u.selection,0===(h=f.main.head))return[2];if(p=d.sliceString(h-1,h),[";",")","}","]","{"].includes(p))return[2];if(!(v=d.sliceString(Math.max(0,h-x.ed),h))||v.length<x.jr)return[2];s=v.length,v=e.state.facet(I.c)+"\n"+v,m=n?function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.split("\n"),r=0;r<n.length;r++){var i=n[r];if(i[0]&&i[0].match(/\S/))return t?n.slice(0,r).join("\n")+"\n":n.slice(0,r+1).join("\n")}return e}(d.sliceString(h),x.NX.has(t)):void 0,g=(0,O.i)(e.state)?x.Pz:x._7,Z=null===(o=v.match(/[^\s]([ \t]+)$/))||void 0===o?void 0:o[1],a.label=1;case 1:a.trys.push([1,14,,15]),y=!0,b=!1,w=!1,a.label=2;case 2:a.trys.push([2,7,8,13]),k=(0,r.Z)(i({code:Z?v.slice(0,-Z.length):v,suffix:m,maxTokens:g,signal:c.requestSignal()})),a.label=3;case 3:return[4,k.next()];case 4:if(!(b=!(R=a.sent()).done))return[3,6];if(_=R.value,G=_,"active"===(0,B.LR)(e.state))return c.abort(),[3,6];if(y&&Z){if(!G.startsWith(Z))return c.abort(),[3,6];G=G.slice(Z.length)}y&&(T.n_({category:"ghostwriter",message:"Suggestion presented",level:"debug"}),(0,P.j)(P.U3.CODE_SUGGESTION_USED,(0,E.Z)((0,S.Z)({type:"suggestionPresented"},l),{prefixLength:s}))),e.dispatch({effects:y?M.t8.of({code:G,language:t,infill:n}):M.R3.of(G)}),y=!1,a.label=5;case 5:return b=!1,[3,3];case 6:return[3,13];case 7:return D=a.sent(),w=!0,C=D,[3,13];case 8:return a.trys.push([8,,11,12]),b&&null!=k.return?[4,k.return()]:[3,10];case 9:a.sent(),a.label=10;case 10:return[3,12];case 11:if(w)throw C;return[7];case 12:return[7];case 13:return!1!==y?(T.n_({category:"ghostwriter",message:"Exited completeCode iteration with no suggestion.",level:"info"}),e.dispatch({effects:M.t8.of(null)}),[2]):(T.n_({category:"ghostwriter",message:"Suggestion completely presented",level:"debug"}),(0,P.j)(P.U3.CODE_SUGGESTION_USED,(0,E.Z)((0,S.Z)({type:"suggestionCompletelyPresented"},l),{prefixLength:s})),e.dispatch({effects:M.dp.of(!0)}),[3,15]);case 14:return"AbortError"===(null===(U=a.sent())||void 0===U?void 0:U.name)?[2]:(T.$e((function(e){e.setExtra("prefix",v),e.setExtra("maxTokens",g),e.setExtra("language",t),e.setExtra("selection-head",h),e.setExtra("previous-character",p),e.setExtras(l),e.setTag("ghostwriter",!0),T.Tb(U)})),K.error("CodeSuggestionExtension"),K.error(U),[3,15]);case 15:return[2]}}))}));return function(t){return e.apply(this,arguments)}}(),x.co),d=function(e){var t=function(){e.update((function(e){return e.delete("feedback")}))},n=function(){var n,r,i=(null!==(n=V.Z.get("ghostWriter.acceptance","number"))&&void 0!==n?n:0)+(null!==(r=V.Z.get("ghostWriter.rejection","number"))&&void 0!==r?r:0);x.B2.includes(i)?e.update((function(e){return e.set("feedback",(0,F.tZ)(Y,{onClose:t}))})):t()};return{recordAccept:function(){V.Z.update("ghostWriter.acceptance","number",(function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)+1})),n()},recordReject:function(){V.Z.update("ghostWriter.rejection","number",(function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)+1})),n()}}}(o),f=function(e){return!!(0,L.$o)(e)&&((0,P.j)(P.U3.CODE_SUGGESTION_USED,(0,E.Z)((0,S.Z)({type:"suggestionAccepted"},l),{prefixLength:s})),T.n_({category:"ghostwriter",message:"Suggestion accepted",level:"info"}),d.recordAccept(),(0,B._B)(e),!0)};return[_.Wl.high(R.$f.of([{key:"Tab",run:f},{key:"Escape",run:function(e){return!!(0,L._n)(e)&&(c.abort(),(0,P.j)(P.U3.CODE_SUGGESTION_USED,(0,E.Z)((0,S.Z)({type:"suggestionDismissed"},l),{prefixLength:s})),T.n_({category:"ghostwriter",message:"Suggestion explicitly dismissed",level:"info"}),d.recordReject(),!0)}},{key:"Enter",run:L.gT}])),R.tk.domEventHandlers({blur:function(e,t){setTimeout((function(){t.dispatch({effects:M.t8.of(null)})}),100),c.abort()}}),R.tk.updateListener.of((function(e){(0,U.j)(e,M.he,(function(t){var n,r;t.value?(n=e.view,r=t.value,c.abort(),u(n),r===X.z.Now&&u.flush()):c.abort()}))})),(0,L.G0)(),A({onComplete:f,onEscape:L._n})]}var J=n(7955),ee=n(43119),te=n(71440),ne=n(53486);function re(){var e=(0,ee.Z)(['\n  query CompleteCode {\n    currentUser {\n      id\n      userPowerUpsByType {\n        __typename\n        ... on UnauthorizedError {\n          message\n        }\n        ... on UserPowerUpsTypes {\n          ghostwriter {\n            active\n          }\n        }\n      }\n      hasKillswitch: gate(feature: "flag-killswitch-ghostwriter")\n    }\n  }\n']);return re=function(){return e},e}var ie={},oe=(0,te.Ps)(re());var ae=n(12791),le=n(12922),ce=n(1540);function se(e,t,n){var r=(0,m.Sf)(t),i=e.split("\n");return{code:i.slice(Math.max(0,i.length-n)).join("\n"),language:r,filePath:t}}var ue=n(19540);function de(e,t,n){var r=(0,v.useState)([]),i=r[0],o=r[1],l=(0,v.useState)(!1),c=l[0],s=l[1];return(0,v.useEffect)((function(){e&&(s(!0),(0,k.Z)((function(){var r;return(0,a.__generator)(this,(function(i){switch(i.label){case 0:return[4,Promise.all(e.map(function(){var e=(0,k.Z)((function(e){var r,i;return(0,a.__generator)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,n(e)];case 1:return(r=o.sent()).error?[2,!1]:(i=r.content.toString(),[2,t(i,e)]);case 2:return o.sent(),[2,!1];case 3:return[2]}}))}));return function(t){return e.apply(this,arguments)}}()))];case 1:return r=i.sent().filter(Boolean),s(!1),o(r),[2]}}))}))())}),[e,n,t]),{cachedFiles:i,loading:c}}var fe={javascript:["javascript","typescript"],python:["python","python3"],python3:["python","python3"],typescript:["javascript","typescript"]},he=["json"];function pe(e,t){var n=e.toLowerCase(),r=t.toLowerCase();return n===r||(!!he.includes(n)||!!fe[n]&&fe[n].includes(r))}function ve(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6,r=(0,le.P)({controlName:"flag-ghostwriter-neighboring-context"}),i=(0,ue.Bx)(),o=(0,v.useState)(null),a=o[0],l=o[1];return(0,v.useEffect)((function(){l(r?i.filter((function(n){return pe((0,m.Sf)(n),e)&&n!==t&&(0,ce.Mb)(n)})).slice(0,n):null)}),[e,t,r,n,i]),a}var me=n(44674);function ge(){var e,t,n,r=function(e){var t=(0,S.Z)({},ie,e);return ne.a(oe,t)}().data,i=Ze();return!("UserPowerUpsTypes"!==(null===r||void 0===r||null===(e=r.currentUser)||void 0===e||null===(t=e.userPowerUpsByType)||void 0===t?void 0:t.__typename)||!(null===r||void 0===r?void 0:r.currentUser.userPowerUpsByType.ghostwriter.active))&&(!(null===r||void 0===r||null===(n=r.currentUser)||void 0===n?void 0:n.hasKillswitch)&&i)}function Ze(){var e=(0,h.Z)().presence,t=(0,f.Z)({presence:e});return!!(0,le.P)({controlName:"flag-code-suggestion-multiplayer"})||t.length<=1}function ye(e){var t,n=e.filePath,f=e.view,g=e.decorations,Z=(0,s.Z)(),y=(0,m.Sf)(n),b=(0,c.Z)().preferences,w=(0,ae.L)(),S=w.engine,E=null!==(t=w.settings.infill)&&void 0!==t&&t,R=ge(),_=(0,l.Z)({view:f}),I=(0,u.Z)((function(){return new C}),[y,n,Z]);(0,v.useEffect)((function(){p.YX.toggle(Boolean(b.codeSuggestion))}),[b.codeSuggestion]);var G=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:6,i=(0,h.Z)().fs,o=de(ve(e,t,r),(0,v.useCallback)((function(e,t){return se(e,t,n)}),[n]),(0,v.useCallback)(function(){var e=(0,k.Z)((function(e){return(0,a.__generator)(this,(function(t){switch(t.label){case 0:return[4,i.readFile(e)];case 1:return[2,t.sent()]}}))}));return function(t){return e.apply(this,arguments)}}(),[i])).cachedFiles;return null!==o&&void 0!==o?o:[]}(y,n);(0,v.useEffect)((function(){if(f&&R){if(b.codeSuggestion&&x.PE.has(y)){var e=function(){var e=(0,o.Z)((function(e){var t,l,c,s,u,f,h,v,m,g,b,w,x,C,k,R,_,D,P,B,U,A,N,L,X,M,O,W,F,j,z;return(0,a.__generator)(this,(function(H){switch(H.label){case 0:return t=e.code,l=e.suffix,c=e.signal,s=e.maxTokens,t?(T.n_({category:"ghostwriter",message:"Called completeCode: "+S,level:"debug"}),u=d.kg.timeStart({language:y,engine:S,replid:Z,codeLength:t.length}),f={language:y,code:t,suffix:E?l:void 0,replId:Z,filePath:n,engine:S,maxTokens:s,additionalContext:G,stop:["\n\n"]},h=p.YX.add(f),c.addEventListener("abort",(function(){p.YX.abort(h)})),null==(m=I.get(t))?[3,1]:(v=(0,o.Z)((function(){return(0,a.__generator)(this,(function(e){switch(e.label){case 0:return[4,m];case 1:return e.sent(),[2]}}))})),[3,5])):[2];case 1:return[4,(0,i.Z)(fetch("/ai/complete",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},signal:c,body:JSON.stringify(f)}))];case 2:return g=H.sent(),b=g.body,200===(w=g.status)?[3,4]:(x=Error.bind,k=(C="Error (".concat(w,") response from /ai/complete: ")).concat,[4,(0,i.Z)(g.text())]);case 3:throw new(x.apply(Error,[void 0,k.apply(C,[H.sent()])]));case 4:if(!b)throw new Error("No body in response");v=function(){return(0,me.n)(b)},H.label=5;case 5:R="",_="",D=!0,P=!1,B=!1,U=!1,H.label=6;case 6:H.trys.push([6,14,15,20]),N=(0,r.Z)(v()),H.label=7;case 7:return[4,(0,i.Z)(N.next())];case 8:if(!(B=!(L=H.sent()).done))return[3,13];X=L.value,_+=X,M=void 0,H.label=9;case 9:return-1===(M=_.indexOf("\n"))?[3,12]:(O=JSON.parse(_.substring(0,M)),W=O.text,_=_.substring(M+1),F=(0,J.Hy)(W,y),j=F.replacementSuggestion,R+=j,P?[3,11]:[4,j]);case 10:H.sent(),H.label=11;case 11:return D&&(T.n_({category:"ghostwriter",message:"Suggestion emitted: "+j,level:"debug"}),u("code suggestion",{type:"success"}),D=!1),(0,J.cx)(R).haltAfter&&(P=!0),[3,9];case 12:return B=!1,[3,7];case 13:return[3,20];case 14:return z=H.sent(),U=!0,A=z,[3,20];case 15:return H.trys.push([15,,18,19]),B&&null!=N.return?[4,N.return()]:[3,17];case 16:H.sent(),H.label=17;case 17:return[3,19];case 18:if(U)throw A;return[7];case 19:return[7];case 20:return R.trim().length&&!I.has(t)&&I.setSuggestion(t,R),P||!_?[3,22]:[4,_];case 21:H.sent(),H.label=22;case 22:return p.YX.complete(h,{__typename:"CompleteCodeResult",id:Date.now().toString(),code:R}),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),t={filePath:n,language:y,engine:S,additionalContextCount:G.length,additionalContextLength:G.reduce((function(e,t){return e+t.code.length}),0)};return f.dispatch({effects:_.reconfigure(Q({language:y,infill:E,completeCode:e,decorations:g,metadata:t}))}),function(){f.dispatch({effects:_.reconfigure([])})}}T.n_({category:"ghostwriter",message:"Explicitly skipped useCompleteCode effect.",level:"info"})}}),[f,I,R,_,n,y,Z,g,S,b.codeSuggestion,E,G])}},93459:function(e,t,n){n.d(t,{EE:function(){return p},Gj:function(){return a},ZF:function(){return v},_j:function(){return l},f3:function(){return f},fI:function(){return h},gm:function(){return d},yK:function(){return s}});var r=n(2272),i=n(67927),o=n(11214),a={regexp:/-?\b\d+\.?\d*\b/g,cursor:"ew-resize",onDrag:function(e,t,n){var r=Number(e)+n.movementX;isNaN(r)||t(r.toString())}},l={regexp:/true|false/g,cursor:"pointer",onClick:function(e,t){switch(e){case"true":return t("false");case"false":return t("true")}}};function c(e){var t=new RegExp("".concat(e,"\\(-?\\b\\d+\\.?\\d*\\b\\s*(,\\s*-?\\b\\d+\\.?\\d*\\b)?"),"g"),n=new RegExp("".concat(e,"\\((?<x>-?\\b\\d+\\.?\\d*\\b)\\s*(,\\s*(?<y>-?\\b\\d+\\.?\\d*\\b))?"));return{regexp:t,cursor:"move",onDrag:function(t,r,i){var o,a,l=n.exec(t),c=Number(null===l||void 0===l||null===(o=l.groups)||void 0===o?void 0:o.x),s=Number(null===l||void 0===l||null===(a=l.groups)||void 0===a?void 0:a.y);isNaN(c)||(isNaN(s)&&(s=c),r("".concat(e,"(").concat(c+i.movementX,", ").concat(s+i.movementY)))}}}var s=c("vec2");c("ellipse"),c("circle"),c("point"),c("rect"),c("square"),c("vertex");function u(e){var t=new RegExp("".concat(e,"\\(.*\\)"),"g"),n=new RegExp("".concat(e,"\\((?<r>\\d+)\\s*,\\s*(?<g>\\d+)\\s*,\\s*(?<b>\\d+)\\)"));return{regexp:t,cursor:"pointer",onClick:function(t,o){var a,l,c,s=n.exec(t),u=Number(null===s||void 0===s||null===(a=s.groups)||void 0===a?void 0:a.r),d=Number(null===s||void 0===s||null===(l=s.groups)||void 0===l?void 0:l.g),f=Number(null===s||void 0===s||null===(c=s.groups)||void 0===c?void 0:c.b),h=document.createElement("input");h.type="color",isNaN(u+d+f)||(h.value=(0,i.C)(u,d,f)),h.addEventListener("input",(function(t){var n=t.target;if(n.value){var a=(0,r.Z)((0,i.w)(n.value),3),l=a[0],c=a[1],s=a[2];o("".concat(e,"(").concat(l,", ").concat(c,", ").concat(s,")"))}})),h.click()}}}var d=u("rgb"),f=u("background"),h=u("fill"),p=u("stroke"),v={regexp:/https?:\/\/[^\s)"]+/g,cursor:"pointer",onClick:function(e){(0,o.Z)(e)&&window.open(e,"_blank")}}},1165:function(e,t,n){n.d(t,{Fy:function(){return C},Vw:function(){return k}});var r=n(2272),i=n(94660),o=n(29356),a=n.n(o),l=n(59496),c=n(16629),s=n(51274),u=(n(73522),n(97754)),d=n.n(u),f=n(86925),h=n(94565),p=n(19666),v=n(7330),m=n(62687),g=n(70840),Z=n(63463),y=n(39302),b=n(94148),w=n(53967);function x(e){var t=e.height,n=e.loading;return(0,i.BX)("div",{className:a().dynamic([["5a8d0f5b84417a3b",[t]]])+" "+(d()("loader",{loading:n})||""),children:[(0,i.BX)(c.ZP,{viewBox:"0 0 100 36",backgroundColor:v.TV.backgroundHighest,foregroundColor:v.TV.backgroundHigher,children:[(0,i.tZ)("rect",{x:"0",y:"0",rx:"3",ry:"3",width:"4",height:"4",className:a().dynamic([["5a8d0f5b84417a3b",[t]]])}),(0,i.tZ)("rect",{x:"6",y:"0",rx:"2",ry:"2",width:"92",height:"4",className:a().dynamic([["5a8d0f5b84417a3b",[t]]])})]}),(0,i.tZ)(a(),{id:"5a8d0f5b84417a3b",dynamic:[t],children:".loader.__jsx-style-dynamic-selector{padding:var(--space-8);display:none}.loader.loading.__jsx-style-dynamic-selector{height:".concat(t,";display:block}")})]})}function C(e){var t=e.maxHeight,n=e.minHeight,o=e.extensions,c=void 0===o?[]:o,u=e.allowScroll,h=void 0===u||u,p=e.fontSize,m=e.hideGutter,g=e.path,Z=e.snippet,y=e.style,C=e.elevation,k=e.onNavigateToCode,S=(0,s.Z)({hideGutter:m,filePath:g,fontSize:p,readOnly:!0}),E=S.view,T=S.ref,R=(0,r.Z)(l.useState(!1),2),_=R[0],I=R[1],G=l.useRef(v.TV.backgroundDefault),D=(0,b.Z)({view:E});return l.useEffect((function(){if(E&&Z&&g){var e="lines"in Z?Z.lines.join("\n"):Z.doc;E.dispatch({changes:{from:0,to:E.state.doc.length,insert:e},effects:D.reconfigure([(0,f.Eu)({formatNumber:function(e,t){for(var n=String(t.doc.lines).length,r=String(e+Z.startLineNumber-1);n>r.length;)r="\xa0"+r;return r}}),c])});var t,n={root:v.TV.backgroundRoot,higher:v.TV.backgroundHigher,highest:v.TV.backgroundHighest,default:v.TV.backgroundDefault};return G.current=C&&null!==(t=n[C])&&void 0!==t?t:v.TV.backgroundDefault,I(!0),function(){E.dispatch({effects:D.reconfigure([])})}}}),[E,Z,g,D,c,C]),(0,i.BX)("div",{style:y,className:a().dynamic([["7371a85c4a264eca",[t||"10em",n,G.current,G.current]]]),children:[(0,i.tZ)("div",{ref:T,onClick:function(e){if(k&&E){var t=e.clientX,n=e.clientY,r=E.posAtCoords({x:t,y:n}),i=null!==r?(0,w.s)(E.state.doc,r):null;k(i)}},className:a().dynamic([["7371a85c4a264eca",[t||"10em",n,G.current,G.current]]])+" "+(d()("snippet-editor",{"no-scroll":!h,loading:!_})||"")}),(0,i.tZ)(x,{loading:!_,height:t}),(0,i.tZ)(a(),{id:"7371a85c4a264eca",dynamic:[t||"10em",n,G.current,G.current],children:".snippet-editor.__jsx-style-dynamic-selector .cm-scroller{max-height:".concat(t||"10em",";min-height:").concat(n,";scrollbar-width:thin;outline:none}.snippet-editor.__jsx-style-dynamic-selector .cm-content{padding-bottom:0}.snippet-editor.__jsx-style-dynamic-selector .cm-editor{background-color:").concat(G.current,"}.snippet-editor.loading.__jsx-style-dynamic-selector{display:none}.snippet-editor.no-scroll.__jsx-style-dynamic-selector .cm-scroller{overflow:hidden}.snippet-editor.__jsx-style-dynamic-selector ::-webkit-scrollbar{width:4px}.snippet-editor.__jsx-style-dynamic-selector .cm-gutters{min-width:unset;background-color:").concat(G.current,"}")})]})}function k(e){var t=e.path,n=e.doc,o=e.extensions,a=void 0===o?[]:o,c=e.numMatches,s=e.onNavigateToCode,u=e.initiallyExpanded,d=(0,r.Z)(l.useState(u),2),f=d[0],b=d[1],w=f?"block":"none",x=f?180:0,k=f?"Collapse snippet":"Expand snippet";return(0,i.BX)(p.G,{children:[(0,i.BX)(p.G,{css:[v.l0.width("100%"),v.l0.p(4),v.l0.rowWithGap(8),{alignItems:"center"}],children:[(0,i.tZ)(h.Z,{path:t}),(0,i.tZ)(Z.xv,{title:t,css:[v.l0.flex.shrink(1),{textOverflow:"ellipsis"}],children:t}),(0,i.tZ)(Z.xv,{color:"dimmest",children:(0,y.Z)("match",c,!0)}),(0,i.tZ)(p.G,{css:v.l0.flex.grow(1)}),(0,i.tZ)(m.h,{alt:k,tooltipHidden:!0,onClick:function(){return b((function(e){return!e}))},children:(0,i.tZ)(g.Z,{rotate:x,style:{transition:"200ms ease"}})})]}),(0,i.tZ)(p.G,{css:[v.l0.p(4),{display:w}],children:(0,i.tZ)(C,{path:t,snippet:{doc:n,startLineNumber:1},extensions:a,maxHeight:"max-content",allowScroll:!0,hideGutter:!0,onNavigateToCode:s})})]})}},71620:function(e,t,n){n.d(t,{Z:function(){return p}});var r=n(66091),i=n(5683),o=n(45347),a=n(86925),l=n(66693),c=n(7330),s=n(39302),u=new(function(e){(0,i.Z)(n,e);var t=(0,o.Z)(n);function n(){var e;return(0,r.Z)(this,n),(e=t.call(this)).elementClass="cm-gutterElement-hidden",e}return n.prototype.toDOM=function(){var e=document.createElement("span");e.classList.add("cm-hidden-lines-gutter");var t=document.createElement("span");return t.classList.add("cm-dot"),e.appendChild(t),e},n}(a.SJ)),d=function(e){(0,i.Z)(n,e);var t=(0,o.Z)(n);function n(e){var i;return(0,r.Z)(this,n),(i=t.call(this)).numLines=e,i}var a=n.prototype;return a.eq=function(e){return e.numLines===this.numLines},a.toDOM=function(){var e=document.createElement("span");return e.textContent="".concat(this.numLines," hidden ").concat((0,s.Z)("line",this.numLines)),e.className="cm-hidden-lines",e},n}(a.l9),f=a.p.mark({class:"cm-searchResultMatch"}),h=a.tk.baseTheme({".cm-hidden-lines":{color:"var(--foreground-dimmer)",backgroundColor:"var(--background-highest)",display:"inline-block",width:"100%"},".cm-gutterElement-hidden":{backgroundColor:"var(--background-highest)"},".cm-hidden-lines-gutter":{backgroundColor:"var(--background-highest)",display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%"},".cm-dot":{height:"5px",width:"5px",backgroundColor:"var(--foreground-dimmest)",borderRadius:"50%",display:"inline-block"},".cm-tooltip .cm-scroller":{border:"2px solid var(--background-highest)",borderRadius:"var(--border-radius-4)"},".cm-tooltip .cm-scroller:hover":{border:"2px solid var(--accent-primary-dimmest)",boxShadow:"var(--shadow-1)",cursor:"pointer"},".cm-searchResultMatch":{color:c.TV.foregroundDefault,backgroundColor:c.TV.accentPrimaryDimmest,outline:c.TV.accentPrimaryDimmer+" solid 1px"},".cm-searchResultMatch span":{color:c.TV.foregroundDefault},".cm-tooltip .cm-searchResultMatch:hover":{opacity:.8},".cm-tooltip .cm-gutterElement":{display:"flex",marginTop:0,textAlign:"center",alignItems:"center",justifyContent:"center",lineHeight:"21px"},".cm-tooltip .cm-line":{padding:0},".cm-tooltip .cm-gutters":{padding:0},".cm-tooltip .cm-content":{paddingTop:0},".cm-tooltip .cm-lineWrapping":{whiteSpace:"pre"},".cm-tooltip .cm-cursor":{display:"none"},".cm-tooltip .cm-selectionBackground":{display:"none"}});function p(e,t){var n=e.sort((function(e,t){return e.from-t.from})),r=n.map((function(e){var t=e.from,n=e.to;return f.range(t,n)})),i=a.lg.define((function(){return{}}),{decorations:function(){return a.p.set(r)}}),o=function(e,t){var n=[],r=1;e.forEach((function(i,o){var a=t.lineAt(i.from),l=t.lineAt(i.to);r<a.number-2&&n.push({startLine:r,endLine:a.number-2}),r=l.number+2,o===e.length-1&&r<t.lines&&n.push({startLine:r,endLine:t.lines})}));var i=n.map((function(e){var n=t.line(e.startLine),r=t.line(e.endLine);return a.p.replace({widget:new d(e.endLine-e.startLine+1)}).range(n.from,r.to)})),o=n.map((function(e){var n=t.line(e.startLine);return a.p.line({class:"cm-line-hidden"}).range(n.from)})),c=l.QQ.define({create:function(){return a.p.set(i)},update:function(e){return e},provide:function(e){return a.tk.decorations.from(e)}}),s=l.QQ.define({create:function(){return a.p.set(o)},update:function(e){return e},provide:function(e){return a.tk.decorations.from(e)}}),f=n.map((function(e){var n=t.line(e.startLine);return u.range(n.from)})),p=a.p2.of(l.Xs.of(f));return[c,s,h,p]}(n,t);return[i,o]}},97693:function(e,t,n){var r=n(59496).createContext(null);t.Z=r},90658:function(e,t,n){n.d(t,{nE:function(){return Q},OQ:function(){return $},qi:function(){return F},UQ:function(){return j},YM:function(){return V},PQ:function(){return K},ZS:function(){return Y},eR:function(){return H},QO:function(){return te},zj:function(){return ee},cR:function(){return q}});var r=n(66091),i=n(57389),o=n(5683),a=n(72006),l=n(4405),c=n(45347),s=n(94660),u=n(66693),d=n(37180),f=n(58530),h=n(86925),p=n(87995),v=n(87453),m=n(59496),g=n(31817),Z=n(4848),y=function(e){var t=e.isOpen,n=e.threadId,r=(0,m.useState)(!1),i=r[0],o=r[1],a=(0,g.GD)({variables:{id:n}});(0,m.useEffect)((function(){var e;if(a&&!a.error){var t=null===(e=a.data)||void 0===e?void 0:e.thread;t&&o("AnnotationAnchor"===(null===t||void 0===t?void 0:t.__typename)&&(null===t||void 0===t?void 0:t.messages.some((function(e){return!e.seen}))))}}),[a]);var l={alt:{default:"View threads",close:"Dismiss thread"}};return(0,s.tZ)(f.hU,{alt:t?l.alt.close:l.alt.default,size:24,className:"thread-indicator",css:[f.l0.width(20),f.l0.height(20),f.l0.transition.snappy,f.l0.cursor.pointer,f.l0.display.flex,f.l0.borderRadius(8),f.l0.position.relative,f.l0.overflow("visible"),t?f.l0.color.accentPrimaryStrongest:f.l0.color.foregroundDimmest,{borderWidth:f.TV.borderWidthDefault,borderStyle:"solid",borderColor:t?f.TV.accentPrimaryDefault:"transparent",backgroundColor:t?f.TV.accentPrimaryDimmer:f.TV.backgroundHigher,outline:0},{":hover":{borderColor:t?f.TV.accentPrimaryStronger:f.TV.outlineDimmer,color:t?f.TV.accentPrimaryStrongest:f.TV.foregroundDimmer,background:t?f.TV.accentPrimaryDefault+" !important":f.TV.backgroundHighest},svg:{width:12,height:12}}],children:(0,s.BX)(s.HY,{children:[i?(0,s.tZ)("div",{css:[f.l0.width(8),f.l0.height(8),f.l0.backgroundColor.redStronger,f.l0.position.absolute,f.l0.top(-1),f.l0.left(-1),f.l0.borderRadius("full")]}):null,(0,s.tZ)(v.Z,{})]})})},b=function(e){return e.apolloClient?(0,s.tZ)(Z.e,{client:e.apolloClient,children:(0,s.tZ)(y,(0,a.Z)({},e))}):null},w=n(7495),x=function(e){(0,o.Z)(n,e);var t=(0,c.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}var i=n.prototype;return i.compare=function(e){return this==e||this.constructor==e.constructor&&this.eq(e)},i.eq=function(e){return!1},i.destroy=function(e){},n}(u.uU);x.prototype.elementClass="",x.prototype.toDOM=void 0,x.prototype.mapMode=u.gc.TrackBefore,x.prototype.startSide=x.prototype.endSide=-1,x.prototype.point=!0;var C=u.r$.define(),k={class:"",renderEmptyElements:!1,elementStyle:"",markers:function(){return u.Xs.empty},lineMarker:function(){return null},lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},S=u.r$.define();var E=u.r$.define({combine:function(e){return e.some((function(e){return e}))}});function T(e){var t=[R];return e&&!1===e.fixed&&t.push(E.of(!0)),t}var R=h.lg.fromClass(function(){function e(t){(0,r.Z)(this,e),this.view=t,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-right-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.width="0px",this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=t.state.facet(S).map((function(e){return new D(t,e)}));var n=!0,i=!1,o=void 0;try{for(var a,l=this.gutters[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var c=a.value;this.dom.appendChild(c.dom)}}catch(s){i=!0,o=s}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}this.fixed=!t.state.facet(E),this.fixed&&(this.dom.style.position="sticky",this.dom.style.right="0"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM.nextSibling)}var t=e.prototype;return t.update=function(e){if(this.updateGutters(e)){var t=this.prevViewport,n=e.view.viewport,r=Math.min(t.to,n.to)-Math.max(t.from,n.from);this.syncGutters(r<.8*(n.to-n.from))}e.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(E)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=e.view.viewport},t.syncGutters=function(e){var t=this,n=this.dom.nextSibling;e&&this.dom.remove();var r=u.Xs.iter(this.view.state.facet(C),this.view.viewport.from),i=[],o=this.gutters.map((function(e){return new G(e,t.view.viewport,-t.view.documentPadding.top)})),a=!0,l=!1,c=void 0;try{for(var s,d=this.view.viewportLineBlocks[Symbol.iterator]();!(a=(s=d.next()).done);a=!0){var f=s.value,p=void 0;if(Array.isArray(f.type)){var v=!0,m=!1,g=void 0;try{for(var Z,y=f.type[Symbol.iterator]();!(v=(Z=y.next()).done);v=!0){var b=Z.value;if(b.type==h.kH.Text){p=b;break}}}catch(B){m=!0,g=B}finally{try{v||null==y.return||y.return()}finally{if(m)throw g}}}else p=f.type==h.kH.Text?f:void 0;if(p){i.length&&(i=[]),I(r,i,f.from);var w=!0,x=!1,k=void 0;try{for(var S,E=o[Symbol.iterator]();!(w=(S=E.next()).done);w=!0){S.value.line(this.view,p,i)}}catch(B){x=!0,k=B}finally{try{w||null==E.return||E.return()}finally{if(x)throw k}}}}}catch(B){l=!0,c=B}finally{try{a||null==d.return||d.return()}finally{if(l)throw c}}var T=!0,R=!1,_=void 0;try{for(var D,P=o[Symbol.iterator]();!(T=(D=P.next()).done);T=!0){D.value.finish()}}catch(B){R=!0,_=B}finally{try{T||null==P.return||P.return()}finally{if(R)throw _}}e&&this.view.scrollDOM.insertBefore(this.dom,n)},t.updateGutters=function(e){var t=e.startState.facet(S),n=e.state.facet(S),r=e.docChanged||e.heightChanged||e.viewportChanged||!u.Xs.eq(e.startState.facet(C),e.state.facet(C),e.view.viewport.from,e.view.viewport.to);if(t==n){var i=!0,o=!1,a=void 0;try{for(var l,c=this.gutters[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){l.value.update(e)&&(r=!0)}}catch(P){o=!0,a=P}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}}else{r=!0;var s=[],d=!0,f=!1,h=void 0;try{for(var p,v=n[Symbol.iterator]();!(d=(p=v.next()).done);d=!0){var m=p.value,g=t.indexOf(m);g<0?s.push(new D(this.view,m)):(this.gutters[g].update(e),s.push(this.gutters[g]))}}catch(P){f=!0,h=P}finally{try{d||null==v.return||v.return()}finally{if(f)throw h}}var Z=!0,y=!1,b=void 0;try{for(var w,x=this.gutters[Symbol.iterator]();!(Z=(w=x.next()).done);Z=!0){var k=w.value;k.dom.remove(),s.indexOf(k)<0&&k.destroy()}}catch(P){y=!0,b=P}finally{try{Z||null==x.return||x.return()}finally{if(y)throw b}}var E=!0,T=!1,R=void 0;try{for(var _,I=s[Symbol.iterator]();!(E=(_=I.next()).done);E=!0){var G=_.value;this.dom.appendChild(G.dom)}}catch(P){T=!0,R=P}finally{try{E||null==I.return||I.return()}finally{if(T)throw R}}this.gutters=s}return r},t.destroy=function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.gutters[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){r.value.destroy()}}catch(o){t=!0,n=o}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}this.dom.remove()},e}(),{provide:function(e){return h.tk.scrollMargins.of((function(t){var n=t.plugin(e);return n&&0!=n.gutters.length&&n.fixed?t.textDirection==h.Nm.LTR?{left:n.dom.offsetWidth}:{right:n.dom.offsetWidth}:null}))}});function _(e){return Array.isArray(e)?e:[e]}function I(e,t,n){for(;e.value&&e.from<=n;)e.from==n&&t.push(e.value),e.next()}var G=function(){function e(t,n,i){(0,r.Z)(this,e),this.gutter=t,this.height=i,this.localMarkers=[],this.i=0,this.cursor=u.Xs.iter(t.markers,n.from)}var t=e.prototype;return t.line=function(e,t,n){this.localMarkers.length&&(this.localMarkers=[]),I(this.cursor,this.localMarkers,t.from);var r=n.length?this.localMarkers.concat(n):this.localMarkers,i=this.gutter.config.lineMarker(e,t,r);i&&r.unshift(i);var o=this.gutter;if(0!=r.length||o.config.renderEmptyElements){var a=t.top-this.height;if(this.i==o.elements.length){var l=new P(e,t.height,a,r);o.elements.push(l),o.dom.appendChild(l.dom)}else o.elements[this.i].update(e,t.height,a,r);this.height=t.bottom,this.i++}},t.finish=function(){for(var e=this.gutter;e.elements.length>this.i;){var t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}},e}(),D=function(){function e(t,n){var i=this,o=function(e){i.dom.addEventListener(e,(function(r){var i=t.lineBlockAtHeight(r.clientY-t.documentTop);n.domEventHandlers[e](t,i,r)&&r.preventDefault()}))};for(var a in(0,r.Z)(this,e),this.view=t,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:""),n.domEventHandlers)o(a);this.markers=_(n.markers(t)),n.initialSpacer&&(this.spacer=new P(t,0,0,[n.initialSpacer(t)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}var t=e.prototype;return t.update=function(e){var t=this.markers;if(this.markers=_(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){var n=this.config.updateSpacer(this.spacer.markers[0],e);n!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[n])}var r=e.view.viewport;return!u.Xs.eq(this.markers,t,r.from,r.to)||!!this.config.lineMarkerChange&&this.config.lineMarkerChange(e)},t.destroy=function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.elements[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){r.value.destroy()}}catch(o){t=!0,n=o}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}},e}(),P=function(){function e(t,n,i,o){(0,r.Z)(this,e),this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(t,n,i,o)}var t=e.prototype;return t.update=function(e,t,n,r){this.height!=t&&(this.dom.style.height=(this.height=t)+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n+"px":""),function(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].compare(t[n]))return!1;return!0}(this.markers,r)||this.setMarkers(e,r)},t.setMarkers=function(e,t){for(var n="cm-gutterElement",r=this.dom.firstChild,i=0,o=0;;){var a=o,l=i<t.length?t[i++]:null,c=!1;if(l){var s=l.elementClass;s&&(n+=" "+s);for(var u=o;u<this.markers.length;u++)if(this.markers[u].compare(l)){a=u,c=!0;break}}else a=this.markers.length;for(;o<a;){var d=this.markers[o++];if(d.toDOM){d.destroy(r);var f=r.nextSibling;r.remove(),r=f}}if(!l)break;l.toDOM&&(c?r=r.nextSibling:this.dom.insertBefore(l.toDOM(e),r)),c&&o++}this.dom.className=n,this.markers=t},t.destroy=function(){this.setMarkers(null,[])},e}();var B=u.r$.define(),U=u.r$.define({combine:function(e){return(0,u.BO)(e,{formatNumber:String,domEventHandlers:{}},{domEventHandlers:function(e,t){var n=function(e){var n=r[e],i=t[e];r[e]=n?function(e,t,r){return n(e,t,r)||i(e,t,r)}:i},r=Object.assign({},e);for(var i in t)n(i);return r}})}}),A=function(e){(0,o.Z)(n,e);var t=(0,c.Z)(n);function n(e){var i;return(0,r.Z)(this,n),(i=t.call(this)).number=e,i}var i=n.prototype;return i.eq=function(e){return this.number==e.number},i.toDOM=function(){return document.createTextNode(this.number)},n}(x);function N(e,t){return e.state.facet(U).formatNumber(t,e.state)}S.compute([U],(function(e){return{class:"cm-lineNumbers",renderEmptyElements:!1,markers:function(e){return e.state.facet(B)},lineMarker:function(e,t,n){return n.some((function(e){return e.toDOM}))?null:new A(N(e,e.state.doc.lineAt(t.from).number))},lineMarkerChange:function(e){return e.startState.facet(U)!=e.state.facet(U)},initialSpacer:function(e){return new A(N(e,L(e.state.doc.lines)))},updateSpacer:function(e,t){var n=N(t.view,L(t.view.state.doc.lines));return n==e.number?e:new A(n)},domEventHandlers:e.facet(U).domEventHandlers}}));function L(e){for(var t=9;t<e;)t=10*t+9;return t}var X=new(function(e){(0,o.Z)(n,e);var t=(0,c.Z)(n);function n(){var e;return(0,r.Z)(this,n),(e=t.apply(this,arguments)).elementClass="cm-activeLineGutter",e}return n}(x));C.compute(["selection"],(function(e){var t=[],n=-1,r=!0,i=!1,o=void 0;try{for(var a,l=e.selection.ranges[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;if(c.empty){var s=e.doc.lineAt(c.head).from;s>n&&(n=s,t.push(X.range(s)))}}}catch(d){i=!0,o=d}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return u.Xs.of(t)}));var M=n(27615),O=n(92674),W=n.n(O),F=u.Py.define(),j=u.Py.define(),z=u.Py.define(),H=u.Py.define(),V=u.Py.define(),q=h.tk.baseTheme({".replit-thread-highlight":{background:f.TV.accentPrimaryDimmest,transition:"".concat(f.TV.transitionDurationSnappy," all\n            ").concat(f.TV.transitionTimingFunctionSnappy)},".replit-thread-highlight .replit-thread-highlight":{background:"transparent"},".cm-thread-indicator-gutter":{transform:"translate(calc(-100% - var(--space-8)));",width:"20px",overflow:"visible"}}),$=u.QQ.define({create:function(){return{}},update:function(e,t){var n=e;return(0,d.j)(t,F,(function(e){n=e.value})),t.changes.empty?n:n=Object.values(n).map((function(e){var n=e.indexStart>t.state.doc.length?t.state.doc.length:t.changes.mapPos(e.indexStart),r=e.indexEnd>t.state.doc.length?t.state.doc.length:t.changes.mapPos(e.indexEnd);return(0,l.Z)((0,a.Z)({},e),{indexStart:n,indexEnd:r})})).reduce((function(e,t){return e[t.id]=t,e}),{})}}),Y=u.QQ.define({create:function(){return null},update:function(e,t){var n=e;return(0,d.j)(t,j,(function(e){var r=t.state,i=r.selection.main,o=i.from,a=i.to;if(o===a){var l=r.doc.lineAt(o);o=Math.max(l.from-1,0),a=l.to}n={id:e.value,indexStart:o,indexEnd:a}})),(0,d.j)(t,z,(function(){n=null})),(0,d.j)(t,V,(function(){n=null})),null!==n&&(0,d.j)(t,F,(function(e){if(!n)throw new Error("expected newPlaceholder");e.value[n.id]&&(n=null)})),!t.changes.empty&&n&&(n=(0,l.Z)((0,a.Z)({},n),{indexStart:t.changes.mapPos(n.indexStart),indexEnd:t.changes.mapPos(n.indexEnd)})),n}}),K=u.QQ.define({create:function(){return null},update:function(e,t){var n=e;return(0,d.j)(t,V,(function(e){n=e.value})),(0,d.j)(t,j,(function(e){n=e.value})),n}}),Q=function(e){(0,o.Z)(n,e);var t=(0,c.Z)(n);function n(e,i){var o;return(0,r.Z)(this,n),(o=t.call(this)).id=e,o.setThreadElements=i,o}var s=n.prototype;return s.eq=function(e){return e.id===this.id},s.toDOM=function(e){var t=this,n=document.createElement("div");n.className="cm-thread-portal-widget";var r=e.dom.querySelector(".cm-scroller"),o=e.dom.querySelector(".cm-gutters");return r&&o&&(0,w.L)(n,r,o),setTimeout((function(){t.setThreadElements((function(e){return(0,l.Z)((0,a.Z)({},e),(0,i.Z)({},t.id,n))}))})),n},s.destroy=function(e){var t=this;e.remove(),setTimeout((function(){t.setThreadElements((function(e){var n=(0,a.Z)({},e);return delete n[t.id],n}))}))},s.ignoreEvent=function(){return!0},n}(h.l9),J=function(e){(0,o.Z)(n,e);var t=(0,c.Z)(n);function n(e,i,o){var a;return(0,r.Z)(this,n),(a=t.call(this)).id=e,a.active=i,a.apolloClient=o,a}var i=n.prototype;return i.toDOM=function(e){var t=this,n=document.createElement("span");return n.setAttribute("aria-hidden","true"),n.className="cm-thread-indicator-widget",p.render((0,s.tZ)(b,{isOpen:this.active,threadId:this.id,apolloClient:this.apolloClient}),n),n.style.cursor="pointer",n.onclick=function(n){n.stopPropagation(),n.preventDefault(),e.dispatch({effects:[V.of(e.state.field(K)===t.id?null:t.id)]})},n},i.eq=function(e){return e.id===this.id&&e.active===this.active},n}(x),ee=function(e){return t={class:"cm-thread-indicator-gutter",markers:function(t){var n=t.state.field($),r=t.state.field(K);return u.Xs.of(Object.values(n).filter((function(e){return e.indexEnd!==e.indexStart})).map((function(n){var i=t.state.doc.lineAt(Math.min(n.indexStart,n.indexEnd)).from;return new J(n.id,n.id===r,e).range(i)})),!0)},initialSpacer:function(){return new J("initial-spacer",!1)}},[T(),S.of((0,a.Z)({},k,t))];var t},te=function(){var e=function(e){var t=e.selection.main;return t.empty||e.selection.ranges.filter((function(e){return e!==t})).length?null:{pos:t.from,above:!0,create:function(e){var t=document.createElement("div");return t.className="cm-start-thread-tooltip",p.render((0,s.tZ)(f.Tg,{css:[f.l0.borderRadius(8),f.l0.shadow(1),f.l0.backgroundColor.backgroundHigher,{border:"1px solid ".concat(f.TV.outlineDimmer)}],children:(0,s.tZ)(f.zx,{text:"Start thread",iconLeft:(0,s.tZ)(M.Z,{}),css:[f.l0.width("fit-content"),f.l0.display.flex,f.l0.align.center],onClick:function(){e.dispatch({effects:[j.of(W()())]}),(0,p.unmountComponentAtNode)(t)}})}),t),{dom:t}}}};return[u.QQ.define({create:e,update:function(t,n){return"select"===n.annotation(u.YW.userEvent)?null:n.docChanged||n.selection?e(n.state):t},provide:function(e){return h.hJ.compute([e],(function(t){return t.field(e)}))}}),ne]},ne=h.tk.baseTheme({".cm-tooltip.cm-start-thread-tooltip":{backgroundColor:"transparent",boxShadow:"none",border:"0 none",padding:"0px"}})},7495:function(e,t,n){function r(e,t,n){var r=t.clientWidth,i=n.clientWidth;e.style.maxWidth="".concat(r,"px"),e.style.position="sticky",e.style.zIndex="201",e.style.marginLeft="-".concat(i,"px")}n.d(t,{L:function(){return r}})},31817:function(e,t,n){n.d(t,{AL:function(){return w},GD:function(){return v},VO:function(){return p},Y:function(){return y},tT:function(){return g}});var r=n(72006),i=n(43119),o=n(71440),a=n(72147),l=n(53486),c=n(46653);function s(){var e=(0,i.Z)(["\n  query CodemirrorThread($id: String!) {\n    thread: annotationAnchor(id: $id) {\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n    currentUser {\n      id\n      username\n      image\n    }\n  }\n  ","\n"]);return s=function(){return e},e}function u(){var e=(0,i.Z)(["\n  mutation CreateThread(\n    $thread: AnnotationAnchorInput!\n    $message: AnnotationMessageInput\n    $highlight: AnnotationHighlightInput\n  ) {\n    createThread: createAnnotationAnchor(\n      annotationAnchor: $thread\n      annotationMessage: $message\n      highlight: $highlight\n    ) {\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return u=function(){return e},e}function d(){var e=(0,i.Z)(["\n  mutation UpdateThread($id: String!, $changes: AnnotationAnchorChangesInput!) {\n    updateThread: updateAnnotationAnchor(id: $id, changes: $changes) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function f(){var e=(0,i.Z)(["\n  mutation CreateThreadMessage(\n    $replId: String!\n    $threadId: String!\n    $threadMessage: AnnotationMessageInput!\n    $highlight: AnnotationHighlightInput\n  ) {\n    createThreadMessage: createAnnotationMessage(\n      replId: $replId\n      anchorId: $threadId\n      annotationMessage: $threadMessage\n      highlight: $highlight\n    ) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}var h={},p=(0,o.Ps)(s(),a.j7);function v(e){var t=(0,r.Z)({},h,e);return l.a(p,t)}var m=(0,o.Ps)(u(),a.j7);function g(e){var t=(0,r.Z)({},h,e);return c.D(m,t)}var Z=(0,o.Ps)(d(),a.j7);function y(e){var t=(0,r.Z)({},h,e);return c.D(Z,t)}var b=(0,o.Ps)(f(),a.j7);function w(e){var t=(0,r.Z)({},h,e);return c.D(b,t)}},84063:function(e,t,n){n.d(t,{Z:function(){return b}});var r=n(72006),i=n(4405),o=n(2272),a=n(9970),l=n(59496),c=n(99340),s=n(31817),u=n(78248),d=n(72147),f=n(20465),h=n(79351),p=n(16194),v=n(56579),m=n(90658),g=n(12922);function Z(e,t){if(!e)return null;var n,r=e.state.field(m.OQ),i=e.state.field(m.ZS),o=null!==(n=r[t])&&void 0!==n?n:(null===i||void 0===i?void 0:i.id)===t?i:null;return o||null}function y(e,t){if(!e)return null;var n=Z(e,t);if(!n)return null;var r=Math.min(n.indexStart,n.indexEnd),i=Math.max(n.indexStart,n.indexEnd),o=e.state.doc.lineAt(r),a=e.state.doc.lineAt(i),l=e.state.doc.sliceString(e.state.doc.line(Math.max(o.number-2,1)).from,r),c=e.state.doc.sliceString(i,e.state.doc.line(Math.min(a.number+2,e.state.doc.lines)).to);return{precode:l,code:e.state.doc.sliceString(r,i),postcode:c}}function b(e,t,n){var b=(0,c.Z)().showError,w=(0,h.Z)(),x=(0,g.P)({controlName:"flag-typing-presence"}),C=(0,f.Z)().map((function(e){return e.username})),k=(0,v.Z)().fs,S=(0,s.GD)({variables:{id:e}}),E=S.data,T=S.error,R=S.loading,_=S.client,I=function(){var n;return R||!E?!!t&&(null===(n=t.state.field(m.ZS))||void 0===n?void 0:n.id)===e:"AnnotationAnchor"!==E.thread.__typename}(),G=R,D=l.useMemo((function(){return G||!E?null:"UserError"===E.thread.__typename?{id:e,__typename:"AnnotationAnchor",messages:[],isGeneral:!1,isResolved:!1}:"AnnotationAnchor"===E.thread.__typename?E.thread:null}),[E,e,G]),P=(0,o.Z)((0,s.tT)({onError:function(e){return b(e.message)},update:function(e,t){var n,r;t.errors?t.errors.forEach((function(e){return b(e.message)})):"UserError"!==(null===(n=t.data)||void 0===n||null===(r=n.createThread)||void 0===r?void 0:r.__typename)||b(t.data.createThread.message)}}),1),B=P[0],U=(0,o.Z)((0,s.AL)({onError:function(e){return b(e.message)},update:function(e,t){var n;if(t.errors)t.errors.forEach((function(e){return b(e.message)}));else{var r=null===(n=t.data)||void 0===n?void 0:n.createThreadMessage;r&&"UserError"===r.__typename&&b(r.message)}}}),1),A=U[0],N=(0,o.Z)((0,s.Y)({onError:function(e){return b(e.message)},update:function(e,t){var n;if(t.errors)t.errors.forEach((function(e){return b(e.message)}));else{var r=null===(n=t.data)||void 0===n?void 0:n.updateThread;r&&"UserError"===r.__typename&&b(r.message)}}}),1),L=N[0],X=(0,o.Z)((0,d.Hj)(),1)[0],M=function(){var e=null===E||void 0===E?void 0:E.currentUser;return e?{user:{__typename:"User",id:e.id,username:e.username,image:e.image}}:{}};return{thread:D,isPlaceholder:I,error:T,loading:G,getHighlight:y,getLatestAnchor:function(){return Z(t,e)},updateThread:function(e){var t,n=e.changes,o="AnnotationAnchor"===(null===E||void 0===E||null===(t=E.thread)||void 0===t?void 0:t.__typename)?E.thread:null;if(!o)throw new Error("expected thread");L({variables:{id:o.id,changes:n},optimisticResponse:{updateThread:(0,i.Z)((0,r.Z)({},o,n),{isResolved:"boolean"===typeof n.isResolved?n.isResolved:o.isResolved})}})},finalizeThreadMessage:function(o){var l,c=o.message,d=o.messageId,f={id:d,text:c,mentions:(0,p.kW)(c,{users:(0,a.Z)(C).concat(["everyone"])}).mentions};if(I&&t&&n){var h=t.state.field(m.ZS),v={id:e,replId:w,indexStart:null===h||void 0===h?void 0:h.indexStart,indexEnd:null===h||void 0===h?void 0:h.indexEnd,otVersion:k.getOTVersion(n),path:n};B({variables:{thread:v,message:f,highlight:y(t,e)},optimisticResponse:{__typename:"RootMutationType",createThread:(0,i.Z)((0,r.Z)({__typename:"AnnotationAnchor"},v,M()),{messages:[(0,i.Z)((0,r.Z)({id:d,timeCreated:Date.now(),currentUserIsAuthor:!0},M()),{content:{text:c,__typename:"TextMessageContentType"},anchor:{id:v.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",seen:!0})],isResolved:!1,isGeneral:!1})}}),_.writeQuery({query:s.VO,variables:{id:e},data:{thread:(0,i.Z)((0,r.Z)((0,i.Z)((0,r.Z)({},v),{isResolved:!1,isGeneral:!1}),M()),{messages:[(0,i.Z)((0,r.Z)({id:d,timeCreated:Date.now(),currentUserIsAuthor:!0},M()),{content:{text:c,__typename:"TextMessageContentType"},anchor:{id:v.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",seen:!0})],__typename:"AnnotationAnchor"}),currentUser:null===E||void 0===E?void 0:E.currentUser}});var g=_.readQuery({query:u.Jq,variables:{replId:w,path:n}});if(g){var Z,b="ThreadsByFileResult"===(null===(Z=g.threadsByFile)||void 0===Z?void 0:Z.__typename)?g.threadsByFile.threads:[],x=M().user;_.writeQuery({query:u.Jq,variables:{replId:w,path:n},data:{threadsByFile:{__typename:"ThreadsByFileResult",threads:(0,a.Z)(b).concat([(0,r.Z)({messageCount:1,unreadCount:0,__typename:"AnnotationAnchor",isGeneral:!1,user:x,isResolved:!1,participants:[x]},v)])}}})}}else{var S="AnnotationAnchor"===(null===E||void 0===E||null===(l=E.thread)||void 0===l?void 0:l.__typename)?E.thread:null;if(!S)throw new Error("expected thread");A({variables:{replId:w,threadId:S.id,threadMessage:f,highlight:y(t,S.id)},optimisticResponse:{createThreadMessage:(0,i.Z)((0,r.Z)({},S),{messages:(0,a.Z)(S.messages.filter((function(e){return!e.id.startsWith("chat-")}))).concat([(0,i.Z)((0,r.Z)({},M(),f),{content:{text:f.text,__typename:"TextMessageContentType"},anchor:{id:S.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",timeCreated:Date.now(),currentUserIsAuthor:!0,seen:!0})])})}})}},changeThreadMessage:function(t){var n=t.messageId,r=t.message;X({variables:{threadId:e,messageId:n,message:null!==x&&void 0!==x&&x?r:null}})}}}},78248:function(e,t,n){n.d(t,{Jq:function(){return s},eR:function(){return u}});var r=n(72006),i=n(43119),o=n(71440),a=n(53486);function l(){var e=(0,i.Z)(["\n  query ThreadsByFileHook($replId: String!, $path: String!) {\n    threadsByFile(replId: $replId, path: $path) {\n      ... on ThreadsByFileResult {\n        threads {\n          id\n          path\n          otVersion\n          indexStart\n          indexEnd\n          messageCount\n          unreadCount\n          user {\n            id\n            image\n            username\n          }\n          participants {\n            id\n            image\n            username\n          }\n          isGeneral\n          isResolved\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}var c={},s=(0,o.Ps)(l());function u(e){var t=(0,r.Z)({},c,e);return a.a(s,t)}},37180:function(e,t,n){function r(e,t,n){if("effects"in e){var i=!0,o=!1,a=void 0;try{for(var l,c=e.effects[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;s.is(t)&&n(s)}}catch(v){o=!0,a=v}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}}else{var u=!0,d=!1,f=void 0;try{for(var h,p=e.transactions[Symbol.iterator]();!(u=(h=p.next()).done);u=!0){r(h.value,t,n)}}catch(v){d=!0,f=v}finally{try{u||null==p.return||p.return()}finally{if(d)throw f}}}}n.d(t,{j:function(){return r}})},73522:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(94660),i=n(29356),o=n.n(i),a=(n(59496),n(97754)),l=n.n(a),c=n(14047);function s(e){var t=e.className,n=e.src,i=e.alt,a=e.size,s=e.title;return(0,r.BX)("div",{className:o().dynamic([["381115a7727c7cb3",[a,a]]])+" "+(l()("avatar",t)||""),children:[(0,r.tZ)(c.Z,{title:s,width:a,height:a,objectFit:"cover",layout:"responsive",alt:i,src:n}),(0,r.tZ)(o(),{id:"381115a7727c7cb3",dynamic:[a,a],children:"div.__jsx-style-dynamic-selector{-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;overflow:hidden;width:".concat(a,"px;height:").concat(a,"px}")})]})}},38252:function(e,t,n){n.d(t,{m:function(){return f}});var r=n(72006),i=n(4405),o=n(77637),a=n(2272),l=n(94660),c=n(59496),s=n(87666),u=n(16092),d=n(94717);function f(e){var t=e.textToCopy,n=e.tooltip,f=(0,o.Z)(e,["textToCopy","tooltip"]),h=(0,a.Z)(c.useState(!1),2),p=h[0],v=h[1],m=c.useRef(null);return c.useEffect((function(){return function(){m.current&&clearTimeout(m.current)}}),[]),(0,l.tZ)(d.u,{isOpen:p,tooltip:null!==n&&void 0!==n?n:"".concat(t," copied to clipboard"),placement:"bottom-end",children:(0,l.tZ)(s.zx,(0,i.Z)((0,r.Z)({},f),{onClick:function(e){(0,u.Z)(t),v(!0),m.current&&clearTimeout(m.current),m.current=setTimeout((function(){return v(!1)}),4e3),f.onClick&&f.onClick(e)}}))})}},80772:function(e,t,n){var r=n(94660),i=(n(59496),n(19666)),o=n(63463),a=n(7330),l=n(58530),c=n(36918);t.Z=function(e){return(0,r.BX)(i.G,{css:[a.l0.colWithGap(24)],children:[(0,r.BX)(o.h4,{variant:"headerDefault",level:2,children:["Delete ",e.name||e.entityType,"?"]}),(0,r.BX)(o.xv,{multiline:!0,children:["Are you sure you want to delete"," ",e.description?e.description:"this ".concat(e.entityType),"? This cannot be undone."]}),(0,r.BX)(i.G,{css:[a.l0.rowWithGap(12),a.l0.justify.end],children:[(0,r.tZ)(l.zx,{text:"Cancel",onClick:e.hideModal}),(0,r.tZ)(l.zx,{dataCy:"delete-modal-confirm-button",iconLeft:(0,r.tZ)(c.Z,{}),onClick:function(){e.delete(),e.hideModal()},text:"Yes, delete ".concat(e.confirmDescription?e.confirmDescription:"this ".concat(e.entityType)),colorway:"negative"})]})]})}},3655:function(e,t,n){var r=n(32343),i=n(72006),o=n(4405),a=n(94660),l=n(29356),c=n.n(l);t.Z=function(e){var t=(0,r.Z)({},e);return(0,a.BX)(a.HY,{children:[(0,a.tZ)(c(),{id:"fcfe85a13ecbf46b",children:".one.jsx-fcfe85a13ecbf46b{opacity:.1;-webkit-animation:dot 1.5s ease-in-out infinite;-moz-animation:dot 1.5s ease-in-out infinite;-o-animation:dot 1.5s ease-in-out infinite;animation:dot 1.5s ease-in-out infinite;-webkit-animation-delay:0s;-moz-animation-delay:0s;-o-animation-delay:0s;animation-delay:0s}.two.jsx-fcfe85a13ecbf46b{opacity:.1;-webkit-animation:dot 1.5s ease-in-out infinite;-moz-animation:dot 1.5s ease-in-out infinite;-o-animation:dot 1.5s ease-in-out infinite;animation:dot 1.5s ease-in-out infinite;-webkit-animation-delay:.1s;-moz-animation-delay:.1s;-o-animation-delay:.1s;animation-delay:.1s}.three.jsx-fcfe85a13ecbf46b{opacity:.1;-webkit-animation:dot 1.5s ease-in-out infinite;-moz-animation:dot 1.5s ease-in-out infinite;-o-animation:dot 1.5s ease-in-out infinite;animation:dot 1.5s ease-in-out infinite;-webkit-animation-delay:.2s;-moz-animation-delay:.2s;-o-animation-delay:.2s;animation-delay:.2s}@-webkit-keyframes dot{\n            0% {\n              opacity: 0.1;\n            }\n            50% {\n              opacity: 1;\n            }\n            100% {\n              opacity: 0.1;\n            }\n        }@-moz-keyframes dot{\n            0% {\n              opacity: 0.1;\n            }\n            50% {\n              opacity: 1;\n            }\n            100% {\n              opacity: 0.1;\n            }\n        }@-o-keyframes dot{\n            0% {\n              opacity: 0.1;\n            }\n            50% {\n              opacity: 1;\n            }\n            100% {\n              opacity: 0.1;\n            }\n        }@keyframes dot{\n            0% {\n              opacity: 0.1;\n            }\n            50% {\n              opacity: 1;\n            }\n            100% {\n              opacity: 0.1;\n            }\n        }"}),(0,a.tZ)("span",(0,o.Z)((0,i.Z)({},t),{className:"jsx-fcfe85a13ecbf46b "+(t&&null!=t.className&&t.className||"one"),children:"."})),(0,a.tZ)("span",(0,o.Z)((0,i.Z)({},t),{className:"jsx-fcfe85a13ecbf46b "+(t&&null!=t.className&&t.className||"two"),children:"."})),(0,a.tZ)("span",(0,o.Z)((0,i.Z)({},t),{className:"jsx-fcfe85a13ecbf46b "+(t&&null!=t.className&&t.className||"three"),children:"."}))]})}},79175:function(e,t,n){n.d(t,{Z:function(){return N}});var r=n(77637),i=n(2272),o=n(94660),a=n(29356),l=n.n(a),c=n(59496),s=n(72006),u=n(43119),d=n(71440),f=n(53486),h=n(46653);function p(){var e=(0,u.Z)(["\n  fragment EditDomainRepl on Repl {\n    id\n    hostedUrl\n    apexProxy\n    domains {\n      hosting_deployment_id\n      domain\n      state\n    }\n  }\n"]);return p=function(){return e},e}function v(){var e=(0,u.Z)(["\n  query EditDomain($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        ...EditDomainRepl\n      }\n      ... on ReplRedirect {\n        replUrl\n      }\n      ... on SubscriptionExpiredError {\n        replId\n      }\n    }\n  }\n  ","\n"]);return v=function(){return e},e}function m(){var e=(0,u.Z)(["\n  query EditDomainCheckDomain2($replId: String!, $domain: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        checkDomain2(domain: $domain) {\n          ... on DomainStatus2 {\n            verified\n            retry\n            status\n            records {\n              A\n              TXT\n              CNAME\n            }\n          }\n          ... on NotFoundError {\n            message\n          }\n          ... on ServiceUnavailable {\n            message\n          }\n        }\n      }\n    }\n  }\n"]);return m=function(){return e},e}function g(){var e=(0,u.Z)(["\n  mutation EditDomainLinkReplDomain2(\n    $replId: String!\n    $domain: String!\n    $deploymentId: String\n  ) {\n    linkReplDomain2(\n      replId: $replId\n      domain: $domain\n      deploymentId: $deploymentId\n    ) {\n      ... on Repl {\n        id\n        ...EditDomainRepl\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on ServiceUnavailable {\n        message\n      }\n    }\n  }\n  ","\n"]);return g=function(){return e},e}function Z(){var e=(0,u.Z)(["\n  mutation EditDomainUpdateRepl($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...EditDomainRepl\n      }\n    }\n  }\n  ","\n"]);return Z=function(){return e},e}var y={},b=(0,d.Ps)(p()),w=(0,d.Ps)(v(),b);var x=(0,d.Ps)(m());var C=(0,d.Ps)(g(),b);var k=(0,d.Ps)(Z(),b);var S=n(58530),E=n(16092),T=n(88254),R=n(84284),_=n.n(R),I=n(69694),G=n(44135),D=n(17007),P=n(36918);function B(e){var t=e.repl,n=e.existingDomain,r=e.deploymentId,a=e.onLink,l=e.onGoBack,u=e.onLinkStarted,d=e.onStateChanged,f=(0,c.useState)(n?"loading":null),p=f[0],v=f[1],m=(0,c.useState)(!1),g=m[0],Z=m[1],b=(0,c.useState)(null),w=b[0],x=b[1],k=(0,c.useState)(!1),R=k[0],I=k[1],P=(0,c.useState)(!0),B=P[0],A=P[1],N=(0,i.Z)(function(e){var t=(0,s.Z)({},y,e);return h.D(C,t)}(),2),L=N[0],X=N[1],M=(0,c.useRef)(null),O=(0,c.useRef)(null),W=(0,c.useRef)(null),F=function(e){(null===e||void 0===e?void 0:e.current)&&e.current.select()},j=function(e){var t;(null===e||void 0===e||null===(t=e.current)||void 0===t?void 0:t.value)&&(0,E.Z)(e.current.value).catch((function(e){T.$e((function(t){t.setTag("domain-link",!0),t.setExtra("type","copy"),T.Tb(e)}))}))},z=(0,c.useState)(n||""),H=z[0],V=z[1];(0,c.useEffect)((function(){X.data&&"Repl"===X.data.linkReplDomain2.__typename&&a()}),[X.data,a]),(0,c.useEffect)((function(){A(!r)}),[r]);var q=function(e){v(e),d()},$=_().isURL(H,{require_valid_protocol:!1})&&H.split(".").length>=2,Y=$&&2===H.split(".").length,K=function(e,t,n){var r=e.replace(/^https:\/\//,"");return n?r.replace(t,n):r}(t.hostedUrl,t.id,r),Q=t.apexProxy,J="replit-verify=".concat(null!==r&&void 0!==r?r:t.id),ee=(0,G.H)();return(0,o.BX)(S.G7,{css:[S.l0.colWithGap(16)],children:[(0,o.BX)(S.G7,{css:[S.l0.colWithGap(8)],children:[(0,o.tZ)(S.h4,{level:2,variant:"subheadDefault",children:"New Domain Link"}),(0,o.BX)(S.xv,{multiline:!0,children:["Learn more"," ",(0,o.tZ)("a",{href:"https://docs.replit.com/hosting/hosting-web-pages#custom-domains",target:"_blank",children:"here"}),"."]})]}),(0,o.BX)(S.G7,{css:[S.l0.colWithGap(4)],children:[(0,o.tZ)("label",{htmlFor:ee("domain"),children:(0,o.tZ)(S.xv,{color:"dimmer",variant:"small",children:"Step 1: Enter your domain"})}),(0,o.tZ)(S.II,{className:"cname-url",readOnly:"loading"===p,value:H,onChange:function(e){V(e.target.value)},onBlur:function(){!function(){try{var e=new URL("/",H);V(e.hostname)}catch(t){}}()},placeholder:"example.com",id:ee("domain")})]}),Y&&!R?(0,o.BX)(S.G7,{css:[S.l0.colWithGap(8)],children:[(0,o.BX)(S.G7,{css:[S.l0.colWithGap(4)],children:[(0,o.tZ)("label",{htmlFor:ee("record"),children:(0,o.BX)(S.xv,{color:"dimmer",variant:"small",children:["Step 2: Add an ",(0,o.tZ)("code",{children:"A"})," Record"]})}),(0,o.BX)(S.G7,{css:[S.l0.rowWithGap(8),S.l0.align.center],children:[(0,o.tZ)(S.xv,{css:{fontFamily:S.TV.fontFamilyCode,maxWidth:"40%"},children:H}),(0,o.tZ)(S.xv,{css:{fontFamily:S.TV.fontFamilyCode},children:"A"}),(0,o.tZ)(S.II,{readOnly:!0,ref:M,onChange:function(){return null},value:Q,onFocus:function(){return F(M)},id:ee("record")}),(0,o.tZ)(S.zx,{onClick:function(){return j(M)},text:"Copy"})]})]}),B?(0,o.tZ)(S.G7,{css:[S.l0.flex.row,S.l0.align.stretch],children:(0,o.tZ)(S.zx,{outlined:!0,onClick:function(){return I(!0)},text:"Use CNAME record instead."})}):null]}):null,!$||!R&&Y?null:(0,o.BX)(S.G7,{css:[S.l0.colWithGap(4)],children:[(0,o.tZ)("label",{htmlFor:ee("CNAMERecord"),children:(0,o.BX)(S.xv,{color:"dimmer",variant:"small",children:["Step 2: Add a ",(0,o.tZ)("code",{children:"CNAME"})," Record"]})}),(0,o.BX)(S.G7,{css:[S.l0.rowWithGap(8),S.l0.align.center],children:[(0,o.tZ)(S.xv,{css:{fontFamily:S.TV.fontFamilyCode,maxWidth:"40%"},children:H}),(0,o.tZ)(S.xv,{css:{fontFamily:S.TV.fontFamilyCode},children:"CNAME"}),(0,o.tZ)(S.II,{readOnly:!0,ref:W,onChange:function(){return null},value:K,onFocus:function(){return F(W)},id:ee("CNAMERecord")}),(0,o.tZ)(S.zx,{onClick:function(){return j(W)},text:"Copy"})]}),Y?(0,o.BX)(S.G7,{css:[S.l0.colWithGap(8)],children:[(0,o.tZ)(S.xv,{variant:"small",multiline:!0,children:'Note: this CNAME record requires that your DNS provider supports CNAMEs for apex domains - for example Cloudflare with "CNAME Flattening".'}),(0,o.tZ)(S.G7,{css:[S.l0.flex.row,S.l0.align.stretch],children:(0,o.tZ)(S.zx,{onClick:function(){return I(!1)},text:"Use A record instead",outlined:!0})})]}):null]}),$?(0,o.BX)(S.G7,{css:[S.l0.colWithGap(4)],children:[Y?(0,o.tZ)("label",{htmlFor:ee("txtRecord"),children:(0,o.BX)(S.xv,{color:"dimmer",variant:"small",children:["This domain also requires a ",(0,o.tZ)("code",{children:"TXT"})," Record"]})}):(0,o.BX)("label",{children:['If you are using a service like Cloudflare (with "orange cloud") that rewrites domain records, you can add a ',(0,o.tZ)("code",{children:"TXT"})," ","Record for verification purposes."]}),(0,o.BX)(S.G7,{css:[S.l0.rowWithGap(8),S.l0.align.center],children:[(0,o.tZ)(S.xv,{css:{fontFamily:S.TV.fontFamilyCode,maxWidth:"40%"},children:H}),(0,o.tZ)(S.xv,{css:{fontFamily:S.TV.fontFamilyCode},children:"TXT"}),(0,o.tZ)(S.II,{readOnly:!0,ref:O,onChange:function(){return null},value:J,onClick:function(){return F(O)},id:ee("txtRecord")}),(0,o.tZ)(S.zx,{onClick:function(){return j(O)},text:"Copy"})]})]}):null,"loading"===p?(0,o.tZ)(S.G7,{css:[S.l0.colWithGap(12),S.l0.pt(16)],children:(0,o.tZ)(U,{replId:t.id,domain:H,onVerified:function(){return q("verified")},onError:function(){return q("error")}})}):null,"verified"===p?(0,o.tZ)(S.G7,{css:[S.l0.colWithGap(12),S.l0.pt(16)],children:(0,o.tZ)(S.xv,{children:"Your domain has been verified."})}):null,"error"===p||w?(0,o.tZ)(S.G7,{css:[S.l0.colWithGap(12),S.l0.pt(16)],children:(0,o.BX)(S.xv,{children:["Creating the domain link failed",w?": "+w:"","."]})}):null,(0,o.BX)(S.G7,{css:[S.l0.rowWithGap(12),S.l0.justify.end],children:[(0,o.tZ)(S.zx,{onClick:l,text:"Close"}),$&&null===p?(0,o.tZ)(S.zx,{disabled:g,onClick:function(){Z(!0),x(null),L({variables:{replId:t.id,domain:H,deploymentId:r}}).then((function(e){var t,n=(null===(t=e.data)||void 0===t?void 0:t.linkReplDomain2)||null;"Repl"===(null===n||void 0===n?void 0:n.__typename)||"ServiceUnavailable"===(null===n||void 0===n?void 0:n.__typename)?(x(null),q("loading")):("NotFoundError"!==(null===n||void 0===n?void 0:n.__typename)&&"UnauthorizedError"!==(null===n||void 0===n?void 0:n.__typename)||x(null===n||void 0===n?void 0:n.message),q("error")),Z(!1),u()})).catch((function(e){Z(!1),x(e.message)}))},text:"".concat(g?"Linking domain...":"Link domain"),iconLeft:(0,o.tZ)(D.Z,{}),colorway:"primary"}):null]})]})}function U(e){var t,n=e.domain,a=e.replId,u=e.onVerified,d=e.onError,h=function(e){var t=(0,s.Z)({},y,e);return f.a(x,t)}({variables:{replId:a,domain:n},pollInterval:1e3}),p=h.data,v=h.stopPolling;if((0,c.useEffect)((function(){var e,t;if(p&&"Repl"===p.repl.__typename){var n=p.repl;if("NotFoundError"!==(null===(e=n.checkDomain2)||void 0===e?void 0:e.__typename)){if("DomainStatus2"===(null===(t=n.checkDomain2)||void 0===t?void 0:t.__typename)){var r=n.checkDomain2,i=r.retry,o=r.verified;o||i?(!o&&i||v(),o&&u()):d()}}else d()}}),[p,v,u,d]),"Repl"===(null===p||void 0===p?void 0:p.repl.__typename)&&p.repl.checkDomain2){var m,g,Z,b="DomainStatus2"===p.repl.checkDomain2.__typename?p.repl.checkDomain2:null,w=null;if(null===b||void 0===b?void 0:b.records){var C=b.records;C.__typename;w=(0,r.Z)(C,["__typename"])}var k,E=null;if(!(null===b||void 0===b?void 0:b.status))"ServiceUnavailable"===(null===(k=p.repl.checkDomain2)||void 0===k?void 0:k.__typename)&&(E=p.repl.checkDomain2.message),E||(E="DNS updates can take up to 48 hours to fully synchronize. Feel free to check back later.");return(0,o.BX)(S.G7,{css:[S.l0.colWithGap(16),S.l0.justify.spaceBetween],children:[(0,o.BX)(S.G7,{css:[S.l0.rowWithGap(16),S.l0.align.center],children:[(0,o.tZ)("div",{css:[S.l0.width("20px"),S.l0.height("20px"),{aspectRatio:"1 / 1"},{borderRadius:"100%"},{borderRadius:"100%"},{borderStyle:"solid"},{borderWidth:"3px"},{borderColor:S.TV.accentPrimaryDimmer},{borderTopColor:S.TV.accentPrimaryDefault},{transform:"rotate(0deg)"},{animation:"linear domain-loading 1s infinite"}],className:"jsx-4e6cc6caecb799c9"}),(0,o.tZ)("div",{className:"jsx-4e6cc6caecb799c9",children:E})]}),w||"DomainStatus2"===(null===(m=p.repl.checkDomain2)||void 0===m?void 0:m.__typename)&&(null===(g=p.repl.checkDomain2)||void 0===g?void 0:g.retry)||"ServiceUnavailable"===(null===(Z=p.repl.checkDomain2)||void 0===Z?void 0:Z.__typename)?(0,o.BX)(S.G7,{children:[(0,o.tZ)("br",{className:"jsx-4e6cc6caecb799c9"}),w?(0,o.BX)(S.G7,{children:["Currently, your domain\u2019s records show:",(0,o.tZ)("pre",{css:[S.l0.overflow("scroll")],className:"jsx-4e6cc6caecb799c9",children:Object.entries(w).map((function(e){var t=(0,i.Z)(e,2),r=t[0],a=t[1];return null===a||void 0===a?void 0:a.map((function(e){return(0,o.BX)("div",{className:"jsx-4e6cc6caecb799c9",children:[n," ",r," ",e]},"{domain}-{dnsType}")}))}))})]}):(0,o.tZ)(S.xv,{multiline:!0,children:"Currently, your domain is either not returning any records, or something is getting in the way of our verification process."})]}):null,(0,o.tZ)(l(),{id:"4e6cc6caecb799c9",children:"@-webkit-keyframes domain-loading{from{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes domain-loading{from{-moz-transform:rotate(0deg);transform:rotate(0deg)}to{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes domain-loading{from{-o-transform:rotate(0deg);transform:rotate(0deg)}to{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes domain-loading{from{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}"})]})}return"Repl"===(null===p||void 0===p?void 0:p.repl.__typename)&&"NotFoundError"===(null===(t=p.repl.checkDomain2)||void 0===t?void 0:t.__typename)?(0,o.tZ)(o.HY,{children:"We ran into an internal error while checking the domain. Please try again later."}):null}function A(e){var t=e.replId,n=e.domain,r=e.onUnlink,a=e.onGoBack,l=(0,i.Z)(function(e){var t=(0,s.Z)({},y,e);return h.D(k,t)}({variables:{input:{id:t,removeDomain:n}}}),2),u=l[0],d=l[1];return(0,c.useEffect)((function(){d.data&&d.data.updateRepl.repl&&r()}),[d.data,r]),(0,o.BX)(S.G7,{css:[S.l0.colWithGap(16)],children:[(0,o.BX)(S.G7,{css:[S.l0.colWithGap(8)],children:[(0,o.tZ)(S.h4,{level:3,variant:"subheadDefault",children:"Domain Unlinking"}),(0,o.BX)(S.xv,{multiline:!0,children:["Are you sure you want to unlink"," ",(0,o.tZ)("a",{target:"_blank",rel:"noopener",href:"https://"+n,children:n}),"?"]})]}),(0,o.BX)(S.G7,{css:[S.l0.rowWithGap(12),S.l0.justify.end],children:[(0,o.tZ)(S.zx,{onClick:a,text:"Cancel"}),(0,o.tZ)(S.zx,{onClick:function(){d.loading||u()},text:d.loading?"Unlinking domain...":"Yes, unlink this domain",colorway:"negative",iconLeft:(0,o.tZ)(P.Z,{}),disabled:d.loading})]})]})}function N(e){var t=e.replId,n=e.deploymentId,r=e.onUnlink,i=e.onLink,a=function(e){var t=(0,s.Z)({},y,e);return f.a(w,t)}({variables:{replId:t}}),l=a.data,u=a.loading,d=a.refetch,h=(0,c.useState)("listing"),p=h[0],v=h[1],m=(0,c.useState)(null),g=m[0],Z=m[1],b=null;if(u)b=(0,o.tZ)(o.HY,{children:"loading..."});else if(l&&"Repl"===l.repl.__typename){var x=l.repl,C=null;if(x.domains){var k=x.domains.filter(Boolean).filter((function(e){return n?(null===e||void 0===e?void 0:e.hosting_deployment_id)===n:!(null===e||void 0===e?void 0:e.hosting_deployment_id)})).map((function(e){return{domain:e.domain,state:e.state}}));C=0===k.length?(0,o.tZ)(S.xv,{children:"No domains are currently linked."}):(0,o.BX)(S.G7,{children:[(0,o.tZ)(S.h4,{level:3,variant:"subheadDefault",children:"Currently Linked Domains"}),(0,o.tZ)(S.G7,{css:[S.l0.colWithGap(8)],children:k.map((function(e){return e?(0,o.tZ)(S.G7,{children:(0,o.BX)(S.G7,{css:[S.l0.rowWithGap(12),S.l0.justify.spaceBetween,S.l0.align.center],children:[(0,o.BX)(S.xv,{children:[e.domain,": ",e.state,"..."]}),(0,o.BX)(S.G7,{css:[S.l0.rowWithGap(12),S.l0.justify.end,S.l0.align.center],children:[(0,o.tZ)(S.zx,{text:"Unlink",onClick:function(){Z(e.domain),v("unlinking")}}),"verified"!==e.state?(0,o.tZ)(S.zx,{text:"Check status",onClick:function(){Z(e.domain),v("linking")}}):null]})]})},e.domain):null}))})]})}"listing"===p?b=(0,o.BX)(S.G7,{css:[S.l0.colWithGap(16)],children:[C,(0,o.tZ)(S.zx,{text:"Create Domain Link",onClick:function(){return v("linking")},iconLeft:(0,o.tZ)(I.Z,{})})]}):"linking"===p?b=(0,o.tZ)(B,{repl:x,existingDomain:g,deploymentId:n,onLink:i,onGoBack:function(){v("listing"),Z(null)},onLinkStarted:d,onStateChanged:d}):"unlinking"===p&&null!==g&&(b=(0,o.tZ)(A,{replId:x.id,domain:g,onUnlink:function(){d(),v("listing"),r()},onGoBack:function(){v("listing"),Z(null)}}))}else l&&"ReplRedirect"===l.repl.__typename?b=(0,o.BX)("div",{children:["This repl has moved to"," ",(0,o.tZ)("a",{href:l.repl.replUrl,children:l.repl.replUrl})]}):l&&"SubscriptionExpiredError"===l.repl.__typename&&(b=(0,o.tZ)("div",{children:"Subscription expired"}));return(0,o.BX)(S.G7,{css:[S.l0.colWithGap(24)],children:[(0,o.tZ)(S.h4,{level:1,variant:"headerDefault",children:"Domain Linking"}),b]})}},84197:function(e,t,n){var r=n(94660),i=n(29356),o=n.n(i);n(59496);t.Z=function(e){var t=e.maxLength,n=void 0===t?140:t,i=e.value,a=void 0===i?"":i,l=e.hideLabel,c=void 0!==l&&l;return(0,r.BX)("div",{className:"jsx-59d2089b8a0ab881",children:[a.length," / ",n," ",c?"":"characters",(0,r.tZ)(o(),{id:"59d2089b8a0ab881",children:"div.jsx-59d2089b8a0ab881{color:var(--foreground-dimmer);font-size:.75em;text-align:right;margin-top:var(--space-8)}"})]})}},4153:function(e,t,n){n.d(t,{E:function(){return s}});var r=n(94660),i=n(10063),o=n(58530),a=n(56579),l=n(56152),c=n(59496);function s(){var e=(0,a.Z)().replspaceApi,t=(0,c.useState)(null),n=t[0],s=t[1];return(0,c.useEffect)((function(){return e.onConfirmSendToken((function(e){(0,i.j)(i.U3.MODAL_VIEWED,{modalName:"git_token_modal"}),s((function(){return e}))}))}),[e]),(0,r.tZ)(o.u_,{isOpen:"function"===typeof n,onRequestClose:function(){null===n||void 0===n||n(!1),(0,i.j)(i.U3.GIT_TOKEN_MODAL_ACCEPTED,{response:"close"}),s(null)},children:(0,r.BX)(o.G7,{css:[o.l0.colWithGap(16)],children:[(0,r.tZ)(o.h4,{variant:"headerDefault",level:3,children:"Pass GitHub Credentials"}),(0,r.tZ)(o.xv,{multiline:!0,children:"It looks like you're trying to connect to your GitHub repository through the shell. Pass your token to the shell?"}),(0,r.tZ)(o.xv,{multiline:!0,children:"If you did not initiate a git command, you should deny this."}),(0,r.BX)(o.G7,{css:[o.l0.justify.end,o.l0.rowWithGap(16)],children:[(0,r.tZ)(o.zx,{onClick:function(){null===n||void 0===n||n(!1),(0,i.j)(i.U3.GIT_TOKEN_MODAL_ACCEPTED,{response:"deny"}),s(null)},text:"Deny"}),(0,r.tZ)(o.zx,{onClick:function(){null===n||void 0===n||n(!0),(0,i.j)(i.U3.GIT_TOKEN_MODAL_ACCEPTED,{response:"confirm"}),s(null)},iconLeft:(0,r.tZ)(l.Z,{}),text:"Confirm for this session",colorway:"primary"})]})]})})}},25505:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(72006),i=n(4405),o=n(77637),a=n(94660),l=(n(59496),n(19666)),c=n(7330),s=(0,n(58530).Xb)({self:[{overflowX:"auto",overflowY:"hidden","::-webkit-scrollbar":[c.l0.display.none]}]});function u(e){var t=e.gap,n=e.inset,u=e.children,d=e.className,f=(0,o.Z)(e,["gap","inset","children","className"]);return(0,a.tZ)(l.G,(0,i.Z)((0,r.Z)({className:d,css:s.self},f),{children:(0,a.tZ)(l.G,{css:[c.l0.px(n),c.l0.rowWithGap(t),{width:"fit-content"}],children:u})}))}},16828:function(e,t,n){n.d(t,{R:function(){return i}});var r=n(57389),i=(0,n(72030).iv)((0,r.Z)({cursor:"pointer",pointerEvents:"all",color:"var(--accent-primary-stronger)",textDecoration:"none"},"&:hover",{textDecoration:"underline"}))},75270:function(e,t,n){n.d(t,{Z:function(){return w}});var r=n(94660),i=n(16092),o=n(82040),a=n(62687),l=n(99209),c=n(63463),s=n(7330),u=n(94717),d=n(19666),f=n(49356),h=n(24410),p=n(39792),v=n(72006),m=n(4405),g=(n(59496),n(22356)),Z=function(e){return(0,r.tZ)(g.Z,(0,m.Z)((0,v.Z)({viewBox:"0 0 800.5 907.77"},e),{children:(0,r.tZ)("path",{d:"M303.36,238.61c31.36-21.37,71.76-12.97,65-6.53c-12.89,12.28,4.26,8.65,6.11,31.31 c1.36,16.69-4.09,25.88-8.78,31.11c-9.79,1.28-21.69,3.67-36.02,8.33c-8.48,2.76-15.85,5.82-22.31,8.9 c-1.7-1.11-3.55-2.47-5.74-4.36C279.5,288.19,280.24,254.37,303.36,238.61 M490.68,370.72c5.69-4.41,31.55-12.72,55.49-15.55 c12.57-1.48,30.49-2.34,34.31-0.2c7.59,4.19,7.59,17.16,2.39,29.14c-7.57,17.4-18.27,36.63-30.39,38.21 c-19.77,2.61-38.46-8.09-59.8-24.03C485.06,392.56,480.38,378.68,490.68,370.72 M526.75,201.27c29.19,13.58,25.37,39.42,26.18,54.6 c0.22,4.36,0.15,7.3-0.22,9.32c-4.04-2.19-10.43-3.8-20.56-3.35c-2.96,0.12-5.84,0.47-8.63,0.91c-10.77-5.77-17.21-17.06-23.1-29.06 c-0.54-1.11-0.96-2.1-1.36-3.06c-0.17-0.44-0.35-0.91-0.52-1.31c-0.07-0.22-0.12-0.39-0.2-0.59c-3.23-10.25-1.06-12.3,0.3-15.46 c1.41-3.23,6.68-5.89-1.11-8.58c-0.67-0.25-1.5-0.39-2.44-0.57C500.25,197.72,515.7,196.17,526.75,201.27 M367.62,510.22 c-31.45-20.19-63.99-49.15-78.22-65.18c-2.39-1.8-2-9.79-2-9.79c12.84,9.98,66.11,48.04,122.44,65.42 c19.87,6.14,50.36,8.46,76.81-6.53c20.21-11.46,44.54-31.43,59.06-52.01l2.66,4.61c-0.1,3.06-6.78,17.97-10.18,23.96 c6.14,3.53,10.72,4.49,17.55,6.36l46.64-7.27c16.74-27.04,28.74-70.65,15.95-112.16c-7.3-23.81-45.36-71.22-48.09-73.83 c-9.56-9.19,1.6-44.69-17.35-83.42C532.86,159.41,480.67,116.69,458,98.1c6.68,4.88,47.82,21.47,67,44.62 c1.8-2.39,2.54-14.82,4.19-17.97c-16.47-21.57-17.75-59.95-17.75-70.21c0-18.81-9.56-40.13-9.56-40.13s16.47,13.04,20.73,35.5 c5.03,26.6,15.75,47.55,29.93,65.28c26.84,33.43,51.08,50.58,63.33,38.23C630.53,138.58,601,72.2,563.28,35.15 C519.25-8.09,507.74-2.52,481.91,6.7c-20.61,7.35-31.75,65.87-85.47,64.71c-9.1-1.06-32.54-1.63-44.13-1.53 c6.04-8.43,11.22-14.94,11.22-14.94s-18.02,7.25-33.38,16.44l-1.18-1.77c5.18-10.92,10.75-17.82,10.75-17.82s-14.4,8.65-27.54,19.01 c2.39-13.02,11.44-21.27,11.44-21.27s-18.19,3.28-41.36,28.77c-26.33,7.2-32.66,11.93-53.64,21.22 c-34.12-7.44-50.21-19.45-65.55-41.56c-11.68-16.89-32.47-19.45-53.71-10.72c-30.97,12.8-70.14,30.33-70.14,30.33 s12.77-0.52,26.08,0.05c-18.22,6.9-35.72,16.39-35.72,16.39s8.53-0.3,19.06-0.12c-7.27,6.04-11.29,8.92-18.22,13.51 c-16.66,12.1-30.17,26.08-30.17,26.08s11.31-5.15,21.47-8.04c-7.1,16.27-21.18,28.25-18.59,48.17 c2.49,18.19,24.82,55.66,53.64,78.66c2.49,2,41.86,38.43,71.56,23.47c29.68-14.94,41.39-28.25,46.27-48.66 c5.74-23.44,2.47-41.17-9.79-92.05c-4.04-16.79-14.57-51.37-19.65-67.91l1.13-0.81c9.71,20.49,34.56,74.5,44.57,110.78 c15.63,56.57,10.75,85.27,3.6,95.79c-21.57,31.73-76.84,35.92-101.98,18.34c-3.85,60.91,9.76,87.73,14.37,101.24 c-2.29,15.53,7.77,44.37,7.77,44.37s1.13-13.11,5.74-20.02c1.23,15.41,9,33.72,9,33.72s-0.47-11.31,3.06-21.08 c4.98,8.43,8.63,10.43,13.34,16.76c4.71,16.47,14.15,28.5,14.15,28.5s-1.53-8.83-0.69-18.02c23.05,22.14,27.02,54.45,29.31,79.28 c6.46,68.26-107.63,122.54-129.74,165.24c-16.76,25.29-26.8,65.3,1.58,88.89c68.6,56.97,42.25,72.65,76.59,97.69 c47.11,34.34,106.05,18.96,126.11-8.97c27.93-38.92,20.76-75.63,10.38-109.97c-8.11-26.85-30.15-71.46-57.41-88.72 c-27.86-17.65-54.95-20.95-77.9-18.59l2.12-2.44c33.01-6.56,67.52-2.96,92.49,13.14c28.35,18.22,54.28,49.47,67.84,97.37 c15.38-2.19,17.55-3.18,31.63-5.18l-31.7-246.76L367.62,510.22z M385.94,819.52l-3.65-34.22l71.29-108.74l80.93,23.64l69.59-116.23 L687.52,639l63.38-132.92l22.53,242.07L385.94,819.52z M774.27,456.51l-254.72,46.17c-6.31,8.13-21.91,22.41-29.41,26.13 c-32.17,16.2-53.91,11.51-72.7,6.63c-12.08-3.06-19.08-4.78-29.11-9.29l-62.17,8.53l37.74,314.87l436.35-78.66L774.27,456.51z"})}))},y=n(82322);function b(e){return"https://app.datadoghq.com/logs?"+new URLSearchParams({query:"@replid:".concat(e)}).toString()}function w(e){var t=e.replId,n=e.showFlag,v=void 0!==n&&n,m=(0,f.F)().isDarkColorScheme;return(0,r.BX)(r.HY,{children:[(0,r.tZ)(o.Z,{href:b(t),iconLeft:(0,r.tZ)(Z,{color:m?"#FFFFFF":"#632CA6"}),iconRight:(0,r.tZ)(h.Z,{}),target:"_blank",text:"View Datadog Logs"}),(0,r.BX)(d.G,{css:[s.l0.rowWithGap(2),{alignItems:"center"}],children:[v?(0,r.BX)(u.u,{tooltip:"You are seeing this functionality because you have special permissions.",children:[(0,r.tZ)(y.Z,{})," "]}):null,(0,r.BX)(c.xv,{css:s.l0.align.center,children:["Repl ID: ",(0,r.tZ)(l.Z,{children:t})]}),(0,r.tZ)(a.h,{alt:"Copy to clipboard",onClick:function(){return(0,i.Z)(t)},children:(0,r.tZ)(p.Z,{})})]})]})}},73728:function(e,t,n){n.d(t,{Z:function(){return _}});var r=n(72006),i=n(4405),o=n(2272),a=n(94660),l=n(59496),c=n(88254),s=n(75408),u=n(58530),d=n(56474),f=n(58722),h=n(87392),p=n(44135),v=n(84197),m=n(21793),g=n(11620),Z=n(38034),y=n(77705),b=n(43119),w=n(71440),x=n(97091),C=n(53486);function k(){var e=(0,b.Z)(["\n  query ForkModal {\n    currentUser {\n      id\n      url\n      image\n      username\n      ...ReplOwnerCurrentUser\n      teams {\n        id\n        ...ReplOwnerTeam\n      }\n    }\n  }\n  ","\n  ","\n"]);return k=function(){return e},e}var S={},E=(0,w.Ps)(k(),x.s,x.a);var T=n(74137),R=function(e){var t=e.onFork,n=e.hideModal,r=e.initialTitle,i=e.initialDescription,c=void 0===i?"":i,d=e.initialPrivacy,b=e.teamContext,w=e.currentUser,x=e.template,C=l.useRef(null),k=(0,p.H)(),S=(0,o.Z)((0,g.Y)(w,b),2),E=S[0],R=S[1],_=(0,o.Z)((0,T.c)(E,w,d||!1),3),I=_[0],G=_[1],D=_[2],P=(0,s.Y)(r,(function(e){if(e)return e.length>60?{message:"Must be no longer than 60 characters"}:void 0})),B=(0,s.Y)(c,(function(e){if(e&&e.length>h.p)return{message:"Must be no longer than ".concat(h.p," characters")}}));l.useEffect((function(){C.current&&C.current.focus()}),[C]);var U="Team"===E.__typename?E.id:null;return(0,a.tZ)("form",{onSubmit:function(e){e.preventDefault(),P.validate()||B.validate()||(t(U,P.value,B.value,I),n())},children:(0,a.BX)(u.G7,{css:[u.l0.colWithGap(16)],children:[(0,a.tZ)(u.h4,{variant:"headerDefault",level:2,children:x?"Use Template":"Fork Repl"}),(0,a.BX)(u.G7,{css:[u.l0.colWithGap(16)],children:[(0,a.BX)(u.G7,{css:[u.l0.colWithGap(4)],children:[(0,a.BX)(u.G7,{css:[u.l0.flex.row,u.l0.justify.spaceBetween,u.l0.align.end],children:[(0,a.tZ)(m._,{for:k("name"),children:"Name"}),(0,a.tZ)(v.Z,{maxLength:60,value:P.value,hideLabel:!0})]}),(0,a.tZ)(u.II,{ref:C,className:"repl-title-input",placeholder:"Name your Repl",onChange:function(e){return P.setValue(e.target.value)},onFocus:function(e){return e.target.select()},value:P.value,onBlur:P.handleBlur,id:k("name")}),P.error?(0,a.tZ)(u.xv,{css:[u.l0.color.accentNegativeStronger],children:P.error.message}):null]}),(0,a.BX)(u.G7,{css:[u.l0.colWithGap(4)],children:[(0,a.BX)(u.G7,{css:[u.l0.flex.row,u.l0.justify.spaceBetween,u.l0.align.end],children:[(0,a.tZ)(m._,{for:k("description"),children:"Description"}),(0,a.tZ)(v.Z,{maxLength:h.p,value:B.value,hideLabel:!0})]}),(0,a.tZ)(u.B,{maxLength:h.p,value:B.value,onChange:function(e){return B.setValue(e.target.value)},placeholder:"What does this Repl do?",css:[u.l0.minHeight(96),u.l0.maxHeight(128),{resize:"vertical"}],id:k("description")})]}),(0,a.tZ)(y.P,{context:"fork_modal",isPrivate:I,setIsPrivate:G,privacyState:D})]}),w.teams.length>0?(0,a.BX)(u.G7,{css:[u.l0.colWithGap(8)],children:[(0,a.tZ)(m._,{for:k("owner"),children:"Owner"}),(0,a.tZ)(Z.Z,{id:k("owner"),currentUser:w,initialSelectedUsername:E.username,onChange:function(e){return R(e.username)}})]}):null,(0,a.BX)(u.G7,{css:[u.l0.rowWithGap(12),u.l0.justify.end],children:[(0,a.tZ)(u.zx,{onClick:n,text:"Cancel",type:"button"}),(0,a.tZ)(u.zx,{colorway:"primary",type:"submit",disabled:Boolean(P.error||B.error),text:x?(0,a.tZ)(a.HY,{children:"Use Template"}):(0,a.tZ)(a.HY,{children:"Fork Repl"}),iconLeft:(0,a.tZ)(f.Z,{})})]})]})})};function _(e){var t=function(e){var t=(0,r.Z)({},S,e);return C.a(E,t)}({fetchPolicy:"cache-and-network",onError:function(e){c.$e((function(t){t.setTag("fork-modal",!0),c.Tb(e)}))}}),n=t.data,o=t.loading,l=t.error;if(o)return(0,a.tZ)(u.xv,{color:"dimmer",children:"Loading..."});if(l)return(0,a.tZ)(u.xv,{children:"Something went wrong."});if(!n)return null;var s=n.currentUser;return s?(0,a.tZ)(R,(0,i.Z)((0,r.Z)({},e),{currentUser:s})):(0,a.tZ)(d.Z,{title:"Sign up or log in to fork this Repl",onSuccess:function(){},source:"fork"})}},7954:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(2272),i=n(94660),o=n(58530),a=n(59496),l=n(79960);function c(e){var t=e.context,n=(0,r.Z)(a.useState(!1),2),c=n[0],s=n[1];return(0,i.BX)(i.HY,{children:[(0,i.tZ)(o.zx,{text:"Activate",colorway:"primary",onClick:function(){return s(!0)}}),(0,i.tZ)(l.Z,{context:t,isOpen:c,onRequestClose:function(){return s(!1)},uponPurchaseGoTo:"cyclesPage",powerUp:"ghostwriter"})]})}},94868:function(e,t,n){n.d(t,{E:function(){return r},c:function(){return i}});var r="Procfile";function i(e){var t={};return e.split("\n").forEach((function(e){if(""!==e){var n=e.match(/^([A-Za-z0-9_]+):\s*(.+)$/);if(n){var r=n[2].trim().split(" "),i=n[1];t[i]={command:r[0],options:r.slice(1)}}}})),t}},65292:function(e,t,n){n.d(t,{Z:function(){return y}});var r=n(72006),i=n(4405),o=n(2272),a=n(59496),l=n(54703),c=n(99340),s=n(43119),u=n(71440),d=n(46653);function f(){var e=(0,s.Z)(["\n  mutation ForkReplCreateRepl($input: CreateReplInput!) {\n    createRepl(input: $input) {\n      ... on Repl {\n        id\n        url\n        isPrivate\n        language\n        origin {\n          id\n          isOwner\n        }\n        source {\n          release {\n            id\n            repl {\n              id\n              title\n              owner {\n                ... on User {\n                  id\n                  username\n                }\n                ... on Team {\n                  id\n                  username\n                }\n              }\n            }\n          }\n        }\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return f=function(){return e},e}var h={},p=(0,u.Ps)(f());function v(e){var t=(0,r.Z)({},h,e);return d.D(p,t)}var m=n(65517),g=n(10063),Z=n(38181);function y(){var e,t,n,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},u=s.onFork,d=s.onError,f=(0,l.useRouter)(),h=(0,c.Z)().showError,p=(0,m.Z)(),y=(0,o.Z)(v({onCompleted:function(e){var t="Repl"===(null===e||void 0===e?void 0:e.createRepl.__typename)?e.createRepl:null;if(t)if(u&&u(e),"/replEnvironmentDesktop"!==f.pathname&&"/replEnvironmentMobile"!==f.pathname)f.push({pathname:p,query:{replUrl:t.url}},{pathname:t.url});else{var n=t.url+(f.query.lite?"?lite=".concat(f.query.lite.toString()):"");window.location.href=n}}}),2),b=y[0],w=y[1],x="UserError"===(null===(e=w.data)||void 0===e?void 0:e.createRepl.__typename)?null===(t=w.data)||void 0===t?void 0:t.createRepl.message:null===(n=w.error)||void 0===n?void 0:n.message;a.useEffect((function(){x&&(h(x),d&&d())}),[x,h,d]);var C=a.useCallback((function(e){var t=e.originId,n=e.replReleaseId,o=e.teamId,a=e.title,l=e.description,c=e.isPrivate,s=e.trackingData,u=e.forkToPersonal;(0,g.j)(g.U3.FORK_REQUESTED,s),b({variables:{input:{originId:t,replReleaseId:n,teamId:o,title:a,isPrivate:c,description:l,forkToPersonal:u,gitRemoteUrl:""}}}).then((function(e){var o,a,l,c,u,d,f,h,p,v,m,y,b,w,x="Repl"===(null===(o=e.data)||void 0===o?void 0:o.createRepl.__typename)?e.data.createRepl:null;x&&(0,g.j)(g.U3.REPL_CREATED,(0,i.Z)((0,r.Z)({isSignup:!1,isOnboarding:!1},s),{isForked:!0,isPrivate:x.isPrivate,replId:x.id,isRenamed:!1,language:x.language,isSelfForked:!!(null===(a=x.origin)||void 0===a?void 0:a.isOwner),isTemplateFork:Boolean(n),originId:t,templateReplId:(null===(l=x.source)||void 0===l||null===(c=l.release)||void 0===c||null===(u=c.repl)||void 0===u?void 0:u.id)||void 0,templateTitle:null===(d=x.source)||void 0===d||null===(f=d.release)||void 0===f||null===(h=f.repl)||void 0===h?void 0:h.title,templateOwner:null===(p=x.source)||void 0===p||null===(v=p.release)||void 0===v||null===(m=v.repl)||void 0===m||null===(y=m.owner)||void 0===y?void 0:y.username,templateType:(null===(b=x.source)||void 0===b||null===(w=b.release)||void 0===w?void 0:w.repl)?(0,Z.lw)(x.source.release.repl):void 0}))}))}),[b]),k=!!(w.loading||w.data&&"Repl"===w.data.createRepl.__typename);return[C,{loading:k}]}},19978:function(e,t,n){n.d(t,{f6:function(){return c},oj:function(){return l},xZ:function(){return u}});var r=n(2272),i=n(59496),o=n(56579);function a(e){var t=(0,r.Z)(i.useState(!1),2),n=t[0],a=t[1],l=(0,o.Z)().dotReplit;return i.useEffect((function(){var t=!1;return l.getConfig().then((function(n){t||n.error||n.config.language===e&&a(!0)})),function(){t=!0}}),[e,l]),n}function l(){return a("kaboom")}function c(){return a("kaboomdraw")}var s=/^draw.[tj]s$/;function u(e){return c()&&Boolean(null===e||void 0===e?void 0:e.match(s))}},43759:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(54703),i=n.n(r),o=n(56579),a=n(59496),l=n(54129),c=n(96405),s="You have unsaved changes";function u(){var e=(0,o.Z)().fs,t=(0,r.useRouter)(),n=(0,a.useState)(!1),u=n[0],d=n[1],f=(0,a.useRef)(!1),h=function(){if(!f.current&&!window.confirm(s))throw i().events.emit("routeChangeError"),i().replace(i(),i().asPath),new Error("Abort route change. Please ignore this error.")};return(0,a.useEffect)((function(){return d(e.getStatus()===l.kO.Syncing),e.onStatusChange((function(e){d(e===l.kO.Syncing)}))}),[e]),(0,a.useEffect)((function(){var e=function(e){if(!f.current)return e.preventDefault(),e.returnValue=s,s};if(u)return window.addEventListener("beforeunload",e),c.gn||t.events.on("routeChangeStart",h),function(){window.removeEventListener("beforeunload",e),c.gn||t.events.off("routeChangeStart",h)}}),[u,t.events]),function(e){return f.current=e}}},39853:function(e,t,n){n.d(t,{Z:function(){return v}});var r=n(2272),i=n(59496),o=n(72006),a=n(43119),l=n(71440),c=n(46653);function s(){var e=(0,a.Z)(["\n  mutation ReplFsUpdated($replId: String!) {\n    updateReplTimeUpdated(id: $replId) {\n      ... on Repl {\n        id\n        timeUpdated\n      }\n    }\n  }\n"]);return s=function(){return e},e}var u={},d=(0,l.Ps)(s());var f=n(53706),h=n(91338),p=n(56579);function v(){var e=(0,r.Z)(function(e){var t=(0,o.Z)({},u,e);return c.D(d,t)}(),1)[0],t=(0,p.Z)().fs,n=(0,h.Z)(),a=null===n||void 0===n?void 0:n.currentUserPermissions.containerWrite,l=null===n||void 0===n?void 0:n.id;(0,i.useEffect)((function(){if(a&&l){var n=(0,f.Z)((function(){return e({variables:{replId:l}})}),{wait:6e4,maxWait:6e5}),r=t.onStatusChange((function(){n()}));return function(){n.isScheduled()&&n.flush(),r()}}}),[t,l,a,e])}},88109:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(2272),i=n(9970),o=n(59496),a=n(14810),l=n(72006),c=n(4405),s=function(e){return/\s/.test(e)};function u(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=(0,r.Z)(o.useState(null),2),a=i[0],u=i[1],d=o.useCallback(u,[u]),f=o.useRef(t);o.useEffect((function(){f.current=t}),[t]);var h=(0,r.Z)(o.useState(null),2),p=h[0],v=h[1];return o.useEffect((function(){if(a){var e=function(){var e=a.value,t=a.selectionStart;if(t){var n=1===t||s(e[t-2]||""),r=e.length?e[t-1]:null;v((function(i){if(i&&(t<i.index||0===t))return null;if(!r)return i;if(!i&&!n)return i;var o=f.current.includes(r);return i||o?i?s(r)?null:(0,c.Z)((0,l.Z)({},i),{text:e.slice(i.index,t)}):{index:t,text:"",match:r}:i}))}else v(null)},t=function(){v(null)};return a.addEventListener("focus",e),a.addEventListener("keyup",e),a.addEventListener("blur",t),function(){v(null),a.removeEventListener("focus",e),a.removeEventListener("keyup",e),a.removeEventListener("blur",t)}}}),[a,v]),[p,d]}function d(e){var t=o.useRef(e);o.useEffect((function(){t.current=e}),[e]);var n=(0,r.Z)(o.useState(!1),2),l=n[0],c=n[1],s=(0,r.Z)(o.useState(null),2),d=s[0],f=s[1],h=(0,r.Z)(u.apply(void 0,(0,i.Z)(Object.keys(e))),2),p=h[0],v=h[1],m=o.useRef(p);o.useEffect((function(){m.current=p}),[p]);var g=(0,a.Z)(p,100);return o.useEffect((function(){if(g){var e=g.match,n=g.text,r=t.current[e]?t.current[e]:null;if(r){var i=!1;return c(!0),r(n).then((function(e){i||m.current===g&&(c(!1),f({textTrigger:g,results:e,applySuggestion:function(e){var t=e.targetValue,n=e.suggestionValue,r=t.slice(0,g.index),i=n,o=t.slice(g.index+g.text.length);o&&o.startsWith(" ")||(i+=" ");var a=r+i+o;return{cursorIndex:(r+i).length+(o&&o.startsWith(" ")?1:0),fullValue:a}}}))})),function(){i=!0}}f(null)}else f(null)}),[g,f]),[{isLoading:l,suggestions:d},v]}},89074:function(e,t,n){n.d(t,{T:function(){return o}});var r=n(56579),i=n(75345);function o(){var e=(0,r.Z)().toolchain;return(0,i.Z)(e.configs)}},26922:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(59496),i=n(38649);function o(){var e=(0,r.useRef)(0),t=(0,r.useState)(!1),n=t[0],o=t[1],a=(0,i.T3)(),l=window.visualViewport;return(0,r.useEffect)((function(){if(l&&a){var t=function(){var t=l.height<.8*e.current;o(t)};return e.current=l.height,l.addEventListener("resize",t),function(){l.removeEventListener("resize",t)}}}),[l,a]),n}},67927:function(e,t,n){n.d(t,{C:function(){return i},w:function(){return r}});var r=function(e){var t=parseInt(e.substring(1),16);return[t>>16&255,t>>8&255,255&t]},i=function(e,t,n){return"#"+e.toString(16)+t.toString(16)+n.toString(16)}},2649:function(e,t,n){n.d(t,{V:function(){return v},Q:function(){return w}});var r=n(81962),i=n(72006),o=n(6801),a=n(66091),l=.5*(Math.sqrt(3)-1),c=(3-Math.sqrt(3))/6,s=new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Math.random;(0,a.Z)(this,e);var n="function"===typeof t?t:f(t);this.p=d(n),this.perm=new Uint8Array(512),this.permMod12=new Uint8Array(512);for(var r=0;r<512;r++)this.perm[r]=this.p[255&r],this.permMod12[r]=this.perm[r]%12}return e.prototype.noise2D=function(e,t){var n,r,i=this.permMod12,o=this.perm,a=0,u=0,d=0,f=(e+t)*l,h=Math.floor(e+f),p=Math.floor(t+f),v=(h+p)*c,m=e-(h-v),g=t-(p-v);m>g?(n=1,r=0):(n=0,r=1);var Z=m-n+c,y=g-r+c,b=m-1+2*c,w=g-1+2*c,x=255&h,C=255&p,k=.5-m*m-g*g;if(k>=0){var S=3*i[x+o[C]];a=(k*=k)*k*(s[S]*m+s[S+1]*g)}var E=.5-Z*Z-y*y;if(E>=0){var T=3*i[x+n+o[C+r]];u=(E*=E)*E*(s[T]*Z+s[T+1]*y)}var R=.5-b*b-w*w;if(R>=0){var _=3*i[x+1+o[C+1]];d=(R*=R)*R*(s[_]*b+s[_+1]*w)}return 70*(a+u+d)},e}();function d(e){for(var t=new Uint8Array(256),n=0;n<256;n++)t[n]=n;for(var r=0;r<255;r++){var i=r+~~(e()*(256-r)),o=t[r];t[r]=t[i],t[i]=o}return t}function f(e){var t=0,n=0,r=0,i=1,o=function(){var e=4022871197;return function(t){t=t.toString();for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)}}();return t=o(" "),n=o(" "),r=o(" "),(t-=o(e))<0&&(t+=1),(n-=o(e))<0&&(n+=1),(r-=o(e))<0&&(r+=1),function(){var e=2091639*t+2.3283064365386963e-10*i;return t=n,n=r,r=e-(i=0|e)}}var h=new u;var p=n(49500);function v(e){var t=!1,n=0,r=0,i=null,o=function(l){if(t){var c=l-n;r+=c,n=l,i=window.requestAnimationFrame(o),e({elapsedTime:r,deltaTime:c,stop:a})}},a=function(){t&&(t=!1,i&&window.cancelAnimationFrame(i))};return{start:function(){t||(r=0,n=performance.now(),t=!0,i=window.requestAnimationFrame(o))},stop:a}}var m=function(){return(0,o.hd)(600,1200)},g=function(){return(0,o.hd)(1,3)},Z=function(){return{width:(0,o.hd)(5,20),height:(0,o.hd)(5,20)}},y=function(){return(0,o.vF)()};function b(e){return Array.isArray(e)?(0,o.DQ)(e):(0,r.Z)(e,Function)?e():e}function w(){var e=!1,t=null,n=null,r=[],a=null,l={},c=function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=function(){var e=i.value;if(l[e])return"continue";var t=new Image;t.src=e,t.onerror=function(){p.error('Failed to load particle image "'.concat(e,'"'))},l[e]=t},a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0)o()}catch(c){n=!0,r=c}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}};return{getIsInstalled:function(){return e},addParticles:function(e){for(var t=e.x,n=e.y,s=e.numParticles,u=void 0===s?150:s,d=e.spread,f=void 0===d?60:d,h=e.heading,p=void 0===h?90:h,v=e.airDrag,w=void 0===v?.9:v,x=e.color,C=void 0===x?y:x,k=e.gravity,S=void 0===k?800:k,E=e.velocity,T=void 0===E?m:E,R=e.size,_=void 0===R?Z:R,I=e.lifetime,G=void 0===I?g:I,D=e.flip,P=void 0===D||D,B=e.image,U=void 0===B?void 0:B,A=b(f),N=b(p),L=(0,o.Id)(A),X=(0,o.Id)(-N),M=b(u),O=0;O<M;O++){var W=X+(0,o.hd)(-L/2,L/2),F=b(T),j=b(_),z=j.width,H=j.height,V=b(G),q=b(C),$=b(w),Y=b(t),K=b(n),Q=b(U);"string"===typeof Q&&(l[Q]||c([Q]),Q=l[Q]),r.push((0,i.Z)({seed:(0,o.hd)(0,1e5),x:Y,y:K,gravity:S,airDrag:$,scaleX:1,scaleY:1,rotation:(0,o.hd)(0,(0,o.Id)(360)),velocityX:Math.cos(W)*F,velocityY:Math.sin(W)*F,angularVelocity:(0,o.hd)((0,o.Id)(-400),(0,o.Id)(400)),color:q,alpha:1,width:z,height:H,flip:P,lifetime:V,lifetimeRemaining:V},Q?{image:Q,type:"image"}:{type:(0,o.DQ)(["rectangle","ellipse"])}))}null===a||void 0===a||a.start()},clearParticles:function(){r=[]},uninstall:function(){var r;e&&(t&&(null===(r=document.body)||void 0===r?void 0:r.contains(t))&&document.body.removeChild(t),a&&a.stop(),t=null,n=null,e=!1,l={})},install:function(){e||(t=function(){var e=document.createElement("canvas");return e.style.position="fixed",e.style.top="0px",e.style.left="0px",e.style.pointerEvents="none",e.style.zIndex="999999",e.width=document.documentElement.clientWidth,e.height=document.documentElement.clientHeight,e.id="replit-particles-simulation",e.setAttribute("role","image"),e.ariaHidden="true",e}(),(n=t.getContext("2d"))&&(document.body.appendChild(t),a=v((function(e){var i=e.deltaTime,a=e.stop;if(t&&n){var l=n,c=window.scrollX,s=window.scrollY;t.width!==document.documentElement.clientWidth&&(t.width=document.documentElement.clientWidth),t.height!==document.documentElement.clientHeight&&(t.height=document.documentElement.clientHeight),n.clearRect(0,0,t.width,t.height),r.map((function(e){return function(e){var t=e.particle,n=e.deltaTime;t.velocityY+=t.gravity*n/1e3,t.x+=t.velocityX*n/1e3,t.y+=t.velocityY*n/1e3,t.rotation+=t.angularVelocity*n/1e3,t.velocityX*=t.airDrag,t.velocityY*=t.airDrag,t.flip&&(t.scaleY=2*(0,o.WE)(t.lifetimeRemaining,.5));var r=(0,o.NC)(t.velocityX,t.velocityY),i=(0,o.$G)(t.velocityX,t.velocityY),a=r+.05*h.noise2D(t.seed,t.lifetimeRemaining);t.velocityX=Math.cos(a)*i,t.velocityY=Math.sin(a)*i,t.lifetimeRemaining-=n/1e3,t.lifetimeRemaining<=0?t.alpha=0:t.alpha=1-(t.lifetime-t.lifetimeRemaining)/t.lifetime}({particle:e,deltaTime:i})})),r.map((function(e){return function(e){var t=e.particle,n=e.ctx,r=e.scrollX,i=e.scrollY,o=t.width*t.scaleX,a=t.height*t.scaleY,l=t.x-r,c=t.y-i;n.save(),n.translate(l,c),n.rotate(t.rotation),n.globalAlpha=t.alpha,"image"===t.type?n.drawImage(t.image,-o/2,-a/2,o,a):"rectangle"===t.type?(n.fillStyle=t.color,n.fillRect(-o/2,-a/2,o,a)):"ellipse"===t.type&&(n.fillStyle=t.color,n.beginPath(),n.ellipse(0,0,o/2,a/2,0,0,2*Math.PI),n.fill()),n.restore()}({particle:e,ctx:l,scrollX:c,scrollY:s})})),0===(r=r.filter((function(e){return e.lifetimeRemaining>0}))).length&&a()}})),e=!0))},preloadImages:c,unloadImages:function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;delete l[a]}}catch(c){n=!0,r=c}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}}}}},2804:function(e,t,n){n.d(t,{$:function(){return p},s:function(){return r}});var r,i=n(72006),o=n(77637),a=n(2272),l=n(59496),c=n(6801),s=n(2649),u=n(5109),d=n(65749),f=(0,s.Q)(),h=(0,u.cn)(f);function p(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).preloadImages,t=(0,a.Z)((0,u.KO)(h),1),n=t[0],r=(0,d.T)();l.useEffect((function(){return n.install(),function(){n.uninstall()}}),[n]),l.useEffect((function(){e&&n.preloadImages(e)}),[n,e]);var s=function(e){r||n.addParticles(e)},f=function(e){var t=e.element,n=(0,o.Z)(e,["element"]);if(!r){var a=(0,c.tj)(t),l=a.x,u=a.y;s((0,i.Z)({x:l,y:u},n))}},p=function(e){r||n.addParticles((0,i.Z)({numParticles:125,spread:360,velocity:function(){return(0,c.hd)(400,900)},size:function(){return{width:(0,c.hd)(5,15),height:(0,c.hd)(5,25)}}},e))},v=function(e){var t=e.element,n=(0,o.Z)(e,["element"]);if(!r){var a=(0,c.tj)(t),l=a.x,s=a.y;p((0,i.Z)({x:l,y:s},n))}},m=function(e){var t=e.direction,a=(0,o.Z)(e,["direction"]);r||n.addParticles((0,i.Z)({heading:t},a))},g=function(e){var t=e.element,a=e.direction,l=(0,o.Z)(e,["element","direction"]);if(!r){var s=(0,c.tj)(t),u=s.x,d=s.y;n.addParticles((0,i.Z)({x:u,y:d,numParticles:100,velocity:function(){return(0,c.hd)(400,1500)},spread:60,size:function(){return{width:(0,c.hd)(5,15),height:(0,c.hd)(5,25)}},heading:a},l))}};return{fireBurst:s,fireBurstFrom:f,fireCircularBurst:p,fireCircularBurstFrom:v,fireDirectionalBurst:m,fireDirectionalBurstFrom:g}}!function(e){e[e.East=0]="East",e[e.NorthEast=45]="NorthEast",e[e.North=90]="North",e[e.NorthWest=135]="NorthWest",e[e.West=180]="West",e[e.SouthWest=225]="SouthWest",e[e.South=270]="South"}(r||(r={}))},6801:function(e,t,n){n.d(t,{$G:function(){return f},DQ:function(){return l},Id:function(){return u},NC:function(){return d},WE:function(){return p},hd:function(){return c},tj:function(){return o},vF:function(){return s}});var r=n(92039),i=n.n(r);function o(e){var t=function(e){var t=e.getBoundingClientRect();return{x:t.left+t.width/2,y:t.top+t.height/2}}(e);return{x:t.x+window.scrollX,y:t.y+window.scrollY}}function a(e,t){return i()(e,t,!1)}function l(e){return e[a(0,e.length-1)]}function c(e,t){return i()(e,t,!0)}function s(){return"hsl(".concat(a(0,360),", 100%, 70%)")}function u(e){return e*Math.PI/180}function d(e,t){return Math.atan2(t,e)}function f(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))}function h(e,t){return(e%t+t)%t}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t-Math.abs(h(e,2*t)-t)}},5885:function(e,t,n){n.d(t,{t:function(){return c}});var r=n(43119),i=n(2772),o=n(71440),a=n(88130);function l(){var e=(0,r.Z)(["\n  mutation deleteRepl($id: String!) {\n    deleteRepl(id: $id) {\n      id\n    }\n  }\n"]);return l=function(){return e},e}(0,o.ZP)(l());var c=function(e){var t=(0,a.Z)({id:e.id,__typename:e.__typename||"Repl"}),n=function(e,n){return n.node.id===t};return(0,i._M)((function(){return[["data",i.Dx,"recentRepls",n],["data",t]]}))}},94425:function(e,t,n){n.d(t,{o:function(){return r},p:function(){return i}});var r=function(e){var t=new Date(e),n=t.getHours(),r=t.getMinutes(),o="AM";return n>=12&&(o="PM"),0===(n%=12)&&(n="12"),r<10&&(r="0"+r),i(e)+" ".concat(n,":").concat(r," ").concat(o)},i=function(e){var t=new Date(e),n=t.getMonth()+1,r=t.getDate(),i=t.getFullYear();return"".concat(n,"/").concat(r,"/").concat(i)}},49159:function(e,t,n){function r(e,t){if(!e)return null;var n=e[t];return n?Array.isArray(n)?null:n:null}n.d(t,{Z:function(){return r}})},11214:function(e,t,n){function r(e){if(!e)return!1;try{var t=new URL(e);return Boolean(t)}catch(n){return!1}}n.d(t,{Z:function(){return r}})},45455:function(e,t,n){n.d(t,{A:function(){return l}});var r=n(66091),i=n(2272),o=new(function(){function e(){(0,r.Z)(this,e),this.map=new Map}var t=e.prototype;return t.getOrInit=function(e){var t=this.map.get(e);return t||(t=new Map,this.map.set(e,t)),t},t.add=function(e,t,n){this.getOrInit(e).set(t,n)},t.flush=function(){var e=!0,t=!1,n=void 0;try{for(var r,o=this.map[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var a=(0,i.Z)(r.value,2),l=a[0],c=a[1];if(l&&"current"in l&&(l=l.current),l){var s=!0,u=!1,d=void 0;try{for(var f,h=c[Symbol.iterator]();!(s=(f=h.next()).done);s=!0){var p=(0,i.Z)(f.value,2),v=p[0],m=p[1];l.style.setProperty(v,m)}}catch(g){u=!0,d=g}finally{try{s||null==h.return||h.return()}finally{if(u)throw d}}}}}catch(g){t=!0,n=g}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}this.map.clear()},e}()),a=!1;function l(e,t,n){if(null!==e){if("string"===typeof t){if(void 0===n)throw new Error("value is undefined when prop is string");o.add(e,t,n)}else for(var r in t)o.add(e,r,t[r]);a||(a=!0,requestAnimationFrame((function(){o.flush(),a=!1})))}}},95286:function(e,t,n){n.d(t,{HM:function(){return w},JT:function(){return g},U4:function(){return p},Y8:function(){return v},fS:function(){return y}});var r=n(72006),i=n(43119),o=n(71440),a=n(53486),l=n(46653);function c(){var e=(0,i.Z)(["\n  fragment MultiplayerUser on User {\n    id\n    image\n    username\n  }\n"]);return c=function(){return e},e}function s(){var e=(0,i.Z)(["\n  fragment MultiplayerReplPermission on ReplPermission {\n    id\n    type\n    user {\n      id\n      ...MultiplayerUser\n    }\n  }\n  ","\n"]);return s=function(){return e},e}function u(){var e=(0,i.Z)(["\n  query MultiplayerManageTeamMultiplayers($replId: String!) {\n    currentUser {\n      id\n    }\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        isOwner\n        permissions {\n          id\n          ...MultiplayerReplPermission\n        }\n        currentUserPermissions {\n          editMultiplayers\n          inviteGuests\n        }\n        multiplayerInvites {\n          email\n          type\n        }\n        owner {\n          ... on User {\n            id\n          }\n          ... on Team {\n            id\n            members {\n              id\n              permissions\n              user {\n                id\n                ...MultiplayerUser\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return u=function(){return e},e}function d(){var e=(0,i.Z)(["\n  mutation MultiplayerManageTeamMultiplayersAddMultiplayerUser(\n    $replId: String!\n    $username: String!\n    $type: String!\n  ) {\n    addMultiplayerUser(replId: $replId, username: $username, type: $type) {\n      id\n      type\n      user {\n        id\n        ...MultiplayerUser\n      }\n      repl {\n        id\n        permissions {\n          id\n          ...MultiplayerReplPermission\n        }\n        multiplayerInvites {\n          email\n          type\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return d=function(){return e},e}function f(){var e=(0,i.Z)(["\n  mutation MultiplayerManageTeamMultiplayersRemoveMultiplayerUser(\n    $replId: String!\n    $username: String!\n  ) {\n    removeMultiplayerUser(replId: $replId, username: $username) {\n      id\n      user {\n        id\n        ...MultiplayerUser\n      }\n      repl {\n        id\n        permissions {\n          id\n          ...MultiplayerReplPermission\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return f=function(){return e},e}var h={},p=(0,o.Ps)(c()),v=(0,o.Ps)(s(),p),m=(0,o.Ps)(u(),v,p);function g(e){var t=(0,r.Z)({},h,e);return a.a(m,t)}var Z=(0,o.Ps)(d(),p,v);function y(e){var t=(0,r.Z)({},h,e);return l.D(Z,t)}var b=(0,o.Ps)(f(),p,v);function w(e){var t=(0,r.Z)({},h,e);return l.D(b,t)}},78200:function(e,t,n){n.d(t,{Ej:function(){return I},Gk:function(){return E},L1:function(){return b},QN:function(){return k},Sv:function(){return R},X6:function(){return x}});var r=n(72006),i=n(43119),o=n(71440),a=n(95286),l=n(53486),c=n(46653);function s(){var e=(0,i.Z)(["\n  fragment MultiplayerControlUser on User {\n    id\n    image\n    username\n    url\n  }\n"]);return s=function(){return e},e}function u(){var e=(0,i.Z)(["\n  fragment MultiplayerControlReplPermission on ReplPermission {\n    id\n    type\n    user {\n      id\n      ...MultiplayerControlUser\n    }\n  }\n  ","\n"]);return u=function(){return e},e}function d(){var e=(0,i.Z)(["\n  fragment MultiplayerControlEmailInviteReplPermission on ReplPermission {\n    id\n    type\n    user {\n      id\n      image\n      username\n      url\n    }\n  }\n"]);return d=function(){return e},e}function f(){var e=(0,i.Z)(["\n  query MultiplayerControl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        isOwner\n        permissions {\n          id\n          ...MultiplayerReplPermission\n        }\n        currentUserPermissions {\n          editMultiplayers\n        }\n        multiplayerInvites {\n          email\n          type\n        }\n      }\n    }\n    currentUser {\n      id\n      isSubscribed\n    }\n  }\n  ","\n"]);return f=function(){return e},e}function h(){var e=(0,i.Z)(["\n  mutation MultiplayerControlAddMultiplayerUser(\n    $replId: String!\n    $username: String!\n    $type: String!\n  ) {\n    addMultiplayerUser(replId: $replId, username: $username, type: $type) {\n      id\n      type\n      user {\n        id\n        ...MultiplayerControlUser\n      }\n      repl {\n        id\n        permissions {\n          id\n          ...MultiplayerControlReplPermission\n        }\n        multiplayerInvites {\n          email\n          type\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return h=function(){return e},e}function p(){var e=(0,i.Z)(["\n  mutation MultiplayerControlRemoveMultiplayerUser(\n    $replId: String!\n    $username: String!\n  ) {\n    removeMultiplayerUser(replId: $replId, username: $username) {\n      id\n      user {\n        id\n        ...MultiplayerControlUser\n      }\n      repl {\n        id\n        permissions {\n          id\n          ...MultiplayerControlReplPermission\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return p=function(){return e},e}function v(){var e=(0,i.Z)(["\n  mutation MultiplayerControlCreateMultiplayerInvite(\n    $replId: String!\n    $email: String!\n    $type: String!\n  ) {\n    createMultiplayerInvite2(replId: $replId, email: $email, type: $type) {\n      ... on MultiplayerInvite {\n        email\n        repl {\n          id\n          permissions {\n            id\n            ...MultiplayerReplPermission\n          }\n          multiplayerInvites {\n            email\n            type\n          }\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on ReplPermission {\n        id\n        ...MultiplayerControlEmailInviteReplPermission\n      }\n    }\n  }\n  ","\n  ","\n"]);return v=function(){return e},e}function m(){var e=(0,i.Z)(["\n  mutation MultiplayerControlDeleteMultiplayerInvite(\n    $replId: String!\n    $email: String!\n  ) {\n    deleteMultiplayerInvite(replId: $replId, email: $email) {\n      ... on MultiplayerInvite {\n        email\n        type\n        repl {\n          id\n          permissions {\n            id\n            ...MultiplayerReplPermission\n          }\n          multiplayerInvites {\n            email\n            type\n          }\n        }\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return m=function(){return e},e}var g={},Z=(0,o.Ps)(s()),y=(0,o.Ps)(u(),Z),b=(0,o.Ps)(d()),w=(0,o.Ps)(f(),a.Y8);function x(e){var t=(0,r.Z)({},g,e);return l.a(w,t)}var C=(0,o.Ps)(h(),Z,y);function k(e){var t=(0,r.Z)({},g,e);return c.D(C,t)}var S=(0,o.Ps)(p(),Z,y);function E(e){var t=(0,r.Z)({},g,e);return c.D(S,t)}var T=(0,o.Ps)(v(),a.Y8,b);function R(e){var t=(0,r.Z)({},g,e);return c.D(T,t)}var _=(0,o.Ps)(m(),a.Y8);function I(e){var t=(0,r.Z)({},g,e);return c.D(_,t)}},94943:function(e,t,n){n.d(t,{Z:function(){return w}});var r=n(2272),i=n(9970),o=n(94660),a=n(6600),l=n(99340),c=n(38649),s=n(39302),u=n(10063),d=n(58530),f=n(29847),h=n(9362),p=n(13168),v=n(74296),m=n(54703),g=n(59496),Z=n(63750),y=n(78200),b=n(91047);function w(e){var t=e.replId,n=(0,m.useRouter)(),w=(0,c.Vg)(n),x=(0,y.X6)({variables:{replId:t},pollInterval:8e3}),C=x.data,k=x.loading,S=(0,l.Z)(),E=S.showConfirm,T=S.showError,R=(0,r.Z)(g.useState(!1),2),_=R[0],I=R[1],G=(0,r.Z)((0,y.QN)({onCompleted:function(e){var n,r=null===(n=e.addMultiplayerUser.user)||void 0===n?void 0:n.username;r&&((0,u.j)(u.U3.MULTIPLAYER_INVITED,{replId:t,inviteMethod:"username"}),E("Added @".concat(r)))}}),2),D=G[0],P=G[1],B=(0,r.Z)((0,y.Gk)({onError:function(e){return T(e.message)},onCompleted:function(e){var t,n=null===(t=e.removeMultiplayerUser.user)||void 0===t?void 0:t.username;n&&E("".concat(n," removed"))}}),2),U=B[0],A=B[1],N=(0,r.Z)((0,y.Sv)({update:function(e,n){var r,o=null===(r=n.data)||void 0===r?void 0:r.createMultiplayerInvite2;if(o)if("UserError"!==o.__typename){if("MultiplayerInvite"===o.__typename){var a=o.email;return(0,u.j)(u.U3.MULTIPLAYER_INVITED,{replId:t,inviteMethod:"email"}),void E("Invited ".concat(a," via email"))}if("ReplPermission"===o.__typename){var l;e.modify({id:e.identify({__typename:"Repl",id:t}),fields:{permissions:function(t){var n=e.writeFragment({data:o,fragment:y.L1});return(0,i.Z)(t).concat([n])}}});var c=null===(l=o.user)||void 0===l?void 0:l.username;if(!c)return;(0,u.j)(u.U3.MULTIPLAYER_INVITED,{replId:t,inviteMethod:"email"}),E("Invited @".concat(c))}}else T(o.message)}}),2),L=N[0],X=N[1],M=(0,r.Z)((0,y.Ej)({onError:function(e){return T(e.message)},onCompleted:function(e){if("UserError"!==e.deleteMultiplayerInvite.__typename){if("MultiplayerInvite"===e.deleteMultiplayerInvite.__typename){var t=e.deleteMultiplayerInvite.email;E("invite for ".concat(t," deleted"))}}else T(e.deleteMultiplayerInvite.message)}}),2),O=M[0],W=M[1];g.useEffect((function(){var e=P.error||X.error;e&&(e.message.includes("reached the limit")?w?T("You have reached the invite limit for a free account, visit https://replit.com/pricing to upgrade."):I(!0):T(e.message))}),[P.error,X.error,T,w]);var F="Repl"===(null===C||void 0===C?void 0:C.repl.__typename)?C.repl:null,j=null===C||void 0===C?void 0:C.currentUser,z=null===F||void 0===F?void 0:F.permissions.reduce((function(e,t){return t.user?(0,i.Z)(e).concat([t.user.username]):e}),[]),H=null===F||void 0===F?void 0:F.currentUserPermissions.editMultiplayers,V=Boolean(F&&!F.permissions.length&&!F.multiplayerInvites.length),q=(null===F||void 0===F?void 0:F.permissions)?F.permissions.length:null;return(0,o.BX)(d.Tg,{background:"default",css:{color:d.TV.foregroundDefault},children:[(0,o.BX)(d.G7,{css:[d.l0.flex.column,d.l0.colWithGap(8),d.l0.align.stretch],children:[H&&z&&F?(0,o.tZ)(d.G7,{children:(0,o.tZ)(b.Z,{existingUsernames:z,onSubmit:function(e){!!!e.match(/.+@.+/)||X.loading?P.loading||D({variables:{username:e,replId:F.id,type:"rw"}}):L({variables:{email:e,replId:F.id,type:"rw"}})}})}):null,(0,o.BX)(d.G7,{css:[d.l0.flex.row,d.l0.rowWithGap(4),d.l0.align.center],children:[(0,o.BX)(d.xv,{variant:"subheadDefault",children:[null!==q&&(null===j||void 0===j?void 0:j.isSubscribed)?"".concat((0,s.Z)("multiplayer",q,!0)):null,null===q||(null===j||void 0===j?void 0:j.isSubscribed)?null:"".concat(q,"/").concat(Z.z," ").concat((0,s.Z)("multiplayer",q))," "]}),k||(null===j||void 0===j?void 0:j.isSubscribed)||w?null:(0,o.tZ)(d.hU,{alt:"Click to upgrade for unlimited invites",onClick:function(){return I(!0)},children:(0,o.tZ)(h.Z,{})}),k?(0,o.tZ)(d.xv,{children:"Loading..."}):null]}),V?(0,o.BX)(d.G7,{css:[d.l0.flex.row,d.l0.rowWithGap(8),d.l0.center,d.l0.borderRadius(8),{maxHeight:200,border:"solid 1px ".concat(d.TV.outlineDimmest)}],children:[(0,o.tZ)(d.xv,{children:"No one else is here"}),(0,o.tZ)("img",{src:"/public/images/rainy-computer.png",alt:"raindrops falling onto an open laptop",style:{height:200}})]}):(0,o.BX)(d.G7,{css:[d.l0.backgroundColor.backgroundDefault,d.l0.borderRadius(8),d.l0.p(8),d.l0.flex.column,d.l0.colWithGap(8),{border:"solid 1px ".concat(d.TV.outlineDimmest),maxHeight:200,overflowY:"auto"}],children:[null===F||void 0===F?void 0:F.permissions.map((function(e){var n=e.user,r=e.type;return n?(0,o.BX)(d.G7,{css:[d.l0.flex.row,d.l0.rowWithGap(8),d.l0.align.center],children:[(0,o.tZ)(a.Z,{size:"s",url:n.image}),(0,o.BX)(d.xv,{children:[n.username," "]}),(0,o.tZ)(d.xv,{color:"dimmest",children:r===v.aQ.Rw?" (can edit)":null}),(0,o.tZ)(d.G7,{css:[d.l0.flex.grow(1)]}),F.currentUserPermissions.editMultiplayers?(0,o.tZ)(d.hU,{alt:"Remove member",onClick:function(){A.loading||U({variables:{replId:t,username:n.username}})},children:(0,o.tZ)(f.Z,{size:12})}):null]},n.id):null})),null===F||void 0===F?void 0:F.multiplayerInvites.map((function(e){return(0,o.BX)(d.G7,{css:[d.l0.flex.row,d.l0.rowWithGap(8),d.l0.align.center],children:[(0,o.tZ)(a.Z,{size:"s"}),(0,o.BX)(d.xv,{children:[e.email," "]}),(0,o.tZ)(d.xv,{color:"dimmest",children:" (pending)"}),(0,o.tZ)(d.G7,{css:[d.l0.flex.grow(1)]}),H?(0,o.tZ)(d.hU,{alt:"Remove member",onClick:function(){W.loading||O({variables:{replId:t,email:e.email}})},children:(0,o.tZ)(f.Z,{})}):null]},e.email)}))]})]}),(0,o.tZ)(p.Z,{isOpen:_,initialTab:"plans",context:"workspace_multiplayer_header",onRequestClose:function(){I(!1)}})]})}},53190:function(e,t,n){n.d(t,{QN:function(){return v},hA:function(){return h},oo:function(){return g}});var r=n(72006),i=n(43119),o=n(71440),a=n(53486),l=n(46653);function c(){var e=(0,i.Z)(["\n  query MultiplayerInviteUrl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        inviteUrl\n        owner {\n          ... on User {\n            id\n          }\n          ... on Team {\n            id\n            capabilities {\n              isBusinessPlan\n              hasValidSubscription\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return c=function(){return e},e}function s(){var e=(0,i.Z)(["\n  mutation MultiplayerRefreshInviteUrl($replId: String!) {\n    refreshMultiplayerInviteLink(replId: $replId) {\n      id\n      ... on Repl {\n        id\n        inviteUrl\n      }\n    }\n  }\n"]);return s=function(){return e},e}function u(){var e=(0,i.Z)(["\n  mutation DeleteMultiplayerInviteUrl($replId: String!) {\n    deleteMultiplayerInviteLink(replId: $replId) {\n      ... on Repl {\n        id\n        inviteUrl\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return u=function(){return e},e}var d={},f=(0,o.Ps)(c());function h(e){var t=(0,r.Z)({},d,e);return a.a(f,t)}var p=(0,o.Ps)(s());function v(e){var t=(0,r.Z)({},d,e);return l.D(p,t)}var m=(0,o.Ps)(u());function g(e){var t=(0,r.Z)({},d,e);return l.D(m,t)}},2480:function(e,t,n){n.d(t,{Z:function(){return f}});var r=n(2272),i=n(94660),o=n(59496),a=n(58530),l=n(99340),c=n(53190),s=n(9362),u=n(29847),d=n(17007);function f(e){var t,n,f,h=e.replId,p=(0,l.Z)(),v=p.showConfirm,m=p.showError,g=(0,c.hA)({variables:{replId:h}}),Z=g.data,y=g.loading,b=g.error,w=(0,r.Z)((0,c.QN)({variables:{replId:h},onError:function(e){return m(e.message)}}),2),x=w[0],C=w[1],k=(0,r.Z)((0,c.oo)({variables:{replId:h},optimisticResponse:{deleteMultiplayerInviteLink:{id:h,inviteUrl:null,__typename:"Repl"},__typename:"RootMutationType"},onError:function(e){return m(e.message)},onCompleted:function(e){"UserError"!==e.deleteMultiplayerInviteLink.__typename?"Repl"===e.deleteMultiplayerInviteLink.__typename&&v("Join link deleted"):m(e.deleteMultiplayerInviteLink.message)}}),2),S=k[0],E=k[1],T=C.loading||E.loading,R=o.useRef(null),_="Repl"===(null===Z||void 0===Z||null===(t=Z.repl)||void 0===t?void 0:t.__typename)&&"Team"===(null===(n=Z.repl.owner)||void 0===n?void 0:n.__typename),I="Repl"===(null===Z||void 0===Z||null===(f=Z.repl)||void 0===f?void 0:f.__typename)&&Z.repl.inviteUrl?window.location.origin+Z.repl.inviteUrl:null;o.useEffect((function(){C.error&&m(C.error.message)}),[C.error,C.data,h,m]);var G=function(){R&&R.current&&R.current.select()},D=function(){return(0,i.tZ)(a.hU,{alt:"Anyone on the internet with this link can join and edit this Repl",children:(0,i.tZ)(s.Z,{})})};return y?(0,i.tZ)(a.xv,{children:"loading..."}):b?(0,i.tZ)(a.xv,{children:"Error: please contact support"}):I?(0,i.BX)(a.G7,{css:[a.l0.flex.column,a.l0.colWithGap(4),a.l0.align.stretch],children:[(0,i.tZ)(a.xv,{color:"dimmer",variant:"small",children:(0,i.BX)(a.G7,{css:[a.l0.flex.row,a.l0.rowWithGap(4),a.l0.align.center],children:["Invite ",_?"guests":"friends"," with a join link",D()]})}),(0,i.BX)(a.G7,{css:[a.l0.flex.row,a.l0.rowWithGap(8),a.l0.align.center],children:[(0,i.tZ)(a.G7,{css:[a.l0.flex.row,a.l0.flex.grow(1)],children:(0,i.tZ)(a.II,{ref:R,readOnly:!0,onChange:function(){return null},value:T?"loading...":I,onClick:G})}),(0,i.tZ)(a.hU,{alt:"Copy",onClick:function(){G(),document.execCommand("copy"),v("Link copied")},colorway:"primary",children:(0,i.tZ)(d.Z,{})}),(0,i.tZ)(a.hU,{alt:"Delete link",colorway:"negative",onClick:function(e){T||S()},children:(0,i.tZ)(u.Z,{})})]}),(0,i.BX)(a.xv,{variant:"small",color:"dimmer",children:[(0,i.tZ)("a",{onKeyDown:function(e){e.preventDefault(),T||x()},role:"button",tabIndex:0,onClick:function(e){e.preventDefault(),T||x()},children:"Generate a new link"})," ","(The current one will stop working)"]})]}):(0,i.tZ)(a.Tg,{elevated:!0,background:"default",css:[a.l0.flex.row,a.l0.pt(8)],children:(0,i.tZ)(a.zx,{onClick:function(){T||x()},text:"Generate a join link",iconRight:D(),css:{width:"100%"}})})}},52860:function(e,t,n){n.d(t,{sk:function(){return f},zq:function(){return u}});var r=n(72006),i=n(43119),o=n(71440),a=n(53486);function l(){var e=(0,i.Z)(["\n  fragment MultiplayerUsernameSearchUser on User {\n    id\n    firstName\n    lastName\n    username\n    image\n  }\n"]);return l=function(){return e},e}function c(){var e=(0,i.Z)(["\n  query MultiplayerUsernameSearch($query: String!, $limit: Int) {\n    usernameSearch(query: $query, limit: $limit) {\n      id\n      ...MultiplayerUsernameSearchUser\n    }\n  }\n  ","\n"]);return c=function(){return e},e}var s={},u=(0,o.Ps)(l()),d=(0,o.Ps)(c(),u);function f(e){var t=(0,r.Z)({},s,e);return a.a(d,t)}},91047:function(e,t,n){n.d(t,{Z:function(){return w}});var r=n(72006),i=n(4405),o=n(2272),a=n(94660),l=n(29356),c=n.n(l),s=n(59496),u=n(97754),d=n.n(u),f=n(36273),h=n(68217),p=n(58530),v=n(14810),m=n(52860),g=n(99340),Z=n(79460),y=n(56152),b=n(6600);function w(e){var t=e.onSubmit,n=e.existingUsernames,l=e.isDisabled,u=e.onChange,w=e.placeholder,x=(0,o.Z)(s.useState(""),2),C=x[0],k=x[1],S=!!C.match(/.+@.+/),E=(0,v.Z)(C.trim().replace(/^@/,""),250),T=(0,m.sk)({skip:!E||S,variables:{query:E,limit:6}}),R=T.data,_=T.loading,I=T.error,G=(0,g.Z)().showError;s.useEffect((function(){I&&G(I.message)}),[I,G]);var D=null===R||void 0===R?void 0:R.usernameSearch;return(0,a.BX)("form",{onSubmit:function(e){e.preventDefault(),t(C),k("")},className:"jsx-d408485a86637a91",children:[(0,a.BX)("div",{className:"jsx-d408485a86637a91 form-content",children:[(0,a.tZ)(f.ZP,{onChange:function(e){e&&k(e.username)},itemToString:function(e){return(null===e||void 0===e?void 0:e.username)||""},initialHighlightedIndex:0,defaultHighlightedIndex:0,children:function(e){var o=e.getInputProps,l=e.getItemProps,c=e.getMenuProps,s=e.isOpen,f=e.highlightedIndex;return(0,a.BX)("div",{className:"jsx-d408485a86637a91 dropdown",children:[(0,a.tZ)(h.ZP,(0,r.Z)({},o({ref:null,value:C,onChange:function(e){k(e.currentTarget.value),null===u||void 0===u||u(e.currentTarget.value)},placeholder:null!==w&&void 0!==w?w:"Search by username or invite by email",autoComplete:"off",onKeyDown:function(e){"Enter"===e.key&&C.match(/.+@.+/)&&(t(C),k(""),e.currentTarget.blur())}}))),(0,a.BX)("div",(0,i.Z)((0,r.Z)({},c()),{className:"jsx-d408485a86637a91",children:[s&&D&&D.length?(0,a.tZ)("div",{className:"jsx-d408485a86637a91 dropdown-menu",children:D.map((function(e,t){return(0,a.tZ)("div",(0,i.Z)((0,r.Z)({},l({item:e,index:t})),{className:"jsx-d408485a86637a91 "+(d()("result",{"is-active":f===t})||""),children:(0,a.BX)(Z.Ug,{align:"center",spacing:1,children:[(0,a.tZ)(b.Z,{size:"s",url:e.image}),(0,a.tZ)("div",{className:"jsx-d408485a86637a91",children:e.username}),n.includes(e.username)?(0,a.tZ)("div",{className:"jsx-d408485a86637a91 check-icon",children:(0,a.tZ)(y.Z,{})}):null]})}),e.username)}))}):null,s&&_?(0,a.tZ)("div",{className:"jsx-d408485a86637a91 dropdown-menu is-loading",children:"loading..."}):null,s&&D&&0===D.length?(0,a.BX)("div",{className:"jsx-d408485a86637a91 dropdown-menu is-empty",children:['no results found for "',C,'"']}):null]}))]})}}),(0,a.tZ)("div",{className:"jsx-d408485a86637a91",children:(0,a.tZ)(p.zx,{colorway:"primary",type:"submit",disabled:l||!C,text:"Invite"})})]}),(0,a.tZ)(c(),{id:"d408485a86637a91",children:".form-content.jsx-d408485a86637a91{display:grid;position:relative;width:100%;grid-template-columns:1fr auto;grid-column-gap:var(--space-8);-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.dropdown.jsx-d408485a86637a91{position:relative;z-index:5}.dropdown-menu.jsx-d408485a86637a91{position:absolute;z-index:1;top:100%;left:0;width:100%;background-color:var(--background-default);border:1px solid var(--foreground-dimmest);border-top:0 none;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);max-height:300px;overflow:auto}.dropdown-menu.is-loading.jsx-d408485a86637a91,.dropdown-menu.is-empty.jsx-d408485a86637a91{color:var(--foreground-dimmer);padding:var(--space-8)}.dropdown.jsx-d408485a86637a91:focus-within .dropdown-menu.jsx-d408485a86637a91{border-color:var(--accent-primary-default)}.spacer.jsx-d408485a86637a91{width:var(--space-8);pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.result.jsx-d408485a86637a91{cursor:pointer;padding:var(--space-8)var(--space-16)}.result.jsx-d408485a86637a91:hover,.is-active.jsx-d408485a86637a91{background-color:var(--accent-primary-dimmer)}.check-icon.jsx-d408485a86637a91{margin-left:auto;color:var(--accent-positive-default)}"})]})}},17718:function(e,t,n){n.d(t,{Z:function(){return Z}});var r=n(2272),i=n(94660),o=(n(59496),n(58530)),a=n(99340),l=n(53190),c=n(96209),s=n(38252),u=n(17007),d=n(16828),f=n(24880),h=n(69735),p=n(16092),v=n(10063),m=(0,o.Xb)({container:[o.l0.colWithGap(12),o.l0.px(16),o.l0.pt(12),{borderTop:"solid 1px ".concat(o.TV.outlineDimmest)}],header:[o.l0.flex.row,o.l0.justify.spaceBetween],globeIconContainer:[o.l0.width(32),o.l0.height(32),o.l0.backgroundColor.accentPrimaryDimmer,o.l0.borderRadius("full"),o.l0.align.center,o.l0.justify.center],headlineContainer:[o.l0.colWithGap(4)],title:[o.l0.fontWeight.medium],loading:[o.l0.rowWithGap(4),o.l0.align.center],inviteUrlContainer:[o.l0.borderRadius(8),o.l0.flex.row],input:[o.l0.borderRadius(8,0,0,8),o.l0.color.foregroundDimmer],copyToClipboard:[o.l0.borderRadius(0,8,8,0)],titleGroup:[o.l0.rowWithGap(12)]}),g=function(){return(0,i.BX)(o.G7,{css:m.titleGroup,children:[(0,i.tZ)(o.G7,{css:m.globeIconContainer,children:(0,i.tZ)(c.Z,{color:o.TV.accentPrimaryStrongest})}),(0,i.BX)(o.G7,{css:m.headlineContainer,children:[(0,i.tZ)(o.xv,{css:m.title,id:"link-switch-label",children:"Private join link"}),(0,i.tZ)(o.xv,{variant:"small",color:"dimmest",children:"Anyone with this link can edit files"})]})]})};function Z(e){var t,n,c,Z,y,b,w,x,C=e.replId,k=(0,a.Z)(),S=k.showConfirm,E=k.showError,T=(0,l.hA)({variables:{replId:C}}),R=T.data,_=T.loading,I=T.error,G=T.refetch,D=(0,r.Z)((0,l.QN)({variables:{replId:C},onError:function(e){return E(e.message)},onCompleted:function(){return S("Join link created")}}),2),P=D[0],B=D[1],U=(0,r.Z)((0,l.oo)({variables:{replId:C},optimisticResponse:{deleteMultiplayerInviteLink:{id:C,inviteUrl:null,__typename:"Repl"},__typename:"RootMutationType"},onError:function(e){return E(e.message)},onCompleted:function(e){"UserError"!==e.deleteMultiplayerInviteLink.__typename?"Repl"===e.deleteMultiplayerInviteLink.__typename&&S("Join link deleted"):E(e.deleteMultiplayerInviteLink.message)}}),2),A=U[0],N=U[1],L="Repl"===(null===R||void 0===R||null===(t=R.repl)||void 0===t?void 0:t.__typename)?R.repl:null,X=B.loading||N.loading,M="Repl"===(null===R||void 0===R||null===(n=R.repl)||void 0===n?void 0:n.__typename)&&"Team"===(null===L||void 0===L||null===(c=L.owner)||void 0===c?void 0:c.__typename),O="Repl"===(null===R||void 0===R||null===(Z=R.repl)||void 0===Z?void 0:Z.__typename)&&"Team"===(null===L||void 0===L||null===(y=L.owner)||void 0===y?void 0:y.__typename)&&(null===(b=null===L||void 0===L?void 0:L.owner.capabilities)||void 0===b?void 0:b.isBusinessPlan)&&(null===(w=null===L||void 0===L?void 0:L.owner.capabilities)||void 0===w?void 0:w.hasValidSubscription),W="Repl"===(null===R||void 0===R||null===(x=R.repl)||void 0===x?void 0:x.__typename)&&(null===L||void 0===L?void 0:L.inviteUrl)?window.location.origin+(null===L||void 0===L?void 0:L.inviteUrl):null;return _||M&&!O?null:I?(0,i.BX)(o.G7,{css:m.container,children:[(0,i.BX)(o.G7,{css:m.header,children:[(0,i.tZ)(g,{}),(0,i.tZ)(o.rs,{isSelected:!1,isDisabled:!0,"aria-labelledby":"link-switch-label"})]}),(0,i.tZ)(o.uj,{css:[o.l0.textAlign.left],icon:(0,i.tZ)(h.Z,{color:o.TV.accentNegativeStrongest}),colorway:"negative",text:"Error loading join link. Click here to try again, or contact support.",onClick:function(){return G({replId:C})}})]}):(0,i.BX)(o.G7,{css:m.container,children:[(0,i.BX)(o.G7,{css:m.header,children:[(0,i.tZ)(g,{}),_?(0,i.BX)(o.G7,{css:m.loading,children:[(0,i.tZ)(f.Z,{color:o.TV.foregroundDimmer}),(0,i.tZ)(o.xv,{color:"dimmer",children:"Loading..."})]}):(0,i.tZ)(o.rs,{isSelected:!!W,isDisabled:X,onChange:function(e){X||(e?P():A())},"aria-labelledby":"link-switch-label"})]}),!_&&W?(0,i.BX)(i.HY,{children:[(0,i.BX)(o.Tg,{css:m.inviteUrlContainer,children:[(0,i.tZ)(o.II,{type:"url",readOnly:!0,disabled:!0,value:X?"Loading...":W,css:m.input}),(0,i.tZ)(s.m,{textToCopy:W,onClick:function(){W?((0,p.Z)(W),(0,v.j)(v.U3.JOIN_LINK_COPIED,{replId:null===L||void 0===L?void 0:L.id,isTeamRepl:M,source:"replEnvironment"}),S("Link copied")):E("Could not copy link")},tooltip:"Copied to clipboard",text:"Copy join link",iconLeft:(0,i.tZ)(u.Z,{}),css:m.copyToClipboard,colorway:"primary",disabled:X})]}),(0,i.tZ)(o.G7,{children:(0,i.BX)(o.xv,{color:"dimmer",variant:"small",children:["Want to revoke access to this link?"," ",(0,i.tZ)("a",{css:[d.R],role:"button",tabIndex:0,onKeyDown:function(e){if("Enter"===e.key){if(e.preventDefault(),X)return;P()}},onClick:function(e){e.preventDefault(),X||P()},children:"Generate a new link"})]})})]}):null]})}},63314:function(e,t,n){n.d(t,{Jh:function(){return C},RJ:function(){return T},U:function(){return w},dE:function(){return g},mH:function(){return y},z8:function(){return S}});var r=n(72006),i=n(43119),o=n(71440),a=n(53486),l=n(46653);function c(){var e=(0,i.Z)(["\n  fragment MultiplayerManagerUser on User {\n    id\n    image\n    username\n    url\n  }\n"]);return c=function(){return e},e}function s(){var e=(0,i.Z)(["\n  fragment MultiplayerManagerEmailInviteReplPermission on ReplPermission {\n    id\n    type\n    user {\n      id\n      image\n      username\n      url\n    }\n  }\n"]);return s=function(){return e},e}function u(){var e=(0,i.Z)(["\n  query MultiplayerManager($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        isOwner\n        multiplayers {\n          ...MultiplayerManagerUser\n        }\n        currentUserPermissions {\n          editMultiplayers\n        }\n        multiplayerInvites {\n          email\n          type\n        }\n      }\n    }\n    currentUser {\n      id\n      isSubscribed\n    }\n  }\n  ","\n"]);return u=function(){return e},e}function d(){var e=(0,i.Z)(["\n  mutation MultiplayerManagerAddMultiplayerUser(\n    $replId: String!\n    $username: String!\n    $type: String!\n  ) {\n    addMultiplayerUser(replId: $replId, username: $username, type: $type) {\n      id\n      type\n      user {\n        ...MultiplayerManagerUser\n      }\n      repl {\n        id\n        multiplayers {\n          ...MultiplayerManagerUser\n        }\n        multiplayerInvites {\n          email\n          type\n        }\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function f(){var e=(0,i.Z)(["\n  mutation MultiplayerManagerRemoveMultiplayerUser(\n    $replId: String!\n    $username: String!\n  ) {\n    removeMultiplayerUser(replId: $replId, username: $username) {\n      id\n      user {\n        id\n        ...MultiplayerManagerUser\n      }\n      repl {\n        id\n        multiplayers {\n          ...MultiplayerManagerUser\n        }\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}function h(){var e=(0,i.Z)(["\n  mutation MultiplayerManagerCreateMultiplayerInvite(\n    $replId: String!\n    $email: String!\n    $type: String!\n  ) {\n    createMultiplayerInvite2(replId: $replId, email: $email, type: $type) {\n      ... on MultiplayerInvite {\n        email\n        repl {\n          id\n          multiplayers {\n            ...MultiplayerManagerUser\n          }\n          multiplayerInvites {\n            email\n            type\n          }\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on ReplPermission {\n        id\n        ...MultiplayerManagerEmailInviteReplPermission\n      }\n    }\n  }\n  ","\n  ","\n"]);return h=function(){return e},e}function p(){var e=(0,i.Z)(["\n  mutation MultiplayerManagerDeleteMultiplayerInvite(\n    $replId: String!\n    $email: String!\n  ) {\n    deleteMultiplayerInvite(replId: $replId, email: $email) {\n      ... on MultiplayerInvite {\n        email\n        type\n        repl {\n          id\n          multiplayers {\n            ...MultiplayerManagerUser\n          }\n          multiplayerInvites {\n            email\n            type\n          }\n        }\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return p=function(){return e},e}var v={},m=(0,o.Ps)(c()),g=(0,o.Ps)(s()),Z=(0,o.Ps)(u(),m);function y(e){var t=(0,r.Z)({},v,e);return a.a(Z,t)}var b=(0,o.Ps)(d(),m);function w(e){var t=(0,r.Z)({},v,e);return l.D(b,t)}var x=(0,o.Ps)(f(),m);function C(e){var t=(0,r.Z)({},v,e);return l.D(x,t)}var k=(0,o.Ps)(h(),m,g);function S(e){var t=(0,r.Z)({},v,e);return l.D(k,t)}var E=(0,o.Ps)(p(),m);function T(e){var t=(0,r.Z)({},v,e);return l.D(E,t)}},55215:function(e,t,n){n.d(t,{_U:function(){return k},ln:function(){return S}});var r=n(2272),i=n(9970),o=n(94660),a=n(14047),l=n(23105),c=n(99340),s=n(38649),u=n(10063),d=n(31584),f=n(58530),h=n(2517),p=n(24880),v=n(54703),m=n(59496),g=n(63750),Z=n(63314),y=n(6102),b=n(61973),w=n(14709),x=n.n(w);function C(e,t){return t.some((function(t){return t.id===e}))}var k={root:[f.l0.color.foregroundDefault,f.l0.flex.column,f.l0.colWithGap(12),f.l0.align.stretch,f.l0.flex.growAndShrink(1)],header:[f.l0.flex.row,f.l0.justify.spaceBetween,f.l0.align.center,f.l0.px(16)],header_mobile:[f.l0.px(0)],titleContainer:[f.l0.flex.row,f.l0.rowWithGap(4),f.l0.align.center],limitsContainer:[f.l0.align.center,f.l0.rowWithGap(8)],loading:[f.l0.rowWithGap(4),f.l0.align.center,f.l0.flex.grow(1),f.l0.justify.center],measureBar:[f.l0.height(8),f.l0.width(60)],searchContainer:[f.l0.px(16),f.l0.position.relative,f.l0.maxHeight(32)],userList:[f.l0.flex.column,f.l0.colWithGap(16),f.l0.scrollbar.thin,f.l0.position.relative,f.l0.overflowY("auto"),f.l0.flex.growAndShrink(1),{maxHeight:300,"::-webkit-scrollbar-thumb":[f.l0.backgroundColor.backgroundHighest,f.l0.borderRadius(4)],scrollbarColor:"".concat(f.TV.backgroundDefault," ").concat(f.TV.backgroundHighest)}],userGroup:{root:[f.l0.colWithGap(8)],titleContainer:[f.l0.rowWithGap(4),f.l0.align.center,f.l0.px(16)],title:[f.l0.fontWeight.medium]},emptyContainer:[f.l0.position.relative,f.l0.flex.row,f.l0.rowWithGap(12),f.l0.pt(8),f.l0.center,f.l0.px(16),{maxHeight:220,borderBottom:"solid 1px ".concat(f.TV.outlineDimmest)}],emptyImg:[f.l0.width("100%"),f.l0.height(180),f.l0.position.relative,f.l0.maxWidth(160),{alignSelf:"end",userSelect:"none",pointerEvents:"none"},{"> div":{position:"unset !important"},".image":{objectFit:"contain",width:"100% !important",position:"relative !important",height:"unset !important"}}]},S=function(e){var t=e.title,n=e.count,r=e.color;return(0,o.BX)(f.G7,{css:k.userGroup.titleContainer,children:[(0,o.tZ)(h.Z,{color:r,size:6}),(0,o.tZ)(f.xv,{variant:"small",css:k.userGroup.title,children:t}),(0,o.tZ)(f.xv,{variant:"small",color:"dimmest",css:k.userGroup.title,children:n})]})};t.ZP=function(e){var t=e.replId,n=e.handleUpgradeTriggered,h=(0,v.useRouter)(),w=(0,s.Vg)(h),E=(0,c.Z)(),T=E.showConfirm,R=E.showError,_=(0,b.aG)(),I=(0,Z.mH)({variables:{replId:t},pollInterval:8e3}),G=I.data,D=I.loading,P=(0,r.Z)((0,Z.U)({onCompleted:function(e){var n,r=null===(n=e.addMultiplayerUser.user)||void 0===n?void 0:n.username;r&&((0,u.j)(u.U3.MULTIPLAYER_INVITED,{replId:t,inviteMethod:"username"}),T("Added @".concat(r)))}}),2),B=P[0],U=P[1],A=(0,r.Z)((0,Z.z8)({update:function(e,n){var r,o=null===(r=n.data)||void 0===r?void 0:r.createMultiplayerInvite2;if(o)if("UserError"!==o.__typename){if("MultiplayerInvite"===o.__typename){var a=o.email;return(0,u.j)(u.U3.MULTIPLAYER_INVITED,{replId:t,inviteMethod:"email"}),void T("Invited ".concat(a," via email"))}if("ReplPermission"===o.__typename){var l;e.modify({id:e.identify({__typename:"Repl",id:t}),fields:{permissions:function(t){var n=e.writeFragment({data:o,fragment:Z.dE});return(0,i.Z)(t).concat([n])}}});var c=null===(l=o.user)||void 0===l?void 0:l.username;if(!c)return;(0,u.j)(u.U3.MULTIPLAYER_INVITED,{replId:t,inviteMethod:"email"}),T("Invited @".concat(c))}}else R(o.message)}}),2),N=A[0],L=A[1];(0,m.useEffect)((function(){var e=U.error||L.error;e&&(e.message.includes("reached the limit")?w?R("You have reached the invite limit for a free account, visit https://replit.com/pricing to upgrade."):n&&n(!0):R(e.message))}),[U.error,L.error,R,w,n]);var X="Repl"===(null===G||void 0===G?void 0:G.repl.__typename)?G.repl:null,M=null===G||void 0===G?void 0:G.currentUser,O=null===X||void 0===X?void 0:X.multiplayers.reduce((function(e,t){return(0,i.Z)(e).concat([t.username])}),[]),W=(null===X||void 0===X?void 0:X.currentUserPermissions.editMultiplayers)||!1,F=Boolean(X&&!X.multiplayers.length&&!X.multiplayerInvites.length),j=null===X||void 0===X?void 0:X.multiplayers.filter((function(e){return e.id!==(null===M||void 0===M?void 0:M.id)})),z=null===j||void 0===j?void 0:j.filter((function(e){return e&&C(e.id,_)})),H=null===j||void 0===j?void 0:j.filter((function(e){return e&&!C(e.id,_)})),V=j?j.length:null;return(0,o.BX)(f.Tg,{background:"default",css:k.root,children:[(0,o.BX)(f.G7,{css:[k.header,w&&k.header_mobile],children:[(0,o.tZ)(f.G7,{css:k.titleContainer,children:(0,o.tZ)(f.xv,{variant:"subheadDefault",children:"Multiplayers"})}),(0,o.BX)(f.G7,{css:k.limitsContainer,children:[D?(0,o.BX)(f.G7,{css:k.loading,children:[(0,o.tZ)(p.Z,{color:f.TV.foregroundDimmer}),(0,o.tZ)(f.xv,{color:"dimmer",children:"Loading..."})]}):null,null===V||(null===M||void 0===M?void 0:M.isSubscribed)?null:(0,o.BX)(o.HY,{children:[(0,o.BX)(f.xv,{variant:"small",color:"dimmest","aria-hidden":!0,children:[V," / ",g.z]}),(0,o.tZ)(f.JY,{css:k.measureBar,total:g.z,current:V,tooltip:"".concat(g.z-V," free editors remaining")})]}),D||(null===M||void 0===M?void 0:M.isSubscribed)||w?null:(0,o.tZ)(l.Z,{small:!0,context:"workspace_multiplayer_header",onClickCallback:function(){n&&n(!0)},onCancel:function(){n&&n(!1)}})]})]}),W&&O&&X?(0,o.tZ)(f.G7,{css:k.searchContainer,children:(0,o.tZ)(d.Z,{existingUsernames:O,onSubmit:function(e){D&&!(null===M||void 0===M?void 0:M.isSubscribed)||(!x()(e)||L.loading?U.loading||B({variables:{username:e,replId:t,type:"rw"}}):N({variables:{replId:t,email:e,type:"rw"}}))}})}):null,F?(0,o.BX)(f.G7,{css:k.emptyContainer,children:[(0,o.tZ)(f.G7,{children:(0,o.tZ)(f.xv,{variant:"subheadDefault",color:"dimmer",children:"No one else is here"})}),(0,o.tZ)(f.G7,{css:k.emptyImg,children:(0,o.tZ)(a.Z,{src:"/public/images/rainy-computer.png",alt:"raindrops falling onto an open laptop",layout:"fill",className:"image"})})]}):(0,o.BX)(f.Tg,{css:k.userList,children:[(null===z||void 0===z?void 0:z.length)?(0,o.BX)(f.G7,{css:k.userGroup.root,children:[(0,o.tZ)(S,{title:"Online",count:z.length||0,color:f.TV.greenStrongest}),z.map((function(e){return e?(0,o.tZ)(y.Z,{isPendingInvitation:!1,replId:t,canEditMultiplayers:W,user:e},e.id):null}))]}):null,(null===H||void 0===H?void 0:H.length)?(0,o.BX)(f.G7,{css:k.userGroup.root,children:[(0,o.tZ)(S,{title:"Offline",count:H.length||0,color:f.TV.outlineStrongest}),null===H||void 0===H?void 0:H.map((function(e){return e?(0,o.tZ)(y.Z,{canEditMultiplayers:W,isPendingInvitation:!1,user:e,replId:t},e.id):null}))]}):null,(null===X||void 0===X?void 0:X.multiplayerInvites.length)?(0,o.BX)(f.G7,{css:k.userGroup.root,children:[(0,o.tZ)(S,{title:"Pending Invitations",count:(null===X||void 0===X?void 0:X.multiplayerInvites.length)||0,color:f.TV.outlineStrongest}),X.multiplayerInvites.map((function(e){return(0,o.tZ)(y.Z,{canEditMultiplayers:W,replId:t,isPendingInvitation:!0,email:e.email},e.email)}))]}):null]})]})}},6102:function(e,t,n){var r=n(2272),i=n(94660),o=n(6600),a=n(58530),l=n(59313),c=n(29847),s=n(63729),u=n(15667),d=n.n(u),f=n(63314),h=n(99340),p=(0,a.Xb)({root:[a.l0.px(16),a.l0.py(4),a.l0.flex.row,a.l0.rowWithGap(8),a.l0.align.center,a.l0.cursor.default,a.l0.justify.spaceBetween],userContainer:a.l0.color.foregroundDefault,userContainer_pending:[a.l0.flex.grow(1),a.l0.flex.row,a.l0.rowWithGap(8),a.l0.align.center,{fontStyle:"italic"}],permissionsContainer:[a.l0.flex.row,a.l0.rowWithGap(8),a.l0.align.center]});t.Z=function(e){var t=e.isPendingInvitation,n=e.canEditMultiplayers,u=e.replId,v=(0,h.Z)(),m=v.showError,g=v.showConfirm,Z=(0,r.Z)((0,f.Jh)({onError:function(e){return m(e.message)},onCompleted:function(e){var t,n=null===(t=e.removeMultiplayerUser.user)||void 0===t?void 0:t.username;n&&g("".concat(n," removed"))}}),2),y=Z[0],b=Z[1],w=(0,r.Z)((0,f.RJ)({onError:function(e){return m(e.message)},onCompleted:function(e){if("UserError"!==e.deleteMultiplayerInvite.__typename){if("MultiplayerInvite"===e.deleteMultiplayerInvite.__typename){var t=e.deleteMultiplayerInvite.email;g("Invite canceled for ".concat(t))}}else m(e.deleteMultiplayerInvite.message)}}),2),x=w[0],C=w[1],k=!t,S=k?(0,i.tZ)(o.Z,{size:"m",url:e.user.image}):(0,i.tZ)(l.Z,{color:a.TV.outlineDefault,size:32}),E=k?e.user.username:e.email;return(0,i.BX)(a.G7,{css:p.root,children:[k?(0,i.tZ)(s.Z,{username:e.user.username,children:(0,i.tZ)(d(),{href:"/@".concat(e.user.username),passHref:!0,children:(0,i.tZ)(a.G7,{tag:"a",css:p.userContainer,children:(0,i.tZ)(a.n5,{username:e.user.username,src:e.user.image})})})}):(0,i.BX)(a.G7,{css:[p.userContainer_pending],children:[S,(0,i.tZ)(a.xv,{color:k?"default":"dimmest",children:E})]}),(0,i.BX)(a.G7,{css:p.permissionsContainer,children:[(0,i.tZ)(a.xv,{color:"dimmest",variant:"small",children:e.isPendingInvitation?"Invited":"Can edit"}),n?(0,i.tZ)(a.hU,{alt:k?"Remove member":"Cancel invitation",onClick:function(){n&&(b.loading||C.loading||(k?y({variables:{replId:u,username:e.user.username}}):x({variables:{replId:u,email:e.email}})))},children:(0,i.tZ)(c.Z,{size:12})}):null]})]})}},31584:function(e,t,n){n.d(t,{Z:function(){return b}});var r=n(72006),i=n(4405),o=n(2272),a=n(94660),l=n(6600),c=n(14810),s=n(99340),u=n(58530),d=n(56152),f=n(24880),h=n(36273),p=n(59496),v=n(44135),m=n(14709),g=n.n(m),Z=n(52860),y=(0,u.Xb)({form:[u.l0.align.start,u.l0.display.flex,u.l0.rowWithGap(8),u.l0.width("100%")],searchContainer:[u.l0.position.relative,u.l0.flex.growAndShrink(1)],dropdownMenu:[u.l0.borderRadius(8),u.l0.overflow("hidden"),u.l0.mt(2),u.l0.zIndex(1),u.l0.border({color:u.TV.outlineDimmer,width:1,style:"solid"}),u.l0.maxHeight(280),u.l0.overflowY("auto"),u.l0.scrollbar.thin,{scrollbarColor:u.TV.backgroundHigher+" "+u.TV.backgroundHighest,"&::-webkit-scrollbar-thumb":{backgroundColor:u.TV.backgroundHighest}}],result:[u.l0.p(8),u.l0.rowWithGap(8),u.l0.justify.spaceBetween,u.l0.align.center,u.l0.cursor.pointer],result_active:[u.l0.backgroundColor.accentPrimaryDimmer],userContainer:[u.l0.rowWithGap(8),u.l0.align.center],loadingContainer:[u.l0.align.center,u.l0.m(8),u.l0.rowWithGap(8),u.l0.align.center],emptyText:[u.l0.m(8)]});function b(e){var t=e.onSubmit,n=e.existingUsernames,m=e.isDisabled,b=e.onChange,w=e.placeholder,x=(0,o.Z)(p.useState(""),2),C=x[0],k=x[1],S=(0,v.H)(),E=(0,c.Z)(C.trim().replace(/^@/,""),250),T=(0,Z.sk)({skip:!E||g()(C),variables:{query:E,limit:6}}),R=T.data,_=T.loading,I=T.error,G=(0,s.Z)().showError;p.useEffect((function(){I&&G(I.message)}),[I,G]);var D=null===R||void 0===R?void 0:R.usernameSearch,P=function(e){k(e.currentTarget.value),null===b||void 0===b||b(e.currentTarget.value)},B=function(e){"Enter"===e.key&&C.match(/.+@.+/)&&(t(C),k(""),e.currentTarget.blur())};return(0,a.BX)("form",{onSubmit:function(e){e.preventDefault(),t(C),k("")},css:y.form,children:[(0,a.tZ)(h.ZP,{onChange:function(e){e&&k(e.username)},itemToString:function(e){return(null===e||void 0===e?void 0:e.username)||""},initialHighlightedIndex:0,defaultHighlightedIndex:0,children:function(e){var t=e.getInputProps,o=e.getItemProps,c=e.getMenuProps,s=e.isOpen,h=e.highlightedIndex,p=e.getRootProps;return(0,a.BX)(u.G7,(0,i.Z)((0,r.Z)({css:y.searchContainer},p()),{children:[(0,a.tZ)(u.II,(0,r.Z)({id:S("username-search")},t({ref:null,value:C,onChange:P,placeholder:null!==w&&void 0!==w?w:"Add people by username or email",autoComplete:"off",onKeyDown:B}))),s?(0,a.BX)(u.G7,{children:[D&&D.length?(0,a.tZ)(u.Tg,(0,i.Z)((0,r.Z)({elevated:!0,css:y.dropdownMenu,tag:"ul"},c({refKey:"innerRef"})),{children:D.map((function(e,t){return(0,a.BX)(u.G7,(0,i.Z)((0,r.Z)({tag:"li"},o({item:e,index:t})),{css:[y.result,t===h&&y.result_active],children:[(0,a.BX)(u.G7,{css:y.userContainer,children:[(0,a.tZ)(l.Z,{size:"m",url:e.image}),(0,a.tZ)(u.xv,{children:e.username})]}),n.includes(e.username)?(0,a.tZ)(u.G7,{children:(0,a.tZ)(d.Z,{color:u.TV.accentPositiveStronger})}):null]}),t)}))})):null,_?(0,a.tZ)(u.Tg,{elevated:!0,css:y.dropdownMenu,children:(0,a.BX)(u.G7,{css:y.loadingContainer,children:[(0,a.tZ)(f.Z,{}),(0,a.tZ)(u.xv,{color:"dimmer",children:"Loading\u2026"})]})}):null,D&&0===D.length?(0,a.tZ)(u.Tg,{elevated:!0,css:y.dropdownMenu,children:(0,a.BX)(u.xv,{css:y.emptyText,color:"dimmer",children:['No results found for "',C,'"']})}):null]}):null]}))}}),(0,a.tZ)(u.G7,{children:(0,a.tZ)(u.zx,{colorway:"primary",type:"submit",disabled:m||!C,text:"Invite"})})]})}},89916:function(e,t,n){n.d(t,{O:function(){return E},k:function(){return S}});var r=n(57135),i=n(2272),o=n(96583),a=n(94660),l=n(75408),c=n(58530),s=n(58868),u=n(9362),d=n(36918),f=n(59496),h=n(5581),p=n(72006),v=n(43119),m=n(71440),g=n(67433),Z=n(53486),y=n(46653);function b(){var e=(0,v.Z)(["\n  query CyclesAutoRefillConfiguration {\n    currentUser {\n      id\n      cyclesAutoRefillConfiguration {\n        ... on CyclesAutoRefillConfiguration {\n          ...AutoRefillConfig\n        }\n        ... on UnauthorizedError {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return b=function(){return e},e}function w(){var e=(0,v.Z)(["\n  mutation UpdateCyclesAutoRefillConfiguration(\n    $input: UpdateCyclesAutoRefillConfigurationInput!\n  ) {\n    updateCyclesAutoRefillConfiguration(input: $input) {\n      ... on CurrentUser {\n        id\n        cyclesAutoRefillConfiguration {\n          ... on CyclesAutoRefillConfiguration {\n            ...AutoRefillConfig\n          }\n          ... on UnauthorizedError {\n            message\n          }\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return w=function(){return e},e}var x={},C=(0,m.Ps)(b(),g.L);var k=(0,m.Ps)(w(),g.L);function S(){var e=function(e){var t=(0,p.Z)({},x,e);return Z.a(C,t)}({onCompleted:function(e){var t,r,i,o,l,s="CyclesAutoRefillConfiguration"===(null===e||void 0===e||null===(t=e.currentUser)||void 0===t||null===(r=t.cyclesAutoRefillConfiguration)||void 0===r?void 0:r.__typename)?e.currentUser.cyclesAutoRefillConfiguration:null;n.setValue(null!==(i=null===s||void 0===s?void 0:s.enabled)&&void 0!==i&&i),a.setValue(null!==(o=null===s||void 0===s?void 0:s.refillAmount)&&void 0!==o?o:h.z9[0]),c.setValue(null!==(l=null===s||void 0===s?void 0:s.monthlyBudget)&&void 0!==l?l:null),n.setTouched(!1),a.setTouched(!1),c.setTouched(!1)}}),t=e.loading,n=(0,l.Y)(!0,(function(){})),a=(0,l.Y)(h.z9[0],(function(){})),c=(0,l.Y)(null,(function(e){if(null!=e&&e<a.value)return{severity:"error",message:"Monthly budget must be greater than refill amount"}})),s=(0,f.useState)(null),u=s[0],d=s[1],v=(0,i.Z)(function(e){var t=(0,p.Z)({},x,e);return y.D(k,t)}(),2),m=v[0],g=v[1].loading,b=t||g,w=function(){var e=(0,r.Z)((function(){var e,t,r,i;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return b?[2,!1]:[4,Promise.all([n,a,c].map((function(e){return e.validate()})))];case 1:return o.sent().some((function(e){return null!=e}))?[2,!1]:(d(null),[4,m({variables:{input:{enabled:n.value,refillAmount:a.value,monthlyBudget:c.value}}})]);case 2:return t=o.sent(),r=t.data,(i=t.errors)?(d(i[0].message),[2,!1]):"UnauthorizedError"===(null===r||void 0===r?void 0:r.updateCyclesAutoRefillConfiguration.__typename)||"UserError"===(null===r||void 0===r?void 0:r.updateCyclesAutoRefillConfiguration.__typename)?(d(r.updateCyclesAutoRefillConfiguration.message),[2,!1]):"CurrentUser"===(null===r||void 0===r?void 0:r.updateCyclesAutoRefillConfiguration.__typename)&&"UnauthorizedError"===(null===(e=r.updateCyclesAutoRefillConfiguration.cyclesAutoRefillConfiguration)||void 0===e?void 0:e.__typename)?(d(r.updateCyclesAutoRefillConfiguration.cyclesAutoRefillConfiguration.message),[2,!1]):(n.setTouched(!1),a.setTouched(!1),c.setTouched(!1),[2,!0])}}))}));return function(){return e.apply(this,arguments)}}(),S=Boolean(n.error||a.error||c.error),E=n.touched||a.touched||c.touched;return{cardAutoRefillPreferencesProps:{enabledField:n,refillAmountUsdCentsField:a,monthlyBudgetUsdCentsField:c,updateAutoRefill:w,loading:b,submissionError:u,autoRefillHasChanged:E,autoRefillHasError:S},autoRefillEnabled:n.value,autoRefillRefillAmount:a.value,autoRefillMonthlyBudget:c.value,autoRefillHasChanged:E,autoRefillHasError:S}}function E(e){var t=e.showSaveButton,n=void 0===t||t,r=e.autoRefillHasChanged,i=e.autoRefillHasError,o=e.loading,l=e.submissionError,f=e.updateAutoRefill,p=e.enabledField,v=e.refillAmountUsdCentsField,m=e.monthlyBudgetUsdCentsField;return(0,a.BX)(c.G7,{css:[c.l0.colWithGap(16)],children:[(0,a.BX)(c.G7,{css:[c.l0.colWithGap(8)],children:[(0,a.BX)(c.G7,{css:[c.l0.rowWithGap(8),c.l0.align.center],children:[(0,a.tZ)(c.XZ,{checked:p.value,id:"auto-refill",onChange:function(e){return p.setValue(e.target.checked)},disabled:o}),(0,a.BX)(c.xv,{variant:"small",multiline:!0,css:[c.l0.flex.growAndShrink(1)],children:["Auto-refill: Charge this card"," ",T(v.value)," when your Cycles balance is below"," ",h.aJ.toLocaleString()," Cycles to refill your balance. Learn more"]})]}),p.value?(0,a.BX)(c.G7,{css:[c.l0.colWithGap(8)],children:[(0,a.BX)(c.G7,{css:[c.l0.rowWithGap(8),c.l0.align.center],children:[(0,a.tZ)(c.xv,{variant:"small",children:"Refill Amount"}),(0,a.tZ)(c.Ph,{disabled:o,items:R,selectedItem:_[v.value],onChange:function(e){v.setValue(e.value),null!==m.value&&m.value<e.value&&m.setValue(e.value)}}),null==m.value?(0,a.BX)(a.HY,{children:[(0,a.tZ)(c.zx,{small:!0,text:"Enable Monthly Budget",disabled:o,onClick:function(){return m.setValue(v.value)}}),(0,a.tZ)(c.hU,{alt:"Hello",children:(0,a.tZ)(u.Z,{})})]}):null]}),null!=m.value?(0,a.BX)(c.G7,{css:[c.l0.colWithGap(8)],children:[(0,a.BX)(c.G7,{css:[c.l0.rowWithGap(8),c.l0.align.center],children:[(0,a.tZ)(c.xv,{variant:"small",children:"Monthly Budget"}),(0,a.tZ)(c.II,{value:T(m.value),css:[c.l0.maxWidth(80)],maxLength:8,disabled:o,onChange:function(e){var t=e.target.value.replace(/\D/g,"");if(""!==t){var n=parseInt(t,10);m.setValue(100*n)}else m.setValue(0)}}),(0,a.tZ)(c.hU,{alt:"Disable Monthly Budget",disabled:o,onClick:function(){return m.setValue(null)},children:(0,a.tZ)(d.Z,{})})]}),m.error?(0,a.tZ)(c.xv,{variant:"small",css:[c.l0.color.accentNegativeDefault],children:m.error.message}):null]}):null]}):(0,a.tZ)(c.G7,{children:(0,a.tZ)(c.E_,{colorway:"warning",icon:(0,a.tZ)(s.Warning,{}),text:"Without auto-refill, you may lose access to power-ups if you run out of Cycles."})})]}),l?(0,a.tZ)(c.xv,{css:[c.l0.color.accentNegativeDefault],children:l}):null,n&&r?(0,a.tZ)(c.zx,{text:"Save",colorway:"primary",disabled:i||o,onClick:f}):null]})}var T=function(e){return(e/100).toLocaleString("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0})},R=h.z9.map((function(e){return{title:T(e),value:e}})),_=R.reduce((function(e,t){return e[t.value]=t,e}),{})},86216:function(e,t,n){n.d(t,{t:function(){return f}});var r=n(72006),i=n(94660),o=n(89916),a=n(81935),l=n(35268),c=n(58530),s=n(58868),u=n(65782),d=(0,c.Xb)({self:[c.l0.colWithGap(16)],paymentMethodContainer:[c.l0.colWithGap(4)],addPaymentMethodContainer:[c.l0.rowWithGap(12),c.l0.align.start]});function f(e){var t=e.goToNewPaymentMethodForm,n=(0,l.Q)(),f=n.paymentMethod,h=n.loading,p=n.error,v=(0,o.k)().cardAutoRefillPreferencesProps;return h||null!=p?null:(0,i.BX)(c.G7,{css:d.self,children:[null!=f?(0,i.BX)(c.G7,{css:d.paymentMethodContainer,children:[(0,i.BX)(c.G7,{css:[c.l0.rowWithGap(8),c.l0.align.center],children:[(0,i.tZ)(c.hU,{alt:"Update Payment Method",onClick:t,children:(0,i.tZ)(u.Z,{})}),(0,i.tZ)(a.R,{last4:f.last4})]}),(0,i.tZ)(o.O,(0,r.Z)({},v))]}):null,(0,i.tZ)(c.G7,{css:d.addPaymentMethodContainer,children:null==f?(0,i.tZ)(c.zx,{text:"Add Payment Method",iconLeft:(0,i.tZ)(s.Plus,{}),onClick:t}):null})]})}},63499:function(e,t,n){n.d(t,{P:function(){return o}});var r=n(9970),i=n(59496);function o(e){var t=(0,i.useState)(e),n=t[0],o=t[1],a=(0,i.useState)([]),l=a[0],c=a[1],s=(0,i.useCallback)((function(e){c((0,r.Z)(l).concat([n])),o(e)}),[l,c,n,o]),u=(0,i.useCallback)((function(){var e=l.pop();c(l),e&&o(e)}),[l,c,o]);return{currentStep:n,goTo:s,goBack:u,canGoBack:l.length>0}}},99096:function(e,t,n){n.d(t,{Z:function(){return w}});var r=n(72006),i=n(4405),o=n(77637),a=n(2272),l=n(94660),c=n(59496),s=n(43119),u=n(71440),d=n(46653);function f(){var e=(0,s.Z)(["\n  mutation SetFollowing($input: setFollowingInput!) {\n    setFollowing(input: $input) {\n      ... on FollowResult {\n        targetUser {\n          id\n          isFollowedByCurrentUser\n          followerCount\n        }\n      }\n      ... on NotFoundError {\n        __typename\n        message\n      }\n      ... on UnauthorizedError {\n        __typename\n        message\n      }\n      ... on UserError {\n        __typename\n        message\n      }\n    }\n  }\n"]);return f=function(){return e},e}var h={},p=(0,u.Ps)(f());var v=n(99340),m=n(56152),g=n(69694),Z=n(58530),y=n(56474),b=n(10063),w=function(e){var t=e.user,n=e.subtle,s=e.targetName,u=(0,o.Z)(e,["user","subtle","targetName"]),f=n?void 0:"primary",w=(0,a.Z)(c.useState(!1),2),x=w[0],C=w[1],k=t.isFollowedByCurrentUser,S=(0,v.Z)().showError,E=(0,a.Z)(function(e){var t=(0,r.Z)({},h,e);return d.D(p,t)}({onCompleted:function(e){var t,n,r;"NotFoundError"===(null===(t=e.setFollowing)||void 0===t?void 0:t.__typename)&&S(e.setFollowing.message),"UserError"===(null===(n=e.setFollowing)||void 0===n?void 0:n.__typename)&&S(e.setFollowing.message),"UnauthorizedError"===(null===(r=e.setFollowing)||void 0===r?void 0:r.__typename)&&(C(!0),(0,b.j)(b.U3.SIGNUP_REQUESTED,{from:"repl",location:"follow-button",authFormPlacement:"modal"}))}}),2),T=E[0],R=E[1].loading,_=k?"Following":"Follow";return null!=s&&(_="".concat(_," ").concat(s)),(0,l.BX)(l.HY,{children:[(0,l.tZ)(Z.zx,(0,i.Z)((0,r.Z)({type:"button"},u),{colorway:k?void 0:f,text:_,iconLeft:k?(0,l.tZ)(m.Z,{}):(0,l.tZ)(g.Z,{}),onClick:function(e){e.stopPropagation(),T({variables:{input:{targetUserId:t.id,shouldFollow:!k}}}),k||(0,b.j)(b.U3.USER_FOLLOWED)},disabled:R,dataCy:"follow-button"})),(0,l.tZ)(Z.u_,{onRequestClose:function(){return C(!1)},isOpen:x,children:(0,l.tZ)(y.Z,{onSuccess:function(){(0,b.j)(b.U3.SIGNUP_FROM_FOLLOW_BUTTON_SUCCESSFUL)},onFailure:function(e){var t=e.error;S(t)},title:"Sign up to follow your favorite Replers.",description:"You\u2019ll then be able to follow "+t.username})})]})}},24615:function(e,t,n){n.d(t,{FW:function(){return h},NH:function(){return m}});var r=n(72006),i=n(43119),o=n(71440),a=n(3024),l=n(90632),c=n(53486);function s(){var e=(0,i.Z)(["\n  fragment PublishReplData on Repl {\n    id\n    url\n    title\n    description\n    iconUrl\n    lastPublishedAt\n    publishedAs\n    imageUrl\n    isRenamed\n    templateInfo {\n      iconUrl\n    }\n    replViewSettings {\n      id\n      defaultView\n      replImage\n      replFile\n    }\n    tags {\n      id\n      isOfficial\n    }\n    currentUserPermissions {\n      containerWrite\n      publish\n      changeIconUrl\n    }\n    ...CrosisContextRepl\n    ...PublishedReplShareInfoReplData\n  }\n  ","\n  ","\n"]);return s=function(){return e},e}function u(){var e=(0,i.Z)(["\n  fragment PublishCurrentUser on CurrentUser {\n    id\n    image\n    isTemplateDeveloper: hasRole(role: TEMPLATE_DEVELOPER)\n    ...CrosisContextCurrentUser\n  }\n  ","\n"]);return u=function(){return e},e}function d(){var e=(0,i.Z)(["\n  query PublishCurrentUser {\n    currentUser {\n      id\n      ...PublishCurrentUser\n    }\n  }\n  ","\n"]);return d=function(){return e},e}var f={},h=(0,o.Ps)(s(),a.C,l.B),p=(0,o.Ps)(u(),a.D),v=(0,o.Ps)(d(),p);function m(e){var t=(0,r.Z)({},f,e);return c.a(v,t)}},39227:function(e,t,n){n.d(t,{e9:function(){return h},wd:function(){return d}});var r=n(72006),i=n(43119),o=n(71440),a=n(90632),l=n(53486);function c(){var e=(0,i.Z)(["\n  fragment PublishReleaseFormRepl on Repl {\n    id\n    title\n    description\n    slug\n    user {\n      username\n    }\n    ...PublishedReplShareInfoReplData\n    deployment {\n      id\n      activeRelease {\n        id\n      }\n    }\n    releases {\n      items {\n        id\n        timeCreated\n        description\n      }\n    }\n  }\n  ","\n"]);return c=function(){return e},e}function s(){var e=(0,i.Z)(["\n  query PublishReleaseFormCurrentUser {\n    currentUser {\n      id\n      username\n    }\n  }\n"]);return s=function(){return e},e}var u={},d=(0,o.Ps)(c(),a.B),f=(0,o.Ps)(s());function h(e){var t=(0,r.Z)({},u,e);return l.a(f,t)}},63517:function(e,t,n){n.d(t,{Z:function(){return z}});var r=n(57135),i=n(72006),o=n(4405),a=n(2272),l=n(96583),c=n(94660),s=n(59496),u=n(58530),d=n(44135),f=n(74296),h=n(39227),p=n(75408),v=n(69735),m=n(44079),g=n(43119),Z=n(71440),y=n(53486);function b(){var e=(0,g.Z)(["\n  query PendingChanges($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        deployment {\n          id\n          activeRelease {\n            id\n            pendingChanges {\n              fileName\n              changeType\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return b=function(){return e},e}var w={},x=(0,Z.Ps)(b());function C(e){var t,n,r=function(e){var t=(0,i.Z)({},w,e);return y.a(x,t)}({variables:{replId:e.replId},fetchPolicy:"cache-and-network"}),o=r.data,a=r.loading,l=r.error;if(a)return{loading:a,pendingChanges:null,error:null};if(l)return{loading:!1,pendingChanges:null,error:l};var c="Repl"===(null===o||void 0===o?void 0:o.repl.__typename)?o.repl:null;return c?{loading:!1,pendingChanges:(null===(t=c.deployment)||void 0===t||null===(n=t.activeRelease)||void 0===n?void 0:n.pendingChanges)||[],error:l}:{loading:!1,pendingChanges:null,error:new Error("Repl not found")}}var k=n(37249),S=n(46653);function E(){var e=(0,g.Z)(["\n  mutation RevertTemplateRelease($input: RevertReplReleaseInput!) {\n    revertReplRelease(input: $input) {\n      ... on Repl {\n        id\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return E=function(){return e},e}var T={},R=(0,Z.Ps)(E());function _(e){if(!e.data)return null;var t=e.data;if("revertReplRelease"in t){if("NotFoundError"===t.revertReplRelease.__typename||"UnauthorizedError"===t.revertReplRelease.__typename||"UserError"===t.revertReplRelease.__typename)return t.revertReplRelease.message;if("Repl"!==t.revertReplRelease.__typename)return"Something went wrong reverting your Template"}}function I(){var e=(0,a.Z)(function(e){var t=(0,i.Z)({},T,e);return S.D(R,t)}({refetchQueries:["ReplEnvironmentHeader"]}),2),t=e[0];function n(){return(n=(0,r.Z)((function(e){var n,r;return(0,l.__generator)(this,(function(i){switch(i.label){case 0:return n=e.input,[4,t({variables:{input:n}})];case 1:return[2,{data:(r=i.sent()).data,error:_(r)}]}}))}))).apply(this,arguments)}return{revertTemplateRelease:function(e){return n.apply(this,arguments)},state:e[1]}}var G=n(24880),D=n(94565),P=n(49397),B=n(1540),U=n(78890),A=n(5109),N=n(26860),L=(0,A.cn)({ran:!1,tested:!1}),X=u.KD.form;function M(e){if(0===e.length)return{message:"You cannot leave this empty."}}function O(e){var t,n,r=e.changeType;return r===f.J5.NewFile?(t=u.TV.accentPositiveStronger,n="Added"):r===f.J5.DeletedFile?(t=u.TV.accentNegativeStronger,n="Deleted"):(t=u.TV.foregroundDefault,n="Changed"),(0,c.tZ)(u.xv,{variant:"small",css:[{color:t}],children:n})}function W(e){var t=e.pendingChangesState,n=e.isReplitTemplate;if(t.loading)return(0,c.tZ)(u.G7,{css:[u.l0.center],children:(0,c.tZ)(G.Z,{})});if(t.error)return(0,c.tZ)(u.E_,{icon:(0,c.tZ)(v.Z,{}),text:t.error.message||"Could not load modified files - please try again.",colorway:"negative"});if(!t.pendingChanges||0===t.pendingChanges.length)return n?null:(0,c.tZ)(u.xv,{multiline:!0,children:"No changes to publish. Come back when you have made changes to your Repl."});var r=t.pendingChanges,i=r.slice(0,15);return(0,c.BX)(u.G7,{css:[{display:"grid",gridTemplateColumns:"1fr 1fr",gap:u.TV.space8}],children:[i.map((function(e){return(0,c.BX)(s.Fragment,{children:[(0,c.BX)(u.G7,{css:[u.l0.rowWithGap(4),u.l0.align.center],children:[(0,c.tZ)(D.Z,{size:12,path:e.fileName}),(0,c.tZ)(u.xv,{children:e.fileName})]},e.fileName),(0,c.tZ)(O,{changeType:e.changeType})]},e.fileName)})),r.length>i.length&&(0,c.BX)(u.xv,{children:["And ",r.length-i.length," other files..."]})]})}function F(e){var t=e.repl,n=I(),i=function(){var e=(0,r.Z)((function(e){return(0,l.__generator)(this,(function(r){switch(r.label){case 0:return[4,n.revertTemplateRelease({input:{replId:t.id,releaseId:e}})];case 1:return r.sent(),[2]}}))}));return function(t){return e.apply(this,arguments)}}();return(0,c.BX)(u.G7,{children:[(0,c.tZ)(u.h4,{level:1,variant:"subheadBig",css:[u.l0.mb(16)],children:"Existing Releases"}),(0,c.tZ)(u.G7,{css:[{display:"grid",gridTemplateColumns:"2fr 3fr 1fr",gap:u.TV.space8}],children:t.releases.items.map((function(e){var n,r;return(0,c.BX)(s.Fragment,{children:[(0,c.tZ)("span",{children:(0,U.Z)(new Date(e.timeCreated),"do MMM, hh:mm a")}),(0,c.tZ)("span",{children:e.description}),(0,c.tZ)("span",{style:{justifySelf:"end"},children:e.id===(null===(n=t.deployment)||void 0===n||null===(r=n.activeRelease)||void 0===r?void 0:r.id)?(0,c.tZ)("span",{css:[u.l0.p(4),{display:"flex"}],children:"(active)"}):(0,c.tZ)(u.zx,{text:"revert",colorway:"primary",small:!0,onClick:function(t){t.preventDefault(),i(e.id)}})})]},e.id)}))})]})}function j(e){var t=e.children;return(0,c.tZ)(u.G7,{css:[u.l0.rowWithGap(8),u.l0.py(2)],children:t})}function z(e){var t,n,f,h,g,Z,y=e.repl,b=(0,d.H)(),w=(0,a.Z)(s.useState(!1),2),x=w[0],S=w[1],E=(0,a.Z)(s.useState(!1),2),T=E[0],R=E[1],_=function(e){var t=C({replId:e.replId}),n=s.useMemo((function(){if(!t.pendingChanges)return[];var e=t.pendingChanges.slice().sort((function(e,t){return e.fileName.localeCompare(t.fileName)})).map((function(e){return{file:e,pathDepth:(0,B.U$)(e.fileName)}})).sort((function(e,t){return e.pathDepth-t.pathDepth})).map((function(e){return e.file}));return e}),[t.pendingChanges]);return(0,o.Z)((0,i.Z)({},t),{pendingChanges:n})}({replId:y.id}),I=(0,k.r)(),G=(0,p.Y)("",M),D=0!==(null===(t=_.pendingChanges)||void 0===t?void 0:t.length),U=(null===(n=y.user)||void 0===n?void 0:n.username)===N.IU||"templates"===(null===(f=y.user)||void 0===f?void 0:f.username),O=(0,a.Z)((0,A.KO)(L),2),j=O[0],z=O[1];s.useEffect((function(){z({ran:!1,tested:!1})}),[z]);var V=Boolean(G.error||!U&&!D||I.loading||U&&(!j.ran||!j.tested)),q=U&&(null===(h=y.releases)||void 0===h||null===(g=h.items)||void 0===g?void 0:g.length)>1,$="";return G.error?$="Please fill out the form":U||D||($="No changes to publish in this release"),x?(0,c.tZ)(P.q,{repl:y,isUpdate:!0}):T?(0,c.tZ)(u.G7,{css:[u.l0.p(16),u.l0.colWithGap(16)],children:(0,c.tZ)(F,{repl:y})}):(0,c.BX)(X,{onSubmit:function(){var e=(0,r.Z)((function(e){return(0,l.__generator)(this,(function(t){switch(t.label){case 0:return e.preventDefault(),V||G.validate()?[2]:[4,I.createRelease({input:{replId:y.id,description:G.value}})];case 1:return t.sent().error||S(!0),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),css:[u.l0.colWithGap(24),u.l0.p(16)],children:[(0,c.tZ)(u.h4,{level:1,variant:"headerDefault",children:"Publish a new release"}),(0,c.BX)(u.G7,{css:[u.l0.colWithGap(8)],children:[(0,c.tZ)(u.h4,{level:2,variant:"subheadDefault",children:"Modified files"}),(0,c.tZ)(W,{pendingChangesState:_,isReplitTemplate:U})]}),U||D?(0,c.BX)(u.G7,{css:[u.l0.colWithGap(4)],children:[(0,c.tZ)("label",{htmlFor:b("description"),css:[u.l0.color.foregroundDimmer,{fontSize:u.TV.fontSizeSmall,lineHeight:u.TV.lineHeightSmall}],children:"Description"}),(0,c.tZ)(u.B,{id:b("description"),"aria-label":"Description",onChange:function(e){return G.setValue(e.target.value)},css:[u.l0.width("100%"),u.l0.minHeight(64),u.l0.maxHeight(128),{resize:"vertical"}],placeholder:"Explain what has changed about your template"}),G.error?(0,c.tZ)(u.E_,{icon:(0,c.tZ)(v.Z,{}),text:null===(Z=G.error)||void 0===Z?void 0:Z.message,colorway:"negative"}):null]}):null,U?(0,c.tZ)(H,{repl:y}):null,(0,c.tZ)(u.G7,{children:I.error?(0,c.tZ)(u.E_,{icon:(0,c.tZ)(v.Z,{}),text:I.error,colorway:"negative"}):null}),(0,c.BX)(u.G7,{css:[u.l0.rowWithGap(12),u.l0.justify.end],children:[q?(0,c.tZ)(u.zx,{text:"Revert to older",colorway:"negative",onClick:function(){return R(!0)}}):null,(0,c.tZ)(u.u,{tooltip:$,placement:"bottom",isDisabled:!$,children:(0,c.tZ)(u.zx,{text:"Publish release",type:"submit",colorway:"primary",iconLeft:(0,c.tZ)(m.Z,{}),disabled:V})})]})]})}function H(e){var t,n,r,l=e.repl,s=(0,a.Z)((0,A.KO)(L),2),f=s[0],p=s[1],v=(0,d.H)(),m=(0,h.e9)(),g=m.data,Z=m.loading,y=null===g||void 0===g||null===(t=g.currentUser)||void 0===t?void 0:t.username;return(0,c.BX)(u.G7,{css:[u.l0.colWithGap(12)],children:[(0,c.tZ)(u.h4,{level:2,children:"Official Replit Template publishing checklist"}),(0,c.BX)(u.G7,{children:[(0,c.BX)(j,{children:[(0,c.tZ)(u.XZ,{id:v("ran"),checked:f.ran,onChange:function(e){return p((0,o.Z)((0,i.Z)({},f),{ran:e.target.checked}))}}),(0,c.tZ)("label",{htmlFor:v("ran"),children:"Run Repl:"}),(0,c.BX)("span",{children:["to generate and cache package guesser result into ",(0,c.tZ)("code",{children:".upm"}),"."]})]}),(0,c.BX)(j,{children:[(0,c.tZ)(u.XZ,{id:v("tested"),checked:f.tested,onChange:function(e){return p((0,o.Z)((0,i.Z)({},f),{tested:e.target.checked}))}}),(0,c.tZ)("label",{htmlFor:v("tested"),children:"Run tests:"}),(0,c.BX)("span",{children:['Run "Test working copy" for @',null===(n=l.user)||void 0===n?void 0:n.username,"/",l.slug," in"," ",(0,c.tZ)("a",{href:"https://tmpltester.util.repl.co/",target:"_blank",children:"template tester"}),". ",(0,c.tZ)("br",{}),"If there are no tests, consider adding one."]})]})]}),Z||(null===(r=l.user)||void 0===r?void 0:r.username)!==y?null:(0,c.tZ)(u.E_,{text:"You can't publish an update while impersonating. Add yourself as a member of the 'replit' team using CLUI tool 'add-remove-team-member', then open this Repl from your account.",colorway:"negative"})]})}},90632:function(e,t,n){n.d(t,{B:function(){return o}});var r=n(43119);function i(){var e=(0,r.Z)(["\n  fragment PublishedReplShareInfoReplData on Repl {\n    id\n    url\n    publishedAs\n    title\n  }\n"]);return i=function(){return e},e}var o=(0,n(71440).Ps)(i())},27218:function(e,t,n){n.d(t,{Z:function(){return y}});var r=n(57135),i=n(96583),o=n(94660),a=(n(59496),n(58530)),l=n(44135),c=n(74296),s=n(75408),u=n(69735),d=n(37285),f=n(10063),h=n(27615),p=(0,a.Xb)({content:[a.l0.p(8),a.l0.colWithGap(16)],section:[a.l0.colWithGap(8)]});function v(e){var t=e.header;return(0,o.tZ)(a.Qd,{headerContent:t,children:(0,o.BX)(a.G7,{css:p.content,children:[(0,o.BX)(a.G7,{css:p.section,children:[(0,o.tZ)(a.xv,{children:"Bold Text"}),(0,o.tZ)(a.xv,{color:"dimmer",children:"**bold**"})]}),(0,o.BX)(a.G7,{css:p.section,children:[(0,o.tZ)(a.xv,{children:"Italic Text"}),(0,o.tZ)(a.xv,{color:"dimmer",children:"__italic__"})]}),(0,o.BX)(a.G7,{css:p.section,children:[(0,o.tZ)(a.xv,{children:"Links"}),(0,o.tZ)(a.xv,{color:"dimmer",children:"[Link Name](https://yourlink.com)"})]}),(0,o.BX)(a.G7,{css:p.section,children:[(0,o.tZ)(a.xv,{children:"Images"}),(0,o.tZ)(a.xv,{color:"dimmer",children:"![Image alt text](https://linktoyourimage.com)"})]}),(0,o.BX)(a.G7,{css:p.section,children:[(0,o.tZ)(a.xv,{children:"Header Text"}),(0,o.tZ)(a.xv,{color:"dimmer",children:"# Header"})]}),(0,o.BX)(a.G7,{css:[a.l0.colWithGap(8)],children:[(0,o.tZ)(a.xv,{children:"Code Blocks"}),(0,o.BX)(a.xv,{color:"dimmer",children:["```",(0,o.tZ)("br",{}),"this is for large, multiline code blocks",(0,o.tZ)("br",{}),"```"]})]}),(0,o.BX)(a.G7,{css:[a.l0.colWithGap(8)],children:[(0,o.tZ)(a.xv,{children:"Inline Code"}),(0,o.tZ)(a.xv,{color:"dimmer",children:"`this is for code in the middle of sentences`"})]}),(0,o.BX)(a.G7,{css:[a.l0.colWithGap(8)],children:[(0,o.tZ)(a.xv,{children:"Horizontal Rules"}),(0,o.tZ)(a.xv,{color:"dimmer",children:"***"})]})]})})}var m=a.KD.form;function g(e){return 0===e.trim().length?{message:"You cannot leave this empty."}:e.length>100?{message:"The title should not be longer than ".concat(100," characters.")}:void 0}function Z(e){return 0===e.trim().length?{message:"You cannot leave this empty."}:e.length>5e3?{message:"The description should not be longer than ".concat(5e3," characters.")}:void 0}function y(e){var t,n,p=e.repl,y=e.source,b=e.onDone,w=(0,l.H)(),x=w("titleIdInput"),C=w("descriptionIdInput"),k=(0,s.Y)("",g),S=(0,s.Y)("",Z),E=(0,d.O)();return(0,o.BX)(m,{onSubmit:function(){var e=(0,r.Z)((function(e){return(0,i.__generator)(this,(function(t){switch(t.label){case 0:return e.preventDefault(),k.validate()||S.validate()?[2]:[4,E.publish({input:{replId:p.id,title:k.value,body:S.value}})];case 1:return t.sent().error||((0,f.j)(f.U3.UPDATE_SHARED,{source:y,replType:p.publishedAs===c.O2.Template?"template_repl":"regular_repl"}),b()),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),css:[a.l0.colWithGap(16)],children:[(0,o.tZ)(a.h4,{level:1,variant:"headerDefault",children:"Add an update"}),(0,o.BX)(a.xv,{children:["Explain what has changed about this"," ",p.publishedAs===c.O2.Template?"Template":"Repl","."]}),(0,o.BX)(a.G7,{css:a.l0.colWithGap(8),children:[(0,o.BX)(a.G7,{css:a.l0.colWithGap(4),children:[(0,o.tZ)("label",{css:a.l0.color.foregroundDimmer,htmlFor:x,children:"Title"}),(0,o.tZ)(a.II,{id:x,onChange:function(e){k.setValue(e.target.value)},disabled:E.loading,placeholder:"Give your post a title"})]}),k.error?(0,o.tZ)(a.E_,{icon:(0,o.tZ)(u.Z,{}),text:null===(t=k.error)||void 0===t?void 0:t.message,colorway:"negative"}):null]}),(0,o.BX)(a.G7,{css:a.l0.colWithGap(8),children:[(0,o.BX)(a.G7,{css:a.l0.colWithGap(4),children:[(0,o.tZ)("label",{css:a.l0.color.foregroundDimmer,htmlFor:C,children:"Description"}),(0,o.tZ)(a.B,{id:C,onChange:function(e){S.setValue(e.target.value)},css:[a.l0.width("100%"),{minHeight:a.TV.space128,maxHeight:a.TV.space256,resize:"vertical",lineHeight:a.TV.lineHeightDefault}],disabled:E.loading,placeholder:"Write something about this post"})]}),S.error?(0,o.tZ)(a.E_,{icon:(0,o.tZ)(u.Z,{}),text:null===(n=S.error)||void 0===n?void 0:n.message,colorway:"negative"}):null]}),(0,o.tZ)(v,{header:"Style your description with Markdown"}),E.error?(0,o.tZ)(a.E_,{icon:(0,o.tZ)(u.Z,{}),colorway:"negative",text:E.error}):null,(0,o.tZ)(a.zx,{text:E.loading?"Sharing update...":"Share update",type:"submit",colorway:"primary",disabled:Boolean(E.loading||k.error||S.error),css:{alignSelf:"end"},iconLeft:(0,o.tZ)(h.Z,{})})]})}},37285:function(e,t,n){n.d(t,{O:function(){return v}});var r=n(57135),i=n(2272),o=n(96583),a=n(72006),l=n(43119),c=n(71440),s=n(24615),u=n(46653);function d(){var e=(0,l.Z)(["\n  mutation PublishReplCreatePost($input: CreateReplPost2Input!) {\n    createReplPost2(input: $input) {\n      ... on Post {\n        id\n        repl {\n          id\n          ...PublishReplData\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}var f={},h=(0,c.Ps)(d(),s.FW);function p(e){var t,n,r,i,o,a,l;return e.error?e.error.message||"Something went wrong publishing your Repl":"NotFoundError"===(null===(t=e.data)||void 0===t||null===(n=t.createReplPost2)||void 0===n?void 0:n.__typename)||"UnauthorizedError"===(null===(r=e.data)||void 0===r||null===(i=r.createReplPost2)||void 0===i?void 0:i.__typename)||"UserError"===(null===(o=e.data)||void 0===o||null===(a=o.createReplPost2)||void 0===a?void 0:a.__typename)?e.data.createReplPost2.message:(null===(l=e.data)||void 0===l?void 0:l.createReplPost2)&&"Post"!==e.data.createReplPost2.__typename?"Something went wrong publishing your Repl":void 0}function v(){var e=(0,i.Z)(function(e){var t=(0,a.Z)({},f,e);return u.D(h,t)}(),2),t=e[0],n=e[1],l=function(){var e=(0,r.Z)((function(e){var r,i;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:if(r=e.input,n.loading)return[2,{data:null,error:null}];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,t({variables:{input:r}})];case 2:return[2,{data:(i=o.sent()).data,error:p(i)}];case 3:return o.sent(),[2,{data:null,error:"Something went wrong publishing your Repl"}];case 4:return[2]}}))}));return function(t){return e.apply(this,arguments)}}();return{publish:l,data:n.data,loading:n.loading,error:p(n)}}},72838:function(e,t,n){n.d(t,{Z:function(){return h},_:function(){return m}});var r=n(2272),i=n(94660),o=n(29356),a=n.n(o),l=n(59496),c=n(1665),s=n(79460),u=n(96843),d=n(44542),f=n(7330);function h(e){var t=(0,r.Z)(l.useState(!1),2),n=t[0],o=t[1],a=[],u=[];if(e.variables.length>0){var f=e.variables[0].parentVariableReference,h=!0,p=!1,v=void 0;try{for(var g,Z=e.variables[Symbol.iterator]();!(h=(g=Z.next()).done);h=!0){var y=g.value;y.parentVariableReference===f?a.push(y):u.push(y)}}catch(b){p=!0,v=b}finally{try{h||null==Z.return||Z.return()}finally{if(p)throw v}}}return(0,i.BX)(i.HY,{children:[(0,i.tZ)(c.Z,{truncate:!0,level:5,children:"Variables"}),(0,i.BX)(s.gC,{align:"stretch",constrainWidth:!0,children:[a.map((function(t){return(0,i.tZ)(m,{depth:0,variable:t,client:e.client},t.parentVariableReference+"/"+t.name)})),u.length>0&&(0,i.BX)(i.HY,{children:[(0,i.BX)(d.Z,{filled:!1,border:!1,onClick:function(){return o((function(e){return!e}))},children:["See ",n?"Less":"More"]}),n&&u.map((function(t){return(0,i.tZ)(m,{depth:0,variable:t,client:e.client},t.parentVariableReference+"/"+t.name)}))]})]})]})}function p(e){var t=e.variable,n=e.expanded;return t.variablesReference>0?(0,i.tZ)("div",{css:[f.l0.transition.snappy,{transform:"rotate(".concat(n?0:-90,"deg)")}],children:(0,i.tZ)(u.Z,{})}):null}function v(e){var t=e.expanded,n=e.depth,r=e.variable;return 0===n&&!("parentVariableReference"in r)?(0,i.tZ)(p,{expanded:t,variable:r}):(0,i.tZ)("div",{css:[f.l0.flex.grow(0),f.l0.flex.shrink(0),f.l0.width(f.TV.space16),f.l0.display.flex,f.l0.align.center,f.l0.justify.end],children:(0,i.tZ)(p,{expanded:t,variable:r})})}function m(e){var t=e.depth,n=e.variable,o=e.client,c=(0,r.Z)(l.useState(!1),2),u=c[0],d=c[1],f=(0,r.Z)(l.useState([]),2),h=f[0],p=f[1];return l.useEffect((function(){u&&o.fetchVariables(n.variablesReference).then((function(e){return p(e)}),(function(){return d(!1)}))}),[u,o,n.variablesReference]),(0,i.BX)(i.HY,{children:[(0,i.BX)("div",{onClick:function(){n.variablesReference>0&&d((function(e){return!e}))},className:a().dynamic([["d2db4fbc08fcf9b",[t]]])+" variable",children:[(0,i.tZ)(v,{expanded:u,variable:n,depth:t}),(0,i.BX)("div",{className:a().dynamic([["d2db4fbc08fcf9b",[t]]])+" label",children:[n.name,n.type?(0,i.BX)("span",{className:a().dynamic([["d2db4fbc08fcf9b",[t]]])+" type",children:[" ",n.type]}):null,""!==n.value&&": "]}),(0,i.tZ)("div",{className:a().dynamic([["d2db4fbc08fcf9b",[t]]])+" label value",children:(0,i.tZ)("pre",{className:a().dynamic([["d2db4fbc08fcf9b",[t]]]),children:n.value})})]}),u?(0,i.tZ)(s.gC,{align:"stretch",constrainWidth:!0,children:h.map((function(e){return(0,i.tZ)(m,{depth:t+1,variable:e,client:o},"parentVariableReference"in e?e.parentVariableReference+"/"+e.name:e.name)}))}):null,(0,i.tZ)(a(),{id:"d2db4fbc08fcf9b",dynamic:[t],children:".variable.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;max-width:100%;height:var(--space-32);min-height:var(--space-32);cursor:pointer;color:var(--foreground-dimmer);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);font-size:var(--font-size-default);padding-left:-webkit-calc(".concat(t," * var(--space-16));padding-left:-moz-calc(").concat(t," * var(--space-16));padding-left:calc(").concat(t," * var(--space-16));font-family:var(--font-family-code)}.variable.__jsx-style-dynamic-selector:hover{background-color:var(--background-higher);color:var(--foreground-default)}.label.__jsx-style-dynamic-selector{font-size:var(--font-size-default);padding-left:var(--space-8);padding-right:var(--space-8);overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:nowrap;-webkit-box-flex:1;-webkit-flex:1 0 auto;-moz-box-flex:1;-ms-flex:1 0 auto;flex:1 0 auto}.type.__jsx-style-dynamic-selector{opacity:.5}.value.__jsx-style-dynamic-selector{text-align:right;-webkit-flex-shrink:1;-ms-flex-negative:1;flex-shrink:1}")})]})}},99100:function(e,t,n){n.d(t,{Z:function(){return W}});var r=n(2272),i=n(94660),o=n(59496),a=n(58530),l=n(56152),c=n(8001),s=n(15667),u=n.n(s),d=n(72006),f=n(4405),h=n(14679),p=n(8131),v=n(66164),m=n(25462),g=n(22841),Z=n(56580),y=n(72030),b=function(e){return(0,y.iv)({wordBreak:"break-word",boxSizing:"border-box",whiteSpace:"normal",lineHeight:1.5,color:a.TV.foregroundDefault,fontFamily:"".concat(a.TV.fontFamilyDefault," !important"),fontSize:e,textSizeAdjust:"100%","h1, h2, h3, h4, h5, h6":{color:a.TV.foregroundDefault,fontWeight:a.TV.fontWeightMedium,marginBottom:a.TV.space16,lineHeight:1.25,wordWrap:"break-word"},"h1, h2":{paddingBottom:a.TV.space8,borderBottom:"1px solid ".concat(a.TV.backgroundHigher),marginTop:a.TV.space32},h1:{fontSize:"2em"},h2:{fontSize:"1.5em"},h3:{fontSize:"1.25em",marginTop:a.TV.space24},h4:{fontSize:"1em",marginTop:a.TV.space16},h5:{fontSize:"0.875em"},h6:{color:a.TV.foregroundDimmer,fontSize:"0.85em"},".anchor":{float:"left",lineHeight:1,marginLeft:"calc(-1 * ".concat(a.TV.space16,")"),paddingRight:a.TV.space4},".anchor:focus":{outline:"none"},p:{marginBottom:a.TV.space16,fontSize:e,fontFamily:"".concat(a.TV.fontFamilyDefault," !important")},"p:last-child":{marginBottom:0},table:{borderSpacing:0,borderCollapse:"collapse",display:"block",width:"100%",overflow:"auto",marginBottom:a.TV.space16,wordBreak:"normal",th:{fontWeight:a.TV.fontWeightMedium},"td, th":{padding:"".concat(a.TV.space8," ").concat(a.TV.space12),border:"1px solid ".concat(a.TV.backgroundHighest),minWidth:"16ch"},tr:{backgroundColor:a.TV.backgroundDefault,borderTop:"1px solid ".concat(a.TV.backgroundHighest)},"tr:nth-child(2n)":{backgroundColor:a.TV.backgroundRoot}},"hr:after":{clear:"both"},"li > p":{marginBottom:0},li:{marginTop:a.TV.space4},dd:{marginLeft:0},"ol, ul":{paddingLeft:a.TV.space16,marginTop:0,marginBottom:0},ul:{listStyle:"initial",listStyleType:"disc",marginBottom:a.TV.space16},ol:{listStyle:"decimal",marginBottom:a.TV.space16},"ol ol, ol ul, ul ol, ul ul":{paddingLeft:a.TV.space16,marginTop:0,marginBottom:0,paddingBottom:0},"ul ul":{listStyleType:"circle"},"ul ul ul":{listStyleType:"square"},"ol ol, ul ol":{listStyleType:"lower-roman"},"ol ol ol, ol ul ol, ul ol ol, ul ul ol":{listStyleType:"lower-alpha"},pre:{fontFamily:"".concat(a.TV.fontFamilyCode," !important"),margin:"".concat(a.TV.space16," 0"),borderRadius:4,wordBreak:"break-all",wordWrap:"break-word",whiteSpace:"pre-wrap",color:a.TV.foregroundDefault},"pre:last-child":{marginBottom:"0 !important"},blockquote:{padding:"0 1em",marginBottom:a.TV.space16,borderLeft:"".concat(a.TV.space2," solid ").concat(a.TV.backgroundHighest),paddingLeft:a.TV.space16},"blockquote > *":{color:"".concat(a.TV.foregroundDimmer," !important")},"blockquote > :last-child":{marginBottom:"0 !important",borderBottom:"none !important"},"blockquote > :first-child":{marginTop:"0 !important"},kbd:{display:"inline-block",padding:"3px 5px",font:"11px ".concat(a.TV.fontFamilyCode),color:a.TV.foregroundDimmer,verticalAlign:"middle",backgroundColor:a.TV.backgroundHigher,border:"none",borderRadius:3,boxShadow:"inset 0 -1px 0 ".concat(a.TV.backgroundHighest)},a:{color:a.TV.accentPrimaryStronger,backgroundColor:"initial"},"> :first-child":{marginTop:"0 !important",paddingTop:"0 !important"},"> :last-child":{borderBottom:"none !important",marginBottom:"0 !important",paddingBottom:"0 !important"},'[type="checkbox"]':{boxSizing:"border-box",marginRight:a.TV.space8,padding:0},details:{marginBottom:a.TV.space16,display:"block",background:a.TV.backgroundHigher,borderRadius:a.TV.borderRadius4,padding:a.TV.space16},summary:{display:"list-item",userSelect:"none",cursor:"pointer",fontWeight:a.TV.fontWeightBold},"details[open] > summary":{borderBottom:"1px solid ".concat(a.TV.backgroundHighest),marginBottom:a.TV.space16,paddingBottom:a.TV.space16},hr:{height:1,backgroundColor:a.TV.backgroundHigher,margin:"".concat(a.TV.space24," 0"),border:0}})},w=n(71253),x=n(42173),C=n(73900),k=n(12922),S=n(31129),E=["a","pre","code","em","strong","p","ul","ol","li","img","del","h1","h2","h3","h4","h5","h6","sup","sub","br","hr","blockquote","span","div"];function T(e){var t=e.content,n=(0,Z.Z)().preferences.fontSize,r=(0,k.P)({controlName:"flag-use-new-code-rendering"}),a=o.useCallback((function(e){return r?(0,i.tZ)(S.Z,(0,d.Z)({},e)):(0,i.tZ)(g.Z,(0,f.Z)((0,d.Z)({},e),{asyncHighlighting:!0}))}),[r]);return(0,i.tZ)("div",{css:[{"& ol":{paddingInlineStart:"20px"},"& ul":{paddingInlineStart:"20px",listStyle:"initial"}}],children:(0,i.tZ)(h.D,{css:b(n),allowedElements:E,remarkPlugins:[p.Ic,v.Z,m.Z,w.Z],linkTarget:"_blank",rehypePlugins:[x.Z],components:{code:a,img:C.Z},children:t})})}var R=(0,o.memo)(T),_=n(94841),I=n(52578),G=n(58868),D=n(43119),P=n(71440),B=n(72147),U=n(46653);function A(){var e=(0,D.Z)(["\n  mutation DeleteThreadMessage($id: String!) {\n    deleteThreadMessage(messageId: $id) {\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return A=function(){return e},e}var N={},L=(0,P.Ps)(A(),B.j7);var X=n(38729),M=n(99340),O=function(e){var t=e.thread,n=e.message,s=(0,X.d)(),f=(0,M.Z)().showError,h=(0,r.Z)(function(e){var t=(0,d.Z)({},N,e);return U.D(L,t)}({onError:function(e){f(e.message)},onCompleted:function(e){var t;"UserError"===(null===(t=e.deleteThreadMessage)||void 0===t?void 0:t.__typename)&&f(e.deleteThreadMessage.message)}}),2),p=h[0],v=h[1].loading,m=(0,k.P)({controlName:"flag-threads-dropdown-menu",default:!1,type:"boolean"}),g=!(!t||t.indexStart!==t.indexEnd),Z={resolved:"Thread resolved. Re-open it any time in the inbox.",unresolved:"Thread re-opened"},y="Outdated",b="The code has changed since the comment was left",w=o.useMemo((function(){return{diff:(0,c.Y)(n.timeCreated),full:(0,c.u)(n.timeCreated)}}),[n]);if(!n.user)return null;var x=s===n.user.id?[{label:"Delete",icon:(0,i.tZ)(G.Trash,{}),isDestructive:!0}]:[];return(0,i.BX)(a.G7,{children:[(0,i.BX)(a.G7,{css:[a.l0.flex.row,a.l0.justify.spaceBetween,a.l0.pb(4)],children:[(0,i.BX)(a.G7,{css:[a.l0.flex.row,a.l0.align.center,a.l0.rowWithGap(8)],children:[(0,i.tZ)(u(),{passHref:!0,href:"/@".concat(n.user.username),children:(0,i.tZ)("a",{children:(0,i.tZ)(a.n5,{small:!0,src:n.user.image,username:n.user.username})})}),(0,i.tZ)("p",{children:(0,i.tZ)(a.u,{tooltip:w.full,placement:"top",children:(0,i.tZ)(a.xv,{variant:"small",color:"dimmer",children:w.diff})})}),x.length>0&&m?(0,i.tZ)(I.Z,{items:x,onItemClick:function(e){"Delete"!==e.label||v||p({variables:{id:n.id}})},label:"More"}):null]}),g?(0,i.tZ)(a.u,{tooltip:b,children:(0,i.tZ)(a.DR,{colorway:"negative",text:y})}):null]}),"StatusMessageContentType"===n.content.__typename&&"resolved"===n.content.status?(0,i.tZ)(a.E_,{colorway:"positive",icon:(0,i.tZ)(l.Z,{}),text:Z.resolved}):null,"StatusMessageContentType"===n.content.__typename&&"unresolved"===n.content.status?(0,i.tZ)(a.E_,{colorway:"primary",icon:(0,i.tZ)(_.Z,{}),text:Z.unresolved}):null,"TextMessageContentType"===n.content.__typename&&(0,i.tZ)(R,{content:n.content.text})]})},W=(0,o.memo)(O)},8001:function(e,t,n){n.d(t,{Y:function(){return o},u:function(){return a}});var r=n(89323),i=n(20597),o=function(e){var t=new Date(e),n=new Date;return(0,i.Z)(n,t)<60?"just now":(0,r.F)(t,!0)+" ago"},a=function(e){return new Date(e).toLocaleString()}},78988:function(e,t,n){n.d(t,{JL:function(){return x},L8:function(){return Z},M6:function(){return g},QH:function(){return y},nr:function(){return m}});var r=n(57389),i=n(72006),o=n(9970),a=n(94660),l=n(59496),c=n(19666),s=n(7330),u=n(63463),d=n(56615),f=n(45165),h=n(43819),p=n(25505),v=n(78254);function m(e,t){var n,r=(null===(n=t.tags)||void 0===n?void 0:n.length)?t.tags.join(","):null;return{href:{pathname:"/postsFeed",query:{boardSlug:r,q:e}},as:{pathname:r?"/community/".concat(r):"/community/all",query:{q:e}}}}function g(e,t){return t?{href:{pathname:"/postsFeed",query:{boardSlug:e,order:t.order}},as:{pathname:"/community/".concat(e),query:(0,i.Z)({},t.order!==f.eR?{order:t.order.toLowerCase()}:{})}}:{href:{pathname:"/postsFeed",query:{boardSlug:e}},as:"/community/".concat(e)}}function Z(e){return g("all",e)}function y(e,t){var n=t.tags?t.tags.join(","):"all";return{href:{pathname:"/postsFeed",query:{boardSlug:n,order:(0,f.Zb)(e)}},as:{pathname:"/community/".concat(n),query:(0,i.Z)({},e!==f.eR?{order:(0,f.Zb)(e)}:{})}}}var b=c.K.div,w=v.Mz+32;function x(e){var t,n,i=e.tagGroups,f=e.params,m=(0,o.Z)(i.official).concat((0,o.Z)(i.community)).map((function(e){var t,n=Boolean(null===(t=f.tags)||void 0===t?void 0:t.includes(e.id)),r=n?Z(f):g(e.id,f);return(0,a.tZ)(h.t,{tag:e,link:r,isActive:n},e.id)})),y=(0,l.useState)(!1),x=y[0],C=y[1],k=(0,l.useRef)(null);return(0,l.useEffect)((function(){if(k.current){var e=new window.IntersectionObserver((function(e){e.forEach((function(e){window.scrollY<e.boundingClientRect.top-w?C(!1):C(!e.isIntersecting)}))}),{root:null,rootMargin:"".concat(-w,"px 0px 0px 0px"),threshold:1}),t=k.current;return e.observe(t),function(){e.unobserve(t),e.disconnect()}}}),[]),(0,a.BX)(c.G,{children:[(0,a.tZ)(b,{ref:k}),(0,a.BX)(c.G,{css:[s.l0.colWithGap(16),x&&(0,r.Z)({},d.A.desktop,[s.l0.position.fixed,s.l0.overflowY("auto"),s.l0.height("calc(100vh - ".concat(v.Mz,"px)")),s.l0.py(32),{top:v.Mz}])],children:[(0,a.tZ)(u.xv,{color:"dimmer",children:"TOP TAGS"}),(0,a.BX)(c.G,{children:[(0,a.tZ)(p.Z,{gap:8,inset:16,css:[(t={},(0,r.Z)(t,d.A.desktop,[s.l0.display.none]),(0,r.Z)(t,"marginLeft","calc(-1 * ".concat(s.TV.space16,")")),(0,r.Z)(t,"marginRight","calc(-1 * ".concat(s.TV.space16,")")),t)],children:m}),(0,a.tZ)(c.G,{css:(n={},(0,r.Z)(n,d.A.mobile,[s.l0.display.none]),(0,r.Z)(n,d.A.desktop,[s.l0.colWithGap(32)]),n),children:(0,a.tZ)(c.G,{css:[s.l0.colWithGap(8),s.l0.align.start],children:m})})]})]})]})}},88654:function(e,t,n){n.d(t,{Vs:function(){return w},ZP:function(){return C},p0:function(){return x}});var r=n(72006),i=n(4405),o=n(94660),a=n(72030),l=n(27297),c=n(78988),s=n(50929),u=n(43819),d=n(72335),f=n(58530),h=n(38691),p=n(63729),v=n(26807),m=n(15667),g=n.n(m),Z=(n(59496),f.KD.a),y=(0,a.iv)({"::after":{content:'""',position:"absolute",top:0,right:0,bottom:0,left:0,display:"block",zIndex:1}}),b=(0,f.Xb)({replCardWrapper:[[f.l0.position.relative]],replCardAnchorView:[[f.gU.filledAndOutlined,f.l0.borderRadius(8),f.l0.p(8),f.l0.focusRing,y,{color:"inherit",border:"1px solid "+f.TV.outlineDimmest}]],replCardInner:[f.l0.colWithGap(16)],replCardTop:[f.l0.rowWithGap(8),f.l0.align.start,f.l0.flex.growAndShrink(1)],replCardText:[f.l0.flex.growAndShrink(1),f.l0.colWithGap(4)],userHoverCardWrapper:[[{maxWidth:"fit-content",zIndex:2}]],userAnchorView:[f.l0.rowWithGap(4),f.l0.align.center,f.l0.focusRing,f.l0.borderRadius(8),{color:"inherit",transition:"box-shadow 120ms ease-out"}],description:[f.l0.maxWidth(450)],replStatsContainer:[[f.l0.rowWithGap(8),f.l0.justify.spaceBetween,f.l0.flex.wrap]],replStats:[f.l0.pb(2)],pillLinkStackWrapper:[f.l0.position.relative,f.l0.pt(2),{zIndex:1}],pillLinkStack:[f.l0.rowWithGap(4),f.l0.align.center]});function w(e){var t=e.tags,n=e.maxVisible,r=void 0===n?3:n,i=e.onTagClick,a=t.slice(0,r),l=t.length-a.length;return(0,o.BX)(f.G7,{css:b.pillLinkStack,children:[a.map((function(e){return(0,o.tZ)(u.t,{small:!0,tag:e,link:(0,c.M6)(e.id),onClick:i},e.id)})),l>0?(0,o.BX)(f.xv,{variant:"small",color:"dimmest",children:["+",l]}):null]})}function x(e){var t=e.repl,n=e.showOwner,r=e.maxVisibleTags,i=e.onUserClick,a=e.onTagClick,l=t.owner;return(0,o.BX)(f.G7,{css:b.replCardInner,children:[(0,o.BX)(f.G7,{css:b.replCardTop,children:[(0,o.tZ)(d.ZP,{size:84,iconUrl:t.iconUrl,alt:t.title}),(0,o.BX)(f.G7,{css:b.replCardText,children:[(0,o.tZ)(f.xv,{variant:"subheadBig",children:t.title}),n&&l?(0,o.tZ)(f.G7,{css:b.userHoverCardWrapper,children:(0,o.tZ)(p.Z,{username:l.username,children:(0,o.tZ)(v.ZP,{user:l,children:(0,o.BX)(Z,{css:b.userAnchorView,onClick:i,children:[(0,o.tZ)(h.q,{src:l.image,username:l.username,size:16,layout:"intrinsic"}),(0,o.tZ)(f.xv,{children:l.username})]})})})}):null,t.description?(0,o.tZ)(f.xv,{color:"dimmer",maxLines:2,css:b.description,children:t.description}):null]})]}),(0,o.BX)(f.G7,{css:b.replStatsContainer,children:[(0,o.tZ)(s.Z,{css:b.replStats,repl:t}),r?(0,o.tZ)(f.G7,{css:b.pillLinkStackWrapper,children:(0,o.tZ)(w,{tags:t.tags,maxVisible:r,onTagClick:a})}):null]})]})}function C(e){var t=e.repl,n=e.showOwner,a=e.maxVisibleTags,c=e.onReplClick,s=e.onUserClick,u=e.onTagClick,d=e.dataCy;return(0,o.tZ)(f.Tg,{css:b.replCardWrapper,dataCy:d,children:(0,o.tZ)(g(),(0,i.Z)((0,r.Z)({passHref:!0},(0,l.j3)(t)),{children:(0,o.tZ)(Z,{css:b.replCardAnchorView,onClick:c,children:(0,o.tZ)(x,{repl:t,showOwner:n,maxVisibleTags:a,onReplClick:c,onUserClick:s,onTagClick:u})})}))})}},50929:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(94660),i=(n(59496),n(19666)),o=n(7330),a=n(25676),l=n(42928),c=n(27615),s=n(9005),u=n(39302);function d(e){var t=e.repl;return(0,r.BX)(i.G,{css:[o.l0.rowWithGap(16),o.l0.align.center],children:[(0,r.tZ)(a.Z,{small:!0,count:t.runCount,tooltip:(0,u.Z)("runs",t.runCount),children:(0,r.tZ)(l.Z,{})}),(0,r.tZ)(a.Z,{small:!0,count:t.commentCount,tooltip:(0,u.Z)("comment",t.commentCount),children:(0,r.tZ)(c.Z,{})}),(0,r.tZ)(a.Z,{small:!0,count:t.likeCount,tooltip:(0,u.Z)("like",t.likeCount),children:(0,r.tZ)(s.Z,{})})]})}},43819:function(e,t,n){n.d(t,{g:function(){return x},t:function(){return b}});var r=n(72006),i=n(4405),o=n(94660),a=(n(59496),n(72030)),l=n(15667),c=n.n(l),s=n(19666),u=n(74840),d=n(7330),f=n(63463),h=n(4817),p=n(29847),v=n(62507),m=(0,a.iv)({border:"1px solid "+d.TV.accentPrimaryDefault,backgroundColor:"transparent"}),g=function(e){var t=e.isActive,n=e.small;return(0,a.iv)([d.l0.p(n?4:8),d.l0.align.center,d.l0.rowWithGap(4),d.l0.fontSize(12),t?m:h.gU.outlined,d.l0.borderRadius(16),{color:"inherit","&:active":m,height:n?"auto":d.TV.space32}])};function Z(e){var t=e.tag,n=e.isActive,r=e.isRemovable,i=e.small,a=i?"small":"text";return(0,o.tZ)(u.T,{elevated:!0,css:[d.l0.borderRadius(16)],children:(0,o.BX)(u.T,{elevated:n,css:[g({isActive:n,small:i})],children:[(0,o.BX)(s.G,{css:[d.l0.flex.row,d.l0.align.center,d.l0.flex.shrink(1)],children:[(0,o.tZ)(f.xv,{variant:a,color:"dimmest",children:"#"}),(0,o.tZ)(f.xv,{color:"dimmer",variant:a,css:[d.l0.flex.shrink(1)],children:t.id})]}),t.isOfficial&&!i?(0,o.tZ)(v.Z,{}):null,r?(0,o.tZ)(p.Z,{size:i?12:16}):null]})})}var y=s.K.a;function b(e){var t=e.tag,n=e.link,a=e.isActive,l=e.small,s=e.onClick;return(0,o.tZ)(c(),(0,i.Z)((0,r.Z)({},n),{passHref:!0,css:[d.l0.flex.shrink(1),{backgroundColor:"red"}],children:(0,o.tZ)(y,{css:[{color:"inherit"},d.l0.flex.shrink(1)],onClick:s,children:(0,o.tZ)(Z,{tag:t,isActive:a,small:l,isRemovable:a})})}))}var w=s.K.button;function x(e){var t=e.tag,n=e.onClick,r=e.isActive,i=e.small;return(0,o.tZ)(w,{css:[d.l0.reset.button],onClick:n,children:(0,o.tZ)(Z,{tag:t,isActive:r,small:i,isRemovable:!0})})}},56615:function(e,t,n){n.d(t,{A:function(){return i}});var r=n(12512),i={mobile:"@media (max-width: ".concat(r.j.tabletMax,"px)"),desktop:"@media (min-width: ".concat(r.j.tabletMax+1,"px)")}},45165:function(e,t,n){n.d(t,{Qf:function(){return c},Zb:function(){return l},eR:function(){return o}});var r=n(74296),i=n(49159),o=r.vX.Hot,a={hot:r.vX.Hot,new:r.vX.New,top:r.vX.Top,votes:r.vX.Top};function l(e){return e.toLowerCase()}function c(e){var t=(0,i.Z)(e,"after")||void 0,n=(0,i.Z)(e,"q")||void 0,r=(0,i.Z)(e,"boardSlug")||void 0,c=r&&"all"!==r?r.split(","):void 0,s=(0,i.Z)(e,"order")||l(o),u=a[s]||o,d=(0,i.Z)(e,"count"),f=d?parseInt(d,10):void 0;return void 0!==f&&Number.isNaN(f)&&(f=void 0),{tags:c,order:u,count:f,searchQuery:n,after:t}}},25676:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(94660),i=n(59496),o=n(63463),a=n(7330),l=n(19666),c=n(39918);function s(e){var t=e.count,n=e.children,s=e.tooltip,u=e.small,d=(0,c.d)(t);return(0,r.BX)(l.G,{"aria-label":s,"data-microtip-position":"left",role:"tooltip",css:[a.l0.rowWithGap(4),a.l0.align.center,a.l0.color.foregroundDimmer,{userSelect:"none",lineHeight:1}],children:[i.cloneElement(n,{size:u?12:void 0}),(0,r.tZ)(o.xv,{variant:u?"small":void 0,color:"dimmer",children:d})]})}},26006:function(e,t,n){n.d(t,{W:function(){return p},Z:function(){return v}});var r=n(94660),i=n(59496),o=n(72335),a=n(65782),l=n(24880),c=n(96473),s=n(19666),u=n(74840),d=n(9302),f=n(7330),h=n(85510);function p(e){var t=(0,i.useState)(null),n=t[0],r=t[1],o=(0,i.useState)(null),a=o[0],l=o[1],s=(0,c.Z)({onUpload:function(t){var n=t.url;r(null),e(n)},onUploadPreview:function(e){var t=e.dataUrl;l(null),r(t)},onError:function(e){r(null),l(e.message)}}),u=(0,i.useCallback)((function(){return l(null)}),[]);return{uploadImage:s.uploadImage,error:a,clearError:u,previewUrl:n}}function v(e){var t=(0,i.useRef)(null),n=e.size||48;return(0,r.BX)(s.G,{css:[f.l0.position.relative,{cursor:"pointer","&:hover .surface":{opacity:.8},"&:hover .icon":{opacity:1}}],onClick:function(){var e;null===(e=t.current)||void 0===e||e.click()},"aria-label":e.value?"Change icon":"Upload an icon","data-microtip-position":"right",role:"tooltip",children:[e.value?(0,r.BX)(r.HY,{children:[(0,r.tZ)(o.ZP,{iconUrl:e.value,size:e.size,alt:"icon"}),(0,r.tZ)(u.T,{className:"surface",elevated:!0,css:[f.l0.borderRadius(8),f.l0.coverContainer,{opacity:e.isUploading?.8:0}]}),(0,r.tZ)(s.G,{className:"icon",css:[f.l0.coverContainer,f.l0.center,f.l0.color.accentPrimaryDefault,{overflow:"hidden",opacity:e.isUploading?1:0}],children:e.isUploading?(0,r.tZ)(l.Z,{}):(0,r.tZ)(a.Z,{})})]}):(0,r.tZ)(s.G,{css:[f.l0.center,f.l0.width(n),f.l0.height(n),f.l0.borderRadius(8),f.l0.color.foregroundDimmer,{border:"1px dashed "+f.TV.outlineDefault,"&:hover":{color:f.TV.accentPrimaryDefault,borderColor:f.TV.accentPrimaryDefault}}],children:(0,r.tZ)(d.Z,{})}),(0,r.tZ)("input",{css:[[f.l0.coverContainer,{opacity:0,zIndex:-1}]],ref:t,accept:h.W9.join(","),type:"file",onChange:function(t){var n=t.target,r=n.validity,i=n.files;if(r.valid){var o=i?i[0]:null;o&&e.onUpload(o)}}})]})}},2292:function(e,t,n){n.d(t,{Z:function(){return y}});var r=n(2272),i=n(94660),o=(n(59496),n(58530)),a=n(74296),l=n(72006),c=n(43119),s=n(71440),u=n(25655),d=n(46653);function f(){var e=(0,c.Z)(["\n  mutation UnpublishReplUnpublish($input: UnpublishReplFromCommunityInput!) {\n    unpublishReplFromCommunity(input: $input) {\n      ... on Repl {\n        id\n        ...ReplViewReplActionsPermissions\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}var h={},p=(0,s.Ps)(f(),u.jN);var v=n(99340),m=n(10063),g=n(11255),Z=o.KD.form;function y(e){var t=e.repl,n=e.source,c=e.onDone,s=(0,v.Z)(),u=s.showConfirm,f=s.showError,y=(0,r.Z)(function(e){var t=(0,l.Z)({},h,e);return d.D(p,t)}({variables:{input:{replId:t.id}},onCompleted:function(e){if("Repl"===e.unpublishReplFromCommunity.__typename){var r=e.unpublishReplFromCommunity,i=r.runCount,o=r.likeCount,l=r.commentCount;(0,m.j)(m.U3.REPL_UNPUBLISHED,{source:n,numRuns:i,numLikes:o,numComments:l,replType:t.publishedAs===a.O2.Template?"template_repl":"regular_repl"}),u("Repl removed from the community.")}else"NotFoundError"===e.unpublishReplFromCommunity.__typename||"UnauthorizedError"===e.unpublishReplFromCommunity.__typename?f(e.unpublishReplFromCommunity.message):f("An unexpected error occurred.");c()},onError:function(){f("Something went wrong. Please try again.")},update:function(e){e.modify({id:e.identify({__typename:"Repl",id:t.id}),fields:{comments:function(e,t){return t.DELETE},tags:function(e,t){return t.DELETE}}})}}),2),b=y[0],w=y[1].loading;return(0,i.BX)(o.G7,{css:[o.l0.colWithGap(24)],children:[(0,i.tZ)(o.xv,{multiline:!0,variant:"subheadBig",children:"Unpublish this Repl from the Community"}),(0,i.BX)(Z,{onSubmit:function(e){e.preventDefault(),b()},css:[o.l0.colWithGap(32)],children:[(0,i.tZ)(o.xv,{multiline:!0,children:"Unpublishing a Repl will remove it from the Community. This action will delete all associated posts and tags. The Repl and all its comments will still be visible in your profile, but will not be shown in the Community or Trending views anymore. You can always re-publish the Repl again later."}),(0,i.BX)(o.G7,{css:[o.l0.rowWithGap(8),o.l0.justify.end],children:[(0,i.tZ)(o.G7,{children:(0,i.tZ)(o.zx,{type:"button",text:"Cancel",onClick:function(){return c()}})}),(0,i.tZ)(o.G7,{children:(0,i.tZ)(o.zx,{disabled:w,colorway:"negative",text:w?"Unpublishing...":"Yes, unpublish this Repl",type:"submit",iconLeft:(0,i.tZ)(g.Z,{})})})]})]})]})}},87392:function(e,t,n){n.d(t,{p:function(){return r}});var r=1e3},48396:function(e,t,n){var r=n(72006),i=n(4405),o=n(94660),a=n(72030),l=function(e){return{animationDuration:e?"2000ms":"800ms",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out"}},c=(0,a.F4)("\n  0% { transform: translate(0px, 0px) }\n  25% { transform: translate(0px, 80px) }\n  50% { transform: translate(100px, 80px) }\n  75% { transform: translate(100px, 160px) }\n  100% { transform: translate(0px, 160px) }\n"),s=(0,a.F4)("\n  0% { transform: translate(0px, 0px) }\n  25% { transform: translate(0px, -80px) }\n  50% { transform: translate(-100px, -80px) }\n  100% { transform: translate(-100px, -80px) }\n"),u=(0,a.F4)("\n  0% { transform: translate(0px, 0px) }\n  50% { transform: translate(0px, 0px) }\n  75% { transform: translate(0px, -80px) }\n  100% { transform: translate(100px, -80px) }\n");t.Z=function(e){var t=e.height,n=void 0===t?24:t,a=e.color,d=void 0===a?"#F26207":a,f=e.slow,h=void 0!==f&&f,p={width:84,height:64,fill:d,rx:12};return(0,o.BX)("svg",{width:n/1.2,height:n,viewBox:"0 0 200 240",xmlns:"http://www.w3.org/2000/svg",children:[(0,o.tZ)("rect",(0,i.Z)((0,r.Z)({css:[l(h),{animationName:c}]},p),{x:8,y:8})),(0,o.tZ)("rect",(0,i.Z)((0,r.Z)({css:[l(h),{animationName:s}]},p),{x:108,y:88})),(0,o.tZ)("rect",(0,i.Z)((0,r.Z)({css:[l(h),{animationName:u}]},p),{x:8,y:168}))]})}},62322:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(59496),i=n(56579);function o(){var e=(0,i.Z)().container,t=(0,r.useState)(e.getConnectionState()),n=t[0],o=t[1];return(0,r.useEffect)((function(){return e.onConnectionStateChanged(o)}),[e]),n}},33209:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(57135),i=n(2272),o=n(96583),a=n(59496),l=n(27033),c=n(51458);function s(e){var t=(0,l.Z)({container:e,service:"exec"}).channel,n=(0,a.useRef)(!1),s=(0,a.useRef)([]),u=(0,c.Z)((0,r.Z)((function(){var e,r,a,l,c,d,f,h,p,v;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:if(n.current)return[2];if(!s.current.length)return[2];if("open"!==(null===t||void 0===t?void 0:t.status))return[2];if(!(e=s.current.pop()))throw new Error("Expected request");return r=(0,i.Z)(e,2),a=r[0],l=a.args,c=a.env,d=r[1],f="",h=t.onCommand((function(e){e.output&&(f+=e.output)})),n.current=!0,[4,t.request({exec:{args:l,env:c}})];case 1:return p=o.sent(),n.current=!1,h(),v=p.channelClosed?"Channel closed":p.error,d(v?{error:v,output:f||null}:{output:f,error:null}),u.current(),[2]}}))}))),d=null===t||void 0===t?void 0:t.status;return(0,a.useEffect)((function(){"open"===d&&u.current()}),[d,u]),(0,a.useCallback)((function(e){var t=e.args,n=e.env;return new Promise((function(e){s.current.push([{args:t,env:n},e]),u.current()}))}),[u])}},91338:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(2272),i=n(59496),o=n(56579),a=n(76554);function l(){var e,t,n=(0,o.Z)().container,l=(0,r.Z)(i.useState(null!==(t=null===(e=n.getContext())||void 0===e?void 0:e.repl)&&void 0!==t?t:null),2),c=l[0],s=l[1];return i.useEffect((function(){return n.onConnectionStateChanged((function(e){var t,r;e===a.em.CONNECTED&&s(null!==(r=null===(t=n.getContext())||void 0===t?void 0:t.repl)&&void 0!==r?r:null)}))}),[s,n]),c}},26351:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(2272),i=n(59496);function o(e,t){var n=(0,r.Z)(i.useState(null),2),o=n[0],a=n[1];return i.useEffect((function(){var n=!1;return e.readFile(t).then((function(e){n||a(e)})),function(){n=!0}}),[e,t]),o}},34928:function(e,t,n){n.d(t,{Z:function(){return b},X:function(){return y}});var r=n(2272),i=n(59496),o=n(56579),a=n(72006),l=n(4405),c=n(16783),s=n.n(c),u=n(51954),d=n(99231);function f(e){return Math.floor(performance.now()-e.startTime)}var h=new WeakSet;function p(e){var t=e.client,n=e.replId,r=e.language;if(!h.has(t)){h.add(t);var i=new Map,o=function(e){return{method:e.method,replid:n,language:r,startTime:Math.floor(e.startTime)}},c=s()((function(e,t){var n=f(t);n>1e4&&u.kg.time("LSP unresponsive request",n,o(t))})),p=setInterval((function(){i.forEach((function(e){c(e.id,e)}))}),2e3);return(0,d.uf)([t.onRequest((function(e){var t=e.id,n=e.data;Math.random()<.01&&i.set(t,{id:t,method:n.method,startTime:performance.now()})})),t.onResponse((function(e){var t=e.id,n=e.error,r=i.get(t);null!=r&&(i.delete(t),u.kg.time("LSP request",f(r),(0,l.Z)((0,a.Z)({},o(r)),{result:null==n?"ok":"error"})))})),t.onCancelRequest((function(e){var t=i.get(e);null!=t&&(i.delete(e),u.kg.time("LSP request",f(t),(0,l.Z)((0,a.Z)({},o(t)),{result:"cancelled"})))})),function(){return clearInterval(p)},function(){return h.delete(t)}])}}var v=n(54791),m=n(16505),g=n(79351),Z=n(91338);function y(){var e=(0,Z.Z)(),t=(0,r.Z)(i.useState(null),2),n=t[0],o=t[1];return i.useEffect((function(){(null===e||void 0===e?void 0:e.language)&&o(e.language.startsWith("nix")||e.language.startsWith("html"))}),[e]),n}function b(e){var t=(0,g.Z)(),n=(0,m.Z)(),a=(0,o.Z)(),l=a.lsp,c=a.lspnix,s=(0,r.Z)(i.useState(null),2),u=s[0],d=s[1],f=y();return i.useEffect((function(){if(null!==f){var t,n;if(f)t=c.onClient(e,d);else(null===(n=l.getClient())||void 0===n?void 0:n.isSupportedFile(e))?d(l.getClient()):d(null),t=l.onClient((function(t){(null===t||void 0===t?void 0:t.isSupportedFile(e))?d(t):d(null)}));return function(){t(),d(null)}}}),[l,c,e,f]),i.useEffect((function(){if(u)return p({client:u,replId:t,language:(0,v.D)(e,n)})}),[u,t,e,n]),u}},63530:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(2272),i=n(59496),o=n(56579);function a(){var e=(0,o.Z)().presence,t=(0,r.Z)(i.useState(e.getFollowedUser()),2),n=t[0],a=t[1];return i.useEffect((function(){return a(e.getFollowedUser()),e.onFollowedUserChanged(a)}),[e]),n}},43897:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(63530);function i(){var e=(0,r.Z)();return e?e.color:null}},42615:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(2272),i=n(59496),o=n(56579);function a(){var e=(0,o.Z)().session,t=(0,r.Z)(i.useState(e.getAreHiddenFilesVisible()),2),n=t[0],a=t[1];return i.useEffect((function(){return a(e.getAreHiddenFilesVisible()),e.onHiddenFileVisibilityToggled(a)}),[e]),n}},11427:function(e,t,n){n.d(t,{a:function(){return c}});var r=n(94660),i=n(72030),o=function(e){return(0,i.iv)({"body *":{cursor:"".concat(e," !important")}})},a=(0,i.iv)({"body *":{userSelect:"none",WebkitTouchCallout:"none",WebkitUserSelect:"none"}}),l={"n-resize":o("n-resize"),"ne-resize":o("ne-resize"),"nesw-resize":o("nesw-resize"),"s-resize":o("s-resize"),"se-resize":o("se-resize"),"sw-resize":o("sw-resize"),"e-resize":o("e-resize"),"ew-resize":o("ew-resize"),"row-resize":o("row-resize"),"col-resize":o("col-resize"),grabbing:o("grabbing")};function c(e){var t=e.cursor;return(0,r.tZ)(i.xB,{styles:[a,l[t]]})}},92571:function(e,t,n){n.d(t,{g:function(){return o}});var r=n(94660),i=n(72030);function o(){return(0,r.tZ)(i.xB,{styles:[{body:{overflow:"hidden"}}]})}},40406:function(e,t,n){n.d(t,{w:function(){return f}});var r=n(72006),i=n(94660),o=n(30826),a=n.n(o),l=n(59496),c=n(87995),s=n(72030),u=n(43589),d=n(7330);function f(e){var t=e.targetElement,n=(0,l.useState)(null),o=n[0],f=n[1],p=(0,u.Z)((function(){t&&f({rect:t.getBoundingClientRect(),docWidth:document.documentElement.clientWidth,docHeight:document.documentElement.clientHeight})}),{type:"throttle",wait:100});if((0,l.useEffect)((function(){t&&p(t)}),[t,p]),(0,l.useEffect)((function(){if(t){var e=a()((function(){f({rect:t.getBoundingClientRect(),docWidth:document.documentElement.clientWidth,docHeight:document.documentElement.clientHeight})}),100);return window.addEventListener("resize",e),window.addEventListener("scroll",e),function(){window.removeEventListener("resize",e),window.removeEventListener("scroll",e)}}}),[t]),!o||!t)return null;var v=(0,s.iv)({backgroundColor:d.TV.backgroundOverlay,zIndex:d.n0+1,position:"fixed",transition:"all 0.5s ease-out"});return(0,c.createPortal)((0,i.BX)(i.HY,{children:[(0,i.tZ)("div",{id:"wat",css:[h((0,r.Z)({side:"left-top"},o)),v]}),(0,i.tZ)("div",{css:[h((0,r.Z)({side:"top-right"},o)),v]}),(0,i.tZ)("div",{css:[h((0,r.Z)({side:"right-bottom"},o)),v]}),(0,i.tZ)("div",{css:[h((0,r.Z)({side:"bottom-left"},o)),v]})]}),document.body)}function h(e){var t=e.side,n=e.rect,r=e.docWidth,i=e.docHeight;switch(t){case"left-top":return(0,s.iv)({top:0,left:0,width:Math.max(0,n.left),height:Math.max(0,n.bottom)});case"top-right":return(0,s.iv)({top:0,right:0,width:"calc(".concat(r,"px - ").concat(Math.max(0,n.left),"px)"),height:Math.max(0,n.top)});case"right-bottom":return(0,s.iv)({bottom:0,right:0,width:"calc(".concat(r,"px - ").concat(Math.max(0,n.right),"px)"),height:"calc(".concat(i,"px - ").concat(Math.max(0,n.top),"px)")});case"bottom-left":return(0,s.iv)({bottom:0,left:0,width:Math.max(0,n.right),height:"calc(".concat(i,"px - ").concat(Math.max(0,n.bottom),"px)")})}}},72353:function(e,t,n){n.d(t,{k:function(){return p}});var r=n(72006),i=n(4405),o=n(94660),a=n(94717),l=n(43280),c=n(59496),s=n(87995),u=n(12778),d=n(87360),f=n(7330),h=n(43589);function p(e){var t=e.targetElement,n=e.activeStep,p=e.goto,v=e.currentStepIndex,m=e.totalSteps,g=e.done,Z=e.disableAnimation,y=e.placement,b=void 0===y?"right":y,w=e.innerRef,x=(0,c.useState)(null),C=x[0],k=x[1],S=(0,c.useState)(null),E=S[0],T=S[1],R=(0,u.D)(t,C,{placement:b,modifiers:[{name:"arrow",options:{element:E,padding:8}},{name:"offset",options:{offset:[0,16]}},{name:"preventOverflow",options:{padding:8}},{name:"flip",options:{fallbackPlacements:["top","bottom","left","right"]}},{name:"computeStyles",options:{adaptive:!1}}]}),_=(0,h.Z)((function(){var e;null===(e=R.update)||void 0===e||e.call(R)}),{type:"throttle",wait:100});return(0,c.useEffect)((function(){_(t)}),[t,_]),(0,c.useImperativeHandle)(w,(function(){return{updateTooltip:function(){var e;null===(e=R.update)||void 0===e||e.call(R)}}})),(0,s.createPortal)((0,o.BX)("div",(0,i.Z)((0,r.Z)({ref:k,style:R.styles.popper,css:{transition:Z?"all":"all 0.5s ease-out",zIndex:f.n0+2,width:320}},R.attributes.popper),{children:[(0,o.tZ)(l.O,{title:n.title,content:n.content,onDismiss:function(){g()},currentStepIndex:v,onCurrentStepChange:p,totalSteps:m,cypressCloseData:"tour-tooltip-close-button"}),(0,o.tZ)("span",{style:R.styles.arrow,css:[a.wk,{"&::after":{backgroundColor:d.Br.primary.dimmest,border:"1px solid "+d.Br.primary.dimmer}}],ref:T})]})),document.body)}},62246:function(e,t,n){n.d(t,{r:function(){return g},e:function(){return Z.e}});var r=n(57389),i=n(72006),o=n(4405),a=n(2272),l=n(94660),c=n(64927),s=n(59496),u=n(69402),d=n(43280),f=n(22708);function h(){var e=(0,u.X)();if(!e)return null;var t=e.activeStep,n=e.goto,r=e.steps,i=e.done;return(0,l.tZ)(f.u,{preventClose:!0,isOpen:Boolean(t.isModal),onRequestClose:function(){},centered:!0,maxWidth:"fit-content",noPadding:!0,children:(0,l.tZ)(d.O,{title:t.title,content:t.content,onDismiss:function(){i()},currentStepIndex:r.findIndex((function(e){return t.id===e.id})),onCurrentStepChange:n,totalSteps:r.length,cypressCloseData:"tour-tooltip-close-button"})})}var p=n(40406),v=n(72353),m=n(49500);function g(e){var t,n=e.children,d=e.tour,f=e.isDoneInitialOverride,g=e.onStep,Z=e.onDone,y=function(){D(!0),null===Z||void 0===Z||Z(k.id)},b=function(e){B.current=k,null===g||void 0===g||g(e.id),S(e)},w=function(e){var t;if("number"===typeof e)t=e;else{var n=e;t=d.steps.findIndex((function(e){return n===e.id}))}if(!(t<0||t>=d.steps.length)){for(var r=d.steps[t],i=t<P;!T[r.id]&&r.autoSkipIfNoTarget;){if((t=i?t-1:t+1)<0||t>=d.steps.length)return;r=d.steps[t]}b(r)}},x=function(){w(0),D(!1)},C=(0,s.useState)(d.steps[0]),k=C[0],S=C[1],E=(0,s.useState)({}),T=E[0],R=E[1],_=function(e,t){var n,r=(0,c.Pp)({variables:{tours:e}}),i=r.data,o=r.loading,l=(0,a.Z)((0,c.oe)({variables:{name:e},optimisticResponse:{markTourAsSeen:{__typename:"TourSeen",id:e,seen:!0}}}),1)[0],u=(0,s.useState)(t),d=u[0],f=u[1],h=Boolean(null===i||void 0===i||null===(n=i.currentUser)||void 0===n?void 0:n.toursSeen[0].seen);return"boolean"===typeof d&&(h=d),{isLoading:o,isDone:h,setIsDone:function(e){f(e),e&&l()}}}(d.id,f),I=_.isDone,G=_.isLoading,D=_.setIsDone,P=d.steps.findIndex((function(e){return k.id===e.id}));if(-1===P)throw new Error("Current tour step is not in tour steps");var B=(0,s.useRef)(),U=(0,s.useCallback)((function(e,t){var n=d.steps.findIndex((function(t){return e===t.id}));if(-1===n)throw new Error("Invalid step id");if(d.steps[n].isModal)throw new Error("Trying to set a target element for a modal step");R((function(n){return n[e]===t?n:(0,o.Z)((0,i.Z)({},n),(0,r.Z)({},e,t))}))}),[d]),A=T[k.id],N=!I&&!G;window.startTour=function(){m.log("starting tour:",d.id,"from",d.steps[0].id),x()};var L=d.steps.filter((function(e){return!e.autoSkipIfNoTarget||Boolean(T[e.id])})),X=L.findIndex((function(e){return k.id===e.id}));return(0,l.BX)(u.z,{value:(0,o.Z)((0,i.Z)({},d),{setStepTargetElement:U,activeStep:k,next:function(){var e=d.steps[P+1];if(e&&e.autoSkipIfNoTarget)for(var t=P+1;e&&e.autoSkipIfNoTarget&&!T[e.id];)t++,e=d.steps[t];e?b(e):y()},prev:function(){var e=d.steps[P-1];if(e&&e.autoSkipIfNoTarget)for(var t=P-1;e&&e.autoSkipIfNoTarget&&!T[e.id];)t--,e=d.steps[t];e&&b(e)},goto:w,isDone:I,isLoading:G,done:y,restart:x}),children:[N&&k.isModal?(0,l.tZ)(h,{}):null,N&&A?(0,l.BX)(l.HY,{children:[(0,l.tZ)(p.w,{targetElement:A}),(0,l.tZ)(v.k,{targetElement:A,activeStep:k,currentStepIndex:X,done:y,goto:function(e){w(e+P-X)},totalSteps:L.length,disableAnimation:Boolean(0===P||(null===(t=B.current)||void 0===t?void 0:t.isModal))})]}):null,n]})}var Z=n(73112)},18811:function(e,t,n){var r;n.d(t,{z:function(){return r}}),function(e){e.FileNode="FILE_NODE",e.FileHeaderTab="FILE_HEADER_TAB",e.Code="CODE",e.Pane="PANE",e.NewPane="NEW_PANE"}(r||(r={}))},36658:function(e,t,n){n.d(t,{VK:function(){return h},dx:function(){return d}});var r=n(72006),i=n(43119),o=n(71440),a=n(34905),l=n(53486);function c(){var e=(0,i.Z)(["\n  fragment UserCardUser on User {\n    id\n    fullName\n    username\n    url\n    bio\n    image\n    isModerator: hasRole(role: MODERATOR)\n    isAdmin: hasRole(role: ADMIN)\n    followerCount\n    followCount\n    isFollowedByCurrentUser\n    isFollowingCurrentUser\n    socials {\n      id\n      url\n      type\n    }\n    roles(only: [MODERATOR, PATRON, PYTHONISTA, REPLIT_REP]) {\n      id\n      name\n      key\n      tagline\n    }\n    ...UserLabelUser\n  }\n  ","\n"]);return c=function(){return e},e}function s(){var e=(0,i.Z)(["\n  query UserCard($username: String!) {\n    currentUser {\n      id\n    }\n    userByUsername(username: $username) {\n      id\n      ...UserCardUser\n    }\n  }\n  ","\n"]);return s=function(){return e},e}var u={},d=(0,o.Ps)(c(),a.w),f=(0,o.Ps)(s(),d);function h(e){var t=(0,r.Z)({},u,e);return l.a(f,t)}},63729:function(e,t,n){n.d(t,{Z:function(){return I}});var r=n(72006),i=n(4405),o=n(94660),a=n(59496),l=n(90668),c=n(45715),s=n(19666),u=n(58530),d=n(74296),f=n(36658),h=n(73522),p=n(24880),v=n(15667),m=n.n(v),g=n(26807),Z=n(98717),y=n(99096),b=n(47190),w=n(51408),x=n(32926),C=n(28927),k=n(11705),S=n(96209),E=n(39302),T=n(79419),R=s.K.span;function _(e){var t,n=e.user,a=e.isCurrentUser,c=void 0!==a&&a;return(0,o.tZ)(s.G,{css:[u.l0.colWithGap(16)],children:(0,o.BX)(s.G,{css:[u.l0.colWithGap(8)],children:[(0,o.BX)(s.G,{css:[u.l0.rowWithGap(12)],children:[(0,o.tZ)(m(),{href:"/@"+n.username,target:"_blank",rel:"noreferrer",children:(0,o.tZ)("a",{children:(0,o.tZ)(h.Z,{size:48,src:n.image,alt:n.username,css:[{border:"solid 1px ".concat(u.TV.backgroundHighest),backgroundColor:u.TV.backgroundDefault}]})})}),(0,o.BX)(s.G,{css:[u.l0.flex.growAndShrink(1),u.l0.colWithGap(4)],children:[(0,o.BX)(s.G,{css:[u.l0.rowWithGap(8),u.l0.align.center],children:[(0,o.tZ)(m(),(0,i.Z)((0,r.Z)({passHref:!0},(0,g.Ru)(n)),{children:(0,o.tZ)(s.G,{tag:"a",css:[u.l0.flex.growAndShrink(1)],children:(0,o.tZ)(u.xv,{css:[{color:u.TV.foregroundDefault,fontWeight:400}],variant:"subheadBig",children:n.fullName||n.username})})})),n.isFollowingCurrentUser?(0,o.tZ)(u.DR,{css:[u.l0.minWidth("fit-content")],text:"Follows you"}):null]}),(0,o.tZ)(s.G,{css:[u.l0.rowWithGap(4),u.l0.align.center],children:(0,o.tZ)(m(),{href:"/@"+n.username,target:"_blank",rel:"noreferrer",children:(0,o.tZ)("a",{children:(0,o.BX)(u.xv,{color:"dimmest",css:[{fontWeight:300}],children:["@",n.username]})})})})]})]}),(0,o.BX)(s.G,{css:[u.l0.rowWithGap(16),u.l0.align.center],children:[c?null:(0,o.tZ)(y.Z,{user:n,subtle:!0,stretch:!0,small:!0}),(null===n||void 0===n||null===(t=n.socials)||void 0===t?void 0:t.length)&&!c?n.socials.slice(0,3).map((function(e){return"twitter"===e.type?(0,o.tZ)("a",{target:"_blank",href:e.url,rel:"noreferrer",children:(0,o.tZ)(b.Z,{size:16,color:u.TV.foregroundDimmest})},e.id+"-socialid"):"facebook"===e.type?(0,o.tZ)("a",{target:"_blank",href:e.url,rel:"noreferrer",children:(0,o.tZ)(w.Z,{size:16,color:u.TV.foregroundDimmest})},e.id+"-socialid"):"linkedin"===e.type?(0,o.tZ)("a",{target:"_blank",href:e.url,rel:"noreferrer",children:(0,o.tZ)(x.Z,{size:16,color:u.TV.foregroundDimmest})},e.id+"-socialid"):"github"===e.type?(0,o.tZ)("a",{target:"_blank",href:e.url,rel:"noreferrer",children:(0,o.tZ)(C.Z,{size:16,color:u.TV.foregroundDimmest})},e.id+"-socialid"):"youtube"===e.type?(0,o.tZ)("a",{target:"_blank",rel:"noreferrer",children:(0,o.tZ)(k.Z,{size:16,color:u.TV.foregroundDimmest})},e.id+"-socialid"):"website"===e.type?(0,o.tZ)("a",{target:"_blank",href:e.url,rel:"noreferrer",children:(0,o.tZ)(S.Z,{size:16,color:u.TV.foregroundDimmest})},e.id+"-socialid"):void 0})):null]}),(0,o.BX)(s.G,{css:[u.l0.rowWithGap(8),u.l0.flex.growAndShrink(1)],children:[(0,o.BX)(u.xv,{variant:"small",color:"dimmer",children:[(0,o.tZ)("span",{css:{color:u.TV.foregroundDefault,fontWeight:u.TV.fontWeightMedium},children:n.followerCount})," ",(0,E.Z)("follower",n.followerCount)]}),(0,o.BX)(u.xv,{variant:"small",color:"dimmer",children:[(0,o.tZ)("span",{css:{color:u.TV.foregroundDefault,fontWeight:u.TV.fontWeightMedium},children:n.followCount})," ","following"]})]}),n.bio?(0,o.tZ)(u.xv,{css:{overflow:"hidden",display:"-webkit-box","-webkit-line-clamp":"3","-webkit-box-orient":"vertical"},multiline:!0,children:(0,o.tZ)(l.ZP,{properties:{target:"_blank"},children:n.bio})}):null,(0,o.BX)(s.G,{css:[u.l0.flex.row,u.l0.flex.wrap,{display:"inline-flex",gap:"8px"}],children:[(0,o.tZ)(T.Z,{username:n.username}),n.isAdmin?(0,o.tZ)(Z._.Admin,{}):null,n.roles.map((function(e){if(e.key===d.SM.Moderator&&n.isAdmin)return null;var t=e.tagline||void 0,r=u.TV.foregroundDefault,i=(0,o.tZ)(Z._.Default,{name:e.name,tagline:t},e.id);return e.key===d.SM.Moderator?i=(0,o.tZ)(Z._.Moderator,{},e.id):e.key===d.SM.ReplitRep?i=(0,o.tZ)(Z._.ReplitRep,{},e.id):e.key===d.SM.Patron?i=(0,o.tZ)(Z._.Patron,{},e.id):e.key===d.SM.Pythonista&&(i=(0,o.tZ)(Z._.Pythonista,{},e.id)),(0,o.tZ)("div",{children:(0,o.tZ)(s.G,{css:[{color:r,fontSize:u.TV.fontSizeSmall}],children:i})},e.id)}))]})]})})}function I(e){var t,n=e.username,r=e.children,i=e.inline,l=e.onUserClick,d=(0,a.useState)(!1),h=d[0],v=d[1],m=(0,a.useState)(!1),g=m[0],Z=m[1],y=(0,a.useRef)(!1);(0,a.useEffect)((function(){h&&(y.current=!0);var e=setTimeout((function(){Z(h)}),200);return function(){clearTimeout(e)}}),[h]);var b=(0,f.VK)({variables:{username:n},skip:!1===y.current}),w=b.data,x=b.loading,C=null===w||void 0===w?void 0:w.userByUsername,k=(null===w||void 0===w||null===(t=w.currentUser)||void 0===t?void 0:t.id)===(null===C||void 0===C?void 0:C.id);return(0,o.BX)(c.Z,{disableFocusLock:!0,isOpen:g,onClickOutside:function(){return Z(!1)},maxWidth:300,growToMaxWidth:!0,css:[{padding:16,background:u.TV.backgroundHigher,border:"solid 1px "+u.TV.backgroundHighest}],children:[i?(0,o.tZ)("span",{onMouseEnter:function(){return v(!0)},onMouseLeave:function(){return v(!1)},children:r}):(0,o.tZ)(R,{onMouseEnter:function(){return v(!0)},onMouseLeave:function(){return v(!1)},children:r}),(0,o.BX)(R,{onMouseEnter:function(){return v(!0)},onMouseLeave:function(){return v(!1)},children:[!x&&(C?(0,o.tZ)(_,{user:C,onUserClick:l,isCurrentUser:k}):(0,o.tZ)(u.xv,{color:"dimmer",children:"User doesn\u2019t exist"})),x?(0,o.tZ)(s.G,{css:[u.l0.center,u.l0.width("100%"),u.l0.height("100%")],children:(0,o.tZ)(p.Z,{})}):null]})]})}},34905:function(e,t,n){n.d(t,{w:function(){return c}});var r=n(43119),i=n(71440),o=n(90130);function a(){var e=(0,r.Z)(["\n  fragment UserLabelUser on User {\n    id\n    username\n    ...UserLinkUser\n  }\n  ","\n"]);return a=function(){return e},e}function l(){var e=(0,r.Z)(["\n  fragment UserLabelWithImageUser on User {\n    id\n    image\n    ...UserLabelUser\n  }\n  ","\n"]);return l=function(){return e},e}var c=(0,i.Ps)(a(),o._);l()},79419:function(e,t,n){n.d(t,{Z:function(){return b}});var r=n(57389),i=n(94660),o=n(10063),a=n(58530),l=n(85741),c=n(74296),s=n(15667),u=n.n(s),d=n(72006),f=n(43119),h=n(71440),p=n(53486);function v(){var e=(0,f.Z)(["\n  query PlanBadge($username: String!) {\n    userByUsername(username: $username) {\n      id\n      userSubscriptionType\n    }\n  }\n"]);return v=function(){return e},e}var m,g={},Z=(0,h.Ps)(v());var y=(m={},(0,r.Z)(m,c.HP.Hacker,l.vA.Hacker),(0,r.Z)(m,c.HP.HackerPro,l.vA.HackerPro),m);function b(e){var t,n=function(e){var t=(0,d.Z)({},g,e);return p.a(Z,t)}({variables:{username:e.username}}),r=n.data,c=n.loading,s=null===r||void 0===r||null===(t=r.userByUsername)||void 0===t?void 0:t.userSubscriptionType;if(c||!s)return null;var f=y[s];return(0,i.tZ)(u(),{href:"/pricing",passHref:!0,children:(0,i.tZ)(a.G7,{tag:"a",css:{":hover *":{cursor:"pointer"}},onClick:function(){(0,o.j)(o.U3.UPGRADE_SELECTED,{source:"plan_badge"})},children:(0,i.tZ)(l.ZP,{name:f,userRole:f})})})}},11279:function(e,t,n){n.d(t,{YX:function(){return g},ho:function(){return Z}});var r=n(66091),i=n(72006),o=n(4405),a=n(2272),l=n(94660),c=n(59496),s=n(58530),u=n(61794),d=n(24880),f=n(58868),h=n(85036),p=n(75345),v=n(99459),m=n(69913),g=new(function(){function e(){var t=this;(0,r.Z)(this,e),this.counter=0,this.enabled=!1,this.maxEntries=10,this.logs=(0,v.u)([]),this.clear=function(){t.logs.current=[]}}var t=e.prototype;return t.toggle=function(e){this.enabled=e},t.add=function(e){var t=this;if(!this.enabled)return{id:-1};var n=this.counter++,r={id:n,request:e,requestTime:Date.now()};return this.logs.update((function(e){return[r].concat(e).slice(0,t.maxEntries)})),{id:n}},t.update=function(e,t){this.enabled&&this.logs.update((function(n){var r=n.findIndex((function(t){return t.id===e.id}));if(-1===r)return n;var i=n.slice();return i[r]=t(i[r]),i}))},t.complete=function(e,t){this.update(e,(function(e){return(0,o.Z)((0,i.Z)({},e),{response:t,responseTime:Date.now()})}))},t.abort=function(e){this.logs.update((function(t){return t.filter((function(t){return t.id!==e.id||null!=t.responseTime}))}))},e}()),Z=function(){var e,t=(0,p.Z)(g.logs);return(0,l.BX)(s.G7,{css:[s.l0.flex.column],children:[(0,l.BX)(s.G7,{css:[s.l0.flex.row,s.l0.align.center,s.l0.m(4),s.l0.position.sticky,s.l0.top(0),s.l0.backgroundColor.backgroundDefault,s.l0.zIndex(1)],children:[(0,l.tZ)(s.xv,{css:s.l0.flex.grow(1),children:"Requests"}),(0,l.tZ)(u.Z,{onClick:g.clear})]}),(0,l.BX)(s.G7,{css:[s.l0.flex.grow(1),s.l0.flex.column,s.l0.overflow("auto")],children:[t.map((function(t){return(0,l.tZ)(y,{log:t},null!==(e=t.id)&&void 0!==e?e:t.requestTime.valueOf())})),!t.length&&(0,l.tZ)(s.G7,{css:s.l0.m(4),children:"\ud83d\ude14 No logs yet..."})]})]})},y=(0,c.memo)((function(e){var t=e.log,n=t.requestTime,r=t.responseTime,i=t.request,o=t.response,c=(0,a.Z)((0,h.Z)(!0),2),u=c[0],d=c[1],f=i.code.length>20?"...".concat(i.code.slice(-20)):i.code;return(0,l.BX)(s.G7,{css:[s.l0.my(4),s.l0.mx(4)],children:[(0,l.BX)(s.G7,{role:"button",onClick:d,onKeyDown:d,tabIndex:0,css:[s.l0.flex.row,s.l0.rowWithGap(4),{"&:hover":{cursor:"pointer",".lspLog-requestMethod":{textDecoration:"underline"}}}],children:[(0,l.BX)(s.G7,{css:[s.l0.flex.grow(1),s.l0.rowWithGap(2)],children:[(0,l.tZ)(s.xv,{children:b(t)}),(0,l.tZ)(s.xv,{children:(0,l.tZ)("code",{children:f})})]}),(0,l.tZ)(s.G7,{css:{opacity:.5},children:null!=r&&(0,l.BX)(s.xv,{css:s.l0.fontSize(13),children:[r.valueOf()-n.valueOf()," ms"]})})]}),!u&&(0,l.BX)(l.HY,{children:[void 0!==i&&(0,l.tZ)(m.g,{name:"request",src:i}),void 0!==o&&("CompleteCodeResult"===o.__typename?(0,l.BX)("details",{children:[(0,l.tZ)("summary",{children:"Response"}),(0,l.tZ)("pre",{css:[s.l0.overflow("scroll"),s.l0.borderRadius(4),s.l0.p(4),{border:"1px solid ".concat(s.TV.outlineDimmest)}],children:o.code})]}):(0,l.tZ)(m.g,{name:"response",src:o}))]})]})}));function b(e){var t=e.response;return t?"CompleteCodeResult"===t.__typename?(0,l.tZ)(f.Check,{}):(0,l.tZ)(f.Frown,{}):(0,l.tZ)(d.Z,{})}},68327:function(e,t,n){n.d(t,{Sj:function(){return c},Th:function(){return a},UB:function(){return s},a0:function(){return u},ot:function(){return l}});var r=n(72006),i=n(4405),o=n(5109);var a=(0,o.cn)([]),l=(0,o.cn)({regexp:null,direction:"",highlightOnly:!0}),c=(0,o.cn)((function(e){return function(e,t){if(!t.regexp&&!t.direction)return e.map((function(e){return(0,i.Z)((0,r.Z)({},e),{highlighted:!1})}));var n=function(e){var n=e.dir,r=e.channel,i=e.cmd;return(!t.direction||n===t.direction)&&!!(!t.regexp||!t.regexp.test||r.name&&t.regexp.test(r.name)||r.service&&t.regexp.test(r.service)||t.regexp.test(JSON.stringify(i)))};return t.highlightOnly?e.map((function(e){return n(e)?(0,i.Z)((0,r.Z)({},e),{highlighted:!0}):e})):e.filter(n)}(e(a),e(l))})),s=(0,o.cn)(null,(function(e,t){t(a,[])})),u=(0,o.cn)(!1)},14081:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(2272),i=n(9970),o=n(56579),a=n(5109),l=n(54703),c=n(59496),s=n(68327);function u(){var e=(0,l.useRouter)(),t=(0,o.Z)().container,n=(0,r.Z)((0,a.KO)(s.a0),2),u=n[0],d=n[1],f=(0,a.b9)(s.Th);(0,c.useEffect)((function(){e.query.debug&&d(!0)}),[d,e.query.debug]),(0,c.useEffect)((function(){if(u)return t.client().onDebugLog((function(e){if("log"===e.type){var n;if(e.log.channel)if(n={name:e.log.channel.name,service:null},"string"===typeof e.log.channel.service)n.service=e.log.channel.service;else if(e.log.channel.service){var r=t.getContext();r&&(n.service=e.log.channel.service(r))}f((function(t){return(0,i.Z)(t).concat([{index:t[t.length-1]?t[t.length-1].index+1:0,channel:n,dir:e.log.direction,cmd:e.log.cmd,timestamp:window.performance.now()}])}))}}))}),[u,f,t])}},69913:function(e,t,n){n.d(t,{L:function(){return w},g:function(){return C}});var r=n(57389),i=n(72006),o=n(4405),a=n(2272),l=n(94660),c=n(59496),s=n(44135),u=n(19540),d=n(34928),f=n(58530),h=n(61794),p=n(24),v=n(38094),m=n(24880),g=n(58868),Z=n(85036),y=n(99231),b=n(83177),w=function(){var e,t=(0,u.R3)(),n=(0,d.Z)(t||""),r=(0,s.H)(),m=(0,a.Z)((0,Z.Z)(!0),2),b=m[0],w=m[1],C=(0,c.useState)(""),S=C[0],E=C[1],T=(0,c.useState)((function(){return[]})),R=T[0],_=T[1],I=(0,a.Z)((0,Z.Z)(!0),2),G=I[0],D=I[1],P=(0,a.Z)((0,Z.Z)(!0),2),B=P[0],U=P[1],A=(0,c.useCallback)((function(e){_((function(t){return[e].concat(t)}))}),[]),N=(0,c.useCallback)((function(e,t){_((function(n){return n.map((function(n){return n.id===e?t(n):n}))}))}),[]),L=(0,c.useCallback)((function(){_([])}),[]),X=(0,c.useCallback)((function(){A({canceled:!1,notification:{method:"probe",params:{filePath:t,state:null===n||void 0===n?void 0:n.getServerState(),capabilities:null===n||void 0===n?void 0:n.getServerCapabilities(),diagnostics:null===n||void 0===n?void 0:n.getDiagnostics(t||""),isOpen:null===n||void 0===n?void 0:n.isOpen(t||""),isSupportedFile:null===n||void 0===n?void 0:n.isSupportedFile(t||"")}},requestTime:new Date,type:"probe"})}),[A,n,t]),M=(0,c.useMemo)((function(){var e=S.split(",").map((function(e){return e.trim()})),t=R;return G||(t=t.filter((function(e){return null==e.notification}))),B||(t=t.filter((function(e){return null==e.request}))),S&&(t=t.filter((function(t){return e.some((function(e){var n;return null===(n=t.request||t.notification)||void 0===n?void 0:n.method.toLowerCase().includes(e.toLowerCase())}))}))),t}),[R,G,B,S]);return(0,c.useEffect)((function(){return(0,y.uf)([null===n||void 0===n?void 0:n.onRequest((function(e){b&&A({id:e.id,canceled:!1,request:e.data,requestTime:new Date})})),null===n||void 0===n?void 0:n.onResponse((function(e){b&&N(e.id,(function(t){return(0,i.Z)((0,o.Z)((0,i.Z)({},t),{responseTime:new Date}),void 0!==e.result?{response:e.result}:{error:e.error})}))})),null===n||void 0===n?void 0:n.onCancelRequest((function(e){b&&N(e,(function(e){return(0,o.Z)((0,i.Z)({},e),{canceled:!0})}))})),null===n||void 0===n?void 0:n.onDiagnostics((function(e){b&&A({canceled:!1,notification:{method:"textDocument/publishDiagnostics",params:e},requestTime:new Date,type:"diagnostics"})})),null===n||void 0===n?void 0:n.onServerStateChange((function(e){b&&A({canceled:!1,notification:{method:"state",params:{serverState:e}},requestTime:new Date,type:"state"})})),null===n||void 0===n?void 0:n.onServerCapabilitiesChange((function(e){b&&A({canceled:!1,notification:{method:"capabilities",params:{serverCapabilities:e}},requestTime:new Date,type:"capabilities"})})),null===n||void 0===n?void 0:n.onSendNotification((function(e){b&&A({canceled:!1,notification:e,requestTime:new Date})}))])}),[n,A,N,b]),(0,l.BX)(f.G7,{css:[f.l0.flex.column],children:[(0,l.BX)(f.G7,{css:[f.l0.flex.row,f.l0.align.center,f.l0.m(4),f.l0.position.sticky,f.l0.top(0),f.l0.backgroundColor.backgroundDefault,f.l0.zIndex(1)],children:[(0,l.tZ)(f.xv,{children:n?(0,l.BX)(l.HY,{children:[(0,l.tZ)(k,{})," logs for ",(0,l.tZ)("code",{children:t})]}):"No LSP client available"}),(0,l.tZ)(f.hU,{alt:"Probe LSP",onClick:X,children:(0,l.tZ)(g.Eye,{})}),(0,l.tZ)(f.G7,{css:f.l0.flex.grow(1)}),(0,l.tZ)(v.Z,{id:"toggleIsLogging",isOn:b,onChange:w})," "]}),(0,l.BX)(f.G7,{css:[f.l0.rowWithGap(8),f.l0.m(4),f.l0.mb(8)],children:[(0,l.BX)(f.G7,{css:f.l0.rowWithGap(4),children:[(0,l.tZ)(g.Filter,{}),(0,l.tZ)(f.xv,{children:"Show"})]}),(0,l.BX)(f.G7,{css:f.l0.rowWithGap(4),children:[(0,l.tZ)(p.X,{id:r("showNotifications"),checked:G,onChange:D}),(0,l.tZ)("label",{htmlFor:r("showNotifications"),children:" Notifications"})]}),(0,l.BX)(f.G7,{css:f.l0.rowWithGap(4),children:[(0,l.tZ)(p.X,{id:r("showRequests"),checked:B,onChange:U}),(0,l.tZ)("label",{htmlFor:r("showRequests"),children:" Requests"})]}),(0,l.tZ)(f.G7,{css:f.l0.flex.growAndShrink(1)}),(0,l.tZ)(f.G7,{css:f.l0.rowWithGap(4),children:(0,l.tZ)(h.Z,{onClick:L})})]}),(0,l.tZ)(f.G7,{css:f.l0.rowWithGap(4),children:(0,l.tZ)(f.II,{id:r("filterLsp"),placeholder:"Filter by method (Separate by ,)",onChange:function(e){return E(e.target.value)},value:S})}),(0,l.BX)(f.G7,{css:[f.l0.flex.grow(1),f.l0.flex.column,f.l0.overflow("auto")],children:[M.map((function(t){return(0,l.tZ)(x,{log:t},null!==(e=t.id)&&void 0!==e?e:t.requestTime.valueOf())})),!M.length&&(0,l.tZ)(f.G7,{css:f.l0.m(4),children:"\ud83d\ude14 No logs yet..."})]})]})},x=c.memo((function(e){var t,n=e.log,r=n.requestTime,i=n.responseTime,o=n.request,c=n.response,s=n.notification,u=n.id,d=(0,a.Z)((0,Z.Z)(!0),2),h=d[0],p=d[1];return(0,l.BX)(f.G7,{css:[f.l0.my(4),f.l0.mx(4)],children:[(0,l.BX)(f.G7,{role:"button",onClick:p,onKeyDown:p,tabIndex:0,css:[f.l0.flex.row,f.l0.rowWithGap(4),{"&:hover":{cursor:"pointer",".lspLog-requestMethod":{textDecoration:"underline"}}}],children:[(0,l.BX)(f.G7,{css:[f.l0.flex.grow(1),f.l0.rowWithGap(2)],children:[(0,l.tZ)(f.xv,{className:"lspLog-emoji",children:S(n)}),(0,l.BX)(f.xv,{className:"lspLog-requestMethod",children:[(0,l.tZ)("code",{children:null===(t=o||s)||void 0===t?void 0:t.method}),null!=u&&(0,l.BX)("code",{className:"lspLog-logId",css:{opacity:.5},children:["#",u]})]})]}),(0,l.tZ)(f.G7,{css:{opacity:.5},children:null!=i&&(0,l.BX)(f.xv,{css:f.l0.fontSize(13),children:[i.valueOf()-r.valueOf()," ms"]})})]}),!h&&(0,l.BX)(l.HY,{children:[void 0!==o&&(0,l.tZ)(C,{name:"request.params",src:o.params}),void 0!==s&&(0,l.tZ)(C,{name:"notification.params",src:s.params}),void 0!==c&&(0,l.tZ)(C,{name:"response",src:c})]})]})})),C=(0,c.memo)((function(e){var t=e.name,n=e.src;return(0,l.tZ)(f.G7,{css:{marginTop:5,".node-ellipsis":{letterSpacing:-2},".object-key span":{letterSpacing:0},".object-key-val":{paddingBottom:"0 !important"},'.object-key + span[style*="margin"], .array-key + span[style*="margin"]':{marginLeft:"0 !important"},".variable-row, .pushed-content .object-key-val":{paddingLeft:"10px !important",paddingBottom:"0 !important"}},children:(0,l.tZ)(b.C,{json:(0,r.Z)({},t,n)})})})),k=function(){return(0,l.tZ)(f.xv,{css:{display:"inline",fontStyle:"italic",fontWeight:600,textShadow:"".concat(f.TV.redDimmer," 2px 2px")},children:"LSP"})};function S(e){var t=e.type,n=e.canceled,r=e.response,i=e.notification;return"state"===t?(0,l.tZ)(g.Cpu,{}):"diagnostics"===t?(0,l.tZ)(g.Bug,{}):"capabilities"===t?(0,l.tZ)(g.Hamburger,{}):"probe"===t?(0,l.tZ)(g.Eye,{}):n?(0,l.tZ)(g.Close,{}):i?(0,l.tZ)(g.Info,{}):void 0!==r?(0,l.tZ)(g.Check,{}):(0,l.tZ)(m.Z,{})}},85036:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(59496);function i(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,r.useState)(e),n=t[0],i=t[1],o=(0,r.useCallback)((function(){return i((function(e){return!e}))}),[]);return[n,o]}},78575:function(e,t,n){n.d(t,{AA:function(){return k},CH:function(){return Z},Gg:function(){return m},Ne:function(){return E},pV:function(){return x},vk:function(){return b}});var r=n(72006),i=n(43119),o=n(71440),a=n(79794),l=n(53486),c=n(46653);function s(){var e=(0,i.Z)(["\n  fragment AutograderTest on ReplTemplateTest {\n    id\n    name\n    input\n    output\n    name\n    type\n  }\n"]);return s=function(){return e},e}function u(){var e=(0,i.Z)(["\n  query Autograder($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        currentUserPermissions {\n          writeTests\n        }\n        template {\n          id\n        }\n        ioTests {\n          id\n          ...AutograderTest\n        }\n        unitTests {\n          meta {\n            id\n            ...UnitTestsReplUnitTestMeta\n          }\n          tests {\n            id\n            ...UnitTestsReplUnitTest\n            lastRun(replId: $replId) {\n              ... on ReplUnitTestLastRun {\n                status\n              }\n              ... on UserError {\n                message\n              }\n            }\n          }\n        }\n        isProject\n        isProjectFork\n        owner {\n          ... on Team {\n            id\n            isAdmin\n          }\n          ... on User {\n            id\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return u=function(){return e},e}function d(){var e=(0,i.Z)(["\n  mutation SaveIOTestResults(\n    $teamId: Int!\n    $replId: String!\n    $results: [IOTestResultInput!]!\n  ) {\n    saveIOTestResults(teamId: $teamId, replId: $replId, results: $results) {\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n"]);return d=function(){return e},e}function f(){var e=(0,i.Z)(["\n  mutation CreateAutograderTest($input: CreateTemplateTestInput!) {\n    createTemplateTest(input: $input) {\n      ... on ReplTemplateTest {\n        id\n        ...AutograderTest\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}function h(){var e=(0,i.Z)(["\n  mutation UpdateAutograderTest($input: UpdateTemplateTestInput!) {\n    updateTemplateTest(input: $input) {\n      ... on ReplTemplateTest {\n        id\n        ...AutograderTest\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return h=function(){return e},e}function p(){var e=(0,i.Z)(["\n  mutation DeleteAutograderTest($testId: Int!) {\n    deleteTemplateTest(testId: $testId) {\n      ... on ReplTemplate {\n        id\n        tests {\n          id\n          ...AutograderTest\n        }\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return p=function(){return e},e}var v={},m=(0,o.Ps)(s()),g=(0,o.Ps)(u(),m,a.aA,a.Rb);function Z(e){var t=(0,r.Z)({},v,e);return l.a(g,t)}var y=(0,o.Ps)(d());function b(e){var t=(0,r.Z)({},v,e);return c.D(y,t)}var w=(0,o.Ps)(f(),m);function x(e){var t=(0,r.Z)({},v,e);return c.D(w,t)}var C=(0,o.Ps)(h(),m);function k(e){var t=(0,r.Z)({},v,e);return c.D(C,t)}var S=(0,o.Ps)(p(),m);function E(e){var t=(0,r.Z)({},v,e);return c.D(S,t)}},76722:function(e,t,n){n.d(t,{Rz:function(){return m},xy:function(){return Z}});var r=n(57135),i=n(9970),o=n(96583),a=n(94660),l=n(99726),c=n(27628),s=n(58530),u=n(94565),d=n(1540),f=(0,s.Xb)({root:[s.l0.rowWithGap(8),s.l0.align.center,s.l0.flex.growAndShrink(1),s.l0.px(8)],header:[{fontSize:s.TV.fontSizeSmall,opacity:.6},s.l0.color.foregroundDimmest,s.l0.truncate],result:[s.l0.colWithGap(0)],fileName:[s.l0.truncate,s.l0.flex.row]});function h(e){var t=e.height,n=e.active,r=e.match,i=r.directory,o=r.filename;return(0,a.BX)(s.G7,{css:f.root,style:{height:t},children:[(0,a.tZ)(u.Z,{path:o.text,size:16}),(0,a.BX)(s.G7,{css:f.result,children:[i?(0,a.tZ)(s.G7,{css:f.header,children:(0,a.tZ)(c.x,{text:i.text+"/",highlight:i.ranges,dimmed:!n})}):null,(0,a.tZ)(s.G7,{css:f.fileName,children:(0,a.tZ)(c.x,{text:o.text,highlight:o.ranges,dimmed:!n})})]})]})}var p={match:l.kN,forward:!1,tiebreakers:[function(e,t,n){return n(e.item).trim().length-n(t.item).trim().length}]};function v(e){for(var t=(0,i.Z)(e.values()).sort((function(e,t){return e-t})),n=[],r=t[0],o=t[0],a=1;a<t.length;a++)t[a]===o+1?o++:(n.push({from:r,to:o+1}),r=t[a],o=t[a]);return n.push({from:r,to:o+1}),n}function m(e,t){return g.apply(this,arguments)}function g(){return(g=(0,r.Z)((function(e,t){return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return[4,new l.Zn(t,p).find(e)];case 1:return[2,n.sent().map((function(e){return{path:e.item,score:e.score,ranges:v(e.positions)}}))]}}))}))).apply(this,arguments)}function Z(e){var t=e.path,n=e.ranges,r=function(e){var t=e.ranges,n=e.path,r=(0,d.UO)(n),i=(0,d.Il)(n);if(!i)return{filename:{text:r,ranges:t.length?t:void 0}};var o=i.length,a=o+1,l=[],c=[],s=!0,u=!1,f=void 0;try{for(var h,p=t[Symbol.iterator]();!(s=(h=p.next()).done);s=!0){var v=h.value;if(v.from<o){l.push({from:v.from,to:Math.min(v.to,o)});var m=v.to-a;if(m<=0)continue;c.push({from:0,to:m})}else v.from<a||c.push({from:v.from-a,to:v.to-a})}}catch(g){u=!0,f=g}finally{try{s||null==p.return||p.return()}finally{if(u)throw f}}return{filename:{text:r,ranges:c.length?c:void 0},directory:{text:i,ranges:l.length?l:void 0}}}({path:t,ranges:null!==n&&void 0!==n?n:[]}),i=r.directory?44:32;return{height:i,content:(0,a.tZ)(h,{match:r,height:i})}}},36827:function(e,t,n){n.d(t,{i:function(){return Z},w:function(){return v}});var r=n(57135),i=n(2272),o=n(96583),a=n(94660),l=(n(59496),n(2134)),c=n(69735),s=n(89814),u=n(94565),d=n(58530),f=n(85345),h=n(76722),p=n(34670);function v(e){return m.apply(this,arguments)}function m(){return(m=(0,r.Z)((function(e){var t,n,r;return(0,o.__generator)(this,(function(i){switch(i.label){case 0:return t=e.search,n=e.paths,r=e.run,t?[4,(0,h.Rz)(t,n)]:[2,n.map((function(e){return{data:{type:"action",label:e,icon:(0,a.tZ)(u.Z,{path:e}),run:function(){return r(e)}},match:function(){return{score:1,render:(0,h.xy)({path:e})}}}}))];case 1:return[2,i.sent().map((function(e){var t=e.path,n=e.score,i=e.ranges;return{data:{type:"action",label:t,icon:(0,a.tZ)(u.Z,{path:t}),run:function(){return r(t)}},match:function(){return{score:n,render:(0,h.xy)({path:t,ranges:i})}}}}))]}}))}))).apply(this,arguments)}function g(){return(0,a.BX)(d.G7,{css:[d.l0.rowWithGap(8)],children:[(0,a.tZ)(c.Z,{}),(0,a.tZ)(d.xv,{color:"dimmest",children:"Something went wrong searching your Repl's files. Please try again."})]})}function Z(e){return(0,s.fA)({type:"context",label:"Files",description:"Find a file",icon:(0,a.tZ)(l.Z,{}),keyboardShortcut:e.keyboardShortcut?e.keyboardShortcut:void 0},{match:(0,s.zf)({defaultScore:3}),commands:function(){var t=(0,r.Z)((function(t){var n,l,s,d,h,m,Z,y,b,w,x,C,k,S,E,T;return(0,o.__generator)(this,(function(R){switch(R.label){case 0:return n=e.fs,l=e.shouldHideFile,t.search||t.active&&!e.lazyLoad?[4,Promise.resolve(e.getRecentFiles())]:[2,[]];case 1:return s=R.sent(),d=[],t.search||t.active?[4,n.listFiles()]:[3,3];case 2:if((h=R.sent()).error)return[2,[{data:{type:"error",label:h.error,icon:(0,a.tZ)(c.Z,{})},match:function(){return{score:1,render:{content:(0,a.tZ)(g,{})}}}}]];if(!h.files)throw new Error("Expected files");m=!0,Z=!1,y=void 0;try{for(b=h.files[Symbol.iterator]();!(m=(w=b.next()).done);m=!0)x=w.value,l(x)||s.includes(x)||d.push(x)}catch(_){Z=!0,y=_}finally{try{m||null==b.return||b.return()}finally{if(Z)throw y}}R.label=3;case 3:return C=[],[4,Promise.all([v({search:t.search,paths:s,run:function(t){e.openFile({path:t})}}),v({search:t.search,paths:d,run:function(t){e.openFile({path:t})}})])];case 4:return k=i.Z.apply(void 0,[R.sent(),2]),S=k[0],E=k[1],S.length&&C.push({data:{type:"context",label:"Recent",icon:(0,a.tZ)(p.Z,{})},commands:function(){return S}}),E.length&&C.push({data:{type:"group",key:"files"},commands:function(){return E}}),0===E.length&&0===S.length&&t.active&&(T=t.search,C.push({data:{label:T,description:"Create a new file",icon:(0,a.tZ)(u.Z,{path:T}),type:"action",run:(0,r.Z)((function(){return(0,o.__generator)(this,(function(t){switch(t.label){case 0:return[4,n.writeFile(T,f.Z.from(""))];case 1:return t.sent().error?[2,{type:"error",message:'Could not create "'+T+'"'}]:(e.openFile({path:T}),[2])}}))}))},match:function(){return{score:1}}})),[2,C]}}))}));return function(e){return t.apply(this,arguments)}}()})}},29376:function(e,t,n){n.d(t,{F:function(){return D},q:function(){return G}});var r=n(57135),i=n(77637),o=n(2272),a=n(96583),l=n(94660),c=(n(59496),n(38790)),s=n(86763),u=n.n(s),d=n(89814),f=n(12930),h=n(95360),p=n(69735),v=n(9970),m=n(88254),g=n(58979),Z=100,y="signal: broken pipe",b=["exit status 1",y];function w(){return(w=(0,r.Z)((function(e){var t,n,r,i,l,c,s,u,d,f,h,p,w,x,C,k,S,E,T,R,_,I,G,D,P;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return t=e.query,n=e.container,[4,(r=n).exec.apply(r,["ag"].concat((0,v.Z)(g.h.map((function(e){return"--ignore-dir=".concat(e)}))),["--noaffinity","--context=0","--workers=1","--literal","--ackmate","--pager","head -".concat(300),"--",t]))];case 1:if(i=a.sent(),l=i.output,c=i.error,c&&!b.includes(c))return m.Tb(new Error("Search command failed with error: ".concat(c))),[2,{error:c,results:null,isPartialResult:!1}];if(!l)return[2,{error:null,results:{},isPartialResult:!1}];s=l.split("\n"),u={},d="",f=0,h=c===y,p=!0,w=!1,x=void 0;try{for(C=s[Symbol.iterator]();!(p=(k=C.next()).done);p=!0)if(S=k.value)if(S.startsWith(":"))d=S.slice(1),u[d]=[];else{if(f>=Z){h=!0;break}E=S.indexOf(";"),T=parseInt(S.slice(0,E),10),R=S.slice(E+1),_=R.indexOf(":"),I=R.slice(0,_).split(","),G=I.map((function(e){var t=(0,o.Z)(e.split(" "),2),n=t[0],r=t[1];return{column:parseInt(n,10),length:parseInt(r,10)}})),D=R.slice(_+1),P=D.length>151?D.substring(0,149)+"\u2026":D,f++,u[d].push({content:P,lineNumber:T,matches:G})}}catch(B){w=!0,x=B}finally{try{p||null==C.return||C.return()}finally{if(w)throw x}}return[2,{error:null,results:u,isPartialResult:h}]}}))}))).apply(this,arguments)}var x=n(58530),C=n(94565),k=n(95467),S=n(62954),E=(0,x.Xb)({root:[x.l0.colWithGap(4),x.l0.align.start,x.l0.flex.growAndShrink(1),x.l0.p(8)],header:[x.l0.rowWithGap(4)],singleLine:[{whiteSpace:"nowrap",fontFamily:x.TV.fontFamilyCode},x.l0.truncate,x.l0.color.foregroundDimmest]});function T(e){var t=e.path,n=e.line;return(0,l.BX)(x.G7,{css:E.root,children:[(0,l.BX)(x.G7,{css:E.header,children:[(0,l.tZ)(C.Z,{path:t,size:12}),(0,l.BX)(x.xv,{variant:"small",color:"dimmest",children:[t.replace(/^\.\//,""),":",n.lineNumber]})]}),(0,l.tZ)(x.G7,{css:E.singleLine,children:(0,l.tZ)(f.xK,{source:n.content,matches:n.matches})})]})}function R(){return(0,l.BX)(x.G7,{css:[x.l0.rowWithGap(8)],children:[(0,l.tZ)(p.Z,{}),(0,l.tZ)(x.xv,{color:"dimmest",children:"Something went wrong searching your Repl's contents. Please try again."})]})}function _(){return(0,l.BX)(x.G7,{css:[x.l0.rowWithGap(8),x.l0.p(8),x.l0.align.center],children:[(0,l.tZ)(p.Z,{}),(0,l.tZ)(x.xv,{color:"dimmest",children:"Displaying only part of the results, try being more specific with your search."})]})}function I(){return(0,l.tZ)(x.G7,{css:[x.l0.rowWithGap(8),x.l0.p(8),x.l0.align.center],children:(0,l.tZ)(x.xv,{color:"dimmest",children:"Nothing came up searching your Repl's content."})})}var G=(0,k.l2)({cmdOrCtrl:!0,shift:!0,key:"f"});function D(e){var t,n=e.flagSearchReplace,s=void 0!==n&&n,f=(0,i.Z)(e,["flagSearchReplace"]),v=u()((function(e,t,n){(function(e){return w.apply(this,arguments)})(e).then(t).catch(n)}),200),m=(0,S.e)({container:f.container});return(0,d.fA)({type:"context",description:"Search through your files",label:"Search",icon:(0,l.tZ)(h.Z,{}),keyboardShortcut:f.keyboardShortcut?G:void 0},{match:(0,d.zf)({defaultScore:2}),commands:function(){var e=(0,r.Z)((function(e){var n,r,i,u,d,h,g,Z,y,b,w,k;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return e.search?!e.active&&f.activeOnly?[2,[]]:(n=Math.random(),t=n,[4,s?m({query:e.search}):new Promise((function(t,n){v({query:e.search,container:f.container},t,n)}))]):[2,[]];case 1:if(r=a.sent(),i=r.results,u=r.error,d=r.isPartialResult,n!==t)return[2,[]];if(null!==u)return e.active?[2,[{data:{type:"error",label:"error",icon:(0,l.tZ)(p.Z,{})},match:function(){return{score:1,render:{content:(0,l.tZ)(R,{})}}}}]]:[2,[]];h=[],g=!0,Z=!1,y=void 0;try{for(b=function(){var t=(0,o.Z)(k.value,2),n=t[0];t[1].forEach((function(t){var r=t.matches[0].column;h.push({match:function(){var r=c.Z.match(e.search,t.content);return{score:(null===r||void 0===r?void 0:r.score)||1,render:{height:60,content:(0,l.tZ)(T,{path:n,line:t})}}},data:{type:"action",label:n,icon:(0,l.tZ)(C.Z,{path:n}),key:[n,t.lineNumber,r].join(":"),run:function(){f.openFile({path:n,line:t.lineNumber,col:r})}}})}))},w=Object.entries(i)[Symbol.iterator]();!(g=(k=w.next()).done);g=!0)b()}catch(S){Z=!0,y=S}finally{try{g||null==w.return||w.return()}finally{if(Z)throw y}}if(0===h.length&&e.active)return[2,[{data:{type:"output",label:"",icon:(0,l.tZ)(x.G7,{})},match:function(){return{score:1,render:{content:(0,l.tZ)(I,{})}}}}]];if(e.active){if(0===h.length)return[2,[{data:{type:"output",label:"",icon:(0,l.tZ)(x.G7,{})},match:function(){return{score:1,render:{content:(0,l.tZ)(I,{})}}}}]];d&&h.push({data:{type:"error",label:"error",icon:(0,l.tZ)(p.Z,{})},match:function(){return{score:1/0,render:{content:(0,l.tZ)(_,{})}}}})}return[2,h]}}))}));return function(t){return e.apply(this,arguments)}}()})}},15350:function(e,t,n){n.d(t,{Z:function(){return be}});var r=n(57135),i=n(72006),o=n(4405),a=n(2272),l=n(96583),c=n(94660),s=n(59496),u=n(47382),d=n(3655),f=n(31641),h=n(63463),p=n(87666),v=n(43119),m=n(71440),g=n(53486),Z=n(46653);function y(){var e=(0,v.Z)(["\n  query ConfigReplLanguage($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        language\n      }\n    }\n  }\n"]);return y=function(){return e},e}function b(){var e=(0,v.Z)(["\n  mutation ConfigUpdateRepl($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n      }\n    }\n  }\n"]);return b=function(){return e},e}var w={},x=(0,m.Ps)(y());var C=(0,m.Ps)(b());var k=n(56579),S=n(88641),E=n(79460),T=n(7330),R=n(4817),_=n(19666),I=n(75408),G=n(69735),D=n(80053),P=n(79351),B=n(57016),U=n(26303),A=n(51458),N=n(43004),L=n(95360),X=n(38790),M=n(36273);function O(e){var t,n=e.options,r=e.initialSelectedOption,l=e.inputRef,c=e.setInputValue,u=(0,a.Z)(s.useState(""),2),d=u[0],f=u[1],h=(t={options:n,filter:d},s.useMemo((function(){return t.filter?X.Z.filter(t.filter.toLowerCase(),t.options).map((function(e){return e.original})):t.options}),[t.options,t.filter])),p=(0,M.Kb)({items:h,initialHighlightedIndex:0,initialSelectedItem:r,stateReducer:function(e,t){var n,r,a=t.type,s=t.changes;(a===M.Kb.stateChangeTypes.ItemClick||a===M.Kb.stateChangeTypes.InputKeyDownEnter&&s.selectedItem)&&(null===(n=l.current)||void 0===n||n.blur());return a!==M.Kb.stateChangeTypes.InputBlur||s.selectedItem?a===M.Kb.stateChangeTypes.InputBlur&&s.selectedItem?(c(null!==(r=s.selectedItem)&&void 0!==r?r:""),s):s:(0,o.Z)((0,i.Z)({},s),{isOpen:!0})}});return{filteredOptions:h,combobox:p,setFilter:f,filter:d}}var W=n(96843),F=n(72030),j=n(41122),z=n(93987),H=(0,F.iv)([T.l0.py(8),T.l0.pl(8),T.l0.pr(32),{color:"inherit",outline:"0 none",border:"1px solid",fontSize:"inherit",lineHeight:T.TV.space16,display:"block",width:"100%","::placeholder, :disabled":{color:T.TV.foregroundDimmer,borderColor:"transparent"},cursor:"text"}]),V=(0,F.iv)([T.l0.reset.button,R.gU.listItem,T.l0.borderRadius(8),T.l0.center,{width:24,height:24}]),q=_.K.button;function $(e){var t=e.id,n=e.onSelect,r=e.onInit,l=e.options,u=e.initialSelectedOption,d=e.placeholderText,p=e.autoFocus,v=e.disabled,m=s.useRef(null),g=(0,a.Z)(s.useState(null!==u&&void 0!==u?u:""),2),Z=g[0],y=g[1],b=O({options:l,initialSelectedOption:u,inputRef:m,setInputValue:y}),w=b.filteredOptions,x=b.filter,C=b.combobox,k=b.setFilter,S=(0,A.Z)(n),E=(0,A.Z)(r);return s.useEffect((function(){u&&(E.current(u),y(u),k(""))}),[u]),(0,N.Z)((function(){var e;C.selectedItem&&(null===(e=m.current)||void 0===e||e.blur(),S.current(C.selectedItem),y(C.selectedItem),k(""))}),[C.selectedItem,S]),s.useEffect((function(){u&&(C.selectItem(u),y(u),k(""))}),[u]),(0,c.BX)(_.G,{children:[(0,c.tZ)("div",(0,o.Z)((0,i.Z)({},C.getComboboxProps()),{children:(0,c.BX)(_.G,{css:[T.l0.flex.row,{position:"relative"}],children:[(0,c.tZ)(_.G,{css:[T.l0.flex.growAndShrink(1)],children:(0,c.tZ)(f.II,(0,o.Z)((0,i.Z)({},C.getInputProps({id:t,spellCheck:!1,autoFocus:p,onChange:function(e){k(e.currentTarget.value.toLowerCase()),y(e.currentTarget.value)},ref:m,onFocus:function(e){C.openMenu(),e.currentTarget.select()}})),{value:Z,placeholder:null!==u&&void 0!==u?u:d,css:[H],disabled:v,dataCy:"import-config-entrypoint-input"}))}),v?null:(0,c.tZ)(_.G,{css:[{position:"absolute",top:0,right:0,height:"100%"},T.l0.center],children:(0,c.tZ)(q,(0,o.Z)((0,i.Z)({},C.getToggleButtonProps()),{css:V,type:"button",children:C.inputValue&&!C.isOpen?(0,c.tZ)(W.Z,{}):(0,c.tZ)(L.Z,{})}))})]})})),(0,c.BX)("div",(0,o.Z)((0,i.Z)({},C.getMenuProps()),{css:{position:"relative"},children:[C.isOpen&&w.length?(0,c.tZ)(j.Z,{children:(0,c.tZ)("ul",{css:[T.l0.pt(4),T.l0.pb(8)],children:w.map((function(e,t){return(0,c.tZ)("li",(0,o.Z)((0,i.Z)({},C.getItemProps({item:e,index:t})),{children:(0,c.tZ)(z.Z,(0,o.Z)((0,i.Z)({},Y(e)),{filter:x,selected:C.selectedItem===e,highlighted:C.highlightedIndex===t}))}),e.toLowerCase())}))})}):null,x&&!w.length&&C.isOpen?(0,c.tZ)(j.Z,{children:(0,c.tZ)(_.G,{css:[T.l0.p(16),T.l0.colWithGap(4)],children:(0,c.BX)(h.xv,{color:"dimmer",children:['No results for "',x,'"']})})}):null]}))]})}function Y(e){return{title:e,key:e.toLowerCase()}}var K,Q=n(74840),J=n(1540);!function(e){e.Unknown="UNKNOWN",e.Npm="NPM",e.Django="DJANGO",e.Rails="RAILS",e.DotNet="DOTNET",e.Cargo="CARGO",e.Make="MAKE",e.RegularRun="REGULAR_RUN"}(K||(K={}));var ee=new RegExp("((index)|(main)|(app)|(run)|(start)|(server))\\..+","i"),te=new RegExp("((node_modules)|(venv)|(bower_components)|(vendor)|(build)|(dist)|(target)|(\\.git)|(\\.vscode)|(\\.idea)).+$","i");function ne(e){var t=e.initRunCommand,n=e.isCompiled,r=e.allFiles,i=new Set(r);return i.has("Makefile")||i.has("makefile")?K.Make:i.has("package.json")?K.Npm:i.has("Cargo.toml")?K.Cargo:n?K.Unknown:i.has("config/application.rb")?K.Rails:function(e,t){return e.some((function(e){return(0,J.r6)(e)===t}))}(r,"csproj")?K.DotNet:i.has("manage.py")?K.Django:ee.test(t)?K.RegularRun:K.Unknown}function re(e,t){var n=t.initRunCommand,r=t.allFiles;switch(e){case K.Npm:return"npm run start";case K.RegularRun:var i=function(e){var t;return null!==(t=e.filter((function(e){return!te.test(e)})).find((function(e){return ee.test(e)})))&&void 0!==t?t:null}(r);return null==i?null:n.replace(ee,i);case K.Django:return"python3 manage.py runserver 0.0.0.0:3000";case K.Rails:return"bundle exec rails server --binding=0.0.0.0";case K.DotNet:return"dotnet run";case K.Cargo:return"cargo run";case K.Make:case K.Unknown:default:return null}}function ie(e){switch(e){case K.Make:return"make";case K.Cargo:case K.DotNet:case K.Npm:return"";default:return null}}function oe(e,t,n){if(0===n.length)return{projType:K.Unknown,runCommand:null,compileCommand:null};var r={initRunCommand:e,isCompiled:t,allFiles:n},i=ne(r);return{projType:i,runCommand:re(i,r),compileCommand:ie(i)}}var ae=n(10063),le=n(36464),ce=n(43759),se=n(82438);var ue=n(5208),de=n(54129),fe=n(78385),he=n(17724),pe=n(94868),ve=n(24880);function me(e){var t=e.children;return(0,c.BX)(Q.T,{background:"default",css:[T.l0.borderRadius(8),{width:"100%",height:"calc(100% - var(--space-2))",backgroundColor:"var(--background-default)",overflowY:"auto",marginTop:"0px"}],children:[(0,c.tZ)(_.G,{children:(0,c.tZ)(h.xv,{variant:"subheadDefault",css:[T.l0.color.foregroundDimmest,T.l0.pl(16),T.l0.pt(16)],children:".replit"})}),(0,c.tZ)(_.G,{css:[T.l0.p(16),T.l0.justify.center,T.l0.align.center,{flex:"1 1 auto"}],children:t})]})}function ge(e){var t,n=Boolean(e.hasInterpreter),d=e.initialRun,v=null!==(t=e.initialCompile)&&void 0!==t?t:"",m=e.isFrameworkRecommended,g=!!e.projType&&e.projType===K.Rails,Z=e.isApplyingConfig,y=(0,a.Z)(s.useState("Unknown"===u.Z.get(e.initialLanguage).displayName?"bash":e.initialLanguage),2),b=y[0],w=(y[1],(0,I.Y)(e.initialRun,(function(e){if(!e)return{message:"Add a run command"}}))),x=(0,a.Z)(s.useState(e.initialCompile),2),C=x[0],P=x[1];s.useEffect((function(){w.setValue(d)}),[d]),s.useEffect((function(){P(null!==v&&void 0!==v?v:"")}),[v]);var A=(0,I.Y)("",(function(e){if(!e)return{message:"Choose an entry point file"}})),N=(0,a.Z)(s.useState(Boolean(n&&!m)),2),L=N[0],X=N[1];s.useEffect((function(){X(Boolean(n&&!m))}),[n,m]);var M=_.K.a,O=(0,a.Z)(s.useState([]),2),W=O[0],F=O[1],j=(0,U.Z)(),z=function(){var e=(0,k.Z)().fs,t=(0,ue.W)(),n=(0,U.Z)(),i=(0,a.Z)(s.useState(null),2),o=i[0],c=i[1];return s.useEffect((function(){var i=function(){var i=(0,r.Z)((function(){var r,i,o,a;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return t?[4,e.listFiles()]:[2];case 1:return r=l.sent(),n.current?r.error||!r.files?(c([]),[2]):[4,e.readFile(D.l)]:[2];case 2:return i=l.sent(),o=r.files,a=fe.uP.concat(fe.nh),c(o.filter((function(e){return(i.error===de.Df.NotFound||!t.some((function(t){return function(e){var t=e.split("/");if(1===t.length)return t;for(var n=[],r=0;r<t.length;r++)n.push(t.slice(0,r+1).join("/"));return n}(e).some((function(e){return null!=e.match(t)}))})))&&!a.includes(e)}))),[2]}}))}));return function(){return i.apply(this,arguments)}}();i()}),[t,e,n]),o}();return s.useEffect((function(){z&&j.current&&F(z)}),[j,z]),(0,c.BX)("form",{onSubmit:function(t){t.preventDefault(),e.setIsApplyingConfig(!0),w.value||L?e.onSubmit({run:w.value,compile:null!==C&&void 0!==C?C:"",entry:A.value,deleteInterp:!L,onDone:e.closeConfigPane,runChanged:w.value!==d,compileChanged:C!==v,projType:e.projType}):w.validate()},css:[T.l0.maxWidth(400),{width:"100%"}],children:[(0,c.BX)(_.G,{css:[T.l0.colWithGap(8)],children:[e.hasProcfile?(0,c.tZ)(_.G,{css:[T.l0.colWithGap(8)],children:(0,c.BX)(h.xv,{variant:"small",multiline:!0,css:[T.l0.mb(24)],children:["Looks like you came from Heroku!",(0,c.tZ)(M,{target:"_blank",href:"https://docs.replit.com/tutorials/import-heroku",rel:"noopener noreferrer",children:"Read more about Replit and Heroku here."})]})}):null,n?(0,c.tZ)(_.G,{css:[T.l0.pb(16)],children:(0,c.BX)(B.hE,{disabled:Z,name:"interpreterView",value:L.toString(),row:!0,onChange:function(){return X((function(e){return!e}))},stretch:!0,primary:!0,children:[(0,c.tZ)(B.rK,{id:"interpreterFalse",value:"false",text:"Use run command"}),(0,c.tZ)(B.rK,{id:"interpreterTrue",value:"true",text:"Use default interpreter"})]})}):null,(0,c.BX)(_.G,{css:[T.l0.height(e.initialCompile?210:170),T.l0.colWithGap(8)],children:[L?null:(0,c.BX)(_.G,{css:[T.l0.maxWidth(400),T.l0.colWithGap(8)],children:[e.initialCompile?(0,c.BX)(_.G,{css:[T.l0.colWithGap(4)],children:[(0,c.tZ)("label",{htmlFor:"compile-sel",children:"Configure the Compile Command"}),(0,c.tZ)(h.xv,{multiline:!0,variant:"small",color:"dimmest",children:"This is optional, and is executed before your run command."}),(0,c.tZ)(f.II,{disabled:Z,id:"compile-sel",type:"text",value:C,placeholder:"Enter a command to compile the program",onChange:function(e){P(e.currentTarget.value)},css:{"&:disabled":{color:T.TV.foregroundDimmer}}})]}):null,(0,c.tZ)("label",{htmlFor:"run-sel",css:[T.l0.mt(4)],children:"Configure the Run Command"}),(0,c.tZ)(f.II,{disabled:Z,id:"run-sel",type:"text",value:w.value,placeholder:"Enter a command to run the program",onChange:function(e){w.setValue(e.currentTarget.value)},css:[{"&:disabled":{color:T.TV.foregroundDimmer,cursor:"auto"},cursor:"text"}]}),g?(0,c.BX)(h.xv,{multiline:!0,variant:"small",color:"dimmest",children:["We detected this is a Rails project. You will need",(0,c.BX)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://docs.replit.com/misc/rails-on-replit",children:[" ","additional changes"," "]}),"to your config files to use all of Replit\u2019s features."]}):null,w.error||!w.value?(0,c.BX)(_.G,{css:[T.l0.color.accentNegativeDefault,T.l0.rowWithGap(4),T.l0.align.center],children:[(0,c.tZ)(G.Z,{size:12}),(0,c.tZ)(_.G,{children:w.error?w.error.message:"Add a run command"})]}):null]}),L?(0,c.BX)(_.G,{css:[{maxWidth:400},T.l0.colWithGap(8)],children:[(0,c.tZ)("label",{htmlFor:"entry-sel","data-cy":"import-config-entrypoint",children:"Configure entry point"}),(0,c.tZ)(h.xv,{variant:"small",css:[T.l0.color.foregroundDimmest],multiline:!0,children:"The entry point is the file that\u2019s run by default and shown first."}),0!==W.length?(0,c.tZ)($,(0,o.Z)((0,i.Z)({id:"config-selector",onSelect:A.setValue,onInit:A.setValue,options:W},W.length&&Boolean(z)&&{initialSelectedOption:W[0]}),{disabled:Z})):(0,c.tZ)(f.II,{disabled:Z,id:"entry-sel",type:"text",value:A.value,placeholder:"Choose entry point file",onChange:function(e){A.setValue(e.currentTarget.value)},css:[R.gU.filled,{cursor:"text"}]}),A.error?(0,c.BX)(_.G,{css:[{color:"var(--accent-negative-default)"},T.l0.rowWithGap(4),T.l0.align.center],children:[(0,c.tZ)(G.Z,{size:12}),(0,c.tZ)(_.G,{children:A.error.message})]}):null]}):null,(0,c.tZ)(M,{css:[T.l0.color.accentPrimaryStronger,{fontWeight:T.TV.fontWeightMedium}],target:"_blank",href:"https://docs.replit.com/programming-ide/running-github-repositories-replit",rel:"noopener noreferrer",children:"Not sure what to do?"}),(0,c.tZ)(_.G,{css:[T.l0.flex.row,T.l0.pt(16)],children:(0,c.tZ)(p.zx,{colorway:"primary",outlined:!0,type:"submit",text:Z?"Saving...":"Done",disabled:Z||!L&&(Boolean(w.error)||!w.value),css:[R.gU.filledAndOutlined,{fontWeight:T.TV.fontWeightMedium,color:T.TV.accentPrimaryStronger}],dataCy:"import-config-done"})})]})]}),(0,c.tZ)(S.Z,{isOpen:!1,preventClose:!0,onRequestClose:function(){},children:(0,c.tZ)(_.G,{css:[T.l0.borderRadius(16),T.l0.p(32),{backgroundColor:"var(--background-default)"}],children:(0,c.BX)(E.gC,{align:"center",spacing:1,children:[(0,c.tZ)(ve.Z,{size:32}),(0,c.BX)(h.xv,{children:["Upgrading to ",u.Z.get(b).displayName]})]})})})]})}function Ze(){return(0,c.BX)(_.G,{children:[(0,c.tZ)(_.G,{children:".replit looks a lil messed up :/"}),(0,c.tZ)("a",{css:[T.l0.pt(8),{fontSize:T.TV.fontSizeSmall}],target:"_blank",href:"https://docs.replit.com/programming-ide/configuring-repl",children:"View docs"})]})}function ye(){return(0,c.tZ)(_.G,{children:(0,c.BX)("p",{children:["Initializing run configuration",(0,c.tZ)(d.Z,{style:{color:"var(--foreground-default)"}})]})})}var be=function(e){var t,n=(0,P.Z)(),o=(0,k.Z)(),u=o.fs,d=o.dotReplit,f=(0,a.Z)(function(e){var t=(0,i.Z)({},w,e);return Z.D(C,t)}(),1)[0],h=(0,U.Z)(),p=function(e){var t=(0,i.Z)({},w,e);return g.a(x,t)}({variables:{replId:n}}),v="Repl"===(null===(t=p.data)||void 0===t?void 0:t.repl.__typename)?p.data.repl:null,m=e.useReadFile(u,D.l),y=(0,a.Z)(s.useState(!1),2),b=y[0],S=y[1],E=(0,a.Z)(s.useState(!1),2),T=E[0],R=E[1],_=m&&!m.error?m.content.toString("utf8"):"",I=(0,a.Z)(s.useState(""),2),G=I[0],B=I[1],A=(0,a.Z)(s.useState(""),2),N=A[0],L=A[1],X=(0,a.Z)(s.useState(!1),2),M=X[0],O=X[1],W=(0,a.Z)(s.useState(K.Unknown),2),F=W[0],j=W[1],z=(0,a.Z)(s.useState(!1),2),H=z[0],V=z[1];s.useEffect((function(){function e(){return e=(0,r.Z)((function(){var e,t,n,r,i,o,a,c,s,f,p,v,m,g,Z,y;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return[4,d.getConfig()];case 1:return e=l.sent(),t=e.config,e.error?[2]:(r=(0,he.m)(null!==(n=t.run)&&void 0!==n?n:void 0),o=(0,he.m)(null!==(i=t.compile)&&void 0!==i?i:void 0),a=Boolean(t.compile),c=Boolean(t.interpreter),[4,u.listFiles()]);case 2:return s=l.sent(),h.current?(null!=s.error||null==s.files||0===s.files.length||(f=s.files,p=oe(r,a,f),v=p.projType,m=p.runCommand,g=p.compileCommand,Z=b?null!==r&&void 0!==r?r:m:null!==m&&void 0!==m?m:r,y=null!==g&&void 0!==g?g:o,S(f.includes(pe.E)),B(Z),L(y),O(v!==K.Unknown&&v!==K.RegularRun),j(v),V(c)),[2]):[2]}}))})),e.apply(this,arguments)}_&&function(){e.apply(this,arguments)}()}),[_,h]),s.useEffect((function(){(0,ae.j)(ae.U3.NIX_GH_IMPORT_USED,{action:le.D.ImportEnded,replId:n})}),[n]);var q=(0,ce.Z)();s.useEffect((function(){q(!1)}),[]);var $=function(){var e=(0,r.Z)((function(e){var t,r,i,o,a,c,s,h,p,v;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return t=e.run,r=e.compile,i=e.entry,o=e.deleteInterp,a=e.onDone,c=e.runChanged,s=e.compileChanged,h=e.projType,(0,ae.j)(ae.U3.NIX_GH_IMPORT_USED,{action:le.D.ConfigDone,interpUsed:!o,isCompiled:""!==r,runChanged:c,compileChanged:s,projType:h,replId:n}),p=function(e,t,n,r){var i=[];return r?(i.push((0,se.xz)("interpreter")),i.push((0,se.xz)("entrypoint")),i.push((0,se.KQ)(e)),n?i.push((0,se.D3)(n)):i.push((0,se.xz)("compile"))):(i.push((0,se.xz)("run")),i.push((0,se.If)(t))),i}(t,i,r,o),v=f({variables:{input:{id:n}}}),[4,d.updateDotReplit(p)];case 1:return l.sent(),u.flush().then((function(){u.persist({skipDebounce:!0})})),[4,v];case 2:return l.sent(),a(),[2]}}))}));return function(t){return e.apply(this,arguments)}}();return v&&m?(null===m||void 0===m?void 0:m.error)?(0,c.tZ)(me,{children:(0,c.tZ)(Ze,{})}):(0,c.tZ)(me,{children:(0,c.tZ)(ge,{initialLanguage:"",initialRun:G,initialCompile:N,hasInterpreter:H,fs:u,hasProcfile:b,isApplyingConfig:T,setIsApplyingConfig:R,onSubmit:$,isFrameworkRecommended:M,projType:F,closeConfigPane:e.closeConfigPane})}):(0,c.tZ)(me,{children:(0,c.tZ)(ye,{})})}},52248:function(e,t,n){var r=n(94660),i=n(59496),o=n(19666),a=n(42218),l=n(58530),c=n(48396),s=n(63463),u=function(e){var t=e.reason;return(0,r.BX)(o.G,{css:[l.l0.center,l.l0.minWidth(225),l.l0.height(225),l.l0.p(16),l.l0.color.foregroundDefault,l.l0.borderRadius(8),l.l0.backgroundColor.backgroundOverlay,l.l0.zIndex(5e5),{cursor:"not-allowed"}],children:[(0,r.tZ)(c.Z,{height:80}),(0,r.BX)(s.xv,{variant:"subheadBig",css:[l.l0.mt(32)],dataCy:"import-loading-spinner",children:[t,"..."]})]})};function d(){return(0,r.tZ)(a.Z,{children:(0,r.tZ)(o.G,{css:[l.l0.position.fixed,l.l0.flex.row,l.l0.align.center,l.l0.justify.center,l.l0.backgroundColor.backgroundOverlay,{top:0,bottom:0,left:0,right:0,zIndex:5e5,cursor:"not-allowed"}],children:(0,r.tZ)(u,{reason:"Importing"})})})}t.Z=(0,i.memo)(d)},6827:function(e,t,n){n.d(t,{O:function(){return r}});var r,i=n(77637),o=n(94660),a=n(58530);!function(e){e.SUCCESS="SUCCESS",e.WARNING="WARNING",e.FAILED="FAILED",e.OFF="OFF"}(r||(r={}));var l=(0,a.Xb)({root:[a.l0.rowWithGap(8),a.l0.align.center,a.l0.py(4)],circle:[a.l0.width(8),a.l0.height(8),a.l0.borderRadius("full")]});t.Z=function(e){var t,n,c,s=e.display,u=void 0===s?"inline":s,d=(0,i.Z)(e,["display"]);switch(d.status){case r.SUCCESS:t=a.TV.accentPositiveStronger,n=a.TV.accentPositiveStronger;break;case r.WARNING:t=a.TV.yellowStronger,n=a.TV.yellowStronger;break;case r.FAILED:t=a.TV.accentNegativeStronger,n=a.TV.accentNegativeStronger;break;case r.OFF:t=a.TV.greyStronger,n=a.TV.greyStronger}var f=(0,o.BX)(a.G7,{onClick:null!==(c=d.onClick)&&void 0!==c?c:function(){},css:[l.root,d.onClick?{cursor:"pointer"}:{}],children:[(0,o.tZ)("div",{css:l.circle,style:{backgroundColor:t,boxShadow:"0px 0px 6px ".concat(n)}}),"inline"===u?(0,o.tZ)(a.xv,{color:"dimmer",children:d.content}):null]});return"tooltip"===u&&(f=(0,o.tZ)(a.u,{tooltip:d.content,children:f})),f}},54922:function(e,t,n){n.d(t,{Q:function(){return o}});var r=n(94660),i=n(59496);function o(e){var t=e.uploadFiles,n=e.fileUploadInputRef,o=e.dirUploadInputRef,a=(0,i.useRef)(Math.random().toString(36));return(0,r.BX)(r.HY,{children:[(0,r.tZ)("input",{style:{display:"none"},ref:n,id:"file-upload-input-".concat(a.current),type:"file",onChange:function(e){var n=e.target.files;n&&t({files:Array.from(n)})},onClick:function(e){e.currentTarget.value=""},multiple:!0,accept:"*"}),(0,r.tZ)("input",{style:{display:"none"},ref:o,id:"dir-upload-input-".concat(a.current),type:"file",onChange:function(e){var n=e.target.files;n&&t({files:Array.from(n)})},onClick:function(e){e.currentTarget.value=""},webkitdirectory:"true",mozdirectory:"true",msdirectory:"true",odirectory:"true",directory:"true",accept:"*"})]})}},70508:function(e,t,n){n.d(t,{N:function(){return i},Z:function(){return o}});var r=n(59496);function i(){if("undefined"===typeof document)return!1;var e=document.createElement("input");return"webkitdirectory"in e||"mozdirectory"in e||"msdirectory"in e||"odirectory"in e||"directory"in e}function o(){return(0,r.useMemo)((function(){return i()}),[])}},5295:function(e,t,n){n.d(t,{z:function(){return f}});var r=n(79351),i=n(59496),o=n(72006),a=n(43119),l=n(71440),c=n(53486);function s(){var e=(0,a.Z)(["\n  query FiletreeDownloadZip($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        url\n      }\n    }\n  }\n"]);return s=function(){return e},e}var u={},d=(0,l.Ps)(s());function f(){var e=function(e){var t=(0,o.Z)({},u,e);return c.a(d,t)}({variables:{replId:(0,r.Z)()}}).data,t="Repl"===(null===e||void 0===e?void 0:e.repl.__typename)?e.repl:void 0,n=t?t.url:void 0;return(0,i.useCallback)((function(){var e=(n||window.location.pathname)+".zip";window.open(e,"_blank")}),[n])}},58825:function(e,t,n){n.d(t,{Z:function(){return Ce}});var r,i=n(57135),o=n(2272),a=n(96583),l=n(94660),c=n(59496),s=n(54129),u=n(54829),d=n(56579),f=n(1665),h=n(3823),p=n(76997),v=n(9970),m=n(85345),g=n(99459),Z=n(84860);function y(){return y=(0,i.Z)((function(e){var t,n,o,l,c,s,u,d,f,h,p,y;return(0,a.__generator)(this,(function(b){switch(b.label){case 0:return t=e.parentPath,n=e.overwrite,o=e.fs,l=e.files,c=e.shouldUseFileTransferAPI,s=e.onStart,u=e.onUpload,d=e.onError,f=e.onDone,h=function(){var e=(0,i.Z)((function(e){var t,i,l,s,f,h,p;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return t=e.targetPath,i=e.file,l=e.progress,n?[3,2]:[4,o.stat(t)];case 1:if(a.sent().exists)return s={file:i,path:t,error:r.AlreadyExists},d(s),[2,s];a.label=2;case 2:f=null,a.label=3;case 3:return a.trys.push([3,5,,6]),[4,(0,Z.pV)(i)];case 4:return f=a.sent(),[3,6];case 5:return a.sent(),h={file:i,path:t,error:r.FileRead},d(h),[2,h];case 6:return p=m.Z.from(f),c?[4,o.transferFile(t,p,(function(e,t){l.current=t/e}))]:[3,8];case 7:return a.sent(),[3,10];case 8:return[4,o.writeFile(t,p)];case 9:a.sent(),a.label=10;case 10:return u({file:i,path:t}),[2,{path:t,file:i}]}}))}));return function(t){return e.apply(this,arguments)}}(),p=l.map((function(e){var n=e.path||e.webkitRelativePath||e.name;return{targetPath:t?t+"/"+n:n,progress:(0,g.u)(0),file:e}})),s(p),[4,Promise.all(p.map(h))];case 1:return y=b.sent(),f({parentPath:t,uploads:y.filter((function(e){return!("error"in e)})),errors:y.reduce((function(e,t){return"error"in t?(0,v.Z)(e).concat([t]):e}),[])}),[2]}}))})),y.apply(this,arguments)}function b(e){var t=e.fs,n=e.onDone,r=(0,o.Z)(c.useState([]),2),i=r[0],a=r[1],l=c.useRef(n);c.useEffect((function(){l.current=n}),[n]);var s=c.useCallback((function(e){var n=e.parentPath,r=e.files;!function(e){y.apply(this,arguments)}({overwrite:e.overwrite,parentPath:n,files:r.filter(Boolean),fs:t,shouldUseFileTransferAPI:!0,onStart:function(e){return a((function(t){return(0,v.Z)(t).concat((0,v.Z)(e))}))},onUpload:function(e){a((function(t){return t.filter((function(t){return t.targetPath!==e.path}))}))},onError:function(e){a((function(t){return t.filter((function(t){return t.targetPath!==e.path}))}))},onDone:function(e){l.current&&l.current(e)}})}),[t,a]);return{uploadFiles:s,pendingUploads:i}}!function(e){e.AlreadyExists="ALREADY_EXIST",e.FileRead="FILE_READ",e.Network="NETWORK"}(r||(r={}));var w=n(40795),x=n(64050),C=n(42615),k=n(79351),S=n(29501),E=n(22488),T=n(38649),R=n(54703),_=n(92398),I=n(70508),G=n(54922);function D(e){var t=e.onDownloadZip,n=e.readOnly,r=void 0!==n&&n,i=(0,S.y)().uploadFiles,o=c.useRef(null),a=c.useRef(null),u=(0,C.Z)(),f=(0,_.BN)(),h=(0,k.Z)(),p=(0,d.Z)().session,v=(0,R.useRouter)(),m=c.useMemo((function(){if("undefined"===typeof document)return[];if(r)return[u?x.st.HideHiddenFiles:x.st.ShowHiddenFiles];var e=(0,I.N)(),t=[x.st.UploadFile];return(0,E.isMobile)()||t.push(x.st.OpenPane),e&&!(0,E.isMobile)({tablet:!1})&&t.push(x.st.UploadFolder),(0,T.Vg)(v)||t.push(x.st.DownloadZip),t.push(u?x.st.HideHiddenFiles:x.st.ShowHiddenFiles),t}),[u,r,v]);return(0,l.BX)(l.HY,{children:[(0,l.tZ)(G.Q,{fileUploadInputRef:o,dirUploadInputRef:a,uploadFiles:i}),(0,l.tZ)(x.ZP,{actions:m,onAction:function(e){switch(e.type){case x.st.OpenPane.type:return void f({pane:{type:"commands",data:{autoFocus:!0}},edge:"left"});case x.st.UploadFile.type:if(!o.current)return;return o.current.click(),void(0,w.Z)({replId:h,action:"uploaded",fileType:s.Tv.File});case x.st.UploadFolder.type:if(!a.current)return;return a.current.click(),void(0,w.Z)({replId:h,action:"uploaded",fileType:s.Tv.Directory});case x.st.DownloadZip.type:return t(),void(0,w.Z)({replId:h,action:"zipDownloaded"});case x.st.ShowHiddenFiles.type:return void p.setAreHiddenFilesVisible(!0);case x.st.HideHiddenFiles.type:p.setAreHiddenFilesVisible(!1)}}})]})}var P=n(23794),B=n(22708),U=n(1540),A=n(58530),N=n(58868);function L(e){var t,n=e.paths,r=e.onCancel,i=e.onConfirm;return(0,l.BX)(A.G7,{css:[A.l0.colWithGap(24)],children:[(0,l.tZ)(A.h4,{level:1,variant:"headerDefault",children:n.length>1?"Overwrite files?":"Overwrite file?"}),(0,l.BX)(A.xv,{multiline:!0,children:[(t=n,(t=t.map(U.UO)).length<2?t[0]:"".concat(t.slice(0,-1).join(", ")," and ").concat(t.slice(-1)))," already"," ",n.length>1?"exist":"exists"," in the destination, are you sure you want to overwrite ",n.length>1?"them":"it","? This cannot be undone."]}),(0,l.BX)(A.G7,{css:[A.l0.rowWithGap(12),A.l0.justify.end],children:[(0,l.tZ)(A.zx,{onClick:function(){return r()},text:"Cancel"}),(0,l.tZ)(A.zx,{colorway:"negative",onClick:function(){return i()},text:"Yes, overwrite ".concat(n.length>1?"these files":"this file"),iconLeft:(0,l.tZ)(N.RefreshCcw,{})})]})]})}var X=n(99340),M=n(62687),O=n(66845),W=n(89198),F=/\(copy\)( \d+)?$/,j=/\d+$/;var z=n(56501),H=n(99247),V=n(80460),q=function(e){var t=e.filetreeApi,n=e.fileOpeners;return(0,z.S)(t),(0,H.xj)(n),(0,V.Yc)(),null},$=n(5295),Y=n(80772),K=n(5109),Q=n(32992),J=n(12492),ee=n(33555),te=function(){var e=(0,Q.lV)((0,c.useCallback)((function(e,t){t(J.tO,[])}),[]),ee.l),t=(0,Q.lV)((0,c.useCallback)(function(){var e=(0,i.Z)((function(e,t){var n;return(0,a.__generator)(this,(function(r){return n=e(J.tO),t(J._7,n),t(J.tO,[]),[2]}))}));return function(t,n){return e.apply(this,arguments)}}(),[]),ee.l),n=(0,K.Dv)(J.tO,ee.l),r=(0,K.Dv)(J.Fe,ee.l),o=(0,K.Dv)(J.zA,ee.l);return(0,l.tZ)(B.u,{isOpen:Boolean(n.length>0),onRequestClose:e,children:n.length>0?(0,l.tZ)(Y.Z,{name:n.length>1?o:r,description:r,confirmDescription:o,hideModal:e,delete:t}):null})},ne=n(34819),re=n(12963),ie=function(){var e=(0,o.Z)((0,K.KO)(re.oV,ee.l),2),t=e[0],n=e[1],r=(0,K.b9)(re.nx,ee.l),s=c.useCallback((function(){n([]),r([])}),[n,r]),u=(0,Q.lV)(c.useCallback(function(){var e=(0,i.Z)((function(e,n){var r;return(0,a.__generator)(this,(function(i){switch(i.label){case 0:if(0===(r=e(re.nx)).length)return[2];i.label=1;case 1:return i.trys.push([1,,3,4]),[4,n(re.GC,{moveOps:r,dstConflicts:t})];case 2:return i.sent(),[3,4];case 3:return n(re.oV,[]),n(re.nx,[]),[7];case 4:return[2]}}))}));return function(t,n){return e.apply(this,arguments)}}(),[t]),ee.l);return(0,l.tZ)(B.u,{isOpen:t.length>0,onRequestClose:s,children:t.length>0?(0,l.tZ)(L,{paths:t.map((function(e){return e.path})),onCancel:s,onConfirm:u}):null})},oe=n(17482),ae=n(72030),le=n(39343),ce=n(99295),se=n(19666),ue=n(456),de=n(11427),fe=se.K.div,he={position:"fixed",pointerEvents:"none",zIndex:_.MI.filetreeDragLayer,left:0,top:0,width:"100%",height:"100%"},pe=Math.floor(16),ve=[A.l0.display.flex,A.l0.flex.row,A.l0.align.center,A.l0.overflow("hidden"),A.l0.flex.grow(1),A.l0.width(160)],me=(0,ae.iv)((0,v.Z)(ve).concat([{opacity:.75,zIndex:1}])),ge=(0,ae.iv)([[{transform:"rotate(1deg) translate(-4px, -4px)",opacity:.5},A.l0.position.absolute]]),Ze=(0,ae.iv)([(0,v.Z)(ve).concat([{opacity:0}])]),ye=function(){var e=(0,ue.u)();if(!e.display)return null;var t=e.item,n=e.monitor.getClientOffset();if(!n)return null;if("dirContent"in t)return null;var r=n.x,i=n.y,o={transform:"translate(".concat(r,"px, ").concat(i-pe,"px)")},a=t.nodes.length,c=t.previewNode,s=c.path,u=c.type,d=(0,U.UO)(s);return(0,l.tZ)(fe,{css:[o,A.l0.position.relative,A.l0.width(160)],children:(0,l.BX)(fe,{css:[{transform:"scale(".concat(.9,")")},A.l0.position.absolute,A.l0.left("-".concat("40%")),A.l0.shadow(3),A.l0.borderRadius(8)],children:[(0,l.tZ)(ce.ZP,{active:!0,selected:!0,children:(0,l.BX)(fe,{css:me,children:[(0,l.tZ)(ce.qh,{type:u,path:s,active:!0}),(0,l.tZ)(ce.tJ,{title:d,children:d})]})}),a>1?(0,l.tZ)(fe,{css:ge,children:(0,l.tZ)(ce.ZP,{active:!0,selected:!0,children:(0,l.BX)(fe,{css:Ze,children:[(0,l.tZ)(ce.qh,{type:u,path:s,active:!0}),(0,l.tZ)(ce.tJ,{title:d,children:d})]})})}):null,a>1?(0,l.tZ)(A.DR,{text:String(a),css:[A.l0.backgroundColor.accentPrimaryDimmest,A.l0.color.accentPrimaryStrongest,A.l0.fontWeight.medium,A.l0.position.absolute,A.l0.left("40%"),A.l0.top("calc(100% - 4px)")]}):null]})})},be=function(){var e=(0,le.f)((function(e){return{item:e.getItem(),itemType:e.getItemType(),isDragging:e.isDragging()}})),t=e.isDragging,n=e.itemType,r=n===s.Tv.File||n===s.Tv.Directory;return t&&r?(0,l.BX)("div",{style:he,children:[(0,l.tZ)(ye,{}),(0,l.tZ)(de.a,{cursor:"grabbing"})]}):null},we=n(51954),xe=c.forwardRef((function(e,t){return(0,l.tZ)(z.D,{children:(0,l.BX)(l.HY,{children:[(0,l.tZ)(q,{filetreeApi:e.filetreeApi,fileOpeners:e.fileOpeners||[]}),(0,l.tZ)(Se,{ref:t,readOnly:e.readOnly,showResources:e.showResources,showHeader:e.showHeader})]})})}));xe.displayName="FiletreeWithJotaiProvider";var Ce=xe,ke=c.forwardRef((function(e,t){var n=e.readOnly,v=void 0!==n&&n,m=e.showResources,g=void 0===m||m,Z=e.showHeader,y=void 0===Z||Z,w=(0,X.Z)().showError,x=(0,d.Z)().fs,C=(0,$.z)(),k=(0,ne.Hl)(),T=(0,o.Z)(c.useState(null),2),R=T[0],_=T[1],I=b({onDone:function(e){var t=e.parentPath,n=e.errors;if(n.length){var i=n.filter((function(e){return e.error===r.AlreadyExists}));i.length&&_({parentPath:t,errors:i});var o=n.filter((function(e){return e.error!==r.AlreadyExists}));o.length&&(we.kg.error("Error uploading files",{uploadSource:"filetree",parentPath:t,errors:o.map((function(e){var t=e.path,n=e.error;return"".concat(t,": ").concat(n,"}")})).join("\n")}),w("There was an error uploading: ".concat(o.map((function(e){return e.path})).join(", "))))}else we.kg.info("Successfully uploaded files",{uploadSource:"filetree",parentPath:t})},fs:x}),G=I.uploadFiles,N=I.pendingUploads,z=(0,oe.D3)();return c.useImperativeHandle(t,(function(){return{uploadFiles:G,addFileType:k}})),(0,l.tZ)(S.i.Provider,{value:{fs:x,pendingUploads:N,uploadFiles:G,duplicateFile:function(){var e=(0,i.Z)((function(e,t){var n,r,i,o;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return n=function(e,t){for(var n=(0,U.r6)(e),r=(0,U.eb)(e),i=F.test(r)?e:"".concat(r," (copy)").concat(n.length>0?".".concat(n):""),o=1;o<=t.size;o++){if(!t.has(i))return i;var a=(0,U.eb)(i),l=a.split(" ");j.test(a)&&l.pop(),i="".concat(l.join(" ")," ").concat(o),n.length>0&&(i+=".".concat(n))}return i}((0,U.UO)(e),new Set(t)),r=(0,U.Il)(e),i=r?"".concat(r,"/").concat(n):n,[4,x.copyFile(e,i)];case 1:return(o=a.sent()).error?(w(o.error),[2]):(z(i),[2])}}))}));return function(t,n){return e.apply(this,arguments)}}()},children:(0,l.BX)(p.Z,{children:[(0,l.tZ)(be,{}),(0,l.BX)(A.G7,{css:[A.l0.height("100%"),(0,E.isMobile)()&&A.l0.backgroundColor.backgroundDefault],children:[y?(0,l.BX)(A.G7,{css:[A.l0.flex.row,A.l0.justify.spaceBetween,A.l0.p(8)],children:[(0,l.tZ)(f.Z,{level:4,css:[{userSelect:"none"}],children:"Files"}),(0,l.BX)(A.G7,{css:[A.l0.flex.row,A.l0.align.center],children:[v?null:(0,l.BX)(l.HY,{children:[(0,l.tZ)(M.h,{css:[A.l0.color.foregroundDimmer],onClick:function(){k(s.Tv.File)},"data-cy":"filetree-add-file",alt:"Add file",children:(0,l.tZ)(O.Z,{})}),(0,l.tZ)(A.G7,{css:{height:6,width:0,marginLeft:4,marginRight:4,borderRight:"1px solid var(--foreground-dimmest)"}}),(0,l.tZ)(M.h,{css:[A.l0.color.foregroundDimmer],onClick:function(){k(s.Tv.Directory)},alt:"Add folder",children:(0,l.tZ)(W.Z,{})})]}),(0,l.tZ)(D,{readOnly:v,onDownloadZip:C})]})]}):null,(0,l.tZ)(A.G7,{css:[A.l0.flex.growAndShrink(1),{overflowY:"auto"}],children:(0,l.tZ)(h.Z,{siblings:[],readOnly:v,path:u.Ql})}),g?(0,l.tZ)(P.w3,{}):null,(0,l.tZ)(B.u,{isOpen:Boolean(R),onRequestClose:function(){return _(null)},children:R?(0,l.tZ)(L,{paths:R.errors.map((function(e){return e.path})),onCancel:function(){return _(null)},onConfirm:function(){G({overwrite:!0,parentPath:R.parentPath,files:R.errors.map((function(e){return e.file}))}),_(null)}}):null}),(0,l.tZ)(ie,{}),(0,l.tZ)(te,{})]})]})})}));ke.displayName="Filetree";var Se=c.memo(ke)},66075:function(e,t,n){var r=n(94660),i=(n(59496),n(22708)),o=n(63463),a=n(87666),l=n(19666),c=n(54703),s=n(73466),u=n(7330);t.Z=function(e){var t=e.isOpen,n=(0,c.useRouter)();return(0,r.tZ)(i.u,{preventClose:!0,isOpen:t,centered:!0,onRequestClose:function(){},maxWidth:600,children:(0,r.BX)(l.G,{css:[u.l0.colWithGap(32)],children:[(0,r.BX)(l.G,{css:[u.l0.rowWithGap(16),u.l0.align.center],children:[(0,r.tZ)(s.Z,{size:24,css:[u.l0.color.orangeStrongest]}),(0,r.tZ)(o.h4,{css:[{width:"fit-content"}],level:2,variant:"headerDefault",children:"You can\u2019t join this Repl from Firewall Mode."})]}),(0,r.BX)(l.G,{css:[u.l0.pr(32),u.l0.colWithGap(16)],children:[(0,r.tZ)(o.xv,{multiline:!0,children:"This Repl was started by someone not in Firewall Mode. If you would like to join, please do one of the following:"}),(0,r.BX)(l.G,{css:[u.l0.colWithGap(16),u.l0.pl(16)],children:[(0,r.tZ)(o.xv,{children:"\u2022 Exit Firewall Mode."}),(0,r.tZ)(o.xv,{children:"\u2022 Ask the creator to open this Repl in Firewall Mode."})]})]}),(0,r.BX)(l.G,{css:[u.l0.rowWithGap(16),u.l0.justify.end],children:[(0,r.tZ)(a.zx,{text:"Exit Firewall Mode",onClick:function(){window.location.href="https://www.replit.com".concat(n.asPath)}}),(0,r.tZ)(a.zx,{text:"Leave",onClick:function(){n.push("/home","~/")}})]})]})})}},44055:function(e,t,n){n.d(t,{qe:function(){return B},kq:function(){return P},Gb:function(){return D}});var r=n(94660),i=n(29356),o=n.n(i),a=n(1540),l=n(62687),c=n(24880),s=n(7330),u=n(87438),d=n(14966),f=n(58530),h=n(57135),p=n(2272),v=n(96583),m=n(59496),g=n(56579),Z=n(27033),y=n(85345),b=n(47382),w=n(99340),x=n(70765);function C(e){var t=e.filePath,n=e.replLanguage,r=(0,g.Z)(),i=r.fs,o=r.container,a=(0,Z.Z)({container:o,service:"format",skip:!b.Z.supportsFormatting(n)}).channel,l=(0,p.Z)(m.useState(!1),2),c=l[0],s=l[1],u=(0,w.Z)().showError,d=function(){return s(!1)};return m.useEffect((function(){if(c&&a){var e=!1,n=null,r=i.watchTextFile(t,{onReady:function(e){!function(e,t){o.apply(this,arguments)}(e.initialContent,e.writeChange)},onChange:function(e){var t=e.changes;n=n?n.compose(t):t},onError:function(){d()},onMoveOrDelete:function(){d()}});return function(){e=!0,r()}}function o(){return(o=(0,h.Z)((function(r,i){var o,l,c,s;return(0,v.__generator)(this,(function(f){switch(f.label){case 0:return e||!a?[2]:0===r.length?(d(),[2]):[4,a.request({file:{path:t,content:y.Z.from(r).toBuffer()}})];case 1:return o=f.sent(),e?[2]:o.error||!o.file?(u("Failed to format ".concat(t),1500),d(),[2]):0===(l=y.Z.from(o.file.content).toString()).length||0===(c=(0,x.F)(r,l)).length||0===(s=n?c.map(c,!0):c).length?(d(),[2]):(i(s),d(),[2])}}))}))).apply(this,arguments)}}),[a,t,i,c,u]),m.useEffect(d,[t]),b.Z.supportsFormatting(n)?function(){return s(!0)}:null}var k=n(9970),S=n(56580),E=n(34928),T=n(60351);var R=n(10063);var _=n(16505),I=36,G=function(){return(0,r.BX)("div",{className:"jsx-3e741e4d889c73d "+o().dynamic([["7b5cc3030f1a201a",[I]]])+" file-header-format-button",children:[(0,r.tZ)("div",{className:"jsx-3e741e4d889c73d "+o().dynamic([["7b5cc3030f1a201a",[I]]])+" file-header-format-icon",children:(0,r.BX)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16.581 16.428",className:"jsx-3e741e4d889c73d "+o().dynamic([["7b5cc3030f1a201a",[I]]]),children:[(0,r.tZ)("path",{d:"M13.26.747H3.323A2.569,2.569,0,0,0,.754,3.316h0v9.795a2.569,2.569,0,0,0,2.568,2.57h9.937a2.569,2.569,0,0,0,2.569-2.569h0V3.316A2.569,2.569,0,0,0,13.26.747Z",className:"jsx-3e741e4d889c73d "+o().dynamic([["7b5cc3030f1a201a",[I]]])+" cls-1"}),(0,r.tZ)("path",{d:"M13.118,11.269a.759.759,0,0,1-.759.759H3.921a.759.759,0,0,1-.759-.759V11.23a.671.671,0,0,1,.689-.653l.07.006h8.438a.671.671,0,0,1,.753.578.7.7,0,0,1,.006.069ZM3.161,5.111V5.073a.759.759,0,0,1,.759-.759h8.439a.759.759,0,0,1,.759.759v.038a.759.759,0,0,1-.759.759H3.921a.759.759,0,0,1-.76-.758ZM3.148,8.2a.759.759,0,0,1,.758-.76H8.4a.759.759,0,0,1,.759.759v.038a.759.759,0,0,1-.759.759H3.907a.759.759,0,0,1-.759-.759Z",className:"jsx-3e741e4d889c73d "+o().dynamic([["7b5cc3030f1a201a",[I]]])+" cls-2"})]})}),(0,r.tZ)(o(),{id:"3e741e4d889c73d",children:".file-header-format-button.jsx-3e741e4d889c73d .cls-1{fill:var(--foreground-default)}.file-header-format-button.jsx-3e741e4d889c73d .cls-2{fill:var(--background-default)}"}),(0,r.tZ)(o(),{id:"7b5cc3030f1a201a",dynamic:[I],children:".file-header-format-button.__jsx-style-dynamic-selector{padding:0 10px;height:100%;width:".concat(I,"px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;opacity:.7}.file-header-format-button.__jsx-style-dynamic-selector:hover{opacity:1}.file-header-format-icon.__jsx-style-dynamic-selector{height:16px;width:16px;cursor:pointer}")})]})};function D(e){var t=e.filePath,n=e.onComplete,r=(0,_.Z)(),i=C({filePath:t,replLanguage:r}),o=function(e){var t,n=e.filePath,r=(0,S.Z)().preferences,i=(0,g.Z)().fs,o=(0,E.Z)(n),a=Boolean(null===(t=null===o||void 0===o?void 0:o.getServerCapabilities())||void 0===t?void 0:t.documentFormattingProvider),l=(0,m.useState)([]),c=l[0],s=l[1],u=(0,w.Z)(),d=u.showError,f=u.showConfirm;return a?{fn:function(){if(!c.includes(n)){s((function(e){return(0,k.Z)(e).concat([n])}));var e=null,t=function(e){e?d("Sorry, formatting ".concat(n," failed"),1500):f("Formatted ".concat(n," successfully"),1500),a(),s((function(e){return e.filter((function(e){return e!==n}))}))},a=i.watchTextFile(n,{onReady:function(){var i=(0,h.Z)((function(i){var a,l,c,s,u;return(0,v.__generator)(this,(function(d){switch(d.label){case 0:if(a=i.initialContent,l=i.writeChange,!o)throw new Error("LSP client not found");return[4,o.request.format(n,{insertSpaces:r.indentIsSpaces,tabSize:r.indentSize})];case 1:return"error"in(c=d.sent())||c.cancelled?(t(!0),[2]):c.result?(s=(0,T.Z)(c.result,a.toString()),0===(u=e?s.map(e,!0):s).length?(t(),[2]):(l(u),t(),[2])):(t(!0),[2])}}))}));return function(e){return i.apply(this,arguments)}}(),onChange:function(t){var n=t.changes;e=e?e.compose(n):n}})}},isFormatting:c.includes(n)}:null}({filePath:t});return(0,a.Mb)(t)&&(o||i)?{format:function(){!function(e){var t=e.formatWithLsp,n=e.formatWithService,r=e.replLanguage,i=e.filePath,o=(null===t||void 0===t?void 0:t.fn)||n;if(!o)throw new Error("Expected format function");(0,R.j)(R.U3.AUTO_FORMAT_USED,{language:r,extension:(0,a.r6)(i)}),o()}({formatWithLsp:o,formatWithService:i,replLanguage:r,filePath:t}),n&&n()},isFormatting:Boolean(null===o||void 0===o?void 0:o.isFormatting)}:null}var P={cmdOrCtrlKey:!0,altKey:!1,shiftKey:!1,key:"S"},B=function(e){var t=e.filePath,n=e.inline,i=e.onComplete,o=e.disableKeyboardShortcut,h=D({filePath:t,onComplete:i});if((0,u.x)(P,{enabled:Boolean(!o&&h),run:function(){null===h||void 0===h||h.format()}}),!h)return null;var p=(0,a.eb)(t);return n?(0,r.tZ)(f.zx,{text:"Format",iconLeft:(0,r.tZ)(d.Z,{}),onClick:function(){return h.format()}}):(0,r.tZ)(l.h,{css:[s.l0.zIndex(1),{alignSelf:"center"}],alt:h.isFormatting?"Formatting ".concat(p,", please wait"):"Format ".concat(p," code"),tooltipPlacement:"left-end",onClick:function(){return h.format()},children:(null===h||void 0===h?void 0:h.isFormatting)?(0,r.tZ)(c.Z,{}):(0,r.tZ)(G,{})})}},24896:function(e,t,n){n.d(t,{CU:function(){return M},D6:function(){return g},Di:function(){return N},GE:function(){return O},Hl:function(){return D},JE:function(){return A},LO:function(){return R},M7:function(){return _},N2:function(){return P},Pz:function(){return j},TE:function(){return C},Ud:function(){return E},VF:function(){return b},Z$:function(){return V},bb:function(){return W},cF:function(){return S},cM:function(){return G},eg:function(){return H},hU:function(){return z},he:function(){return w},i7:function(){return y},jW:function(){return T},k6:function(){return Z},kT:function(){return k},lR:function(){return X},rO:function(){return I},sh:function(){return B},th:function(){return U},xY:function(){return L},y6:function(){return F},zq:function(){return x}});var r=n(72006),i=n(4405),o=n(2272),a=n(55749),l=n(38749),c=n(54614),s='[ "git remote get-url origin" ]',u="git symbolic-ref HEAD --short",d="git log -0 2>/dev/null && ".concat(u," || echo 'HEAD'");function f(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return["bash","-c",t.join("&&")]}function h(e){return"if ! (( $(busybox ps -o comm | grep git) )) ; then rm -rf .git/index.lock; fi ; ".concat(e)}function p(e){var t=e.remote,n=void 0===t?"":t,r=e.remoteToken;if(!r)return n;var i=(0,o.Z)(n.match(/(https:\/\/)(.*)/)||["","",""],3),a=i[1],l=i[2];return"".concat(a).concat(r||"",":x-oauth-basic@").concat(l)}function v(e){return null!==new RegExp(/(^|\n)fatal: Authentication failed/g).exec(e)||null!==new RegExp(/(^|\n)fatal: unable to access/g).exec(e)||null!==new RegExp(/(^|\n)fatal: repository.*not found/g).exec(e)||null!==new RegExp(/(^|\n)fatal: could not read Username/g).exec(e)||null!==new RegExp(/(^|\n)fatal: Could not read from remote repository/g).exec(e)}function m(e){var t=e.split(/ /g);if("1"===t[0]){var n=t[1],r=t.slice(8).join(" "),i=function(e){var t=e.startsWith(".")?e[1]:e[0],n=!e.startsWith(".");switch(t){case"M":case"T":return{changeMode:l.pD.MODIFIED,isStaged:n};case"D":return{changeMode:l.pD.DELETED,isStaged:n};case"A":return{changeMode:l.pD.UNTRACKED,isStaged:n};default:throw new Error("Unknown change type: ".concat(e))}}(n);return{change:i.changeMode,targetPath:r,origPath:r,isStaged:i.isStaged}}if("2"===t[0]){var a=t.slice(9).join(" "),c=(0,o.Z)(a.split("\t"),2),s=c[0],u=c[1];return{change:l.pD.MOVED,targetPath:s,origPath:u,isStaged:!0}}if("?"===t[0]){var d=t.slice(1).join(" ");return{change:l.pD.UNTRACKED,targetPath:d,origPath:null,isStaged:!1}}if("u"===t[0]){var f=t[2];return{change:l.pD.MODIFIED,targetPath:f,origPath:f,isStaged:!1}}throw new Error("Unrecognized git status entry: ".concat(e))}var g={format:function(e,t){return f('[ ! -d ".git" ]',"git init","git checkout -b main",'git config user.name "'.concat(t.username||"Replit user",'"'),'git config user.email "<>"',"touch .git/branches/.keep","touch .git/info/.keep","touch .git/objects/.keep","touch .git/refs/.keep")}},Z={format:function(e,t){return["git","rev-list","--left-right","--count","".concat(t,"...origin/").concat(t)]},parse:function(e,t){if(t.startsWith("fatal"))return(0,i.Z)((0,r.Z)({},e),{commitsAhead:null,commitsBehind:null});var n=(0,o.Z)(t.split(/\s+/),2),a=n[0],l=n[1];return(0,i.Z)((0,r.Z)({},e),{commitsAhead:parseInt(a)||0,commitsBehind:parseInt(l)||0})}},y={format:function(e){return["git","status","--branch","--porcelain=v2"]},parse:function(e,t){if(t.startsWith("fatal"))return e;if(t.includes("index file corrupt")||t.includes("error: index file"))return(0,i.Z)((0,r.Z)({},e),{badState:l.$U.IndexFilesCorrupted});if(""===t.trim())return(0,i.Z)((0,r.Z)({},e),{changedFiles:[]});var n=t.split("\n").filter((function(e){return""!==e.trim()})),a=e.branch,c=e.defaultBranch,s=!0,u=[],d=!0,f=!1,h=void 0;try{for(var p,v=n[Symbol.iterator]();!(d=(p=v.next()).done);d=!0){var g=p.value;if(g.startsWith("#")){var Z=(0,o.Z)(g.split(/\s+/),3),y=(Z[0],Z[1]),b=Z[2];switch(y){case"branch.head":a=b;break;case"branch.oid":s=!b.includes("(initial)")}}else u.push(m(g))}}catch(w){f=!0,h=w}finally{try{d||null==v.return||v.return()}finally{if(f)throw h}}return s||(c=a,a=""),(0,i.Z)((0,r.Z)({},e),{branch:a,defaultBranch:c,changedFiles:u})}},b={format:function(e){var t=p(e);return f("git push ".concat(t," $(").concat(u,")"))},parse:function(e,t){return v(t)?(0,i.Z)((0,r.Z)({},e),{authError:l.l4.PUSH}):e}},w={format:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=p(e);return f("git fetch ".concat(n,t?" --progress --deepen=10":" +refs/heads/*:refs/remotes/origin/* --progress --depth=10"))},parse:function(e,t){return v(t)?(0,i.Z)((0,r.Z)({},e),{authError:l.l4.FETCH}):e}},x={format:function(e){return 0===e.commits.length?["echo true"]:f(s,"git merge-base origin/$(".concat(u,") $(").concat(u,")"))},parse:function(e,t){return(0,i.Z)((0,r.Z)({},e),{hasMergeBaseWithFetchedRemote:Boolean(t.length)})}},C={format:function(){return f("git fetch origin --progress")},parse:function(e,t){return v(t)?(0,i.Z)((0,r.Z)({},e),{authError:l.l4.FETCH}):e}},k={format:function(e){if(0===e.commits.length)return["true"];var t=["git merge-tree $(git merge-base origin/$(".concat(u,") $(").concat(u,")) origin/$(").concat(u,") $(").concat(u,")"),"grep '^changed in both'","wc -l"].join(" | ");return f(s,t)},parse:function(e,t){return(0,i.Z)((0,r.Z)({},e),{hasConflictsWithFetchedRemote:0!==e.commits.length&&!isNaN(+t.trim())&&"0"!==t.trim()})}},S={format:function(e){return f("git reset --hard origin/$(".concat(u,")"))}},E={format:function(e){var t=p(e);return["git push ".concat(t," $(").concat(u,") --force")]}},T={format:function(){return f(s,"git merge origin/$(".concat(u,")"))},parse:function(e,t){return null!==new RegExp(/(^|\n)error: Your local changes to the following files would be overwritten by merge/g).exec(t)?(0,i.Z)((0,r.Z)({},e),{hasConflictsWithFetchedRemote:!0}):e}},R={format:function(e){return["git","remote","get-url","origin"]},parse:function(e,t){return t.includes("No such remote")||t.startsWith("fatal")?(0,i.Z)((0,r.Z)({},e),{remote:""}):(0,i.Z)((0,r.Z)({},e),{remote:t.trim()})}},_={format:function(e,t){return e.remote?f("git remote remove origin; git remote add origin ".concat(t)):f("git remote add origin ".concat(t))}},I={format:function(e){return f("git rev-parse 2>/dev/null && for i in $(git remote); do git remote remove $i; done")}},G={format:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,r="HEAD";t&&e.commits.length>0&&(r=e.commits[e.commits.length-1].hash);var i=["%D","%H","%an","%ae","%aI","%cn","%ce","%cI","%P","%B"];return["git","log","--pretty=".concat(i.join("%x00"),"%x00%x00"),"-".concat(n+1),r,"--"]},parse:function(e,t){if(t.startsWith("fatal"))return(0,i.Z)((0,r.Z)({},e),{commits:[]});if(t.startsWith("error: index file"))return(0,i.Z)((0,r.Z)({},e),{badState:l.$U.IndexFilesCorrupted});var n=t.split("\0\0\n").filter((function(e){return""!==e})).map((function(e){return e.split("\0")})),o=!!n[0][0];n.map((function(e){return e.shift()}));var c=!1;0===e.commits.length||o||e.commits[e.commits.length-1].hash!==n[0][0]||(c=!0,n.shift());var s=c?e.commits:[];return s=s.concat(n.map((function(e){var t=(0,a.Z)(e),n=t[0],r=t[1],i=t[2],o=t[3],l=t[4],c=t[5],s=t[6];return{hash:n,parentHash:t[7],message:t.slice(8).join("\n"),authorName:r,authorEmail:i,authorDate:new Date(o.trim()),committerName:l,committerEmail:c,committerDate:new Date(s.trim())}}))),(0,i.Z)((0,r.Z)({},e),{commits:s})}},D={format:function(){return f(h("git add -A"))},parse:function(e,t){if(t.startsWith("fatal"))return(0,i.Z)((0,r.Z)({},e),{hasConflictsWithFetchedRemote:!0});var n=e.changedFiles.map((function(e){return(0,i.Z)((0,r.Z)({},e),{isStaged:!0})}));return(0,i.Z)((0,r.Z)({},e),{changedFiles:n})}},P={format:function(e,t){return f("git add ".concat(t," && echo done: ").concat(t))},parse:function(e,t){if(!t.startsWith("fatal")){var n=t.split(" ")[1].trim(),o=e.changedFiles.map((function(e){return e.targetPath===n?(0,i.Z)((0,r.Z)({},e),{isStaged:!0}):e}));return(0,i.Z)((0,r.Z)({},e),{changedFiles:o})}return e}},B={format:function(e,t,n){return f("git restore ".concat(n?"--staged":""," ").concat(t," && echo done: ").concat(t))},parse:function(e,t){if(!t.startsWith("fatal")){var n=t.split(" ")[1].trim();return(0,i.Z)((0,r.Z)({},e),{changedFiles:e.changedFiles.map((function(e){return e.targetPath===n?(0,i.Z)((0,r.Z)({},e),{isStaged:!1}):e}))})}return e}},U={format:function(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];r=e.gitHubName?e.gitHubName:n.fullName||n.username;var o=e.gitHubEmail||"<>",a='-c user.name="'.concat(r,'" -c user.email="').concat(o,'"'),l=t.replace(/'/g,"'\"'\"'");return f(h("git ".concat(a," commit -m '").concat(l,"'").concat(i?" --allow-empty":"")))}},A={format:function(e,t){return e.branches.includes(t)?["git","checkout",t,"--"]:["git","checkout","-b",t,"--"]}},N={format:function(e){var t=p(e);return f("git remote show ".concat(t," | grep 'HEAD branch'"))},parse:function(e,t){var n=(0,o.Z)(t.split(":"),2),a=(n[0],n[1].trim());return(0,i.Z)((0,r.Z)({},e),{defaultBranch:a})}},L={format:function(e){return f("git checkout ".concat(e.defaultBranch))}},X={format:function(e){return f("git checkout -f ".concat(e.defaultBranch))}},M={format:function(e,t){return f("git revert ".concat(t,"..$(").concat(d,") --no-commit"))}},O={format:function(e){return f(h("git reset $(".concat(d,") --")))}},W={format:function(e){return f("git rev-parse --is-inside-work-tree")},parse:function(e,t){return(0,i.Z)((0,r.Z)({},e),{isInitialized:t.startsWith("true")})}},F={format:function(e){return f("git add -A","git reset --hard $(".concat(d,") --"))}},j={format:function(e){return["git","branch","-a","--no-color"]},parse:function(e,t){if(t.startsWith("fatal"))return e;var n=t.split("\n").filter((function(e){return!!e.trim()})).map((function(e){return e.startsWith("* ")?e.replace(/^\*\s+/,""):e})).map((function(e){return e.trim()})).map(c.iF);return(0,i.Z)((0,r.Z)({},e),{branches:Array.from(new Set(n))})}},z={format:function(e){return f("git stash -u")}},H={format:function(e){return f("git checkout stash -- .")}},V={format:function(e,t,n){var r;r=e.gitHubName?e.gitHubName:t.fullName||t.username;var i=e.gitHubEmail||"<>",o='-c user.name="'.concat(r,'" -c user.email="').concat(i,'"');return f("git ".concat(o," merge -Xtheirs --allow-unrelated-histories --no-edit origin/").concat(n))}}},38749:function(e,t,n){var r,i,o;n.d(t,{$U:function(){return i},Xe:function(){return a},l4:function(){return r},pD:function(){return o}}),function(e){e[e.NONE=0]="NONE",e[e.PUSH=1]="PUSH",e[e.CLONE=2]="CLONE",e[e.FETCH=3]="FETCH",e[e.GITHUB_CREATE=4]="GITHUB_CREATE",e[e.GITHUB_GET_INFO=5]="GITHUB_GET_INFO"}(r||(r={})),function(e){e.None="NONE",e.NoMergeBase="NO_MERGE_BASE",e.AuthFetchError="AUTH_FETCH_ERROR",e.IndexFilesCorrupted="INDEX_FILES_CORRUPTED"}(i||(i={})),function(e){e[e.UNTRACKED=0]="UNTRACKED",e[e.MODIFIED=1]="MODIFIED",e[e.MOVED=2]="MOVED",e[e.DELETED=3]="DELETED"}(o||(o={}));var a={isInitialized:!1,hasConflictsWithFetchedRemote:!1,hasMergeBaseWithFetchedRemote:!0,authError:r.NONE,badState:i.None,remote:"",repoId:null,branch:"",defaultBranch:"main",branches:[],installations:[],changedFiles:[],commits:[],commitsAhead:null,commitsBehind:null,remoteToken:null,gitHubName:null,ownerId:null,gitHubAvatarUrl:null,gitHubEmail:null}},54614:function(e,t,n){n.d(t,{JE:function(){return o},cW:function(){return a},iF:function(){return l},mJ:function(){return i}});var r=n(2272);function i(e){if(!e)return"";var t=(0,r.Z)(o(e),2),n=t[0],i=t[1];return n&&i?"".concat(n,"/").concat(i):e}function o(e){if(!e)return["",""];var t=e.match(/^https:\/\/github\.com\/(.+)\/(.+)/);if(null!==t){var n=(0,r.Z)(t,3);return[n[1],n[2]]}return["",""]}function a(e,t){return"".concat(e,"/commit/").concat(t)}function l(e){return e.startsWith("remotes/origin/HEAD ->")?e.split("/").reverse()[0]:(e.startsWith("remotes/origin/")&&(e=e.replace("remotes/origin/","")),e.includes(" -> ")&&(e=e.split(" -> ")[0]),e.trim())}},71476:function(e,t,n){n.d(t,{bD:function(){return u},lg:function(){return f}});var r=n(72006),i=n(43119),o=n(71440),a=n(53486);function l(){var e=(0,i.Z)(["\n  query WorkspaceHistory2Users($ids: [Int!]!) {\n    currentUser {\n      id\n      username\n      image\n    }\n    usersByIds(ids: $ids) {\n      id\n      username\n      image\n    }\n  }\n"]);return l=function(){return e},e}function c(){var e=(0,i.Z)(["\n  query WorkspaceHistory2CurrentUserDate {\n    currentUser {\n      id\n      timeCreated\n    }\n  }\n"]);return c=function(){return e},e}var s={},u=(0,o.Ps)(l());var d=(0,o.Ps)(c());function f(e){var t=(0,r.Z)({},s,e);return a.a(d,t)}},67727:function(e,t,n){n.d(t,{m:function(){return f}});var r=n(94660),i=(n(59496),n(72030)),o=n(58530),a=n(84520),l=n(18439),c=n(58043),s=n(39118),u=(0,i.F4)("0%,100%{opacity:1;}50%{opacity:0.25;}"),d={root:(0,i.iv)([o.l0.height(20),o.l0.width(20),o.l0.center]),pulse:(0,i.iv)({animation:"".concat(u," 2s infinite")})};function f(){var e=(0,a.Z)(),t=e.isSaving;return e.isOffline?(0,r.tZ)(o.u,{tooltip:"Reconnecting, changes will be synced when you\u2019re online",placement:"right",children:(0,r.tZ)(o.G7,{css:d.root,children:(0,r.tZ)(l.Z,{size:16,color:o.TV.redDefault})})}):t?(0,r.tZ)(o.u,{tooltip:"Saving",placement:"right",children:(0,r.tZ)(o.G7,{css:[d.root,d.pulse],children:(0,r.tZ)(c.Z,{size:16,color:o.TV.foregroundDimmest})})}):(0,r.tZ)(o.u,{tooltip:"Saved",placement:"right",children:(0,r.tZ)(o.G7,{css:d.root,children:(0,r.tZ)(s.Z,{size:16,color:o.TV.foregroundDimmest})})})}},81970:function(e,t,n){n.d(t,{I:function(){return s}});var r=n(72006),i=n(4405),o=n(59496),a=n(91338),l=n(89074),c={nodejs:["package.json","package-lock.json","yarn.lock","node_modules"],python:["poetry.lock","pyproject.toml","requirements.txt",".venv/",".local"],ruby:["Gemfile","Gemfile.lock"],java:["pom.xml","target"]};function s(){var e=(0,a.Z)(),t=(0,l.T)();return(0,o.useMemo)((function(){var n=(null===t||void 0===t?void 0:t.packagers)||[],o=(null===n||void 0===n?void 0:n.map((function(e){return(0,i.Z)((0,r.Z)({},e),{title:e.language,packagerFiles:e.packagerFiles||c[e.language]||[]})})))||[];return"html"!==(null===e||void 0===e?void 0:e.language)&&"html_beta"!==(null===e||void 0===e?void 0:e.language)||o.push({id:"html",title:"html",name:"HTML Packager",language:"html",packageSearch:!0,guessImports:!1,packagerFiles:[]}),o}),[t,e])}},70406:function(e,t,n){n.d(t,{Z:function(){return m}});var r=n(9970),i=n(94660),o=n(75886),a=n.n(o),l=n(79351),c=n(19540),s=n(72006),u=n(43119),d=n(71440),f=n(53486);function h(){var e=(0,u.Z)(["\n  query WorkspacePageTitle($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        title\n      }\n    }\n  }\n"]);return h=function(){return e},e}var p={},v=(0,d.Ps)(h());function m(e){var t,n=e.prefix,o=void 0===n?"":n,u=e.suffix,d=void 0===u?"":u,h=(0,c.ex)(),m=function(e){var t=(0,s.Z)({},p,e);return f.a(v,t)}({variables:{replId:(0,l.Z)()}}),g=m.data||m.previousData,Z="Repl"===(null===g||void 0===g||null===(t=g.repl)||void 0===t?void 0:t.__typename)?g.repl:null,y=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,r.Z)(t.filter(Boolean)).concat(["Replit"]).join(" - ")}(o,h,null===Z||void 0===Z?void 0:Z.title,d);return(0,i.tZ)(a(),{children:(0,i.tZ)("title",{children:y},"title")})}},80417:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(94660),i=n(29356),o=n.n(i),a=(n(59496),n(16629)),l=n(43897),c=n(58530);function s(e){var t=e.preventHighlightBorder,n=(0,l.Z)();return(0,r.BX)("div",{className:o().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])+" loader",children:[(0,r.tZ)("div",{className:o().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])+" wrap",children:(0,r.BX)(a.ZP,{backgroundColor:c.TV.backgroundHighest,foregroundColor:c.TV.backgroundHigher,uniqueKey:"editorLoader",children:[(0,r.tZ)("rect",{x:"0",y:"0",rx:"3",ry:"3",width:"70",height:"10",className:o().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"80",y:"0",rx:"3",ry:"3",width:"100",height:"10",className:o().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"190",y:"0",rx:"3",ry:"3",width:"10",height:"10",className:o().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"15",y:"20",rx:"3",ry:"3",width:"130",height:"10",className:o().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"155",y:"20",rx:"3",ry:"3",width:"130",height:"10",className:o().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"15",y:"40",rx:"3",ry:"3",width:"90",height:"10",className:o().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"115",y:"40",rx:"3",ry:"3",width:"60",height:"10",className:o().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"185",y:"40",rx:"3",ry:"3",width:"60",height:"10",className:o().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"0",y:"60",rx:"3",ry:"3",width:"30",height:"10",className:o().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"15",y:"80",rx:"3",ry:"3",width:"70",height:"10",className:o().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"95",y:"80",rx:"3",ry:"3",width:"60",height:"10",className:o().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"165",y:"80",rx:"3",ry:"3",width:"30",height:"10",className:o().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"15",y:"100",rx:"3",ry:"3",width:"110",height:"10",className:o().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"135",y:"100",rx:"3",ry:"3",width:"100",height:"10",className:o().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"0",y:"120",rx:"3",ry:"3",width:"70",height:"10",className:o().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])})]})}),(0,r.tZ)(o(),{id:"b8bdeb39d1178985",dynamic:[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"],children:".loader.__jsx-style-dynamic-selector{z-index:3;height:100%;width:100%;background-color:var(--background-default);overflow:hidden;padding:var(--space-16);-webkit-border-bottom-right-radius:var(--border-radius-4);-moz-border-radius-bottomright:var(--border-radius-4);border-bottom-right-radius:var(--border-radius-4);-webkit-border-bottom-left-radius:var(--border-radius-4);-moz-border-radius-bottomleft:var(--border-radius-4);border-bottom-left-radius:var(--border-radius-4);-webkit-box-shadow:".concat(n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)",";-moz-box-shadow:").concat(n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)",";box-shadow:").concat(n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)","}.wrap.__jsx-style-dynamic-selector{overflow:hidden}.wrap.__jsx-style-dynamic-selector>svg{max-width:640px;min-width:500px;height:auto}@media screen and (min-width:900px){.loader.__jsx-style-dynamic-selector{padding:30px}}")})]})}},16283:function(e,t,n){n.d(t,{M:function(){return w}});var r=n(94660),i=n(2272),o=n(58530),a=n(29847),l=n(3342),c=n(59496),s=n(79960);function u(e){var t=e.onDismiss,n=e.context,u=e.showTrial,d=void 0!==u&&u,f=(0,i.Z)(c.useState(!1),2),h=f[0],p=f[1];return(0,r.BX)(r.HY,{children:[(0,r.BX)(o.G7,{css:[o.l0.rowWithGap(4),o.l0.align.center,o.l0.justify.start],dataCy:"ghostwriter-opt-in-banner",children:[(0,r.tZ)(o.zx,{iconLeft:(0,r.tZ)(l.Z,{}),text:d?"Try Ghostwriter Free":"Try Ghostwriter",colorway:"blurple",css:[o.l0.flex.grow(1),o.l0.flex.shrink(0),o.l0.align.center],onClick:function(){return p(!0)},alignment:"start"}),(0,r.tZ)(o.hU,{onClick:t,tooltipHidden:!0,alt:"Close banner",children:(0,r.tZ)(a.Z,{})})]}),(0,r.tZ)(s.Z,{context:n,isOpen:h,onRequestClose:function(){return p(!1)},uponPurchaseGoTo:"cyclesPage",powerUp:"ghostwriter"})]})}var d=n(27719),f=n(11939);function h(e){var t=e.context,n=(0,d.s)(),a=n.cta,u=n.trialExpiryDate,h=(0,i.Z)(c.useState(!1),2),p=h[0],v=h[1];if(a!==d.m.TrialOngoing&&a!==d.m.TrialExpired)return null;var m=(0,f.X)(u);return(0,r.BX)(r.HY,{children:[(0,r.BX)(o.G7,{css:[o.l0.colWithGap(8)],dataCy:"ghostwriter-trial-expiry-banner",children:[(0,r.BX)(o.G7,{css:[o.l0.flex.row,o.l0.justify.spaceBetween,{flexWrap:"wrap",gap:"8px"}],children:[(0,r.BX)(o.G7,{css:[o.l0.align.center,o.l0.rowWithGap(8)],children:[(0,r.tZ)(l.Z,{}),(0,r.tZ)(o.xv,{children:"Ghostwriter Trial"})]}),(0,r.tZ)(o.xv,{color:"dimmer",children:a===d.m.TrialOngoing?m:"Ended"})]}),(0,r.tZ)(o.zx,{onClick:function(){return v(!0)},text:a===d.m.TrialOngoing?"Subscribe Now":"Reactivate",colorway:"blurple"}),(0,r.tZ)(o.RX,{})]}),(0,r.tZ)(s.Z,{context:t,isOpen:p,onRequestClose:function(){return v(!1)},uponPurchaseGoTo:"cyclesPage",powerUp:"ghostwriter"})]})}var p=n(31140),v=n(10601);function m(e){var t=e.context,n=(0,d.s)(),i=n.cta,o=n.trialExpiryDate,a=i===d.m.TrialOngoing&&(0,v.Z)(o,new Date)<=3,l=i===d.m.TrialExpired;return a?(0,r.tZ)(g,{context:t}):l?(0,r.tZ)(Z,{context:t}):null}function g(e){var t=e.context,n=(0,p.Z)("workspace","ghostwriter-trial-3-day-left-modal"),i=n.shouldDisplay,o=n.dismiss,a=n.register;return c.useEffect((function(){a()}),[a]),(0,r.tZ)(s.Z,{context:t,isOpen:i,onRequestClose:o,powerUp:"ghostwriter",isAutoTriggered:!0,uponPurchaseGoTo:"cyclesPage"})}function Z(e){var t=e.context,n=(0,p.Z)("workspace","ghostwriter-trial-expired-modal"),i=n.shouldDisplay,o=n.dismiss,a=n.register;return c.useEffect((function(){a()}),[a]),(0,r.tZ)(s.Z,{context:t,isOpen:i,onRequestClose:o,powerUp:"ghostwriter",isAutoTriggered:!0,uponPurchaseGoTo:"cyclesPage"})}var y=n(7361),b=n(61262);function w(){var e=(0,d.s)(),t=e.cta,n=e.loading,i=t!==d.m.ActivateAlreadyTrialed,o=i?"ghostwriter-trial-repl-resources-cta":"ghostwriter-repl-resources-cta",a=(0,y.o)(o),l=a.isLoading,c=a.isDone,s=a.setAsDone;if(l||n)return null;switch(t){case d.m.None:case d.m.Activated:return null;case d.m.TrialOngoing:case d.m.TrialExpired:return(0,r.BX)(r.HY,{children:[(0,r.tZ)(m,{context:"repl_resources"}),(0,r.tZ)(h,{context:"repl_resources"})]});case d.m.Activate:case d.m.ActivateAlreadyTrialed:return c||l?null:(0,r.tZ)(u,{showTrial:i,onDismiss:s,context:"repl_resources"});default:(0,b.Z)(t)}}},58618:function(e,t,n){n.d(t,{ky:function(){return f},qo:function(){return u}});var r=n(72006),i=n(43119),o=n(71440),a=n(53486);function l(){var e=(0,i.Z)(["\n  fragment PowerUpActionsMultiBoostToggle on Repl {\n    id\n    powerUps {\n      __typename\n      ... on ReplPowerUpTypes {\n        boost {\n          __typename\n          sku\n          methodOfPayment\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}function c(){var e=(0,i.Z)(["\n  query MultiBoostToggle($replId: String!) {\n    repl(id: $replId) {\n      __typename\n      ... on Repl {\n        ...PowerUpActionsMultiBoostToggle\n      }\n    }\n  }\n  ","\n"]);return c=function(){return e},e}var s={},u=(0,o.Ps)(l()),d=(0,o.Ps)(c(),u);function f(e){var t=(0,r.Z)({},s,e);return a.a(d,t)}},90097:function(e,t,n){n.d(t,{Z:function(){return We}});var r=n(9970),i=n(94660),o=n(59496),a=n(9362),l=n(56580),c=n(45715),s=n(10063),u=n(19666),d=n(63463),f=n(7330),h=n(44135);function p(e){var t=e.id,n=e.title,r=e.children,a=(0,h.H)()(t);return(0,i.BX)(u.G,{css:[f.l0.colWithGap(8)],children:[(0,i.tZ)(u.G,{tag:"label",htmlFor:a,children:"string"===typeof n?(0,i.tZ)(d.xv,{children:n}):n}),o.cloneElement(r,{id:a})]})}var v=n(7954),m=n(27719),g=n(4875),Z=n(58530),y=n(3342),b=n(24880),w=n(61262),x=n(57389),C=n(12791),k=n(36340),S=n(79900),E=n(12922),T=n(59199),R=n(82322),_=n(78915),I=n(93493),G=n.n(I),D=n(34870),P=n(72006),B=n(43119),U=n(71440),A=n(53486);function N(){var e=(0,B.Z)(["\n  query CodeSuggestionPreferences {\n    currentUser {\n      id\n      userPowerUpsByType {\n        __typename\n        ... on UnauthorizedError {\n          message\n        }\n        ... on UserPowerUpsTypes {\n          ghostwriter {\n            active\n          }\n        }\n      }\n    }\n  }\n"]);return N=function(){return e},e}var L={},X=(0,U.Ps)(N());var M=[{title:"enabled",value:!0},{title:"disabled",value:!1}],O=Array.from(D.v,(function(e){return{title:e,value:e}}));function W(){var e,t,n=!(0,k.S)(),o=(0,E.P)({controlName:"flag-code-suggestion-engine"}),c=function(e){var t=(0,P.Z)({},L,e);return A.a(X,t)}().data,u="UserPowerUpsTypes"===(null===c||void 0===c||null===(e=c.currentUser)||void 0===e?void 0:e.userPowerUpsByType.__typename)&&c.currentUser.userPowerUpsByType.ghostwriter.active,f=(0,l.Z)(),h=f.preferences,v=f.update,m=(0,C.L)().engine,g={value:null,title:"default"},y=function(e,t){v((0,x.Z)({},e,t)),(0,s.j)(s.U3.SETTINGS_TOGGLED,{settingChanged:e,updatedValue:t})};return u?(0,i.BX)(i.HY,{children:[(0,i.tZ)(p,{id:"codeSuggestionToggle",title:(0,i.BX)("div",{css:[Z.l0.flex.row,Z.l0.rowWithGap(8),Z.l0.center,Z.l0.justify.start],children:[(0,i.tZ)(Z.Tg,{css:[Z.l0.width(16),Z.l0.height(16)],children:(0,i.tZ)(G(),{alt:"Blue and purple fortune telling crystal ball icon used to symbolize Ghostwriter",src:"/public/images/ghostwriter/blurple-circle.svg",width:16,height:16})}),(0,i.tZ)(d.xv,{children:"Ghostwriter Complete Code"}),(0,i.tZ)("a",{href:S.qw,target:"_blank",css:Z.l0.color.foregroundDefault,onClick:function(){return(0,s.j)(s.U3.EXTERNAL_LINK_VIEWED,{url:S.qw,source:"repl_settings"})},children:(0,i.tZ)(Z.hU,{alt:"Learn more",tooltipDelay:"none",tooltipContents:"This feature is powered by Ghostwriter. Click to read more.",type:"button",css:[Z.l0.width(16),Z.l0.height(16)],children:(0,i.tZ)(a.Z,{color:Z.TV.foregroundDefault})})})]}),children:(0,i.BX)(i.HY,{children:[(0,i.tZ)(T.P,{initialSelectedItem:M.find((function(e){return e.value===h.codeSuggestion})),onChange:function(e){return y("codeSuggestion",null===e||void 0===e?void 0:e.value)},items:M}),n?(0,i.tZ)(d.xv,{multiline:!0,children:"Complete Code is currently disabled while there are multiple players in your Repl."}):(0,i.BX)(d.xv,{multiline:!0,children:["Complete Code provides inline \u201cghost text\u201d suggestions while you code. Press ",(0,i.tZ)(_.ZP,{shortcut:{key:"TAB"}})," or swipe right on your mobile device to accept."]})]})}),o?(0,i.tZ)(p,{id:"completeCodeEngine",title:(0,i.BX)(Z.G7,{css:[Z.l0.flex.row,Z.l0.rowWithGap(8),Z.l0.center,Z.l0.justify.start],children:[(0,i.tZ)(d.xv,{children:"Ghostwriter Complete Code Engine (override) "}),(0,i.tZ)(Z.u,{tooltip:"You are seeing this functionality because you have special permissions.",children:(0,i.tZ)(R.Z,{})})]}),children:(0,i.BX)(i.HY,{children:[(0,i.tZ)(T.P,{initialSelectedItem:null!==(t=O.find((function(e){return e.value===h.completeCodeEngine})))&&void 0!==t?t:g,onChange:function(e){return y("completeCodeEngine",null===e||void 0===e?void 0:e.value)},items:[g].concat((0,r.Z)(O))}),(0,i.BX)(d.xv,{multiline:!0,children:["Current applied engine: ",m]})]})}):null]}):null}var F={titleContainer:[Z.l0.rowWithGap(8),Z.l0.align.center],surface:[Z.l0.p(8),Z.l0.colWithGap(8),Z.l0.borderRadius(8),Z.l0.align.start]};function j(){var e=(0,m.s)(),t=e.cta;if(e.loading)return(0,i.tZ)(p,{id:"ghostwriter",title:"Ghostwriter",children:(0,i.tZ)(b.Z,{})});switch(t){case m.m.None:return null;case m.m.Activated:case m.m.TrialOngoing:return(0,i.tZ)(W,{});case m.m.TrialExpired:case m.m.Activate:case m.m.ActivateAlreadyTrialed:return(0,i.tZ)(p,{id:"ghostwriter",title:(0,i.BX)(Z.G7,{css:F.titleContainer,children:[(0,i.tZ)(y.Z,{size:16}),(0,i.tZ)(Z.xv,{children:"Ghostwriter"}),(0,i.tZ)(g.Z,{context:"workspace_settings_pane",powerUp:"ghostwriter"})]}),children:(0,i.BX)(Z.Tg,{background:"higher",css:F.surface,children:[(0,i.tZ)(Z.xv,{multiline:!0,color:"dimmer",children:"Replit's AI pair programmer can complete, generate, explain, and transform code."}),(0,i.tZ)(v.Z,{context:"workspace_settings_pane"})]})});default:(0,w.Z)(t)}}var z=n(19012),H=n(57135),V=n(96583),q=n(79351),$=n(92398),Y=n(56579),K=n(70980),Q=n(26303);var J=n(38649),ee=n(54703),te=n(27400),ne=n(43758),re=n(21477),ie=n(33575),oe=Array.from(re.ce,(function(e){return{title:e,value:e}}));function ae(){var e,t=(0,ie.d)(),n=(0,E.P)({controlName:"flag-ghostwriter-chat-engine-override"}),o=(0,l.Z)(),a=o.preferences,c=o.update,u=(0,ne.v)(),f={value:null,title:"default"};return(0,i.tZ)(i.HY,{children:t&&n?(0,i.tZ)(p,{id:"completeCodeEngine",title:(0,i.BX)(Z.G7,{css:[Z.l0.flex.row,Z.l0.rowWithGap(8),Z.l0.center,Z.l0.justify.start],children:[(0,i.tZ)(d.xv,{children:"Ghostwriter Chat Engine (override) "}),(0,i.tZ)(Z.u,{tooltip:"You are seeing this functionality because you have special permissions.",children:(0,i.tZ)(R.Z,{})})]}),children:(0,i.BX)(i.HY,{children:[(0,i.tZ)(T.P,{initialSelectedItem:null!==(e=oe.find((function(e){return e.value===a.chatEngine})))&&void 0!==e?e:f,onChange:function(e){return t="chatEngine",n=null===e||void 0===e?void 0:e.value,c((0,x.Z)({},t,n)),void(0,s.j)(s.U3.SETTINGS_TOGGLED,{settingChanged:t,updatedValue:n});var t,n},items:[f].concat((0,r.Z)(oe))}),(0,i.BX)(d.xv,{multiline:!0,children:["Current applied engine: ",u]})]})}):null})}var le=n(99991),ce=n(29847),se=n(65782),ue=n(69694),de=n(2517),fe=n(73415),he=n(92584),pe=n(69735),ve=n(95467),me=n(81596),ge=n(38790),Ze=n(53709),ye=n(57773),be=n(27628);function we(e){return{onKeyDown:function(t){if(t.preventDefault(),t.stopPropagation(),function(e){var t=e.key;return"Meta"===t||"Control"===t||"Shift"===t||"Alt"===t}(t)){var n=(0,ve.TR)(t);if(!n)return;e({type:"update",recorded:n})}else{var r=(0,ve.q1)(t);r&&e({type:"success",shortcut:r})}},startRecording:function(){e({type:"start"})},stopRecording:function(){e({type:"stop"})}}}var xe=(0,Z.Xb)({root:[Z.l0.colWithGap(8)],row:[Z.l0.rowWithGap(8),Z.l0.align.center,Z.l0.minHeight(28)],left:[Z.l0.colWithGap(2)],right:[Z.l0.rowWithGap(4),Z.l0.align.center,Z.l0.justify.end,Z.l0.position.relative,Z.l0.flex.growAndShrink(1)],recordingRow:[Z.l0.rowWithGap(8),Z.l0.align.center],recordingRowInner:[Z.l0.rowWithGap(4),Z.l0.align.center],secondaryText:[Z.l0.display.flex,Z.l0.flex.row,Z.l0.align.center,Z.l0.rowWithGap(4)]}),Ce=(0,Z.Xb)({root:[Z.l0.rowWithGap(8),Z.l0.align.center],recordingRow:[Z.l0.rowWithGap(4),Z.l0.align.center]});function ke(e){var t,n,r,a,l=e.command,c=e.filter,s=(0,le.r3)(),u=(0,o.useState)(null),d=u[0],f=u[1],h=(0,o.useState)(null),p=h[0],v=h[1],m=(0,o.useState)(null!==(a=l.shortcut)&&void 0!==a?a:null),g=m[0],y=m[1],b=we((function(e){switch(e.type){case"start":return void v({recorded:null});case"stop":return void v(null);case"update":return void v({recorded:e.recorded});case"success":v(null);var t=s(l.id,e.shortcut);return void(t?f('This shortcut conflicts with "'.concat(t.conflict.name,'"')):y(e.shortcut));case"error":var n;return void v((function(t){return{error:e.message,recorded:null!==(n=null===t||void 0===t?void 0:t.recorded)&&void 0!==n?n:null}}))}})),w=b.stopRecording,x=b.startRecording,C=b.onKeyDown,k=(0,fe.Z)((function(){return w()}),[]),S=Boolean(p);Te(S);var E,T=null===p||void 0===p?void 0:p.recorded,R=null===p||void 0===p?void 0:p.error,_=c.length>0,I=null===(t=ge.Z.match(c,l.name))||void 0===t?void 0:t.ranges,G=null===(n=ge.Z.match(c,l.id))||void 0===n?void 0:n.ranges,D=(null===l||void 0===l?void 0:l.description)?null===(r=ge.Z.match(c,l.description))||void 0===r?void 0:r.ranges:void 0,P=c.split(" ").map((function(e){return(e='"'===(e='"'===e.charAt(0)?e.substring(1):e).charAt(e.length-1)?e.substring(0,e.length-1):e).toLowerCase()}));return(0,i.BX)(Z.G7,{css:xe.root,children:[(0,i.BX)(Z.G7,{css:xe.row,children:[(0,i.BX)(Z.G7,{css:xe.left,children:[(0,i.tZ)(be.x,{text:l.name,highlight:I,dimmed:_}),(0,i.BX)(Z.xv,{variant:"small",css:xe.secondaryText,children:[_?(0,i.tZ)(be.x,{text:l.id,highlight:G,dimmed:_}):null,l.description?(0,i.BX)(i.HY,{children:[_?(0,i.tZ)(Z.xv,{color:"dimmest",children:"\u2022"}):null,(0,i.tZ)(be.x,{text:l.description,highlight:D,dimmed:_})]}):null]})]}),(0,i.BX)(Z.G7,{innerRef:S?k:void 0,css:xe.right,children:[S?(0,i.tZ)(he.MT,{autoFocus:!0,restoreFocus:!0,children:(0,i.tZ)("input",{onKeyDown:C,css:{opacity:0,width:1}})}):null,g&&!S?(0,i.tZ)(me.bM,{small:!0,keyCombo:g,match:P}):null,g||S?null:(0,i.tZ)(Z.zx,{small:!0,outlined:!0,iconLeft:(0,i.tZ)(ue.Z,{}),text:"Add shortcut",onClick:function(){return x()}}),S?(0,i.BX)(Z.G7,{css:xe.recordingRow,children:[g&&!T?(0,i.tZ)(Z.zx,{outlined:!0,small:!0,iconLeft:(0,i.tZ)(ce.Z,{}),text:"Remove",onClick:function(){s(l.id,void 0),y(null),v(null)}}):null,(0,i.BX)(Z.G7,{css:xe.recordingRowInner,children:[T?(0,i.tZ)(me.bM,{small:!0,keyCombo:T}):(0,i.tZ)(Z.xv,{color:"dimmest",css:[{fontStyle:"italic"}],children:"Recording..."}),(0,i.tZ)(Z.hU,{alt:"Stop",onClick:function(){return w()},children:(0,i.tZ)(de.Z,{color:Z.TV.redStronger})})]})]}):null,!S&&g?(0,i.tZ)(Z.hU,{alt:"Change",onClick:function(){return x()},children:(0,i.tZ)(se.Z,{color:"dimmest"})}):null]})]}),R?(0,i.tZ)(Z.E_,{icon:(0,i.tZ)(pe.Z,{}),colorway:"warning",text:R,closable:!0,closeAction:function(){return v((function(e){return{recorded:null!==(E=null===e||void 0===e?void 0:e.recorded)&&void 0!==E?E:null}}))}}):null,d?(0,i.tZ)(Z.E_,{icon:(0,i.tZ)(pe.Z,{}),colorway:"warning",text:d,closable:!0,closeAction:function(){return f(null)}}):null]})}var Se=(0,Z.Xb)({root:[Z.l0.colWithGap(8),Z.l0.p(8)],surface:[Z.l0.p(8),Z.l0.borderRadius(8),Z.l0.colWithGap(12)]});function Ee(){var e=(0,o.useState)(""),t=e[0],n=e[1],r=(0,le.xF)(),a=function(e){return(0,me.Ku)(e).map((function(e){return'"'.concat(e,'"')})).join(" ")},l=ge.Z.filter(t,r,{extract:function(e){var t="".concat(e.name," ").concat(e.id);return e.description&&(t+=" ".concat(e.description)),e.shortcut&&(t+=" ".concat(a(e.shortcut))),t}}),c=(0,o.useRef)(null),s=(0,o.useState)(!1),u=s[0],d=s[1];Te(u);var f=we((function(e){switch(e.type){case"start":var t;return d(!0),n(""),void(null===c||void 0===c||null===(t=c.current)||void 0===t||t.focus());case"stop":case"error":var r;return d(!1),void(null===c||void 0===c||null===(r=c.current)||void 0===r||r.focus());case"update":return void n(a(e.recorded));case"success":return void n(a(e.shortcut))}})),h=f.stopRecording,p=f.startRecording,v=f.onKeyDown;return(0,i.BX)(Z.G7,{css:Se.root,children:[(0,i.tZ)(Z.E_,{icon:(0,i.tZ)(pe.Z,{}),colorway:"warning",text:"This is an early preview! Changes are saved in localstorage and shortcut conflicts are not detected"}),(0,i.BX)(Z.G7,{css:Ce.root,children:[(0,i.tZ)(he.MT,{restoreFocus:!0,children:(0,i.tZ)(Z.II,{ref:c,placeholder:"Type to search keyboard shortcuts",onBlur:u?h:void 0,onChange:function(e){return n(e.target.value)},onKeyDown:u?v:void 0,value:t})}),(0,i.tZ)(Z.G7,{css:Ce.recordingRow,children:u?(0,i.BX)(i.HY,{children:[(0,i.tZ)(Z.xv,{color:"dimmest",css:[{fontStyle:"italic"}],children:"Recording..."}),(0,i.tZ)(Z.hU,{alt:"Stop Recording",onClick:h,children:(0,i.tZ)(de.Z,{color:Z.TV.redStronger})})]}):(0,i.tZ)(Z.hU,{alt:"Record Keys",onClick:p,children:(0,i.tZ)(ye.Z,{})})}),(0,i.tZ)(Z.hU,{alt:"Clear Input",disabled:0===t.length,onClick:function(){var e;n(""),null===c||void 0===c||null===(e=c.current)||void 0===e||e.focus()},children:(0,i.tZ)(Ze.Z,{})})]}),l.length>0?(0,i.tZ)(Z.Tg,{css:Se.surface,elevated:!0,children:l.map((function(e,n){return(0,i.BX)(o.Fragment,{children:[n>0?(0,i.tZ)(Z.Tg,{elevated:!0,style:{height:1}}):null,(0,i.tZ)(ke,{command:e.original,filter:t})]},e.original.id)}))}):null]})}function Te(e){var t="You have unsaved changes";(0,o.useEffect)((function(){var n=function(e){return e.preventDefault(),e.returnValue=t,t};if(e)return window.addEventListener("beforeunload",n),function(){window.removeEventListener("beforeunload",n)}}),[e])}var Re=n(87459),_e=n(36067),Ie=[{value:"side-by-side",title:"side-by-side"},{value:"stacked",title:"stacked"}],Ge=[{value:10,title:"tiny"},{value:12,title:"small"},{value:14,title:"normal"},{value:18,title:"large"},{value:24,title:"huge"}],De=[{value:"spaces",title:"spaces"},{value:"tabs",title:"tabs"}],Pe=[{value:2,title:"2"},{value:4,title:"4"},{value:8,title:"8"}],Be=[{value:"default",title:"default"},{value:"emacs",title:"emacs"},{value:"vim",title:"vim"}],Ue=[{value:"none",title:"none"},{value:"soft",title:"soft wrap"}],Ae=[{value:"disabled",title:"disabled"},{value:"enabled",title:"enabled"}],Ne=[{value:"disabled",title:"disabled"},{value:"enabled",title:"enabled"}],Le=["cmdOrCtrlKey","altKey"].map((function(e){return{value:e,title:te.U[e]}})),Xe=[{value:"disabled",title:"disabled"},{value:"enabled",title:"enabled"}],Me=Z.KD.div;function Oe(){var e=(0,o.useState)(!1),t=e[0],n=e[1],r=(0,o.useState)(!1),l=r[0],s=r[1],u=(0,o.useRef)(!1);return(0,o.useEffect)((function(){u.current=!0;var e=setTimeout((function(){s(t)}),200);return function(){clearTimeout(e)}}),[t]),(0,i.BX)(Z.G7,{css:[Z.l0.rowWithGap(8),Z.l0.justify.start],onMouseEnter:function(){return n(!0)},onMouseLeave:function(){return n(!1)},children:[(0,i.tZ)(Z.xv,{children:"Code intelligence"}),(0,i.BX)(c.Z,{isOpen:l,onClickOutside:function(){return s(!1)},padding:8,children:[(0,i.tZ)(Me,{children:(0,i.tZ)(a.Z,{})}),(0,i.tZ)(Z.G7,{css:[Z.l0.maxWidth(240)],children:(0,i.BX)(Z.xv,{multiline:!0,children:["Code intelligence gives you autocomplete, helpful info, and hints as you type. See more"," ",(0,i.tZ)("a",{href:"https://replit.com/site/blog/intel",target:"_blank",rel:"noreferrer noopener",children:"here."})]})})]})]})}function We(e){var t=e.onBeforePreferencesUpdate,n=e.hideLayoutControl,a=e.className,c=(0,l.Z)(),u=c.preferences,d=c.update,f=(0,J.Vg)((0,ee.useRouter)()),h=(0,J.T3)(),v=function(){var e=(0,o.useState)(!1),t=e[0],n=e[1],r=(0,q.Z)(),i=(0,Y.Z)(),a=i.dotReplit,l=i.fs,c=(0,Q.Z)(),s=(0,$.n7)();return{reset:(0,o.useCallback)((0,H.Z)((function(){var e;return(0,V.__generator)(this,(function(t){switch(t.label){case 0:return n(!0),[4,(0,K.W)({fs:l,dotReplit:a,replId:r})];case 1:return e=t.sent().entrypoint,c.current?(n(!0),s({entrypoint:e}),[2]):[2]}}))})),[r,l,a,s,c]),reseting:t}}(),m=(0,E.P)({controlName:"flag-ws-keybindings"}),g=function(e){t&&t(e),Object.keys(e).forEach((function(t){var n=e[t];(0,s.j)(s.U3.SETTINGS_TOGGLED,{settingChanged:t,updatedValue:n})})),d(e)};return u?(0,i.BX)(Z.Tg,{className:a,background:"default",css:[Z.l0.p(16),Z.l0.colWithGap(32),{paddingBottom:"5em"}],children:[n?null:(0,i.tZ)(p,{id:"layout",title:"Default layout",children:(0,i.BX)(Z.G7,{css:[Z.l0.colWithGap(8)],children:[(0,i.tZ)(Z.Ph,{initialSelectedItem:Ie.find((function(e){return u.isLayoutStacked?"stacked"===e.value:"side-by-side"===e.value})),onChange:function(e){var t="stacked"===(null===e||void 0===e?void 0:e.value);g({isLayoutStacked:t})},items:(0,r.Z)(Ie)}),(0,i.tZ)(Z.zx,{iconLeft:v.reseting?(0,i.tZ)(b.Z,{}):(0,i.tZ)(z.Z,{}),text:"Reset layout",onClick:function(){v.reset()}})]})}),(0,i.tZ)(p,{id:"fontSize",title:"Font size",children:(0,i.tZ)(Z.Ph,{initialSelectedItem:Ge.find((function(e){return e.value===u.fontSize})),onChange:function(e){var t="number"===typeof(null===e||void 0===e?void 0:e.value)?e.value:14;g({fontSize:t})},items:(0,r.Z)(Ge)})}),(0,i.tZ)(p,{id:"indentType",title:"Indent type",children:(0,i.tZ)(Z.Ph,{initialSelectedItem:De.find((function(e){return e.value===(u.indentIsSpaces?"spaces":"tabs")})),onChange:function(e){var t="spaces"===(null===e||void 0===e?void 0:e.value);g({indentIsSpaces:t})},items:(0,r.Z)(De)})}),(0,i.tZ)(p,{id:"indentSize",title:"Indent size",children:(0,i.tZ)(Z.Ph,{initialSelectedItem:Pe.find((function(e){return e.value===u.indentSize})),onChange:function(e){var t="number"===typeof(null===e||void 0===e?void 0:e.value)?e.value:2;g({indentSize:t})},items:(0,r.Z)(Pe)})}),m&&!h?(0,i.tZ)(Ee,{}):null,(0,i.tZ)(p,{id:"keybinds",title:"Keybinds",children:(0,i.tZ)(Z.Ph,{initialSelectedItem:Be.find((function(e){return["vim","emacs"].includes(e.value)?e.value===u.keyboardHandler:"default"===e.value&&!u.keyboardHandler})),onChange:function(e){var t=["vim","emacs"].includes(e.value)?e.value:null;g({keyboardHandler:t})},items:(0,r.Z)(Be)})}),(0,i.tZ)(p,{id:"wrapping",title:"Wrapping",children:(0,i.tZ)(Z.Ph,{initialSelectedItem:Ue.find((function(e){return e.value===(u.wrapping?"soft":"none")})),onChange:function(e){var t="soft"===(null===e||void 0===e?void 0:e.value);g({wrapping:t})},items:(0,r.Z)(Ue)})}),(0,i.tZ)(j,{}),(0,i.tZ)(ae,{}),(0,i.tZ)(p,{id:"codeIntelligence",title:(0,i.tZ)(Oe,{}),children:(0,i.tZ)(Z.Ph,{initialSelectedItem:Xe.find((function(e){return e.value===(u.codeIntelligence?"enabled":"disabled")})),onChange:function(e){var t="enabled"===(null===e||void 0===e?void 0:e.value);g({codeIntelligence:t})},items:(0,r.Z)(Xe)})}),(0,i.tZ)(p,{id:"accessibleTerminal",title:(0,i.BX)(i.HY,{children:[(0,i.tZ)(Z.xv,{children:"Accessible Terminal Output"}),(0,i.tZ)(Z.xv,{css:[Z.l0.color.foregroundDimmest,Z.l0.pt(4)],multiline:!0,children:"Enable this setting to use a screen reader. Warning: this can affect performance."})]}),children:(0,i.tZ)(Z.Ph,{initialSelectedItem:Ne.find((function(e){return e.value===(u.accessibleTerminal?"enabled":"disabled")})),onChange:function(e){var t="enabled"===(null===e||void 0===e?void 0:e.value);g({accessibleTerminal:t})},items:(0,r.Z)(Ne)})}),(0,i.tZ)(p,{id:"multiselectModifier",title:(0,i.BX)(i.HY,{children:[(0,i.tZ)(Z.xv,{children:"Multiselect modifier key"}),(0,i.tZ)(Z.xv,{css:[Z.l0.color.foregroundDimmest,Z.l0.pt(4)],multiline:!0,children:"Modifier key for selecting multiple items in the filetree."})]}),children:(0,i.tZ)(Z.Ph,{initialSelectedItem:Le.find((function(e){return e.value===u.multiselectModifierKey})),onChange:function(e){g({multiselectModifierKey:e.value})},items:(0,r.Z)(Le)})}),(0,i.tZ)(p,{id:"webviewAutoOpenOnPortOpened",title:(0,i.tZ)(i.HY,{children:(0,i.tZ)(Z.xv,{children:"Automatically open Webview when a port is open"})}),children:(0,i.tZ)(Z.Ph,{initialSelectedItem:Ae.find((function(e){return e.value===(u.webviewAutoOpenOnPortOpened?"enabled":"disabled")})),onChange:function(e){var t="enabled"===(null===e||void 0===e?void 0:e.value);g({webviewAutoOpenOnPortOpened:t})},items:(0,r.Z)(Ae)})}),f?null:(0,i.tZ)(p,{id:"theme",title:"Theme",children:(0,i.tZ)(Re.Z,{context:_e.HY.WorkspacePreferencesPane})})]}):null}},61924:function(e,t,n){n.d(t,{BZ:function(){return R},HX:function(){return S},WM:function(){return G},ap:function(){return L},gF:function(){return B},l9:function(){return D},pr:function(){return M},vN:function(){return W},vi:function(){return A},zu:function(){return I}});var r=n(72006),i=n(43119),o=n(71440),a=n(90130),l=n(76057),c=n(92336),s=n(39227),u=n(58618),d=n(24615),f=n(53486),h=n(46653);function p(){var e=(0,i.Z)(["\n  fragment WorkspaceHeaderReplInfoRepl on Repl {\n    id\n    title\n    rawTemplateLabel: templateLabel(disableFallbackToTitle: true)\n    description\n    isPrivate\n    isRenamed\n    url\n    slug\n    workspaceCta\n    isAlwaysOn\n    isBoosted\n    hasGpu\n    lastPublishedAt\n    publishedAs\n    currentUserPermissions {\n      containerAttach\n      changeIconUrl\n      changeTemplateLabel\n      changeTitle\n      changeDescription\n      changePrivacy\n      delete\n      changeAlwaysOn\n      publish\n      fork\n    }\n    user {\n      id\n      image\n      ...UserLinkUser\n    }\n    ...WorkspaceHeaderReplMetadataRepl\n    ...ReplEnvironmentWebviewRepl\n    ...PublishReleaseFormRepl\n    ...PowerUpActionsMultiBoostToggle\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return p=function(){return e},e}function v(){var e=(0,i.Z)(["\n  fragment ReplPowerUpCosts on Repl {\n    id\n    powerUpCosts {\n      ... on PowerUpCostsType {\n        boost {\n          cycles\n          explanation\n        }\n        alwaysOn {\n          cycles\n          explanation\n        }\n        gpu {\n          cycles\n          explanation\n        }\n      }\n    }\n  }\n"]);return v=function(){return e},e}function m(){var e=(0,i.Z)(["\n  query WorkspaceHeaderReplInfo($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        ...WorkspaceHeaderReplInfoRepl\n      }\n    }\n  }\n  ","\n"]);return m=function(){return e},e}function g(){var e=(0,i.Z)(["\n  query CurrentUserStates {\n    currentUser {\n      __typename\n      ... on CurrentUser {\n        id\n        userSubscriptionType\n      }\n    }\n  }\n"]);return g=function(){return e},e}function Z(){var e=(0,i.Z)(["\n  query ReplPowerUpStatus($replId: String!) {\n    currentUser {\n      __typename\n      ... on CurrentUser {\n        id\n        userPowerUpsByType {\n          ... on UserPowerUpsTypes {\n            privateRepls {\n              active\n              cost {\n                cycles\n                explanation\n              }\n            }\n          }\n        }\n      }\n    }\n    repl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        ...ReplPowerUpCosts\n      }\n    }\n  }\n  ","\n"]);return Z=function(){return e},e}function y(){var e=(0,i.Z)(["\n  mutation WorkspaceHeaderReplInfoUnpublishTemplate(\n    $input: DeleteReplDeploymentInput!\n  ) {\n    deleteReplDeployment(input: $input) {\n      ... on Repl {\n        id\n        ...PublishReplData\n      }\n    }\n  }\n  ","\n"]);return y=function(){return e},e}function b(){var e=(0,i.Z)(["\n  mutation WorkspaceHeaderReplInfoUpdateRepl($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...WorkspaceHeaderReplInfoRepl\n      }\n    }\n  }\n  ","\n"]);return b=function(){return e},e}function w(){var e=(0,i.Z)(["\n  mutation WorkspaceHeaderReplInfoDeleteRepl($id: String!) {\n    deleteRepl(id: $id) {\n      id\n    }\n  }\n"]);return w=function(){return e},e}function x(){var e=(0,i.Z)(["\n  mutation WorkspaceHeaderReplInfoSetAlwaysOn(\n    $replId: ID!\n    $enabled: Boolean!\n  ) {\n    setAlwaysOn(replId: $replId, enabled: $enabled) {\n      ... on Repl {\n        id\n        ...WorkspaceHeaderReplInfoRepl\n        ...ReplPowerUpCosts\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n  ","\n"]);return x=function(){return e},e}function C(){var e=(0,i.Z)(["\n  mutation WorkspaceHeaderReplInfoSetGpu($replId: ID!, $enabled: Boolean!) {\n    setGpu(replId: $replId, enabled: $enabled) {\n      ... on Repl {\n        id\n        ...WorkspaceHeaderReplInfoRepl\n        ...ReplPowerUpCosts\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n  ","\n"]);return C=function(){return e},e}var k={},S=(0,o.Ps)(p(),a._,l.s,c.sY,s.wd,u.qo),E=(0,o.Ps)(v()),T=(0,o.Ps)(m(),S);function R(e){var t=(0,r.Z)({},k,e);return f.a(T,t)}var _=(0,o.Ps)(g());function I(e){var t=(0,r.Z)({},k,e);return f.a(_,t)}var G=(0,o.Ps)(Z(),E);function D(e){var t=(0,r.Z)({},k,e);return f.a(G,t)}var P=(0,o.Ps)(y(),d.FW);function B(e){var t=(0,r.Z)({},k,e);return h.D(P,t)}var U=(0,o.Ps)(b(),S);function A(e){var t=(0,r.Z)({},k,e);return h.D(U,t)}var N=(0,o.Ps)(w());function L(e){var t=(0,r.Z)({},k,e);return h.D(N,t)}var X=(0,o.Ps)(x(),S,E);function M(e){var t=(0,r.Z)({},k,e);return h.D(X,t)}var O=(0,o.Ps)(C(),S,E);function W(e){var t=(0,r.Z)({},k,e);return h.D(O,t)}},36611:function(e,t,n){n.d(t,{Z:function(){return Vt}});var r=n(57135),i=n(72006),o=n(4405),a=n(2272),l=n(96583),c=n(94660),s=n(29356),u=n.n(s),d=n(88254),f=n(59496),h=n(51716),p=n(80772),v=n(84197),m=n(73728),g=n(79960),Z=n(3289),y=n(85910),b=n(73415),w=n(93658),x=n(14e3),C=n(12922),k=n(65292),S=n(26303),E=n(99340),T=n(79351),R=n(5885),_=n(77564),I=n(18873),G=n(48030),D=n(10063),P=n(79900),B=n(86216),U=n(67724),A=n(18963),N=n(89916),L=n(81935),X=n(61129),M=n(58530),O=n(56574);function W(e){var t=e.amount,n=e.includeUsd,r=e.variant,i=e.color,o=void 0===i?"default":i,a=(0,X.$E)(t),l=(0,X.H2)(t);return(0,c.BX)(M.G7,{css:[M.l0.rowWithGap(2),M.l0.align.center],children:[(0,c.tZ)(O.Z,{size:"small"===r?12:16,css:[M.KA[o]]}),(0,c.BX)(M.xv,{variant:r,color:o,children:[l,n?" (".concat(a,")"):""]})]})}var F=n(74296),j={boost_2cpu_2ram:F.s2.Boost_2cpu_2ram,boost_4cpu_4ram:F.s2.Boost_4cpu_4ram,boost_8cpu_8ram:F.s2.Boost_8cpu_8ram,boost_16cpu_16ram:F.s2.Boost_16cpu_16ram},z=n(35268),H=n(65782),V=n(24880),q=n(69694),$=n(5581),Y=n(43119),K=n(71440),Q=n(33109);function J(){var e=(0,Y.Z)(["\n  query GetReplitCheckoutSession($input: GetReplitCheckoutSessionInput!) {\n    getReplitCheckoutSession(input: $input) {\n      ... on ReplitCheckoutSession {\n        status\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n"]);return J=function(){return e},e}var ee={},te=(0,K.Ps)(J());var ne=[F.rf.PaymentFailed,F.rf.CyclesProvisioningFailed,F.rf.ProductProvisioningFailed];function re(){var e=(0,a.Z)(function(e){var t=(0,i.Z)({},ee,e);return Q.t(te,t)}(),2),t=e[0],n=e[1].stopPolling;return(0,f.useEffect)((function(){return function(){n()}}),[n]),{startPolling:(0,f.useCallback)((function(e){var r=e.checkoutSessionId,i=e.pollInterval,o=void 0===i?1e3:i,a=e.onSucceeded,l=e.onFailed,c=e.onError;n(),t({variables:{input:{id:r}},pollInterval:o,onCompleted:function(e){"ReplitCheckoutSession"===e.getReplitCheckoutSession.__typename?e.getReplitCheckoutSession.status===F.rf.Succeeded?(n(),a()):ne.includes(e.getReplitCheckoutSession.status)&&(n(),l(e.getReplitCheckoutSession.status)):"NotFoundError"===e.getReplitCheckoutSession.__typename||"UnauthorizedError"===e.getReplitCheckoutSession.__typename?(n(),c(e.getReplitCheckoutSession.message)):(n(),d.$e((function(t){t.setExtra("data",e),d.Tb(new Error("Unexpected response when polling Replit checkout session"))})),c("Unexpected response. Please try again."))},onError:function(e){n(),c(e.message)}})}),[n,t])}}var ie=n(67433),oe=n(46653);function ae(){var e=(0,Y.Z)(["\n  mutation CreateReplitOneTimeCheckoutSession(\n    $input: CreateReplitOneTimeCheckoutSessionInput!\n  ) {\n    createReplitOneTimeCheckoutSession(input: $input) {\n      ... on CreateReplitOneTimeCheckoutSessionResult {\n        checkoutSession {\n          id\n          status\n        }\n        clientSecret\n        currentUser {\n          id\n          paymentMethod {\n            ... on PaymentMethod {\n              ...UserPaymentMethod\n            }\n          }\n          cyclesAutoRefillConfiguration {\n            ... on CyclesAutoRefillConfiguration {\n              ...AutoRefillConfig\n            }\n          }\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on PaymentError {\n        message\n      }\n    }\n  }\n  ","\n  ","\n"]);return ae=function(){return e},e}var le={},ce=(0,K.Ps)(ae(),ie.P,ie.L);var se=(0,A.J)("pk_live_515YpNsJAmnYVOvfnsBqRdATWS6SzbNAslOz1z2tujdKuvRMDAwWMeFXp6dJL1YKRrQjB0WAp0UDGwlFYL7hxw7Fc00QkfxBFsL");function ue(e){var t=e.cycles,n=e.description;return(0,c.BX)(M.G7,{css:[M.l0.rowWithGap(8),M.l0.align.center],children:[(0,c.tZ)(M.xv,{color:"dimmest",children:n}),(0,c.tZ)(M.RX,{}),(0,c.tZ)(W,{amount:t,includeUsd:!1,color:"dimmest"})]})}var de=(0,M.Xb)({iconBackground:[M.l0.width(40),M.l0.height(40),M.l0.borderRadius(8),M.l0.justify.center,M.l0.align.center,M.l0.backgroundColor.blueDimmer],loadingContainer:[M.l0.justify.center,M.l0.align.center,M.l0.minHeight(80)]});function fe(e){var t=e.powerUpCategory,n=e.cyclesCost,r=e.description,i=P.S0[t];return(0,c.tZ)(M.G7,{css:[M.l0.colWithGap(16)],children:(0,c.BX)(M.G7,{css:[M.l0.flex.row,M.l0.justify.spaceBetween],children:[(0,c.BX)(M.G7,{css:[M.l0.rowWithGap(8),M.l0.align.center],children:[(0,c.tZ)(M.G7,{css:de.iconBackground,children:(0,c.tZ)(i.iconComponent,{size:24})}),(0,c.BX)(M.G7,{css:[M.l0.px(8),M.l0.py(2),M.l0.colWithGap(8),M.l0.justify.spaceBetween],children:[(0,c.tZ)(M.xv,{variant:"subheadDefault",children:i.name}),(0,c.tZ)(M.xv,{variant:"small",color:"dimmer",children:r})]})]}),(0,c.BX)(M.G7,{css:[M.l0.px(8),M.l0.py(2),M.l0.colWithGap(8),M.l0.justify.spaceBetween,M.l0.align.end],children:[(0,c.tZ)(W,{amount:n,includeUsd:!0}),(0,c.BX)(M.xv,{variant:"small",color:"dimmer",children:["per / ",i.orderDuration]})]})]})})}function he(e){return(0,c.tZ)(U.Elements,{stripe:se,children:(0,c.tZ)(pe,(0,i.Z)({},e))})}function pe(e){var t=e.product,n=e.goToCheckoutSuccess,s=e.goToNewPaymentMethodForm,u=(0,U.useStripe)(),d=(0,w.Z)({forceFetch:!0}),h=d.cycles,p=d.loading,v=(0,z.Q)(),m=v.paymentMethod,g=v.loading,Z=P.S0[t.powerUpCategory],y=Z.description,b=t.cyclesCostNow,x=(0,f.useState)(null),C=x[0],k=x[1],S=(0,f.useState)(!1),E=S[0],T=S[1],R=(0,a.Z)(function(e){var t=(0,i.Z)({},le,e);return oe.D(ce,t)}(),1)[0],_=re().startPolling,I=(0,N.k)(),G=I.autoRefillEnabled,D=I.autoRefillRefillAmount,B=I.autoRefillMonthlyBudget,A=I.autoRefillHasError,X=I.autoRefillHasChanged,O=I.cardAutoRefillPreferencesProps,W=function(e){var t=e.productCost,n=e.autoRefillEnabled,r=e.cyclesBalance;if(t<=r)return{cyclesToBePurchased:0,cyclesBalanceAfterUpgrade:r,excessPurchaseExplanation:"no-purchase"};var i,o=t-r,a="no-excess";o>=$.gp?(i=o,a="no-excess"):(i=$.gp,a="minimum");var l=r+i-t;if(n&&(0,$.CH)(l)){var c=$.aJ-l;i+=c,a="auto-refill",l+=c}return{cyclesToBePurchased:i,cyclesBalanceAfterUpgrade:l,excessPurchaseExplanation:a}}({productCost:t.cyclesCostNow,autoRefillEnabled:G,cyclesBalance:null!==h&&void 0!==h?h:0}),F="This will purchase ".concat(W.cyclesToBePurchased.toLocaleString()," Cycles for ").concat((0,$.qJ)(W.cyclesToBePurchased)," and activate your ").concat(Z.name,".");"minimum"===W.excessPurchaseExplanation?F="This will purchase the minimum purchase amount of ".concat(W.cyclesToBePurchased.toLocaleString()," Cycles for ").concat((0,$.qJ)(W.cyclesToBePurchased)," and activate your ").concat(Z.name,"."):"auto-refill"===W.excessPurchaseExplanation&&(F="This will purchase Cycles for the upgrade and Auto-Refill, a total of ".concat(W.cyclesToBePurchased.toLocaleString()," Cycles for ").concat((0,$.qJ)(W.cyclesToBePurchased)," and activate your ").concat(Z.name,"."));var Y="Purchase ".concat(W.cyclesToBePurchased.toLocaleString()," Cycles & Upgrade ").concat(Z.name),K=function(){var e=(0,r.Z)((function(){var e,r,i,o,a,c;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:if(T(!0),null==m)throw new Error("paymentMethod is null");if(null==u)throw new Error("stripe is null");return[4,R({variables:{input:{cyclesQuantity:W.cyclesToBePurchased,postPurchasePowerUp:{replPowerUp:{replId:t.replId,sku:j[t.powerUpSku]}},cyclesAutoRefillConfiguration:X?{enabled:G,refillAmount:D,monthlyBudget:B}:null}}})];case 1:return e=l.sent(),r=e.data,(i=e.errors)?(k(i[0].message),T(!1),[2]):"UserError"===(null===(o=null===r||void 0===r?void 0:r.createReplitOneTimeCheckoutSession)||void 0===o?void 0:o.__typename)||"UnauthorizedError"===(null===o||void 0===o?void 0:o.__typename)||"PaymentError"===(null===o||void 0===o?void 0:o.__typename)?(k(o.message),T(!1),[2]):"CreateReplitOneTimeCheckoutSessionResult"!==(null===o||void 0===o?void 0:o.__typename)?(k("An error occurred. Please try again."),T(!1),[2]):[4,u.confirmCardPayment(o.clientSecret)];case 2:return(a=l.sent().error)?(k(null!==(c=a.message)&&void 0!==c?c:"An error occurred. Please try again."),T(!1),[2]):(_({checkoutSessionId:o.checkoutSession.id,onSucceeded:function(){return n(t)},onFailed:function(){k("Payment failed. Please try again."),T(!1)},onError:function(e){k(e),T(!1)}}),[2])}}))}));return function(){return e.apply(this,arguments)}}(),Q=g||p||null==h,J=null!=m&&!Q&&!E;return(0,c.tZ)(U.Elements,{stripe:se,children:(0,c.BX)(M.G7,{css:[M.l0.colWithGap(16)],children:[(0,c.tZ)(fe,{powerUpCategory:t.powerUpCategory,cyclesCost:b,description:y}),(0,c.tZ)(M.RX,{}),Q?(0,c.tZ)(M.G7,{css:de.loadingContainer,children:(0,c.tZ)(V.Z,{})}):(0,c.tZ)(M.G7,{css:[M.l0.colWithGap(12),M.l0.align.start],children:null==m?(0,c.BX)(c.HY,{children:[(0,c.tZ)(M.zx,{iconLeft:(0,c.tZ)(q.Z,{}),text:"Add Payment Method",small:!0,onClick:s}),(0,c.tZ)(M.xv,{color:"dimmer",multiline:!0,variant:"small",children:"Adding a payment method can ensure your power-ups never get disabled when you run out of Cycles."})]}):(0,c.tZ)(c.HY,{children:(0,c.tZ)(M.G7,{css:[M.l0.colWithGap(16)],children:(0,c.BX)(M.G7,{css:[M.l0.colWithGap(4)],children:[(0,c.BX)(M.G7,{css:[M.l0.rowWithGap(8),M.l0.align.center],children:[(0,c.tZ)(M.hU,{alt:"Update Payment Method",onClick:s,children:(0,c.tZ)(H.Z,{})}),(0,c.tZ)(L.R,{last4:m.last4})]}),(0,c.tZ)(M.G7,{css:[M.l0.pl(24),M.l0.pr(16),M.l0.colWithGap(8)],children:(0,c.tZ)(N.O,(0,o.Z)((0,i.Z)({},O),{loading:O.loading||E,showSaveButton:!1}))})]})})})}),(0,c.tZ)(M.RX,{}),(0,c.tZ)(M.xv,{multiline:!0,variant:"small",css:[M.l0.color.foregroundDimmer],children:F}),(0,c.tZ)(M.zx,{colorway:"primary",text:Y,big:!0,onClick:K,disabled:!J||A}),null!=C?(0,c.tZ)(M.xv,{css:[M.l0.color.accentNegativeDefault],children:C}):null,(0,c.BX)(M.G7,{css:[M.l0.colWithGap(4)],children:[(0,c.tZ)(ue,{description:"Cycles balance after purchase",cycles:W.cyclesToBePurchased}),(0,c.tZ)(ue,{description:"1st ".concat(Z.orderDuration," of ").concat(Z.name),cycles:-1*t.cyclesCostNow}),(0,c.tZ)(ue,{description:"Cycles balance after upgrade",cycles:W.cyclesBalanceAfterUpgrade})]})]})})}var ve=n(53486);function me(){var e=(0,Y.Z)(["\n  query CheckOutSuccess {\n    currentUser {\n      id\n      cyclesAutoRefillConfiguration {\n        ... on CyclesAutoRefillConfiguration {\n          id\n          enabled\n          refillAmount\n          monthlyBudget\n        }\n        ... on UnauthorizedError {\n          message\n        }\n      }\n    }\n  }\n"]);return me=function(){return e},e}var ge={},Ze=(0,K.Ps)(me());var ye=n(18948),be=n(69735);function we(e){var t=e.autoRefillEnabled;return e.loadingAutoRefill?"...":t?"on":"off"}var xe=(0,M.Xb)({powerUpIconBackground:[M.l0.width(32),M.l0.height(32),M.l0.borderRadius(8),M.l0.justify.center,M.l0.align.center,M.l0.backgroundColor.blueDimmer],autoRefillIconBackground:[M.l0.width(32),M.l0.height(32),M.l0.borderRadius(8),M.l0.justify.center,M.l0.align.center,M.l0.backgroundColor.greyDimmer]});function Ce(e){var t,n,r=e.product,o=e.goToCardPreferences,a=e.goToPowerUpDetails,l=(0,w.Z)({forceFetch:!0}).cycles,s=function(e){var t=(0,i.Z)({},ge,e);return ve.a(Ze,t)}(),u=s.data,d=s.loading,f="CyclesAutoRefillConfiguration"===(null===u||void 0===u||null===(t=u.currentUser)||void 0===t||null===(n=t.cyclesAutoRefillConfiguration)||void 0===n?void 0:n.__typename)?u.currentUser.cyclesAutoRefillConfiguration:null,h=Boolean(null===f||void 0===f?void 0:f.enabled),p=P.S0[r.powerUpCategory],v=P.$[r.powerUpSku];return(0,c.BX)(M.G7,{css:[M.l0.colWithGap(16)],children:[(0,c.BX)(M.G7,{css:[M.l0.rowWithGap(8),M.l0.justify.spaceBetween,M.l0.align.center],children:[(0,c.BX)(M.G7,{css:[M.l0.rowWithGap(8),M.l0.align.center],children:[(0,c.tZ)(M.G7,{css:xe.powerUpIconBackground,children:(0,c.tZ)(p.iconComponent,{size:20})}),(0,c.BX)(M.G7,{css:[M.l0.colWithGap(8),M.l0.justify.spaceBetween],children:[(0,c.BX)(M.xv,{children:[p.name," Activated"]}),(0,c.BX)(M.G7,{css:M.l0.rowWithGap(8),children:[(0,c.BX)(M.xv,{variant:"small",color:"dimmer",children:[v.provisionDescription," "]}),(0,c.BX)(M.G7,{css:[M.l0.rowWithGap(4)],children:[(0,c.tZ)(W,{amount:$.z4[r.powerUpSku],includeUsd:!0,variant:"small",color:"dimmer"}),(0,c.BX)(M.xv,{variant:"small",color:"dimmer",children:["/ ",p.orderDuration]})]})]})]})]}),(0,c.tZ)(M.xv,{children:(0,c.tZ)("a",{role:"button",tabIndex:0,onKeyDown:function(){return a(r.powerUpCategory)},onClick:function(){return a(r.powerUpCategory)},css:[M.l0.color.foregroundDimmer,{textDecoration:"underline"}],children:"Edit"})})]}),(0,c.BX)(M.G7,{css:[M.l0.rowWithGap(8),M.l0.justify.spaceBetween,M.l0.align.center],children:[(0,c.BX)(M.G7,{css:[M.l0.rowWithGap(8),M.l0.align.center],children:[(0,c.tZ)(M.G7,{css:xe.autoRefillIconBackground,children:(0,c.tZ)(ye.Z,{size:20})}),(0,c.BX)(M.G7,{css:[M.l0.colWithGap(8),M.l0.justify.spaceBetween],children:[(0,c.BX)(M.xv,{children:["Auto-refill is"," ",we({autoRefillEnabled:h,loadingAutoRefill:d})]}),(0,c.tZ)(M.G7,{css:M.l0.rowWithGap(4),children:null==l?(0,c.tZ)(V.Z,{}):(0,c.BX)(c.HY,{children:[(0,c.tZ)(W,{amount:l,includeUsd:!1,variant:"small",color:"dimmer"}),(0,c.tZ)(M.xv,{variant:"small",color:"dimmer",children:"left"})]})})]})]}),(0,c.tZ)(M.xv,{children:(0,c.tZ)("a",{role:"button",tabIndex:0,onKeyDown:o,onClick:o,css:[M.l0.color.foregroundDimmer,{textDecoration:"underline"}],children:"Edit"})})]}),d||h?null:(0,c.tZ)(M.E_,{colorway:"warning",icon:(0,c.tZ)(be.Z,{}),text:"Add a payment method and enable auto-refill to prevent your ".concat(p.name," Power Up from being disabled when you run out of Cycles.")})]})}var ke=n(83550),Se=n(58868),Ee=n(56152),Te=n(61262),Re=n(22128);function _e(e){var t=e.powerUpCategory,n=e.goToCheckout,r=e.goToCheckoutSuccess;if("boost"===t)return(0,c.tZ)(Re.Z,{isCheckoutFlow:!0,powerUp:t,onPowerUpUpdated:r,onBuyMoreCycles:n,context:"repl_resources"});throw new Error("Unknown power up category: ".concat(t))}function Ie(e){var t=e.title,n=e.children,r=e.goBack,i=e.canGoBack,o=e.allowBack,a=void 0===o||o;return(0,c.BX)(c.HY,{children:[(0,c.BX)(M.G7,{css:[M.l0.rowWithGap(8),M.l0.p(12),M.l0.align.center],children:[a&&i?(0,c.tZ)(M.hU,{alt:"Back",onClick:function(){return r()},children:(0,c.tZ)(Se.ArrowLeft,{})}):null,"string"===typeof t?(0,c.tZ)(M.xv,{variant:"subheadDefault",children:t}):t]}),(0,c.tZ)(M.RX,{}),(0,c.tZ)(M.G7,{css:[M.l0.colWithGap(8),M.l0.p(12)],children:n})]})}function Ge(e){var t=e.currentStep,n=e.goBack,r=e.canGoBack,i=e.goTo;switch(t.step){case"power_up_details":var o=t.powerUpCategory,a=P.S0[o];return(0,c.tZ)(Ie,{goBack:n,canGoBack:r,title:a.name,children:(0,c.tZ)(_e,{powerUpCategory:o,goToCheckout:function(e){i({step:"checkout",product:e})},goToCheckoutSuccess:function(e){i({step:"checkout_success",product:e})}})});case"checkout":return(0,c.tZ)(Ie,{goBack:n,canGoBack:r,title:"Checkout",children:(0,c.tZ)(he,{product:t.product,goToCheckoutSuccess:function(e){i({step:"checkout_success",product:e})},goToNewPaymentMethodForm:function(){return i({step:"new_payment_method_form"})}})});case"checkout_success":return(0,c.tZ)(Ie,{goBack:n,canGoBack:r,allowBack:!1,title:(0,c.BX)(M.G7,{css:[M.l0.rowWithGap(8),M.l0.align.center],children:[(0,c.tZ)(Ee.Z,{color:M.TV.accentPositiveStronger}),(0,c.tZ)(M.xv,{variant:"subheadDefault",css:[M.l0.color.accentPositiveStronger],children:"Success"})]}),children:(0,c.tZ)(Ce,{product:t.product,goToCardPreferences:function(){return i({step:"card_preferences"})},goToPowerUpDetails:function(e){return i({step:"power_up_details",powerUpCategory:e})}})});case"card_preferences":return(0,c.tZ)(Ie,{goBack:n,canGoBack:r,title:"Card Preferences",children:(0,c.tZ)(B.t,{goToNewPaymentMethodForm:function(){return i({step:"new_payment_method_form"})}})});case"new_payment_method_form":return(0,c.tZ)(Ie,{goBack:n,canGoBack:r,title:"Update Payment Method",children:(0,c.tZ)(ke.q,{onSuccess:function(){return r&&n()}})});case"not_shown":throw new Error("This step should never be rendered");default:(0,Te.Z)(t)}}var De=n(63499),Pe=n(39307),Be=n(63517),Ue=n(27218),Ae=n(87392),Ne=n(2292);function Le(){var e=(0,Y.Z)(["\n  fragment SetStorageCapacityRepl on Repl {\n    id\n    storageCapacity {\n      ... on StorageCapacity {\n        value\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return Le=function(){return e},e}function Xe(){var e=(0,Y.Z)(["\n  mutation SetStorageCapacitySetStorageCapacity(\n    $input: SetStorageCapacityInput!\n  ) {\n    setStorageCapacity(input: $input) {\n      ... on Repl {\n        id\n        ...SetStorageCapacityRepl\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n"]);return Xe=function(){return e},e}function Me(){var e=(0,Y.Z)(["\n  query SetStorageCapacityReplById($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        ...SetStorageCapacityRepl\n      }\n    }\n  }\n  ","\n"]);return Me=function(){return e},e}var Oe={},We=(0,K.Ps)(Le()),Fe=(0,K.Ps)(Xe(),We);var je=(0,K.Ps)(Me(),We);var ze=n(66091),He=function(){function e(){(0,ze.Z)(this,e)}return e.fromTier=function(e){switch(e){case 0:return F.xl.Standard;case 1:return F.xl.TwoGigs;case 2:return F.xl.FourGigs;case 3:return F.xl.EightGigs;case 4:return F.xl.SixteenGigs;case 5:return F.xl.ThirtyTwoGigs;case 6:return F.xl.SixtyFourGigs;default:(0,Te.Z)(e)}},e.toTier=function(e){switch(e){case F.xl.Standard:return 0;case F.xl.TwoGigs:return 1;case F.xl.FourGigs:return 2;case F.xl.EightGigs:return 3;case F.xl.SixteenGigs:return 4;case F.xl.ThirtyTwoGigs:return 5;case F.xl.SixtyFourGigs:return 6;default:(0,Te.Z)(e)}},e.toGb=function(t){return"number"===typeof t?e.toGb(e.fromTier(t)):Math.pow(2,e.toTier(t))},e}(),Ve=function(e,t){return e<t?"Downgrade":"Upgrade"};var qe=n(5109),$e=(0,qe.cn)(F.xl.Standard),Ye=(0,qe.cn)(0),Ke=n(99852),Qe=(0,M.Xb)({self:[M.l0.colWithGap(8),M.l0.py(12)],datalist:[M.l0.display.none],labelWrapper:[M.l0.flex.row,M.l0.justify.spaceBetween],labels:[M.l0.fontWeight.medium],input:[M.l0.color.foregroundDimmer,M.l0.height(8),{cursor:"grabbing"}]}),Je=function(){var e=(0,qe.Dv)(Ye),t=(0,qe.b9)(Ye);return(0,c.BX)(M.G7,{css:Qe.self,children:[(0,c.BX)(M.G7,{css:Qe.labelWrapper,children:[(0,c.tZ)(M.xv,{css:Qe.labels,color:"dimmer",children:"1GB"}),(0,c.BX)(M.xv,{css:Qe.labels,children:[He.toGb(e),"GB"]}),(0,c.tZ)(M.xv,{css:Qe.labels,color:"dimmer",children:"64GB"})]}),(0,c.tZ)("input",{value:e,css:Qe.input,type:"range",list:"steplist",min:"0",max:"6",step:"1",onChange:function(e){var n=e.target.value,r=parseInt(n,10);!isNaN(r)&&function(e){return e>=0&&e<=6}(r)&&t(r)}}),(0,c.BX)("datalist",{id:"steplist",css:Qe.datalist,children:[(0,c.tZ)(M.G7,{tag:"option",value:"0",label:"1 GB"}),(0,c.tZ)(M.G7,{tag:"option",value:"1",label:"2 GB"}),(0,c.tZ)(M.G7,{tag:"option",value:"2",label:"4 GB"}),(0,c.tZ)(M.G7,{tag:"option",value:"3",label:"8 GB"}),(0,c.tZ)(M.G7,{tag:"option",value:"4",label:"16 GB"}),(0,c.tZ)(M.G7,{tag:"option",value:"5",label:"32 GB"}),(0,c.tZ)(M.G7,{tag:"option",value:"6",label:"64 GB"})]})]})},et=(0,M.Xb)({self:[M.l0.flex.column],content:[M.l0.p(12),M.l0.colWithGap(24)],header:[M.l0.p(12),M.l0.rowWithGap(8),M.l0.justify.start,M.l0.border({color:M.TV.outlineDefault,width:1,style:"solid",direction:"bottom"})],actions:[M.l0.colWithGap(8)]}),tt=function(e){var t=e.isOpen,n=e.onRequestClose,o=(0,T.Z)(),s=(0,S.Z)(),u=(0,E.Z)().showError,h=(0,qe.Dv)($e),p=(0,qe.Dv)(Ye),v=(0,a.Z)(f.useState(!1),2),m=v[0],g=v[1];f.useEffect((function(){t||g(!1)}),[t,g]);var Z=(0,a.Z)(function(e){var t=(0,i.Z)({},Oe,e);return oe.D(Fe,t)}({onCompleted:function(){var e=(0,r.Z)((function(e){var t;return(0,l.__generator)(this,(function(r){switch(r.label){case 0:if("UserError"===e.setStorageCapacity.__typename||"NotFoundError"===e.setStorageCapacity.__typename||"UnauthorizedError"===e.setStorageCapacity.__typename)return u(e.setStorageCapacity.message),[2];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,(0,Ke.Z)(o)];case 2:return r.sent(),[3,4];case 3:return t=r.sent(),d.Tb(t),s.current?(u("Something went wrong when updating the storage for your Repl. Please refresh or try again."),[3,4]):[2];case 4:return g(!0),[4,new Promise((function(e){return setTimeout(e,3e3)}))];case 5:return r.sent(),n(),g(!1),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),onError:function(e){d.Tb(e),u((0,I.Z)(e.message))}}),2),y=Z[0],b=Z[1].loading,w=p===He.toTier(h)&&!m,x=m?function(e,t){var n=He.toTier(t),r=Ve(e,n);return"Storage ".concat(r,"d to ").concat(He.toGb(e),"GB")}(p,h):function(e,t){var n=He.toTier(t),r=Ve(e,n);return"".concat(r," Storage to ").concat(He.toGb(e),"GB")}(p,h);return(0,c.tZ)(M.u_,{noPadding:!0,isOpen:t,onRequestClose:n,hideCloseButton:!0,children:(0,c.BX)(M.G7,{css:et.self,children:[(0,c.BX)(M.G7,{css:et.header,children:[(0,c.tZ)(Se.Disk,{size:16}),(0,c.tZ)(M.xv,{variant:"subheadDefault",children:"Repl Storage"})]}),(0,c.BX)(M.G7,{css:et.content,children:[(0,c.tZ)(Je,{}),(0,c.BX)(M.G7,{css:et.actions,children:[(0,c.tZ)(M.E_,{icon:(0,c.tZ)(Se.Warning,{}),colorway:"orange",text:"This is an internal prototype for dogfooding Infinity Drive. The public-facing product will be an account-level powerup and will not be available for individual repls."}),(0,c.tZ)(M.zx,{disabled:b||w,iconLeft:(0,c.tZ)(Se.Check,{}),text:w?"This is your current storage limit":x,onClick:function(){b||y({variables:{input:{replId:o,storageCapacity:He.fromTier(p)}}})},colorway:m?"positive":"primary"}),(0,c.tZ)(M.zx,{text:"Cancel",disabled:b||m,onClick:n})]})]})]})})},nt=n(12512),rt=n(51868),it=n(96209),ot=n(63012),at=n(13168),lt=n(54703),ct=n(44135),st=n(61924),ut=n(26807),dt=n(28257),ft=n(96473),ht=n(79460),pt=n(9302),vt=n(85510),mt=n(55262);function gt(e){var t=f.useRef(null),n=(0,a.Z)(f.useState(e.value),2),r=n[0],i=n[1],o=(0,a.Z)(f.useState(null),2),l=o[0],s=o[1],d=(0,ft.Z)({onUpload:function(t){var n=t.url;e.onChange(n)},onUploadPreview:function(e){var t=e.dataUrl;i(t)},onError:function(e){s(e.message)}});f.useEffect((function(){i(e.value)}),[e.value]);var h=null===r||void 0===r?void 0:r.startsWith("data:"),p=32;return(0,c.BX)(ht.gC,{spacing:"var(--space-4)",children:[(0,c.BX)("div",{onClick:function(){var e;null===(e=t.current)||void 0===e||e.click()},"aria-label":r?"Change icon":"Upload an icon","data-microtip-position":"right",role:"tooltip",className:u().dynamic([["5de27f185cb9bc33",[p,p]]])+" "+((r?"update-icon":"add-icon")||""),children:[r?(0,c.BX)(c.HY,{children:[(0,c.tZ)(dt.Z,{iconUrl:r,size:p,alt:"icon"}),h?(0,c.tZ)("div",{className:u().dynamic([["5de27f185cb9bc33",[p,p]]])+" loading-state",children:(0,c.tZ)("div",{className:u().dynamic([["5de27f185cb9bc33",[p,p]]])+" loading-icon",children:(0,c.tZ)(V.Z,{})})}):(0,c.tZ)("div",{className:u().dynamic([["5de27f185cb9bc33",[p,p]]])+" hover-state",children:(0,c.tZ)(H.Z,{})})]}):(0,c.tZ)(pt.Z,{}),(0,c.tZ)("input",{ref:t,accept:vt.W9.join(","),type:"file",onChange:function(e){var t=e.target,n=t.validity,r=t.files;n.valid&&(null===r||void 0===r?void 0:r.length)&&(s(null),d.uploadImage(r[0],mt.N.TemplateIcon))},className:u().dynamic([["5de27f185cb9bc33",[p,p]]])})]}),l?(0,c.tZ)("div",{className:u().dynamic([["5de27f185cb9bc33",[p,p]]])+" error",children:l}):null,(0,c.tZ)(u(),{id:"5de27f185cb9bc33",dynamic:[p,p],children:".add-icon.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;border:1px dashed var(--foreground-dimmest);background-color:var(--background-root);width:".concat(p,"px;height:").concat(p,"px}.add-icon.__jsx-style-dynamic-selector:hover{color:var(--accent-primary-default);border-color:var(--accent-primary-default)}.add-icon.__jsx-style-dynamic-selector,.update-icon.__jsx-style-dynamic-selector{position:relative;cursor:pointer;background-color:var(--background-higher);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);padding:2px}.update-icon.__jsx-style-dynamic-selector:hover .hover-state.__jsx-style-dynamic-selector{opacity:.8}.hover-state.__jsx-style-dynamic-selector{opacity:0}.loading-state.__jsx-style-dynamic-selector{opacity:.8}.loading-icon.__jsx-style-dynamic-selector{-webkit-animation:rotate 1s linear infinite;-moz-animation:rotate 1s linear infinite;-o-animation:rotate 1s linear infinite;animation:rotate 1s linear infinite;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}@-webkit-keyframes rotate{from{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes rotate{from{-moz-transform:rotate(0deg);transform:rotate(0deg)}to{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes rotate{from{-o-transform:rotate(0deg);transform:rotate(0deg)}to{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes rotate{from{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}.hover-state.__jsx-style-dynamic-selector,.loading-state.__jsx-style-dynamic-selector{color:var(--accent-primary-default);position:absolute;top:0;left:0;width:100%;height:100%;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);background-color:var(--background-root);overflow:hidden;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}input.__jsx-style-dynamic-selector{opacity:0;position:absolute;top:0;left:0;width:100%;height:100%;z-index:-1}.error.__jsx-style-dynamic-selector{font-size:var(--font-size-default);color:var(--accent-negative-default)}")})]})}var Zt,yt,bt=n(27297),wt=n(52578),xt=n(11255),Ct=n(58722),kt=n(36918),St=n(29847),Et=n(59748);!function(e){e.DeleteRepl="DeleteRepl",e.PowerUp="PowerUp",e.BuyCycles="BuyCycles",e.ForkRepl="ForkRepl",e.Unpublish="Unpublish",e.UnpublishTemplate="UnpublishTemplate",e.EditPublishSettings="EditPublishSettings",e.Publish="Publish",e.UpdatePublishedTemplate="UpdatePublishedTemplate",e.UpdatePublishedRepl="UpdatePublishedRepl",e.SetStorageCapacity="SetStorageCapacity"}(Zt||(Zt={})),function(e){e.Fork="Fork",e.Delete="Delete",e.Unpublish="Unpublish",e.UnpublishTemplate="UnpublishTemplate",e.EditPublishSettings="EditPublishSettings"}(yt||(yt={}));var Tt=n(1650);function Rt(e){var t=e.setActiveDialog,n=e.repl,r=e.isTemplate,a=e.updateIconUrl,l=e.showCloseButton,s=e.setIgnoreClickOutside,u=e.setIsEditing,d=e.updateReplInfo,f=(0,Tt.Z)(),h=Boolean(n.publishedAs),p=n.currentUserPermissions.publish,v=!(null===n||void 0===n?void 0:n.publishedAs)&&!(0,_.Z)(),m=(null===n||void 0===n?void 0:n.publishedAs)===F.O2.RegularRepl,g=[];return n.currentUserPermissions.fork&&g.push({value:yt.Fork,label:"Fork",icon:(0,c.tZ)(Ct.Z,{})}),n.publishedAs===F.O2.RegularRepl&&p&&!(0,_.Z)()&&g.push({value:yt.Unpublish,label:"Unpublish",icon:(0,c.tZ)(xt.Z,{})}),r&&p&&!(0,_.Z)()&&g.push({value:yt.UnpublishTemplate,label:"Unpublish template",icon:(0,c.tZ)(xt.Z,{})}),h&&p&&!(0,_.Z)()&&g.push({value:yt.EditPublishSettings,label:"Edit Publish Settings",icon:(0,c.tZ)(H.Z,{})}),n.currentUserPermissions.delete&&g.push({isDestructive:!0,value:yt.Delete,label:"Delete",icon:(0,c.tZ)(kt.Z,{})}),(0,c.BX)(M.G7,{css:[M.l0.colWithGap(8),M.l0.p(8)],children:[(0,c.BX)(M.G7,{css:[M.l0.rowWithGap(8),M.l0.align.center,M.l0.justify.spaceBetween],children:[(0,c.BX)(M.G7,{css:[M.l0.rowWithGap(8),M.l0.center,M.l0.flex.shrink(1)],children:[n.user?(0,c.tZ)(M.ZP,(0,o.Z)((0,i.Z)({},(0,_.Z)()?{href:"/desktop"}:(0,ut.Ru)(n.user)),{prefetch:!1,text:n.user.username,css:[{"&, & span":M.l0.flex.shrink(1)}],iconLeft:(0,c.tZ)(M.qE,{src:n.user.image,username:n.user.username})})):null,n.currentUserPermissions.changeIconUrl&&r?(0,c.tZ)(gt,{value:n.iconUrl,onChange:a}):null]}),(0,c.BX)(M.G7,{css:[M.l0.align.center,M.l0.rowWithGap(8)],children:[(0,_.Z)()?null:(0,c.tZ)(M.ZP,(0,o.Z)((0,i.Z)({prefetch:!1},(0,bt.j3)(n)),{iconLeft:(0,c.tZ)(Et.Z,{}),colorway:"primary",text:"Cover page",target:"_blank"})),p&&v&&!f?(0,c.tZ)(M.u,{tooltip:"This Repl is private. You need to make it public in order to publish it!",isDisabled:!(null===n||void 0===n?void 0:n.isPrivate),children:(0,c.tZ)(M.zx,{type:"button",iconLeft:(0,c.tZ)(pt.Z,{}),onClick:function(){t(Zt.Publish)},dataCy:"ws-publish-button",text:"Publish",disabled:null===n||void 0===n?void 0:n.isPrivate})}):null,r&&!(0,_.Z)()?(0,c.tZ)(M.zx,{type:"button",iconLeft:(0,c.tZ)(pt.Z,{}),onClick:function(){return t(Zt.UpdatePublishedTemplate)},text:"Update"}):null,m&&!(0,_.Z)()?(0,c.tZ)(M.zx,{type:"button",iconLeft:(0,c.tZ)(Se.Chat,{}),onClick:function(){return t(Zt.UpdatePublishedRepl)},text:"Update"}):null,g.length>0&&(0,c.tZ)(M.G7,{children:(0,c.tZ)(wt.Z,{label:r?"Template Actions":"Repl Actions",items:g,onItemClick:function(e){switch(e.value){case yt.Fork:return void t(Zt.ForkRepl);case yt.Unpublish:return void t(Zt.Unpublish);case yt.UnpublishTemplate:return void t(Zt.UnpublishTemplate);case yt.Delete:return void t(Zt.DeleteRepl);case yt.EditPublishSettings:t(Zt.EditPublishSettings)}},onOpenChange:s,large:!0})}),l?(0,c.tZ)(M.hU,{alt:"Close",tooltipHidden:!0,onClick:function(){d(),u(!1)},children:(0,c.tZ)(St.Z,{})}):null]})]}),n.lastPublishedAt&&p?(0,c.BX)(M.xv,{variant:"small",color:"dimmest",children:["Last published on"," ",new Date(n.lastPublishedAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})]}):null]})}var _t=n(23472),It=n(4875),Gt=n(7330),Dt=n(3566),Pt=n(38094),Bt=(0,M.Xb)({self:[M.l0.display.flex,M.l0.flex.row,M.l0.align.center,M.l0.justify.spaceBetween],powerupInfo:[M.l0.colWithGap(8)],powerupLabel:[M.l0.rowWithGap(8),M.l0.align.center],interactiveElement:[M.l0.rowWithGap(8),M.l0.align.center],pill:[M.l0.border({style:"none"}),M.l0.fontWeight.medium,{backgroundColor:"#b0b0b0",color:"#0F1726",maxWidth:"fit-content"}],editButton:[M.l0.p(16),M.l0.backgroundColor.backgroundHigher]}),Ut=function(e){var t=e.onToggle,n=function(e){var t=(0,i.Z)({},Oe,e);return ve.a(je,t)}({variables:{replId:(0,T.Z)()}}),r=n.data;if(n.loading)return(0,c.tZ)(V.Z,{});if("Repl"!==(null===r||void 0===r?void 0:r.repl.__typename)||"StorageCapacity"!==r.repl.storageCapacity.__typename)return null;var o=r.repl.storageCapacity.value;return o===F.xl.Standard?(0,c.tZ)(Pt.Z,{isOn:!1,onChange:function(){return t(o)}}):(0,c.BX)(M.G7,{css:Bt.interactiveElement,children:[(0,c.tZ)(M.DR,{text:"".concat(He.toGb(o),"GB"),css:Bt.pill}),(0,c.tZ)(M.hU,{size:24,css:Bt.editButton,alt:"Change storage",onClick:function(){return t(o)},children:(0,c.tZ)(H.Z,{})})]})},At=function(e){var t=e.showPowerUpModal,n=(0,C.P)({controlName:"flag-infinity-drive-beta"}),r=(0,qe.b9)($e),i=(0,qe.b9)(Ye);return n?(0,c.tZ)(c.HY,{children:(0,c.BX)(M.G7,{css:Bt.self,children:[(0,c.BX)(M.G7,{css:Bt.powerupInfo,children:[(0,c.BX)(M.G7,{css:Bt.powerupLabel,children:[(0,c.tZ)(Dt.Z,{size:16})," ",(0,c.tZ)(M.xv,{variant:"subheadDefault",children:"Storage"}),(0,c.tZ)(_t.Z,{content:"Internal",tooltip:"Storage is currently in internal beta for Replit staff."})]}),(0,c.tZ)(M.xv,{color:"dimmer",children:"Add more disk space"})]}),(0,c.tZ)(Ut,{onToggle:function(e){r(e),i(He.toTier(e)),t()}})]})}):null},Nt=n(61656),Lt=n(37291),Xt=n(66908),Mt=n(58211),Ot=n(58618);function Wt(e){var t=e.onRequestPowerUpModal,n=(0,T.Z)(),r=(0,Ot.ky)({variables:{replId:n}}),i=r.data;return r.loading?(0,c.tZ)(V.Z,{}):"Repl"!==(null===i||void 0===i?void 0:i.repl.__typename)||"ReplPowerUpTypes"!==i.repl.powerUps.__typename?null:i.repl.powerUps.boost.sku===F.ri.Off?(0,c.tZ)(Pt.Z,{isOn:!1,onChange:t}):(0,c.BX)(M.G7,{css:[Gt.l0.rowWithGap(8),Gt.l0.align.center],children:[(0,c.tZ)(Xt.Z,{variant:i.repl.powerUps.boost.sku,extraText:"Boosted"}),(0,c.tZ)(M.hU,{size:24,css:[Gt.l0.p(16),{backgroundColor:Gt.TV.backgroundHigher}],alt:"Change boost",onClick:t,children:(0,c.tZ)(H.Z,{})})]})}function Ft(e){var t=e.context,n=e.showPowerUpModal,r=e.goToPowerUpDetails,i=(0,C.P)({controlName:"flag-nectar-nanny"});return(0,c.tZ)(c.HY,{children:(0,c.BX)(M.G7,{css:[Gt.l0.display.flex,Gt.l0.flex.row,Gt.l0.align.center,Gt.l0.justify.spaceBetween],children:[(0,c.BX)(M.G7,{css:[Gt.l0.colWithGap(8)],children:[(0,c.BX)(M.G7,{css:[Gt.l0.rowWithGap(8),Gt.l0.align.center],children:[(0,c.tZ)(Mt.Z,{size:16})," ",(0,c.tZ)(M.G7,{css:[Gt.l0.rowWithGap(8),Gt.l0.align.center],children:(0,c.tZ)(M.xv,{variant:"subheadDefault",children:P.S0.multiboost.name})}),(0,c.tZ)(It.Z,{context:t,powerUp:"boost"})]}),(0,c.tZ)(M.xv,{color:"dimmer",children:P.S0.multiboost.description})]}),(0,c.tZ)(Wt,{onRequestPowerUpModal:function(){(0,D.j)(D.U3.POWER_UP_TOGGLE_REQUESTED,{powerUp:"boost",source:t}),i?r("boost"):n()}})]})})}function jt(e){var t=e.isAlwaysOn,n=e.isGpu,r=e.canGpu,i=e.onAlwaysOnChange,o=e.onGpuChange,a=e.showBoostPowerUpModal,l=e.showSetStorageModal,s=e.goToPowerUpDetails;return(0,c.BX)(M.G7,{css:[Gt.l0.colWithGap(16)],children:[(0,c.BX)(M.G7,{css:[Gt.l0.display.flex,Gt.l0.flex.row,Gt.l0.align.center,Gt.l0.justify.spaceBetween],children:[(0,c.BX)(M.G7,{css:[Gt.l0.colWithGap(8)],children:[(0,c.BX)(M.G7,{css:[Gt.l0.rowWithGap(8),Gt.l0.align.center],children:[(0,c.tZ)(Lt.Z,{size:16})," ",(0,c.tZ)(M.xv,{variant:"subheadDefault",children:P.S0["always-on"].name}),(0,c.tZ)(It.Z,{context:"workspace_info_modal",powerUp:"always-on"})]}),(0,c.tZ)(M.xv,{color:"dimmer",children:P.S0["always-on"].description})]}),(0,c.tZ)(Pt.Z,{dataCy:"ws-always-on-toggle",isOn:t,onChange:i})]}),(0,c.tZ)(Ft,{context:"workspace_info_modal",showPowerUpModal:a,goToPowerUpDetails:s}),(0,c.tZ)(At,{showPowerUpModal:l}),r?(0,c.BX)(M.G7,{css:[Gt.l0.display.flex,Gt.l0.flex.row,Gt.l0.align.center,Gt.l0.justify.spaceBetween],children:[(0,c.BX)(M.G7,{css:[Gt.l0.colWithGap(8)],children:[(0,c.BX)(M.G7,{css:[Gt.l0.rowWithGap(8),Gt.l0.align.center],children:[(0,c.tZ)(Nt.Z,{size:16})," ",(0,c.tZ)(M.xv,{variant:"subheadDefault",children:"GPU"}),(0,c.tZ)(_t.Z,{content:"Beta",link:"https://replit.com/@util/GPU-Beta-Resources?v=1#README.md",tooltip:"GPUs are currently in beta. Some things may not work as expected yet."})]}),(0,c.tZ)(M.xv,{color:"dimmer",children:"Add an NVIDIA Tesla K80 GPU to the Repl"})]}),(0,c.tZ)(Pt.Z,{dataCy:"ws-gpu-toggle",isOn:n,onChange:o})]}):null]})}var zt={query:x.s8},Ht={query:Z.BW};function Vt(e){var t=e.setIsEditing,n=e.showCloseButton,r=(0,T.Z)(),i=(0,st.BZ)({variables:{replId:r}}),o=i.data,a=i.refetch,l="Repl"===(null===o||void 0===o?void 0:o.repl.__typename)?o.repl:null;return l?(0,c.tZ)(qt,{setIsEditing:t,showCloseButton:n,repl:l,refetch:a}):(0,c.tZ)(M.G7,{css:[M.l0.center,M.l0.p(16)],children:(0,c.tZ)(V.Z,{})})}function qt(e){var t,n,s,Z,x=e.repl,T=e.showCloseButton,P=e.setIsEditing,B=(0,lt.useRouter)(),U=(0,a.Z)(f.useState(!1),2),A=U[0],N=U[1],L=(0,a.Z)(f.useState(null),2),X=L[0],O=L[1],W=(0,a.Z)(f.useState(null),2),j=W[0],z=W[1],H=(0,a.Z)(f.useState(x.hasGpu),2),V=H[0],q=H[1],$=(0,a.Z)(f.useState(x.isRenamed?x.title:""),2),Y=$[0],K=$[1],Q=(0,a.Z)(f.useState(x.description||""),2),J=Q[0],ee=Q[1],te=(0,a.Z)(f.useState(x.rawTemplateLabel),2),ne=te[0],re=te[1],ie=(0,w.Z)({forceFetch:!1}).cycles,oe=(0,st.zu)().data,ae=(0,E.Z)().showError,le=x.publishedAs===F.O2.Template;f.useEffect((function(){ee(x.description||"")}),[x.description]);var ce,se=(0,S.Z)(),ue=f.useRef(x),de=(0,a.Z)((0,st.ap)({variables:{id:x.id},onCompleted:function(){return(0,_.Z)()?B.push("/desktop"):B.push("/home","/~")},update:(0,R.t)({id:x.id}),onError:function(e){return ae((0,I.Z)(e.message))}}),1)[0],fe=(0,a.Z)((0,st.vi)({onError:function(e){return ae((0,I.Z)(e.message))},onCompleted:function(e){var t=e.updateRepl.repl,n=ue.current,r={};n.description!==t.description&&(r.description=t.description),n.title!==t.title&&(r.title=t.title),n.url!==t.url&&(r.url=t.url),n.isRenamed!==t.isRenamed&&(r.isRenamed=!!t.isRenamed),ue.current=x,Object.keys(r).length>0&&P(!1)}}),2),he=fe[0],pe=fe[1].loading,ve=(0,a.Z)((0,k.Z)(),2),me=ve[0],ge=ve[1].loading,Ze=(0,a.Z)((0,st.pr)({onCompleted:function(e){"UserError"===e.setAlwaysOn.__typename&&ae(e.setAlwaysOn.message)},onError:function(e){return ae((0,I.Z)(e.message))},refetchQueries:[zt,Ht]}),2),ye=Ze[0],be=Ze[1].loading,we=(0,a.Z)((0,st.vN)({onCompleted:function(e){"UserError"!==e.setGpu.__typename&&"UnauthorizedError"!==e.setGpu.__typename?((0,Ke.Z)(x.id).catch((function(e){d.Tb(e),se.current&&ae("Something went wrong when adding a GPU to your Repl. Please refresh or try again.")})),se.current&&"Repl"===e.setGpu.__typename&&q(e.setGpu.hasGpu)):ae(e.setGpu.message)},onError:function(e){d.Tb(e),ae((0,I.Z)(e.message))},refetchQueries:[zt,Ht]}),2),xe=we[0],Ce=we[1].loading,ke=(0,a.Z)((0,st.gF)({variables:{input:{replId:x.id}},onError:function(e){d.Tb(e),ae((0,I.Z)(e.message))}}),2),Se=ke[0],Ee=ke[1],Re=(0,st.l9)({variables:{replId:x.id},fetchPolicy:"cache-and-network"}),_e=Re.data,Ie=Re.loading,Le=Re.error,Xe=f.useMemo((function(){return!(!Y||Y===x.title)||(ne!==x.rawTemplateLabel||!(""===J&&!x.description)&&J!==x.description)}),[x,Y,J,ne]),Me=f.useCallback((function(){if(Xe){var e={id:x.id,title:Y||x.title,description:J,templateLabel:x.currentUserPermissions.changeTemplateLabel?ne:void 0};he({variables:{input:e}})}}),[Xe,he,x,Y,J,ne]),Oe=A||null!==X||ge,We=(0,b.Z)((function(){Oe||(Xe?Me():P(!1))}),[Oe,Xe,Me]),Fe=f.useContext(y.G).isGooglePlayStoreTWA,je=function(e){switch(e){case"always-on":return"Repl"===(null===_e||void 0===_e?void 0:_e.repl.__typename)&&"PowerUpCostsType"===_e.repl.powerUpCosts.__typename?_e.repl.powerUpCosts.alwaysOn.explanation:null;case"private":var t,n,r;return"UserPowerUpsTypes"===(null===_e||void 0===_e||null===(t=_e.currentUser)||void 0===t?void 0:t.userPowerUpsByType.__typename)?null===(r=null===(n=_e.currentUser.userPowerUpsByType)||void 0===n?void 0:n.privateRepls.cost)||void 0===r?void 0:r.explanation:null;case"gpu":var i,o;return"Repl"===(null===_e||void 0===_e?void 0:_e.repl.__typename)&&"PowerUpCostsType"===_e.repl.powerUpCosts.__typename?null===(i=_e.repl.powerUpCosts)||void 0===i||null===(o=i.gpu)||void 0===o?void 0:o.explanation:null;default:(0,Te.Z)(e)}},ze=function(){he({variables:{input:{id:x.id,isPrivate:!x.isPrivate}},optimisticResponse:{updateRepl:{__typename:"UpdateReplPayload",repl:(0,o.Z)((0,i.Z)({},x),{isPrivate:!x.isPrivate})}},refetchQueries:[{query:st.WM,variables:{replId:x.id}},zt,Ht]}),(0,D.j)(D.U3.PRIVATE_TOGGLED,{enabled:!x.isPrivate,source:"workspace_info_modal"})},He=function(){if(!be){var e=!x.isAlwaysOn;ye({variables:{replId:x.id,enabled:e},optimisticResponse:{setAlwaysOn:(0,o.Z)((0,i.Z)({__typename:"Repl"},x),{powerUpCosts:{alwaysOn:{cycles:0,explanation:F.Ch.ActivateExistingOrder},boost:{cycles:0,explanation:F.Ch.ActivateExistingOrder},gpu:{cycles:0,explanation:F.Ch.ActivateExistingOrder}},isAlwaysOn:e})}})}},Ve=function(){if(!Ce){var e=!V;xe({variables:{replId:x.id,enabled:e},optimisticResponse:{setGpu:(0,o.Z)((0,i.Z)({__typename:"Repl"},x),{hasGpu:e,powerUpCosts:{gpu:{cycles:0,explanation:F.Ch.ActivateExistingOrder},alwaysOn:{cycles:0,explanation:F.Ch.ActivateExistingOrder},boost:{cycles:0,explanation:F.Ch.ActivateExistingOrder}}})}})}},qe=x.isRenamed?"Name your Repl":"Default name: ".concat(x.title),$e=[F.Sy.Submit,F.Sy.PublishTemplate,F.Sy.EditTemplate].includes(x.workspaceCta),Ye=(0,ct.H)(),Qe=(null===oe||void 0===oe||null===(t=oe.currentUser)||void 0===t?void 0:t.id)===(null===(n=x.user)||void 0===n?void 0:n.id),Je=(0,G.jX)(null===oe||void 0===oe||null===(s=oe.currentUser)||void 0===s?void 0:s.userSubscriptionType),et=0===ie&&Qe&&!Je,ut=(0,C.P)({controlName:"flag-gpus"}),dt=(0,De.P)({step:"not_shown"});return(0,c.tZ)("div",{ref:We,css:{overflow:"auto",maxHeight:"80vh"},children:"not_shown"!==dt.currentStep.step?(0,c.tZ)(Ge,(0,i.Z)({},dt)):(0,c.BX)(c.HY,{children:[(0,c.tZ)(Rt,{repl:x,isTemplate:le,showCloseButton:T,setActiveDialog:O,setIsEditing:P,setIgnoreClickOutside:N,updateIconUrl:function(e){return he({variables:{input:{id:x.id,iconUrl:e}},optimisticResponse:{updateRepl:{__typename:"UpdateReplPayload",repl:(0,o.Z)((0,i.Z)({},x),{iconUrl:e})}}})},updateReplInfo:Me}),(0,c.tZ)("form",{onSubmit:function(e){e.preventDefault(),Me()},className:u().dynamic([["7206d0025a598b40",[x.currentUserPermissions.changeDescription?"auto":"not-allowed",nt.j.mobileMax]]]),children:(0,c.BX)(M.G7,{css:[M.l0.align.stretch,M.l0.colWithGap(16)],children:[(0,c.BX)(M.Tg,{background:"default",css:[M.l0.colWithGap(16)],children:[(0,c.tZ)(M.G7,{css:[M.l0.flex.column],children:(0,c.BX)(M.G7,{css:[M.l0.colWithGap(4)],children:[(0,c.BX)(M.G7,{css:[M.l0.flex.row,M.l0.justify.spaceBetween,M.l0.align.end],children:[(0,c.tZ)("label",{htmlFor:Ye("name"),className:u().dynamic([["7206d0025a598b40",[x.currentUserPermissions.changeDescription?"auto":"not-allowed",nt.j.mobileMax]]]),children:(0,c.tZ)(M.xv,{variant:"small",color:"dimmer",children:"Name"})}),(0,c.tZ)(v.Z,{maxLength:60,value:Y,hideLabel:!0})]}),(0,c.tZ)(M.II,{style:{cursor:x.currentUserPermissions.changeTitle?"auto":"not-allowed"},disabled:!x.currentUserPermissions.changeTitle,maxLength:60,placeholder:qe,value:Y,onChange:function(e){return K(e.target.value)},spellCheck:!1,id:Ye("name"),dataCy:"ws-repl-info-title-input"})]})}),(0,c.tZ)(M.G7,{css:[M.l0.flex.column],children:(0,c.BX)(M.G7,{css:[M.l0.colWithGap(4)],children:[(0,c.BX)(M.G7,{css:[M.l0.flex.row,M.l0.justify.spaceBetween,M.l0.align.end],children:[(0,c.tZ)("label",{htmlFor:Ye("description"),className:u().dynamic([["7206d0025a598b40",[x.currentUserPermissions.changeDescription?"auto":"not-allowed",nt.j.mobileMax]]]),children:(0,c.tZ)(M.xv,{variant:"small",color:"dimmer",children:"Description"})}),(0,c.tZ)(v.Z,{maxLength:Ae.p,value:J,hideLabel:!0})]}),(0,c.tZ)(M.B,{onKeyDown:function(e){13===e.keyCode&&(e.ctrlKey||e.metaKey)},disabled:!x.currentUserPermissions.changeDescription,maxLength:Ae.p,value:J,onChange:function(e){return ee(e.target.value)},placeholder:"What does this Repl do?",css:[M.l0.minHeight(96),M.l0.maxHeight(256),{resize:"vertical"}],id:Ye("description")})]})})]}),le&&x.currentUserPermissions.changeTemplateLabel?(0,c.tZ)(M.Tg,{background:"default",css:[M.l0.colWithGap(4)],children:(0,c.BX)(M.G7,{css:[M.l0.colWithGap(4)],children:[(0,c.tZ)("label",{htmlFor:Ye("template"),className:u().dynamic([["7206d0025a598b40",[x.currentUserPermissions.changeDescription?"auto":"not-allowed",nt.j.mobileMax]]]),children:(0,c.tZ)(M.xv,{color:"dimmer",variant:"small",children:"Template label"})}),(0,c.tZ)(M.II,{value:ne,maxLength:60,placeholder:"Template label",spellCheck:!1,onChange:function(e){return re(e.target.value)},id:Ye("template")})]})}):null]})}),$e?null:(0,c.BX)(M.G7,{css:[M.l0.colWithGap(24),M.l0.p(8),M.l0.pt(0)],children:[!Fe&&et?(0,c.tZ)(M.zx,{iconLeft:(0,c.tZ)(rt.Z,{}),type:"button",colorway:"primary",stretch:!0,onClick:function(){(0,D.j)(D.U3.UPGRADE_SELECTED,{source:"workspace_info_modal"}),O(Zt.BuyCycles)},text:"Power Up this Repl"}):null,x.currentUserPermissions.changePrivacy===F.HA.Allowed&&(0,c.BX)(M.G7,{css:[M.l0.colWithGap(8)],children:[(0,c.BX)(M.hE,{tag:"fieldset",name:Ye("privacy"),value:x.isPrivate.toString(),onChange:function(){var e,t,n,r;if(!pe)if(x.isPrivate)ze();else if(x.currentUserPermissions.changePrivacy===F.HA.Allowed&&null!=(null===(e=x.user)||void 0===e?void 0:e.id)&&null!=(null===oe||void 0===oe||null===(t=oe.currentUser)||void 0===t?void 0:t.id)&&x.user.id!==oe.currentUser.id)ze();else{var i="UserPowerUpsTypes"===(null===_e||void 0===_e||null===(n=_e.currentUser)||void 0===n?void 0:n.userPowerUpsByType.__typename)&&(null===(r=_e.currentUser.userPowerUpsByType)||void 0===r?void 0:r.privateRepls.active),o=je("private");if(null==o||Ie)ae("You're too fast for us! Please try again in a moment.");else{if(!Le)return(0,D.j)(D.U3.POWER_UP_TOGGLE_REQUESTED,{powerUp:"private",setting:!x.isPrivate,source:"workspace_info_modal",costExplanation:o}),i?void ze():(z("private"),void O(Zt.PowerUp));ae("This action is currently unavailable. Please refresh and try again.")}}},row:!0,primary:!0,stretch:!0,children:[(0,c.tZ)(M.rK,{id:Ye("false"),value:"false",text:"Public",icon:(0,c.tZ)(it.Z,{})}),(0,c.tZ)(M.rK,{id:Ye("true"),value:"true",text:"Private",icon:(0,c.tZ)(ot.Z,{})})]}),(0,c.tZ)(M.xv,{variant:"small",color:"dimmest",children:x.isPrivate?"Only you can see and edit this Repl.":"Anyone can view and fork this Repl."})]}),x.currentUserPermissions.changeAlwaysOn!==F.fn.Disallowed&&(0,c.tZ)(jt,{isAlwaysOn:x.isAlwaysOn,isGpu:V,canGpu:ut,onAlwaysOnChange:function(){var e=je("always-on");if(null==e||be||Ie)ae("You're too fast for us! Please try again in a moment.");else if(Le)ae("This action is currently unavailable. Please refresh and try again.");else{if((0,D.j)(D.U3.POWER_UP_TOGGLE_REQUESTED,{powerUp:"always-on",setting:!x.isAlwaysOn,source:"workspace_info_modal",costExplanation:e}),!x.isAlwaysOn&&("NEEDS_CYCLES"===e||"SPEND_CYCLES"===e))return z("always-on"),void O(Zt.PowerUp);He()}},onGpuChange:function(){var e=je("gpu");if(null==e||Ie)ae("You're too fast for us! Please try again in a moment.");else if(Le)ae("This action is currently unavailable. Please refresh and try again.");else{if((0,D.j)(D.U3.POWER_UP_TOGGLE_REQUESTED,{powerUp:"gpu",setting:!V,source:"workspace_info_modal",costExplanation:e}),!V&&("NEEDS_CYCLES"===e||"SPEND_CYCLES"===e))return z("gpu"),void O(Zt.PowerUp);Ve()}},showBoostPowerUpModal:function(){z("boost"),O(Zt.PowerUp)},showSetStorageModal:function(){return O(Zt.SetStorageCapacity)},goToPowerUpDetails:function(e){return dt.goTo({step:"power_up_details",powerUpCategory:e})}})]}),(0,c.tZ)(M.u_,{isOpen:X===Zt.DeleteRepl,onRequestClose:function(){return O(null)},children:(0,c.tZ)(p.Z,{delete:de,entityType:"Repl",hideModal:function(){return O(null)}})}),(0,c.tZ)(g.Z,{context:"workspace_info_modal",isOpen:X===Zt.PowerUp,uponPurchaseGoTo:"workspace",replTitle:x.title,onRequestClose:function(){return O(null)},onRequestPowerUp:(0,r.Z)((function(){return(0,l.__generator)(this,(function(e){switch(e.label){case 0:switch(j){case null:case"boost":case"hosting_tier":break;case"always-on":He();break;case"private":ze();break;case"gpu":Ve();break;default:(0,Te.Z)(j)}return[4,new Promise((function(e){return setTimeout(e,3e3)}))];case 1:return e.sent(),O(null),[2]}}))})),powerUp:null!==j&&void 0!==j?j:"boost"},X),(0,c.tZ)(tt,{isOpen:X===Zt.SetStorageCapacity,onRequestClose:function(){return O(null)}}),(0,c.tZ)(at.Z,{initialTab:"default",isOpen:X===Zt.BuyCycles,onRequestClose:function(){return O(null)},uponPurchaseGoTo:"workspace",context:"workspace_info_modal",replTitle:x.title}),(0,c.tZ)(M.u_,{isOpen:X===Zt.ForkRepl,onRequestClose:function(){return O(null)},children:(0,c.tZ)(m.Z,{onFork:function(e,t,n,r){me({originId:x.id,teamId:e,title:t,description:n,isPrivate:r,forkToPersonal:!e,trackingData:{forkSource:"editReplPopoverMenuItem"}})},initialTitle:x.title,initialDescription:null!==(ce=x.description)&&void 0!==ce?ce:"",initialPrivacy:x.isPrivate,hideModal:function(){return O(null)},teamContext:null===(Z=x.user)||void 0===Z?void 0:Z.username})}),(0,c.tZ)(M.u_,{isOpen:X===Zt.Unpublish,onRequestClose:function(){return O(null)},children:(0,c.tZ)(Ne.Z,{repl:x,source:"replEnvironment",onDone:function(){O(null)}})}),(0,c.tZ)(M.u_,{isOpen:X===Zt.UnpublishTemplate,onRequestClose:function(){return O(null)},children:(0,c.tZ)(h.Z,{confirmLabel:"Yes, unpublish this Template",isDestructive:!0,title:"Unpublish Template",onCancel:function(){return O(null)},onConfirm:function(){Ee.loading||(Se(),O(null))},children:"Your Repl will no longer be discoverable on Templates. You can republish again at any time, and all of your comments or reactions will stick around."})}),(0,c.tZ)(M.u_,{isOpen:X===Zt.EditPublishSettings,onRequestClose:function(){return O(null)},noPadding:!0,maxWidth:872,fitContent:!0,children:(0,c.tZ)(Pe.Z,{source:"replEnvironment",replId:x.id})}),(0,c.tZ)(M.u_,{isOpen:X===Zt.Publish,onRequestClose:function(){return O(null)},noPadding:!0,maxWidth:872,fitContent:!0,children:(0,c.tZ)(Pe.Z,{source:"replEnvironment",replId:x.id})}),(0,c.tZ)(M.u_,{isOpen:X===Zt.UpdatePublishedTemplate,onRequestClose:function(){return O(null)},noPadding:!0,children:(0,c.tZ)(Be.Z,{repl:x})}),(0,c.tZ)(M.u_,{isOpen:X===Zt.UpdatePublishedRepl,onRequestClose:function(){return O(null)},children:(0,c.tZ)(Ue.Z,{repl:x,onDone:function(){return O(null)},source:"replEnvironment"})}),(0,c.tZ)(u(),{id:"7206d0025a598b40",dynamic:[x.currentUserPermissions.changeDescription?"auto":"not-allowed",nt.j.mobileMax],children:"form.__jsx-style-dynamic-selector{padding:var(--space-8)}textarea.__jsx-style-dynamic-selector{min-height:42px;height:200px;resize:none;cursor:".concat(x.currentUserPermissions.changeDescription?"auto":"not-allowed",";font-size:var(--font-size-default);font-family:var(--font-family-default);padding:var(--space-8);display:block;width:100%;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);border:1px solid var(--outline-dimmest);-webkit-transition:.2s border-color;-moz-transition:.2s border-color;-o-transition:.2s border-color;transition:.2s border-color;background-color:transparent;color:var(--foreground-default)}textarea.__jsx-style-dynamic-selector:hover{border-color:var(--accent-primary-dimmer)}textarea.__jsx-style-dynamic-selector:active,textarea.__jsx-style-dynamic-selector:focus{border-color:var(--accent-primary-default)}textarea.__jsx-style-dynamic-selector:disabled{opacity:.5}textarea.__jsx-style-dynamic-selector:focus,textarea.__jsx-style-dynamic-selector:active{outline:none;border-color:var(--accent-primary-default)}.edit-repl-actions.__jsx-style-dynamic-selector{padding:0 var(--space-16)}.menu-item.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;color:var(--foreground-default)}.delete-menu-item.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;color:var(--accent-negative-default)}.icon-container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;padding:0 var(--space-4)}.menu-text.__jsx-style-dynamic-selector{padding:0 var(--space-4)}.upgrade-button-container.__jsx-style-dynamic-selector{padding:0 var(--space-8)}.upgrade-button-container.__jsx-style-dynamic-selector .sentence-case{text-transform:none}.upgrade-text-container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;padding:var(--space-8);-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}.always-on-indicator.__jsx-style-dynamic-selector{margin-left:var(--space-4);margin-right:var(--space-8);width:8px;height:8px;-webkit-border-radius:100%;-moz-border-radius:100%;border-radius:100%;background-color:var(--accent-green-default);-webkit-box-shadow:0 0 12px var(--accent-green-default);-moz-box-shadow:0 0 12px var(--accent-green-default);box-shadow:0 0 12px var(--accent-green-default)}@media screen and (max-width:").concat(nt.j.mobileMax,"px){.edit-repl.__jsx-style-dynamic-selector{width:80vw}}")})]})})}},19719:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(94660),i=(n(59496),n(58530)),o=n(72335),a=(0,n(72030).iv)([i.l0.maxWidth(160),i.l0.truncate,i.l0.flex.shrink(1),i.l0.color.foregroundDimmest,{fontSize:i.TV.fontSizeSmall}]);function l(e){var t=e.repl,n=t.user?(0,r.tZ)(i.xv,{css:a,children:t.user.username}):null;return(0,r.BX)(i.G7,{css:[i.l0.rowWithGap(8),i.l0.align.center,i.l0.flex.growAndShrink(1)],children:[(0,r.tZ)(i.G7,{children:(0,r.tZ)(o.ZP,{iconUrl:t.iconUrl,size:32,alt:"Repl icon"})}),(0,r.BX)(i.G7,{css:[i.l0.align.start,i.l0.flex.shrink(1)],children:[(0,r.tZ)(i.xv,{css:[i.l0.flex.shrink(1),i.l0.fontSize(14)],"data-cy":"header-repl-title",children:t.title}),n]})]})}},23794:function(e,t,n){n.d(t,{hF:function(){return me},w3:function(){return xe},Kq:function(){return Re},lR:function(){return ke}});var r=n(2272),i=n(94660),o=n(58530),a=n(16283),l=n(70840),c=n(34380),s=n(59496),u=n(26860),d=n(79351),f=n(74296),h=n(72006),p=n(43119),v=n(71440),m=n(53486);function g(){var e=(0,p.Z)(["\n  query ReplResourcesCallToAction($replId: String!) {\n    currentUser {\n      id\n    }\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        isBoosted\n        owner {\n          ... on Team {\n            id\n          }\n          ... on User {\n            id\n          }\n        }\n        powerUpCosts {\n          ... on PowerUpCostsType {\n            boost {\n              cycles\n              explanation\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return g=function(){return e},e}var Z,y={},b=(0,v.Ps)(g());function w(){return function(e){var t;if(!e)return Z.Nothing;var n="Repl"===(null===e||void 0===e?void 0:e.repl.__typename)?e.repl:void 0,r=(null===e||void 0===e?void 0:e.currentUser)?e.currentUser:void 0;return void 0===n||void 0===r||r.id!==(null===(t=n.owner)||void 0===t?void 0:t.id)||n.isBoosted||"PowerUpCostsType"!==n.powerUpCosts.__typename||n.powerUpCosts.boost.explanation!==f.Ch.NeedsCycles?Z.Nothing:Z.Upgrade}(function(e){var t=(0,h.Z)({},y,e);return m.a(b,t)}({variables:{replId:(0,d.Z)()}}).data)}!function(e){e.Upgrade="UPGRADE",e.Boost="BOOST",e.Nothing="NOTHING"}(Z||(Z={}));var x=n(23105),C=n(58211);function k(){var e=w(),t=null;return e===Z.Upgrade?t=(0,i.BX)(i.HY,{children:[(0,i.tZ)(o.xv,{multiline:!0,children:"Low on resources?"}),(0,i.tZ)(x.Z,{context:"repl_resources"})]}):e===Z.Boost&&(t=(0,i.BX)(i.HY,{children:[(0,i.tZ)(o.xv,{multiline:!0,children:"Low on resources? Try boosting your Repl."}),(0,i.tZ)(o.ZP,{href:u.TT.ABOUT_BOOSTED_REPLS,text:"Learn about Boosts",iconLeft:(0,i.tZ)(C.Z,{})})]})),(0,i.BX)(i.HY,{children:[t,(0,i.BX)(o.xv,{multiline:!0,color:"dimmer",variant:"small",children:["These resources are for the cloud machine that hosts this Repl."," ",(0,i.tZ)("a",{href:"https://blog.replit.com/repl-resources",target:"_blank",children:"Learn more"})," ","about resource limits."]})]})}var S=n(5109),E=n(57135),T=n(4405),R=n(96583),_=n(51954),I=n(33209),G=n(56579),D=n(10206),P=n.n(D),B=n(51458),U=n(28609),A="date '+%s%N' && cat /sys/fs/cgroup/cpu/cpuacct.usage /sys/fs/cgroup/cpu/cpu.cfs_quota_us /sys/fs/cgroup/cpu/cpu.cfs_period_us /sys/fs/cgroup/memory/memory.usage_in_bytes /sys/fs/cgroup/memory/memory.soft_limit_in_bytes /sys/fs/cgroup/memory/memory.limit_in_bytes &&grep '^\\(total_rss\\|total_cache\\) ' /sys/fs/cgroup/memory/memory.stat",N="cat /repl/stats/subvolume_usage_bytes /repl/stats/subvolume_total_bytes";function L(){var e=(0,U.Z)((function(){return(0,S.cn)({wallTimeNanos:P().BigInt(0),cpuTimeNanos:P().BigInt(0),cpuUtilPercent:0,memoryUsageRssBytes:0,memoryUsageCacheBytes:0,memorySoftLimitBytes:0,memoryHardLimitBytes:0,storageUsedBytes:0,storageTotalBytes:0,numVCpu:0})}),[]),t=(0,U.Z)((function(){return{cpu:{currentAtom:(0,S.cn)((function(t){return X(t(e).cpuUtilPercent)})),totalAtom:(0,S.cn)((function(){return 100})),cpuCountAtom:(0,S.cn)((function(t){return t(e).numVCpu}))},ram:{currentCacheAtom:(0,S.cn)((function(t){return X(M(t(e).memoryUsageCacheBytes))})),currentRssAtom:(0,S.cn)((function(t){return X(M(t(e).memoryUsageRssBytes))})),totalAtom:(0,S.cn)((function(t){return M(t(e).memorySoftLimitBytes)}))},disk:{currentAtom:(0,S.cn)((function(t){return M(t(e).storageUsedBytes)})),totalAtom:(0,S.cn)((function(t){return M(t(e).storageTotalBytes)}))}}}),[e]),n=(0,S.b9)(e),i=(0,r.Z)(s.useState(!0),2),o=i[0],a=i[1];return function(e){var t=(0,G.Z)().container,n=(0,I.Z)(t),r=(0,B.Z)(e);s.useEffect((function(){var e=!1,t=null;function i(){return o.apply(this,arguments)}function o(){return(o=(0,E.Z)((function(){var o,a,l;return(0,R.__generator)(this,(function(c){switch(c.label){case 0:return[4,n({args:["bash","-c",A]})];case 1:return a=c.sent(),e?[2]:null!==a.error?(_.kg.error("Error running resource tracking command",{errorMessage:a.error}),[2]):[4,n({args:["bash","-c",N]})];case 2:return l=c.sent(),e?[2]:null===l.error||(null===(o=l.output)||void 0===o?void 0:o.includes("No such file or directory"))?(r.current({trackingResult:a,storageResult:l}),t=setTimeout(i,2e3),[2]):(_.kg.error("Error running storage command",{errorMessage:l.error}),[2])}}))}))).apply(this,arguments)}return i(),function(){e=!0,t&&clearTimeout(t)}}),[t,n,r])}((function(e){var t=e.trackingResult,i=e.storageResult;n((function(e){var n,o;try{n=function(e,t){if(9!==e.length)throw new Error("Received unexpected output from resource tracking command: ".concat(e));var n={wallTimeNanos:P().BigInt(0),cpuTimeNanos:P().BigInt(0),cpuUtilPercent:0,memoryUsageRssBytes:0,memoryUsageCacheBytes:0,memorySoftLimitBytes:0,memoryHardLimitBytes:0,storageUsedBytes:0,storageTotalBytes:1073741824,numVCpu:0},i=e.slice(0,7).map((function(e){return parseInt(e,10)}));if(i.includes(NaN))throw new Error("Could not parse one or more values from resource monitoring command: ".concat(e));var o,a,l=P().BigInt(e[0]),c=P().BigInt(e[1]),s=i[2],u=i[3],d=i[5],f=i[6],p=new Map(e.slice(7).map((function(e){var t=(0,r.Z)(e.trim().split(" "),2),n=t[0],i=t[1];return[n,parseInt(i,10)]}))),v=null!==(o=p.get("total_rss"))&&void 0!==o?o:0,m=null!==(a=p.get("total_cache"))&&void 0!==a?a:0;if(!(v>=0&&m>=0&&f>0&&d>0))throw new Error("Memory usage or limit reported negative: ".concat(e));if(n.memoryUsageRssBytes=v,n.memoryUsageCacheBytes=m,n.memorySoftLimitBytes=d,n.memoryHardLimitBytes=f,P().GT(t.wallTimeNanos,0)&&P().GT(t.cpuTimeNanos,0)){var g=P().toNumber(P().subtract(l,t.wallTimeNanos)),Z=P().toNumber(P().subtract(c,t.cpuTimeNanos));if(g>0&&Z>=0&&s>0&&u>0){var y=s/u;n.cpuUtilPercent=100*Z/g/y,n.numVCpu=y}else{n.cpuUtilPercent=0;var b=JSON.stringify((0,T.Z)((0,h.Z)({},t),{wallTimeNanos:t.wallTimeNanos.toString(),cpuTimeNanos:t.cpuTimeNanos.toString()}));_.kg.error("CPU usage calculation returned negative value: ".concat(e,". Previous resources: ").concat(b))}}return n.wallTimeNanos=l,n.cpuTimeNanos=c,n}((t.output||"").trim().split("\n"),e)}catch(l){return _.kg.error("Could not calculate resources",{errorMessage:l.message}),e}if(!n)throw new Error("Expected resources");try{o=function(e){if(2!==e.length)throw new Error("Received unexpected output from storage command: ".concat(e));var t=parseInt(e[0],10),n=parseInt(e[1],10);if(isNaN(t)||isNaN(n))throw new Error("Could not parse values from storage output command: ".concat(e));return{storageUsedBytes:t,storageTotalBytes:n}}((i.output||"").trim().split("\n"))}catch(c){return _.kg.error("Could not calculate resources",{errorMessage:c.message}),e}return n.storageUsedBytes=o.storageUsedBytes,n.storageTotalBytes=o.storageTotalBytes,a(!1),n}))})),{dataAtom:t,loading:o}}function X(e){return Math.round(100*(e+Number.EPSILON))/100}function M(e){return e/1024/1024}var O=n(72030),W=n(9362),F=n(69735);function j(e){return(0,S.Dv)((0,U.Z)((function(){return e||(0,S.cn)(null)}),[e]))}function z(){var e=(0,p.Z)(["from { opacity: 0 } to { opacity: 1 }"]);return z=function(){return e},e}var H=(0,o.Xb)({center:[o.l0.flex.row,o.l0.flex.wrap,o.l0.justify.spaceBetween,o.l0.align.center],text:[o.l0.rowWithGap(2),o.l0.align.center,o.l0.minHeight(o.TV.space24)],textLoading:[o.l0.height(16),o.l0.width(o.TV.space64),o.pt.backgroundPulse(),o.l0.borderRadius(4)],textLoadingWrapper:[o.l0.height("fit-content"),{animation:"".concat((0,O.F4)(z())," 120ms forwards ease-out alternate")}],textWarn:[o.l0.rowWithGap(4),o.l0.align.center,o.l0.px(4)],textPadding:[o.l0.height(16),{lineHeight:"16px"}],textHighlight:[o.l0.color.accentPrimaryStronger],selfMini:[o.l0.rowWithGap(4),o.l0.align.center]});function V(e){var t=e.title,n=e.description,r=e.inactive,a=void 0!==r&&r,l=e.limitStatusAtom,c=e.limitTextAtom,s=e.limitTextSecondaryAtom,u=e.mini,d=e.loading,f=(0,S.Dv)((0,U.Z)((function(){return(0,S.cn)((function(e){return"At limit"===e(l)||"Close to limit"===e(l)}))}),[l]));if(u)return(0,i.BX)(o.G7,{css:H.selfMini,children:[(0,i.tZ)(o.xv,{variant:"small",css:o.l0.color.foregroundDimmer,children:a?t+" last run":t}),f?(0,i.tZ)(F.Z,{color:o.TV.orangeStronger}):null]});var h=null;return h=d?(0,i.tZ)(o.G7,{css:H.textLoading}):(0,i.tZ)(o.xv,{variant:"small",css:H.textPadding,children:s?(0,i.BX)(i.HY,{children:[(0,i.BX)("span",{css:H.textHighlight,children:[" ",(0,i.tZ)(q,{text:c})]})," + ",(0,i.tZ)(q,{text:s})]}):(0,i.tZ)(q,{text:c})}),(0,i.BX)(o.G7,{css:H.center,children:[(0,i.BX)(o.G7,{css:H.text,children:[(0,i.tZ)(o.xv,{css:{fontWeight:o.TV.fontWeightMedium},children:a?t+": last run":t}),n?(0,i.tZ)(o.hU,{alt:n,size:24,children:(0,i.tZ)(W.Z,{})}):null,f?(0,i.BX)(o.G7,{css:H.textWarn,children:[(0,i.tZ)(F.Z,{color:o.TV.orangeStronger}),(0,i.tZ)(o.xv,{variant:"small",css:H.textPadding,children:(0,i.tZ)(q,{text:l})})]}):null]}),(0,i.tZ)(o.G7,{css:H.textLoadingWrapper,children:h},d?"loadingResources":"finishedLoadingResources")]})}function q(e){var t=j(e.text);return(0,i.tZ)(i.HY,{children:t})}var $=n(42301);function Y(){var e=(0,p.Z)(["from { opacity: 0 } to { opacity: 1 }"]);return Y=function(){return e},e}var K=(0,o.Xb)({self:[o.l0.flex.row,o.l0.height(o.TV.space12),o.l0.borderRadius(o.TV.borderRadiusRound),o.gU.filledAndOutlined,o.l0.overflow("clip"),o.l0.position.relative,{animation:"".concat((0,O.F4)(Y())," 120ms forwards ease-out alternate")}],progress:[o.l0.position.relative,o.l0.width("100%"),o.l0.height("100%"),{top:0,left:0}],loading:[o.pt.backgroundPulse()]});function Q(e){var t=e.total,n=e.data,r=void 0===n?[]:n,a=e.disabled,l=void 0!==a&&a,c=e.className,u=e.tooltip,d=e.color,f=e.current,p=e.loading;return(0,i.tZ)(o.u,{placement:"top",tooltip:u,maxWidth:280,isDisabled:p,children:function(e,n){var a;return a=p?null:f?(0,i.tZ)(J,{total:t,disabled:l,current:f,color:d}):null===r||void 0===r?void 0:r.map((function(e,n){return(0,s.createElement)(J,(0,T.Z)((0,h.Z)({},e),{total:t,disabled:l,key:n}))})),(0,s.createElement)(o.G7,(0,T.Z)((0,h.Z)({css:[K.self,p&&K.loading],className:c,innerRef:n},e),{onClick:void 0,key:p?"loadingResources":"finishedLoadingResources"}),a)}})}function J(e){var t=e.current,n=e.noRadius,r=e.color,a=void 0===r?o.TV.accentPrimaryDefault:r,l=e.total,c=e.disabled;return(0,i.tZ)(o.G7,{css:[K.progress,(0,h.Z)({backgroundColor:c?o.TV.outlineDefault:a,width:ee(t,l)+"%"},(0,h.Z)({},n?{}:{borderTopRightRadius:o.TV.borderRadiusRound,borderBottomRightRadius:o.TV.borderRadiusRound}))]})}function ee(e,t){return 0===t?0:Math.max(0,Math.min(100,e/t*100))}function te(e,t,n,r,i){return"empty"===e||void 0===t?"":"vCPU"===i?Math.round(100*Math.min(1,t/n))+"% of "+r+" vCPUs":Math.round(t).toLocaleString()+"/"+Math.round(n).toLocaleString()+" "+i}var ne={accordionTitle:(0,O.iv)([o.l0.rowWithGap(4),o.l0.align.center]),accordionText:(0,O.iv)([o.l0.color.foregroundDimmer,o.l0.fontSize(12)]),accordionIcon:(0,O.iv)([o.l0.cursor.pointer]),expandedWrapper:(0,O.iv)([o.l0.colWithGap(4),o.l0.py(8),o.l0.border({direction:"bottom",color:o.TV.outlineDefault,width:1})])};function re(){return(0,i.tZ)(o.Qd,{headerContent:(0,i.tZ)(o.xv,{css:ne.accordionText,children:"About RAM"}),children:(0,i.BX)(o.G7,{css:ne.expandedWrapper,children:[(0,i.tZ)(le,{type:"Project",text:"is what your programs, code intelligence, and some editor features use. It holds programs that are running right now."}),(0,i.tZ)(le,{type:"Cache",text:"caches file contents, libraries, and executables. If Program Memory gets too high, it will replace Cache Memory. If there\u2019s not enough Cache Memory, processes will slow down."})]})})}var ie={self:(0,O.iv)([o.l0.width(8),o.l0.height(8),o.l0.borderRadius(8),o.l0.flex.shrink(0)])};function oe(e){var t=e.variant;return(0,i.tZ)("div",{css:[ie.self,"primary"===t?o.l0.backgroundColor.accentPrimaryDefault:o.l0.backgroundColor.outlineDefault]})}var ae={self:(0,O.iv)([o.l0.rowWithGap(8),o.l0.align.center]),text:(0,O.iv)([o.l0.flex.shrink(1)]),underline:(0,O.iv)({textDecoration:"underline"})};function le(e){var t=e.type,n=e.text;return(0,i.BX)(o.G7,{css:ae.self,children:[(0,i.tZ)(oe,{variant:"Project"===t?"primary":"secondary"}),(0,i.BX)(o.xv,{multiline:!0,variant:"small",css:ae.text,children:[(0,i.BX)("span",{css:ae.underline,children:[t," Memory"]})," ",n]})]})}var ce=(0,o.Xb)({self:[o.l0.colWithGap(2)],selfMini:[o.l0.colWithGap(4),o.l0.flex.growAndShrink(2),{flexBasis:32}],selfMiniBar:[o.l0.height(8)]});function se(e){var t=e.totalAtom,n=e.currentAtom,r=e.currentSecondaryAtom,a=e.measure,l=e.cpuCountAtom,c=e.title,s=e.description,u=(0,U.Z)((function(){return(0,S.cn)((function(e){return function(e,t){if(void 0===e)return"empty";var n=e/t;return n>=1?"At limit":n>=.9?"Close to limit":"fine"}(e(n),e(t))}))}),[n,t]),d=(0,U.Z)((function(){return(0,S.cn)((function(e){return te(e(u),e(n),e(t),l&&e(l),a)}))}),[u,n,t,l,a]),f=(0,U.Z)((function(){return(0,S.cn)((function(e){return r?te(e(u),e(r),e(t),l&&e(l),a):""}))}),[u,r,t,l,a]),p=(0,U.Z)((function(){return(0,S.cn)((function(e){return r?Math.round(e(n)).toString():e(d)}))}),[r,n,d]);return(0,i.BX)(o.G7,{css:e.mini?ce.selfMini:ce.self,children:[(0,i.tZ)(V,(0,T.Z)((0,h.Z)({title:c,description:s,limitStatusAtom:u,limitTextAtom:p},r?{limitTextSecondaryAtom:f}:{}),{mini:e.mini,loading:e.loading})),(0,i.tZ)(de,(0,T.Z)((0,h.Z)({},e),{limitStatusAtom:u,limitTextAtom:d,limitTextSecondaryAtom:f}))]})}var ue={tooltip:(0,O.iv)(o.l0.colWithGap(2)),tooltipItem:(0,O.iv)(o.l0.rowWithGap(4),o.l0.align.center,o.l0.width("100%"),o.l0.flex.growAndShrink(1)),tooltipItemText:(0,O.iv)(o.l0.flex.row,o.l0.align.center,o.l0.justify.spaceBetween,o.l0.flex.growAndShrink(1),{"&>span":o.l0.display.inlineFlex,gap:$.TV.space4})};function de(e){var t=e.currentAtom,n=e.currentLabel,r=e.currentSecondaryAtom,a=e.currentSecondaryLabel,l=e.totalAtom,c=e.mini,s=e.inactive,u=e.limitStatusAtom,d=e.limitTextAtom,f=e.limitTextSecondaryAtom,h=e.loading,p=(0,S.Dv)(t),v=j(r),m=(0,S.Dv)(l),g=(0,S.Dv)(d),Z=(0,S.Dv)(f),y=(0,S.Dv)((0,U.Z)((function(){return(0,S.cn)((function(e){return"At limit"===(t=e(u))?$.TV.accentNegativeDefault:"Close to limit"===t?$.TV.orangeDefault:void 0;var t}))}),[u]));return r?(0,i.tZ)(Q,{loading:h,css:c&&ce.selfMiniBar,disabled:s,total:m,tooltip:(0,i.BX)(o.G7,{css:ue.tooltip,children:[(0,i.tZ)(fe,{variant:"primary",label:n,labelValue:g}),(0,i.tZ)(fe,{variant:"secondary",label:a,labelValue:Z})]}),data:[{current:p,color:y,noRadius:!0},{current:v||0,color:$.TV.outlineDimmer}]}):(0,i.tZ)(Q,{loading:h,css:c&&ce.selfMiniBar,disabled:s,total:m,current:p,color:y,tooltip:g})}function fe(e){var t=e.variant,n=e.label,r=e.labelValue;return(0,i.BX)(o.G7,{css:ue.tooltipItem,children:[(0,i.tZ)(oe,{variant:t}),(0,i.BX)(o.xv,{css:ue.tooltipItemText,children:[(0,i.BX)("span",{children:[n,":"]}),(0,i.tZ)("span",{children:r})]})]})}var he=Symbol("ReplResources");function pe(e){var t=L(),n=t.dataAtom,r=n.cpu,a=n.ram,l=n.disk,c=t.loading,s=(0,i.tZ)(se,(0,h.Z)({title:"RAM",description:"How much memory your Repl is using",currentAtom:a.currentRssAtom,currentLabel:"Project Memory",currentSecondaryAtom:a.currentCacheAtom,currentSecondaryLabel:"Cache Memory",totalAtom:a.totalAtom,measure:"MB",loading:c},e));return(0,i.BX)(S.zt,{scope:he,children:[(0,i.tZ)(se,(0,h.Z)({title:"CPU",description:"How much processing power your Repl is using",currentAtom:r.currentAtom,totalAtom:r.totalAtom,cpuCountAtom:r.cpuCountAtom,measure:"vCPU",loading:c},e)),e.mini?s:(0,i.BX)(o.G7,{css:o.l0.colWithGap(4),children:[s,(0,i.tZ)(re,{})]}),(0,i.tZ)(se,(0,h.Z)({title:"Storage",description:"How much room your Repl has to store files",currentAtom:l.currentAtom,totalAtom:l.totalAtom,measure:"MB",loading:c},e))]})}function ve(e){var t=e.title,n=e.doWarnAtom,r=e.inactive,a=void 0!==r&&r,l=(0,S.Dv)(n);return(0,i.BX)(o.G7,{css:[o.l0.rowWithGap(4),o.l0.align.center],children:[(0,i.tZ)(o.xv,{variant:"small",css:o.l0.color.foregroundDimmer,children:a?t+" last run":t}),l?(0,i.tZ)(F.Z,{color:o.TV.orangeStronger}):null]})}function me(e){var t=e.title,n=e.totalAtom,r=e.currentAtom,a=e.countAtom,l=e.measure,c=e.limitText,s=e.inactive,u=void 0!==s&&s,d=(0,U.Z)((function(){return(0,S.cn)((function(e){return Ze(e(r),e(n))}))}),[r,n]),f=(0,U.Z)((function(){return(0,S.cn)((function(e){return c||be(e(d),e(r),e(n),a&&e(a),l)}))}),[c,d,r,n,a,l]),h=(0,U.Z)((function(){return(0,S.cn)((function(e){var t=e(d);return"At limit"===t||"Close to limit"===t}))}),[d]);return(0,i.BX)(o.G7,{css:[o.l0.colWithGap(4),o.l0.flex.growAndShrink(2),{flexBasis:32}],children:[t?(0,i.tZ)(ve,{title:t,doWarnAtom:h,inactive:u}):null,(0,i.tZ)(ge,{currentAtom:r,totalAtom:n,inactive:u,limitTextAtom:f,mini:!0})]})}function ge(e){var t=e.currentAtom,n=e.totalAtom,r=e.limitTextAtom,a=e.inactive,l=e.mini,c=(0,S.Dv)(n),s=(0,S.Dv)(t),u=(0,S.Dv)(r),d=function(e){switch(e){case"empty":case"fine":default:return;case"At limit":return o.TV.accentNegativeDefault;case"Close to limit":return o.TV.orangeDefault}}(Ze(s,c));return(0,i.tZ)(o.JY,{css:l&&o.l0.height(8),total:c,current:s,color:d,disabled:a,tooltip:u})}function Ze(e,t){if(void 0===e)return"empty";var n=e/t;return n>=1?"At limit":n>=.9?"Close to limit":"fine"}function ye(e){return Math.round(100*(e+Number.EPSILON))/100}function be(e,t,n,r,i){if("empty"!==e&&void 0!==t)return"vCPU"===i?ye(100*Math.min(1,t/n))+"% of "+r+" vCPUs":ye(t).toLocaleString()+"/"+ye(n).toLocaleString()+" "+i}var we={self:(0,O.iv)([o.l0.p(8),o.l0.colWithGap(8),{borderTop:"1px solid ".concat(o.TV.backgroundHigher)}])};function xe(){var e=(0,r.Z)(s.useState(!1),2),t=e[0],n=e[1];return(0,i.tZ)(i.HY,{children:(0,i.tZ)(o.Tg,{css:we.self,children:t?(0,i.tZ)(_e,{onClose:function(){return n(!1)}}):(0,i.BX)(i.HY,{children:[(0,i.tZ)(a.M,{}),(0,i.tZ)(Ee,{onExpand:function(){return n(!0)}})]})})})}var Ce={self:(0,O.iv)([o.l0.overflow("hidden"),o.l0.rowWithGap(12),o.l0.flex.grow(1),o.l0.justify.spaceBetween,o.l0.align.center,o.l0.focusRing,o.l0.cursor.pointer])};function ke(e){var t=e.inactive,n=void 0!==t&&t;return(0,i.tZ)(o.G7,{css:Ce.self,"aria-expanded":!1,children:(0,i.tZ)(pe,{mini:!0,inactive:n})})}var Se={self:(0,O.iv)([o.l0.overflow("hidden"),o.l0.reset.button,o.l0.rowWithGap(12),o.l0.flex.grow(1),o.l0.justify.spaceBetween,o.l0.align.center,o.l0.focusRing,o.l0.cursor.pointer])};function Ee(e){var t=e.onExpand,n=e.inactive,r=void 0!==n&&n;return(0,i.BX)(o.G7,{css:Se.self,role:"button",tag:"button","aria-expanded":!1,onClick:t,children:[(0,i.tZ)(pe,{mini:!0,inactive:r}),(0,i.tZ)(c.Z,{})]})}var Te={self:(0,O.iv)([o.l0.colWithGap(12),o.l0.p(8)]),selfCollapsable:(0,O.iv)([o.l0.colWithGap(12)]),headerCollapsable:(0,O.iv)([o.l0.flex.row,o.l0.justify.spaceBetween])};function Re(e){var t=e.inactive,n=void 0!==t&&t;return(0,i.BX)(o.G7,{css:Te.self,children:[(0,i.tZ)(pe,{inactive:n}),(0,i.tZ)(k,{})]})}function _e(e){var t=e.inactive,n=void 0!==t&&t,r=e.onClose;return(0,i.BX)(o.G7,{css:Te.selfCollapsable,children:[(0,i.BX)(o.G7,{css:[Te.headerCollapsable],children:[(0,i.tZ)(o.xv,{variant:"subheadDefault",children:"Repl Resources"}),(0,i.tZ)(o.hU,{alt:"collapse",tooltipHidden:!0,onClick:r,"aria-expanded":!0,children:(0,i.tZ)(l.Z,{})})]}),(0,i.tZ)(pe,{inactive:n}),(0,i.tZ)(k,{})]})}},3691:function(e,t,n){n.d(t,{ZP:function(){return K},al:function(){return V},L7:function(){return Y}});var r=n(57135),i=n(57389),o=n(72006),a=n(4405),l=n(96583),c=n(94660),s=n(59496),u=n(43119),d=n(71440),f=n(53486);function h(){var e=(0,u.Z)(["\n  query WorkspaceRunButton($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        language\n        title\n        rootOriginReplUrl\n        source {\n          release {\n            id\n            repl {\n              id\n              title\n              owner {\n                ... on User {\n                  id\n                  username\n                }\n                ... on Team {\n                  id\n                  username\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n    currentUser {\n      id\n    }\n  }\n"]);return h=function(){return e},e}var p={},v=(0,d.Ps)(h());var m=n(10063),g=n(79351),Z=n(57627),y=n(7330),b=n(19666),w=n(24880),x=n(58530),C=n(72030),k=n(12512),S=n(2272),E=n(5109),T=n(32992);function R(){var e=(0,u.Z)(["\n  query CelebrateReplRunCurrentUser {\n    currentUser {\n      id\n      timeCreated\n    }\n  }\n"]);return R=function(){return e},e}var _={},I=(0,d.Ps)(R());var G=n(76804),D=n(88254),P=n(56580),B=new Date("2022-07-08"),U=(0,T.O4)("useCelebrateFirstReplPlay",!1);function A(){var e,t,n=function(e){var t=(0,o.Z)({},_,e);return f.a(I,t)}(),r=(0,P.Z)().preferences.extraDelight,i=(0,G.$0)().fireCircularBurstFrom,a=(0,S.Z)((0,E.KO)(U),2),l=a[0],c=a[1],s=null!==(t=null===(e=n.data)||void 0===e?void 0:e.currentUser)&&void 0!==t?t:null,u=!l&&s&&new Date(s.timeCreated)>=B;return{hasCelebrated:l,celebrate:function(e){e?((r||u)&&i({element:e}),u&&c(!0)):D.Tb(new Error("Cannot find element for celebrate Repl run confetti"))}}}var N,L=n(69153),X=n(68441),M=n(10430),O=n(99340),W=n(51954),F=n(96972),j=n(79161);function z(e){switch(e.runState){case Z.A.IDLE:return(0,c.tZ)(L.Z,{size:16});case Z.A.RUNNING:return(0,c.tZ)(X.Z,{size:16});default:return(0,c.tZ)(w.Z,{size:16})}}var H=(N={},(0,i.Z)(N,Z.A.IDLE,"Run"),(0,i.Z)(N,Z.A.RUNNING,"Stop"),(0,i.Z)(N,Z.A.STOPPING,"Stopping"),(0,i.Z)(N,Z.A.OFFLINE,"Working"),N),V={small:60,large:100},q=(0,C.iv)([y.l0.py(12),y.l0.width(V.small),y.l0.flex.row,y.l0.center,y.l0.borderRadius(8),y.l0.backgroundColor.accentPositiveDimmest,y.l0.color.accentPositiveStronger,y.l0.cursor.pointer,(0,i.Z)({transition:"color 0.2s ease 0s, background-color 0.2s ease 0s",border:"1px solid",borderColor:y.TV.accentPositiveDimmest,lineHeight:1,outline:"0 none","&:hover":[{color:"white"},y.l0.backgroundColor.accentPositiveDefault]},(0,M.et)("tabletMax"),[y.l0.width(V.large)])]),$=(0,C.iv)([y.l0.color.foregroundDimmer,y.l0.backgroundColor.backgroundHigher,{borderColor:y.TV.backgroundHigher,"&:hover":[{color:"white"},y.l0.backgroundColor.backgroundHighest]}]);function Y(e){var t=(0,s.useState)(e.getRunState()),n=t[0],r=t[1];return(0,s.useEffect)((function(){return r(e.getRunState()),e.onStateChanged((function(e){r(e)}))}),[e]),n}function K(e){var t=e.runner,n=e.runConfig,u=e.onRunInitiated,d=e.style,h=void 0===d?"default":d,w=e.disableTooltip,C=e.shortcut,S=(0,g.Z)(),E=Y(t),T=function(e){var t=(0,o.Z)({},p,e);return f.a(v,t)}({variables:{id:S}}).data,R="Repl"===(null===T||void 0===T?void 0:T.repl.__typename)?T.repl:null,_=A().celebrate,I=E!==Z.A.IDLE&&E!==Z.A.RUNNING,G=(0,O.Z)().showError,D=(0,s.useRef)(null),P=function(){var e=(0,r.Z)((function(){var e,r,i,o,a,c,s,d;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return l.trys.push([0,3,,4]),E!==Z.A.IDLE?[3,2]:(u&&u(),D.current&&_(D.current),[4,t.run(n)]);case 1:return l.sent(),R&&(0,m.j)(m.U3.PROJECT_RAN,{language:R.language,replId:R.id,replTitle:R.title,rootOriginReplUrl:R.rootOriginReplUrl,templateTitle:null===(e=R.source)||void 0===e||null===(r=e.release)||void 0===r||null===(i=r.repl)||void 0===i?void 0:i.title,templateOwner:null===(o=R.source)||void 0===o||null===(a=o.release)||void 0===a||null===(c=a.repl)||void 0===c||null===(s=c.owner)||void 0===s?void 0:s.username}),[2];case 2:return E===Z.A.RUNNING?[2,t.stopRun()]:[3,4];case 3:return d=l.sent(),G(d.toString()),W.kg.error("run button error",{errorMessage:d.message}),E===Z.A.RUNNING?[2,t.stopRun()]:[3,4];case 4:return[2]}}))}));return function(){return e.apply(this,arguments)}}();if("floating"===h)return(0,c.tZ)(b.G,{tag:"button",disabled:I,css:[{position:"fixed",right:24,bottom:72,zIndex:1},y.l0.center,{height:"50px",width:"50px",opacity:"0.5",cursor:"pointer",borderRadius:"100%",border:"solid 2px var(--accent-positive-dimmer)",backgroundColor:y.TV.accentPositiveDimmest}],onClick:P,innerRef:D,children:(0,c.tZ)(z,{runState:E})});var B=E===Z.A.IDLE;return"inline-small"===h?(0,c.BX)("button",{"data-cy":"ws-run-btn",onClick:P,ref:D,disabled:I,css:[y.l0.p(12),y.l0.flex.row,y.l0.center,y.l0.borderRadius(8),B?y.l0.backgroundColor.accentPositiveDimmest:y.l0.backgroundColor.backgroundHigher,B?y.l0.color.accentPositiveStronger:y.l0.color.foregroundDimmer,{border:"1px solid",borderColor:B?y.TV.accentPositiveDimmest:y.TV.backgroundHigher},y.l0.width("100%"),y.l0.height("100%")],children:[(0,c.tZ)(z,{runState:E}),(0,c.tZ)(x.xv,{variant:"subheadDefault",css:[y.l0.pl(8)],children:H[E]})]}):(0,c.tZ)(x.u,{placement:"bottom",isDisabled:w||!C,tooltip:C?(0,c.tZ)(j.bM,{keyCombo:C}):null,children:function(e,t){return(0,c.BX)("button",(0,a.Z)((0,o.Z)({},e),{onClick:P,ref:(0,F.l)(D,t),css:[q,!B&&$],children:[(0,c.tZ)(z,{runState:E}),(0,c.tZ)(x.xv,{variant:"subheadDefault",css:[y.l0.pl(8),y.l0.display.none,(0,i.Z)({lineHeight:1,overflow:"visible"},"@media (min-width: ".concat(k.j.tabletMax,"px)"),[y.l0.display.block])],children:H[E]})]}))}})}},24900:function(e,t,n){n.d(t,{Z:function(){return ce}});var r=n(2272),i=n(94660),o=n(59496),a=n(78575),l=n(1665),c=n(69694),s=n(79351),u=n(24880),d=n(72006),f=n(4405),h=n(79794),p=n(75399),v=n(96843),m=n(58530),g=n(99340),Z=n(41841),y=n(94841),b=n(29356),w=n.n(b),x=n(51274),C=n(86925),k=n(66693),S=k.q6.define();function E(e){var t=e.editorRef,n=e.onChange,r=e.placeholder,a=e.skeleton,l=e.language,c=e.skeletonClosingBracket,s=e.indentSize,u=void 0===s?2:s,d=(0,x.Z)({language:l,indentIsSpaces:!0,indentSize:2,fontSize:14}),f=d.view,h=d.ref,p=o.useRef(a?"".concat(a,"\n"):""),v=c?"\n".concat(c):"",m=" ".repeat(u);return o.useEffect((function(){if(f&&f.state.doc.length){var e=p.current;p.current=a?"".concat(a,"\n"):"",f.dispatch({changes:{from:0,to:e.length-1,insert:a},annotations:[k.YW.addToHistory.of(!1),S.of(!0)]})}}),[f,a]),o.useEffect((function(){if(f){var e=k.yy.changeFilter.of((function(e){return!!e.annotation(S)||[-1,p.current.length,e.startState.doc.length-v.length,e.startState.doc.length+1]})),i=C.tk.updateListener.of((function(e){var t=e.state.doc.slice(p.current.length,e.state.doc.toString().length-v.length).toString();if(t!=="".concat(m).concat(r,"\n").concat(m)?n(t):n(""),e.docChanged&&e.state.doc.length===p.current.length+v.length){var i="\n"+m;f.dispatch({changes:{from:p.current.length-1,insert:"\n"+m},selection:{anchor:p.current.length+i.length-1},annotations:[S.of(!0)]})}})),o="".concat(p.current).concat(m).concat(r,"\n").concat(v);f.dispatch({changes:{from:0,to:f.state.doc.length,insert:o},effects:k.Py.appendConfig.of([e,i]),selection:{anchor:o.length},annotations:k.YW.addToHistory.of(!1)}),t({setValue:function(e){if(e){var t=f.state.doc.toString().length;f.dispatch({changes:{from:p.current.length,to:t-v.length,insert:e},annotations:k.YW.addToHistory.of(!1)})}},focus:function(){return f.focus()}})}}),[n,l,f,v,t,r,m]),(0,i.BX)("div",{className:"jsx-c0a72647b9c20ef editor",children:[(0,i.tZ)("div",{ref:h,className:"jsx-c0a72647b9c20ef"}),(0,i.tZ)(w(),{id:"c0a72647b9c20ef",children:".editor.jsx-c0a72647b9c20ef{overflow:auto;position:absolute;width:100%;height:100%}.loader.jsx-c0a72647b9c20ef{height:100%;width:100%;z-index:5}"})]})}var T=n(10063),R=n(56152);function _(e){var t,n,a,l,c=e.isOpen,u=e.meta,p=e.language,y=e.hasMetadata,b=e.onClose,w=(0,s.Z)(),x=(0,g.Z)().showConfirm,C=(0,r.Z)(o.useState(null),2),k=C[0],S=C[1],E=(0,r.Z)(o.useState(!0),2),_=E[0],B=E[1],U=(0,r.Z)(o.useState((null===u||void 0===u?void 0:u.initialization)||""),2),A=U[0],N=U[1],L=(0,r.Z)(o.useState((null===u||void 0===u?void 0:u.imports)||""),2),X=L[0],M=L[1],O=(0,r.Z)(o.useState((null===u||void 0===u?void 0:u.setup)||""),2),W=O[0],F=O[1],j=(0,r.Z)(o.useState((null===u||void 0===u?void 0:u.tearDown)||""),2),z=j[0],H=j[1],V=(0,r.Z)((0,h.rU)({onError:function(e){return S(e.message)},update:function(e,t){var n,r=null===(n=t.data)||void 0===n?void 0:n.createReplUnitTestMeta;r&&("UserError"===r.__typename?S(r.message):"ReplUnitTestMeta"===r.__typename&&(e.modify({id:e.identify({__typename:"Repl",id:w}),fields:{unitTests:function(t){var n=e.writeFragment({data:r,fragment:h.aA});return t?(0,f.Z)((0,d.Z)({},t),{meta:(0,d.Z)({},n)}):{__typename:"ReplUnitTestsWithMeta",meta:n,tests:[]}}}}),x("Setup saved!"),b()))}}),2),q=V[0],$=V[1],Y=(0,r.Z)((0,h.AF)({onError:function(e){return S(e.message)},onCompleted:function(e){var t=e.updateReplUnitTestMeta;t&&("UserError"===t.__typename?S(t.message):"ReplUnitTestMeta"===t.__typename&&(x("Imports updated!"),b()))}}),2),K=Y[0],Q=Y[1],J=(0,Z.x)(p),ee=X!==(null===u||void 0===u?void 0:u.imports)||A!==(null===u||void 0===u?void 0:u.initialization)||W!==(null===u||void 0===u?void 0:u.setup)||z!==(null===u||void 0===u?void 0:u.tearDown),te=$.loading||Q.loading;return(0,i.tZ)(m.u_,{isOpen:c,onRequestClose:b,maxWidth:872,children:(0,i.BX)(m.G7,{css:[m.l0.colWithGap(24)],children:[(0,i.tZ)(m.h4,{level:1,variant:"headerDefault",children:"Setup"}),(0,i.tZ)(I,{unitTestsLib:J,onChange:M,language:p,initialValue:null!==(t=null===u||void 0===u?void 0:u.imports)&&void 0!==t?t:""}),(0,i.tZ)(m.G7,{onClick:function(){return B(!_)},css:{cursor:"pointer"},children:(0,i.BX)(m.G7,{css:[m.l0.rowWithGap(8),m.l0.align.center],children:[(0,i.tZ)(m.h4,{level:2,variant:"headerDefault",children:"Advanced"}),(0,i.tZ)(v.Z,{color:"var(--foreground-default)",size:20,rotate:_?270:0})]})}),_?null:(0,i.BX)(m.G7,{css:[m.l0.colWithGap(8)],children:[(0,i.tZ)(G,{unitTestsLib:J,onChange:N,language:p,initialValue:null!==(n=null===u||void 0===u?void 0:u.initialization)&&void 0!==n?n:""}),(0,i.tZ)(D,{unitTestsLib:J,onChange:F,language:p,initialValue:null!==(a=null===u||void 0===u?void 0:u.setup)&&void 0!==a?a:""}),(0,i.tZ)(P,{unitTestsLib:J,onChange:H,language:p,initialValue:null!==(l=null===u||void 0===u?void 0:u.tearDown)&&void 0!==l?l:""})]}),(0,i.BX)(m.G7,{css:[m.l0.flex.row,m.l0.justify.spaceBetween],children:[(0,i.tZ)(m.xv,{css:[m.l0.color.accentNegativeStronger],multiline:!0,children:k}),(0,i.BX)(m.G7,{css:[m.l0.rowWithGap(12)],children:[(0,i.tZ)(m.zx,{disabled:te,onClick:b,text:"Cancel"}),(0,i.tZ)(m.zx,{colorway:"primary",disabled:!ee||te,onClick:function(){(0,T.j)(T.U3.REPL_UNIT_TEST_USED,{action:"modifiedSetup"}),y?K({variables:{input:{initialization:A,imports:X,setup:W,tearDown:z,replId:w}}}):q({variables:{input:{initialization:A,imports:X,setup:W,tearDown:z,replId:w}}})},iconLeft:(0,i.tZ)(R.Z,{}),text:"".concat(te?"Saving...":"Save")})]})]})]})})}function I(e){var t=e.unitTestsLib,n=e.onChange,a=e.language,l=e.initialValue,c=(0,r.Z)(o.useState(null),2),s=c[0],u=c[1];o.useEffect((function(){s&&(s.setValue(l),s.focus())}),[s,l]);var d=t.defaultImports().trim();return(0,i.BX)(m.G7,{css:[m.l0.colWithGap(8)],children:[(0,i.BX)(m.G7,{css:[m.l0.flex.row,m.l0.justify.spaceBetween,m.l0.align.center],children:[(0,i.tZ)(m.h4,{level:2,variant:"subheadDefault",children:"Imports"}),(0,i.tZ)(m.ZP,{iconLeft:(0,i.tZ)(y.Z,{}),text:"Docs",href:"https://docs.replit.com/teams-edu/unit-testing",target:"_blank",outlined:!0})]}),(0,i.tZ)(m.G7,{css:[m.l0.backgroundColor.backgroundDefault,m.l0.borderRadius(8),{border:"1px solid var(--background-highest)"}],children:(0,i.tZ)(m.G7,{css:[m.l0.borderRadius(8),m.l0.height(200),m.l0.position.relative],children:(0,i.tZ)(E,{onChange:n,placeholder:"".concat(t.getCommentChar()," Add imports here"),editorRef:u,language:a,skeleton:d,skeletonClosingBracket:"",indentSize:0})})})]})}function G(e){var t=e.unitTestsLib,n=e.onChange,a=e.language,l=e.initialValue,c=(0,r.Z)(o.useState(null),2),s=c[0],u=c[1];o.useEffect((function(){s&&s.setValue(l)}),[s,l]);var d=t.classConstructorName();return(0,i.BX)(m.G7,{css:[m.l0.colWithGap(8)],children:[(0,i.BX)(m.G7,{css:[m.l0.flex.row,m.l0.justify.spaceBetween,m.l0.align.center],children:[(0,i.tZ)(m.h4,{level:2,variant:"subheadDefault",children:"Initialization"}),(0,i.tZ)(m.ZP,{iconLeft:(0,i.tZ)(y.Z,{}),text:"Docs",href:"https://docs.replit.com/teams-edu/unit-testing",target:"_blank",outlined:!0})]}),d?(0,i.BX)(m.xv,{multiline:!0,children:["Hint: constructor name is ",(0,i.tZ)("code",{children:d}),"."]}):null,(0,i.tZ)(m.G7,{css:[m.l0.backgroundColor.backgroundDefault,m.l0.borderRadius(8),{border:"1px solid var(--background-highest)"}],children:(0,i.tZ)(m.G7,{css:[m.l0.borderRadius(8),m.l0.height(200),m.l0.position.relative],children:(0,i.tZ)(E,{onChange:n,placeholder:"".concat(t.getCommentChar()," Add initialization code here"),editorRef:u,language:a,skeleton:"",skeletonClosingBracket:"",indentSize:0})})})]})}function D(e){var t=e.unitTestsLib,n=e.onChange,a=e.language,l=e.initialValue,c=(0,r.Z)(o.useState(null),2),s=c[0],u=c[1];o.useEffect((function(){s&&s.setValue(l)}),[s,l]);var d=t.setupIntro().trim();return(0,i.BX)(m.G7,{css:[m.l0.colWithGap(8)],children:[(0,i.BX)(m.G7,{css:[m.l0.flex.row,m.l0.justify.spaceBetween,m.l0.align.center],children:[(0,i.tZ)(m.h4,{level:2,variant:"subheadDefault",children:"Setup"}),(0,i.tZ)(m.ZP,{iconLeft:(0,i.tZ)(y.Z,{}),text:"Docs",href:"https://docs.replit.com/teams-edu/unit-testing",target:"_blank",outlined:!0})]}),(0,i.tZ)(m.G7,{css:[m.l0.backgroundColor.backgroundDefault,m.l0.borderRadius(8),{border:"1px solid var(--background-highest)"}],children:(0,i.tZ)(m.G7,{css:[m.l0.borderRadius(8),m.l0.height(200),m.l0.position.relative],children:(0,i.tZ)(E,{onChange:n,placeholder:"".concat(t.getCommentChar()," Add setup code here"),editorRef:u,language:a,skeleton:d,skeletonClosingBracket:t.hasClosingBrackets()?t.getClosingBrackets():""})})})]})}function P(e){var t=e.unitTestsLib,n=e.onChange,a=e.language,l=e.initialValue,c=(0,r.Z)(o.useState(null),2),s=c[0],u=c[1];o.useEffect((function(){s&&s.setValue(l)}),[s,l]);var d=t.tearDownIntro().trim();return(0,i.BX)(m.G7,{css:[m.l0.colWithGap(8)],children:[(0,i.BX)(m.G7,{css:[m.l0.flex.row,m.l0.justify.spaceBetween,m.l0.align.center],children:[(0,i.tZ)(m.h4,{level:2,variant:"subheadDefault",children:"Teardown"}),(0,i.tZ)(m.ZP,{iconLeft:(0,i.tZ)(y.Z,{}),text:"Docs",href:"https://docs.replit.com/teams-edu/unit-testing",target:"_blank",outlined:!0})]}),(0,i.tZ)(m.G7,{css:[m.l0.backgroundColor.backgroundDefault,m.l0.borderRadius(8),{border:"1px solid var(--background-highest)"}],children:(0,i.tZ)(m.G7,{css:[m.l0.borderRadius(8),m.l0.height(200),m.l0.position.relative],children:(0,i.tZ)(E,{onChange:n,placeholder:"".concat(t.getCommentChar()," Add teardown code here"),editorRef:u,language:a,skeleton:d,skeletonClosingBracket:t.hasClosingBrackets()?t.getClosingBrackets():""})})})]})}var B=function(e){var t=e.language,n=e.meta,a=(0,r.Z)(o.useState(!1),2),l=a[0],c=a[1];return(0,i.BX)(i.HY,{children:[(0,i.tZ)(m.zx,{iconLeft:(0,i.tZ)(p.Z,{}),onClick:function(){return c(!0)},text:"Setup"}),(0,i.tZ)(_,{language:t,isOpen:l,onClose:function(){return c(!1)},hasMetadata:Boolean(null===n||void 0===n?void 0:n.id),meta:n})]})},U=n(9970),A=n(74296),N=n(36877),L=n(65782),X=n(36918),M=n(29847),O=n(34477),W=n(75408),F=n(57135),j=n(96583),z=n(88254),H=n(56579),V=n(42928),q=n(90532),$="\x1b[0;31m",Y="\x1b[0m",K=["\u28fe","\u28fd","\u28fb","\u28bf","\u287f","\u28df","\u28ef","\u28f7","\u2801","\u2802","\u2804","\u2840","\u2880","\u2820","\u2810","\u2808"];function Q(e){var t=e.name,n=e.failureMessage,r=e.stack;return"\u274c\t".concat($).concat(t).concat(Y,"\r").concat(n?"\nMessage: ".concat(n,"\r"):"","\nStack Trace:\r\n").concat(r.replace(/\n/g,"\r\n"),"\n\r\n\r\n")}var J=function(e){var t=e.language,n=e.unitTests,a=e.onResult,l=e.trackingContext,c=function(e){v.writeToTerminal(e)},s=function(){v.clearTerminal(),c("\r\n")},u=(0,r.Z)(o.useState(!1),2),f=u[0],h=u[1],p=(0,H.Z)(),v=p.session,g=p.container,y=p.packager,b=p.fs,w=null,x=function(){h(!1),(0,q.WT)(b),w&&(w.stopLogSpinner(),w=null)},C=function(){var e=(0,F.Z)((function(){var e,r,i,o,u,p,v,m,C,k,S,E,R,_,I,G,D,P,B,A,N,L;return(0,j.__generator)(this,(function(X){switch(X.label){case 0:if(f)return[2];if(e=null,w={startLogSpinner:function(t){if(e)throw new Error("A spinner is already active! call stopSpinner first or use the update callback to update the active spinner's message.");var n=t,r=0;return e=setInterval((function(){r++;var e=K[r%K.length];if(!w)throw new Error("Expected logger");w.clearLine(),w.logMessage(e+" "+n)}),100),function(e){n=e}},stopLogSpinner:function(){e&&clearInterval(e),e=null},logMessage:c,clearLogs:s,clearLine:function(){if(!w)throw new Error("Expected logger");w.logMessage("\x1b[1K\r")}},!n)throw new Error("Run button should not be active if there are no tests");return h(!0),(0,T.j)(T.U3.REPL_UNIT_TEST_USED,{trackingData:{context:l},action:"ranTests"}),w.clearLogs(),[4,(r=(0,Z.x)(t)).buildAndRunTests((0,d.Z)({container:g,fs:b,packager:y,logger:w},n))];case 1:if(i=X.sent(),w.stopLogSpinner(),w.clearLine(),w.clearLogs(),null!==i.error)return w.logMessage("".concat($).concat(i.error).concat(Y,"\r\n")),x(),n.tests.map((function(e){return{testId:e.id,didPass:!1}})),[2];if(o=i.result.passed?[]:i.result.failures.map((function(e){return r.parseTestResultName(e.name)})),u=[],p=n.tests.map((function(e){return r.getProperTestName(e.name)})),v=o.filter((function(e){return!p.includes(e)})),v.length)C=v[0],k=i.result.failures[0].stack,w.logMessage(Q({name:C,failureMessage:"The following error occurred but was not related to a single unit test",stack:k})),(m=u).push.apply(m,(0,U.Z)(n.tests.map((function(e){return{testId:e.id,didPass:!1}}))));else{S=!0,E=!1,R=void 0;try{for(_=n.tests[Symbol.iterator]();!(S=(I=_.next()).done);S=!0)G=I.value,D=r.getProperTestName(G.name),P=o.indexOf(D),B=-1===P,u.push({testId:G.id,didPass:B}),B?w.logMessage((M=D,"\u2705\t".concat("\x1b[0;32m").concat(M).concat(Y,"\r\n\r\n"))):(A=i.result.failures[P].stack,w.logMessage(Q({name:D,failureMessage:G.failureMessage,stack:A})))}catch(O){E=!0,R=O}finally{try{S||null==_.return||_.return()}finally{if(E)throw R}}}return a(u),N=n.tests.length,i.result.passed?(w.logMessage("".concat("\x1b[48;5;22m","  All tests have passed ").concat(N,"/").concat(N,"  ").concat(Y,"\r\n")),x(),[2]):(L=N-i.result.failures.length,w.logMessage("".concat("\x1b[48;5;88m","  ").concat(L,"/").concat(N," passed, see errors above  ").concat(Y)),x(),[2])}var M}))}));return function(){return e.apply(this,arguments)}}(),k=function(){var e=(0,F.Z)((function(){return(0,j.__generator)(this,(function(e){try{C()}catch(t){z.$e((function(e){e.setTag("unittestsrun","true"),z.Tb(t)})),w&&w.logMessage("\r\n".concat($," Sorry, we have failed to run your tests. Please try again or contact support. ").concat(Y,"\r\n")),x()}return[2]}))}));return function(){return e.apply(this,arguments)}}();return Boolean(n&&n.tests.length>0)?(0,i.tZ)(m.G7,{children:(0,i.tZ)(m.zx,{disabled:f,colorway:"primary",iconLeft:(0,i.tZ)(V.Z,{}),onClick:k,text:f?"Running tests...":"Run tests"})}):null},ee=n(45715);function te(e){var t=e.isOpen,n=e.test,a=e.language,l=e.onClose,u=e.trackingContext,p=(0,s.Z)(),v=(0,g.Z)().showConfirm,y=(0,r.Z)(o.useState(null),2),b=y[0],w=y[1],x=(0,r.Z)(o.useState(""),2),C=x[0],k=x[1],S=(0,r.Z)(o.useState(""),2),_=S[0],I=S[1],G=(0,r.Z)(o.useState(""),2),D=G[0],P=G[1],B=(0,r.Z)((0,h.Hd)({onError:function(e){return P(e.message)},update:function(e,t){var n,r=null===(n=t.data)||void 0===n?void 0:n.createReplUnitTest;r&&("UserError"===r.__typename?P(r.message):"ReplUnitTest"===r.__typename&&(e.modify({id:e.identify({__typename:"Repl",id:p}),fields:{unitTests:function(t){var n=e.writeFragment({data:r,fragment:h.Rb});return t?(0,f.Z)((0,d.Z)({},t),{tests:(0,U.Z)(t.tests).concat([n])}):{__typename:"ReplUnitTestsWithMeta",meta:null,tests:[n]}}}}),v("Test created!"),l()))}}),2),A=B[0],L=B[1],X=(0,r.Z)((0,h.kO)({onError:function(e){return P(e.message)},onCompleted:function(e){var t=e.updateReplUnitTest;t&&("UserError"===t.__typename?P(t.message):"ReplUnitTest"===t.__typename&&(v("Test updated!"),l()))}}),2),F=X[0],j=X[1],z=(0,W.Y)("",(function(e){return e.length<=0?{message:"Must include test name"}:e.trim().split(" ").length>1?{message:"Test name must only be one word"}:void 0}));o.useEffect((function(){z.setValue((null===n||void 0===n?void 0:n.name)||"",{preventTouch:!0}),I((null===n||void 0===n?void 0:n.failureMessage)||""),k((null===n||void 0===n?void 0:n.code)||""),b&&b.setValue((null===n||void 0===n?void 0:n.code)||"")}),[n,b]),o.useEffect((function(){P("")}),[C,P]);var H=(0,Z.x)(a),V="".concat(H.getCommentChar()," Enter code here"),q=!n||n.name!==z.value||n.code!==C||n.failureMessage!==_,$=L.loading||j.loading,Y=H.testIntro(z.value||""),K=H.hasClosingBrackets()?H.getClosingBrackets():"",Q=(0,r.Z)(o.useState(!1),2),J=Q[0],te=Q[1],ne=function(){b&&(b.setValue("  "+H.exampleTest.code),b.focus()),k(H.exampleTest.code)};return(0,i.tZ)(m.u_,{isOpen:t,onRequestClose:l,maxWidth:872,children:(0,i.BX)(m.G7,{css:[m.l0.colWithGap(24)],children:[(0,i.tZ)(m.h4,{level:1,variant:"headerDefault",children:"New unit test"}),(0,i.BX)(m.G7,{css:[m.l0.colWithGap(8)],children:[(0,i.tZ)("label",{htmlFor:"name",children:(0,i.tZ)(m.h4,{level:2,variant:"subheadDefault",children:"Name"})}),(0,i.tZ)(m.Zl,{id:"name",label:"Test name",status:null,autoFocus:!0,required:!0,value:z.value,isValid:z.isValid,error:z.error,warning:z.warning,touched:z.touched,onChange:function(e){z.setValue(e.target.value)},placeholder:"Enter test name here"})]}),(0,i.BX)(m.G7,{css:[m.l0.colWithGap(8)],children:[(0,i.BX)(m.G7,{css:[m.l0.flex.row,m.l0.align.center,m.l0.justify.spaceBetween],children:[(0,i.tZ)(m.h4,{level:2,variant:"subheadDefault",children:"Code"}),(0,i.BX)(m.G7,{css:[m.l0.rowWithGap(4)],children:[(0,i.BX)(ee.Z,{isOpen:J,onClickOutside:function(){return te(!1)},placement:"bottom-end",children:[(0,i.tZ)(m.zx,{iconLeft:(0,i.tZ)(N.Z,{}),small:!0,outlined:!0,text:"View an example",onClick:function(){[V,H.exampleTest.code].includes(C.trim())?ne():te(!0)}}),(0,i.BX)(m.G7,{children:["This will overwrite your current test. Are you sure?",(0,i.BX)(m.G7,{css:[m.l0.rowWithGap(4),m.l0.pt(8)],children:[" ",(0,i.tZ)(m.zx,{text:"No, go back",small:!0,iconLeft:(0,i.tZ)(M.Z,{}),onClick:function(){te(!1)}}),(0,i.tZ)(m.zx,{text:"Yes, delete test",colorway:"negative",small:!0,iconLeft:(0,i.tZ)(R.Z,{}),onClick:function(){ne(),te(!1)}})]})]})]}),(0,i.tZ)(m.ZP,{iconLeft:(0,i.tZ)(O.Z,{}),small:!0,outlined:!0,text:"View docs",target:"_blank",href:"https://docs.replit.com/teams-edu/unit-testing"})]})]}),(0,i.tZ)(m.G7,{css:[m.l0.backgroundColor.backgroundDefault,m.l0.borderRadius(8),{border:"1px solid var(--background-highest)"}],children:(0,i.tZ)(m.G7,{css:[m.l0.borderRadius(8),m.l0.height(200),m.l0.position.relative],children:(0,i.tZ)(E,{skeleton:Y,skeletonClosingBracket:K,language:a,editorRef:w,onChange:k,placeholder:V})})})]}),(0,i.BX)(m.G7,{css:[m.l0.colWithGap(8)],children:[(0,i.tZ)(m.h4,{level:2,variant:"subheadDefault",children:"Failure message"}),(0,i.tZ)(m.II,{value:_,onChange:function(e){return I(e.target.value)},placeholder:"This will be displayed on test failure"})]}),(0,i.BX)(m.G7,{css:[m.l0.flex.row,m.l0.align.center,m.l0.justify.spaceBetween],children:[(0,i.tZ)(m.xv,{css:[m.l0.color.accentNegativeStronger],children:D}),(0,i.BX)(m.G7,{css:[m.l0.rowWithGap(12)],children:[(0,i.tZ)(m.zx,{text:"Cancel",onClick:l}),(0,i.tZ)(m.zx,{text:"".concat($?"Creating test...":"Create test"),iconLeft:(0,i.tZ)(c.Z,{}),colorway:"primary",disabled:!q||$,onClick:function(){z.validate()||(C.length<=0?P("Test cannot be empty"):n?(F({variables:{input:{name:z.value,code:C,failureMessage:_,testId:n.id}}}),(0,T.j)(T.U3.REPL_UNIT_TEST_USED,{trackingData:{context:u},action:"modifiedTest"})):(A({variables:{input:{name:z.value,code:C,failureMessage:_,replId:p}}}),(0,T.j)(T.U3.REPL_UNIT_TEST_USED,{trackingData:{context:u},action:"addedTest"})))}})]})]})]})})}function ne(e){var t=e.testId,n=e.onClose,a=(0,g.Z)().showConfirm,l=(0,s.Z)(),c=(0,r.Z)((0,h.IV)({onError:function(e){return y(e.message)},update:function(e,r){var i,o=null===(i=r.data)||void 0===i?void 0:i.deleteReplUnitTest;o&&("UserError"===o.__typename?y(o.message):"ReplUnitTest"===o.__typename&&t&&(e.modify({id:e.identify({__typename:"Repl",id:l}),fields:{unitTests:function(e,n){var r=n.readField,i=e.tests.filter((function(e){return r("id",e)!==t}));return(0,f.Z)((0,d.Z)({},e),{tests:(0,U.Z)(i)})}}}),(0,T.j)(T.U3.REPL_UNIT_TEST_USED,{action:"removedTest"}),a("Test deleted!"),n()))}}),2),u=c[0],p=c[1],v=(0,r.Z)(o.useState(""),2),Z=v[0],y=v[1];return(0,i.tZ)(m.u_,{isOpen:Boolean(t),onRequestClose:n,children:(0,i.BX)(m.G7,{css:[m.l0.colWithGap(24)],children:[(0,i.tZ)(m.h4,{level:1,variant:"headerDefault",children:"Delete test?"}),(0,i.tZ)(m.xv,{multiline:!0,children:"Are you sure you want to delete this test? This cannot be undone."}),(0,i.BX)(m.G7,{css:[m.l0.flex.row,m.l0.justify.spaceBetween,m.l0.align.center],children:[(0,i.tZ)(m.xv,{multiline:!0,css:[m.l0.color.accentNegativeStronger],children:Z}),(0,i.BX)(m.G7,{css:[m.l0.rowWithGap(12),m.l0.justify.end],children:[(0,i.tZ)(m.zx,{text:"Cancel",disabled:p.loading,onClick:n}),(0,i.tZ)(m.zx,{text:"Yes, delete this test",colorway:"negative",iconLeft:(0,i.tZ)(X.Z,{}),disabled:p.loading,onClick:function(){if(!t)throw new Error("Expected a testId");u({variables:{testId:t}})}})]})]})]})})}var re=function(e){var t=e.unitTests,n=e.isAddingTest,a=e.onClose,l=e.language,u=e.canWrite,d=e.trackingContext,f=void 0===d?"default":d,p=(0,r.Z)(o.useState(n),2),v=p[0],g=p[1],Z=(0,r.Z)(o.useState(null),2),y=Z[0],b=Z[1],x=(0,r.Z)(o.useState(null),2),C=x[0],k=x[1],S=(0,s.Z)(),E=(0,r.Z)((0,h.lQ)(),1)[0],T=(null===t||void 0===t?void 0:t.tests)||[];return(0,i.BX)(m.G7,{css:[m.l0.colWithGap(16)],children:[(0,i.tZ)(J,{language:l,unitTests:t,onResult:function(e){E({variables:{input:{replId:S,results:e},replId:S}})},trackingContext:f}),T.length>0?(0,i.tZ)(m.G7,{css:[m.l0.colWithGap(8),m.l0.align.center],children:T.map((function(e){var t,n;return"ReplUnitTestLastRun"===(null===(t=e.lastRun)||void 0===t?void 0:t.__typename)&&(e.lastRun.status===A.$I.Passed?n="passed-test":e.lastRun.status===A.$I.Failed&&(n="failed-test")),(0,i.tZ)(m.G7,{className:"test ".concat(n),css:{width:"100%"},children:(0,i.BX)(m.G7,{css:[m.l0.flex.row,m.l0.justify.spaceBetween,m.l0.align.center,m.l0.p(8),m.l0.borderRadius(8),{border:"1px solid var(--background-highest);"}],children:[(0,i.tZ)(m.xv,{children:e.name}),u?(0,i.BX)(m.G7,{css:[m.l0.rowWithGap(8)],children:[(0,i.tZ)(m.hU,{onClick:function(){b(e)},alt:"Edit",children:(0,i.tZ)(L.Z,{})}),(0,i.tZ)(m.hU,{onClick:function(){k(e.id)},alt:"Delete",children:(0,i.tZ)(X.Z,{})})]}):null]})},e.id)}))}):(0,i.BX)(m.G7,{css:[m.l0.colWithGap(8),m.l0.align.center],children:[(0,i.tZ)(m.xv,{multiline:!0,css:[m.l0.textAlign.center],children:"Looks like you don\u2019t have any tests yet!"}),u?(0,i.tZ)(m.zx,{text:"Add test",onClick:function(){return g(!0)},iconLeft:(0,i.tZ)(c.Z,{})}):null]}),(0,i.tZ)(te,{isOpen:v||Boolean(y)||n,test:y,language:l,onClose:function(){b(null),g(!1),a&&a()},trackingContext:f}),(0,i.tZ)(ne,{testId:C,onClose:function(){return k(null)}}),(0,i.tZ)(w(),{id:"a2df1ed8108a6cad",children:".tests-wrapper.jsx-a2df1ed8108a6cad{-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);padding:var(--space-16)0;width:100%}.test.jsx-a2df1ed8108a6cad{padding:var(--space-8)var(--space-8);border:1px solid var(--outline-dimmest);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4)}.passed-test.jsx-a2df1ed8108a6cad{border-color:var(--accent-positive-default);background:var(--accent-positive-dimmer)}.failed-test.jsx-a2df1ed8108a6cad{border-color:var(--accent-negative-default);background:var(--accent-negative-dimmer)}"})]})},ie=n(44542),oe=n(19012);var ae=function(e){var t=e.onClick,n=e.hasTests,r=n?{"aria-label":"Delete all tests to switch test type","data-microtip-position":"bottom","data-microtip-size":"medium",role:"tooltip"}:{};return(0,i.BX)("div",(0,f.Z)((0,d.Z)({},r),{className:"jsx-44786ca38dd3aa42 "+(r&&null!=r.className&&r.className||"back-button"),children:[(0,i.tZ)(ie.Z,{filled:!1,border:!1,size:"small",Icon:oe.Z,onClick:t,disabled:n,children:"Switch test type"}),(0,i.tZ)(w(),{id:"44786ca38dd3aa42",children:".back-button.jsx-44786ca38dd3aa42{width:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}"})]}))},le=n(62967);var ce=function(e){var t,n,d,f,h=e.onBack,p=(0,s.Z)(),v=(0,r.Z)(o.useState(!1),2),g=v[0],Z=v[1],y=(0,le.Z)(),b=y.language,w=y.isLoading,x=(0,a.CH)({variables:{replId:p}}),C=null===(t=x.data)||void 0===t?void 0:t.repl;if(x.loading||w)return(0,i.tZ)(m.G7,{css:[m.l0.backgroundColor.backgroundDefault,m.l0.flex.row,m.l0.align.center,m.l0.justify.center,m.l0.p(16)],children:(0,i.tZ)(u.Z,{})});if(!C||"Repl"!==C.__typename)return(0,i.tZ)(m.G7,{css:[m.l0.p(16)],children:(0,i.tZ)(m.xv,{multiline:!0,css:{textAlign:"center"},children:"Unable to fetch tests, please try again."})});if(!b)return(0,i.tZ)(m.G7,{css:[m.l0.p(16)],children:(0,i.tZ)(m.xv,{multiline:!0,css:{textAlign:"center"},children:"Unit tests are currently only supported in Java, Python, and Node.js Repls."})});var k="default";(null===C||void 0===C?void 0:C.isProject)?k="project_repl":(null===C||void 0===C?void 0:C.isProjectFork)&&(k="submission_repl");var S=Boolean((null===(n=C.unitTests)||void 0===n?void 0:n.tests)&&C.unitTests.tests.length>0);return(null===C||void 0===C||null===(d=C.currentUserPermissions)||void 0===d?void 0:d.writeTests)?(0,i.BX)(m.G7,{css:[m.l0.colWithGap(16),m.l0.align.center],children:[(0,i.BX)(m.G7,{css:[m.l0.flex.row,m.l0.justify.spaceBetween,m.l0.align.center,{width:"100%"}],children:[(0,i.tZ)(l.Z,{truncate:!0,level:4,children:"Unit tests"}),(0,i.tZ)(m.hU,{alt:"Add test",size:32,onClick:function(){return Z(!0)},children:(0,i.tZ)(c.Z,{})})]}),(0,i.BX)(m.G7,{css:[m.l0.colWithGap(8),m.l0.maxWidth(256),{width:"80%"}],children:[(0,i.tZ)(B,{language:b,meta:(null===(f=C.unitTests)||void 0===f?void 0:f.meta)||null}),(0,i.tZ)(re,{isAddingTest:g,unitTests:(null===C||void 0===C?void 0:C.unitTests)||null,onClose:function(){return Z(!1)},language:b,canWrite:!0,trackingContext:k}),h?(0,i.tZ)(ae,{hasTests:S,onClick:h}):null]})]}):(0,i.BX)(m.G7,{css:[m.l0.colWithGap(16)],children:[(0,i.tZ)(m.h4,{level:1,variant:"headerDefault",children:"Unit tests"}),(0,i.tZ)(m.G7,{css:{width:"100%",overflowY:"auto"},children:(0,i.tZ)(re,{unitTests:(null===C||void 0===C?void 0:C.unitTests)||null,language:b,isAddingTest:!1,canWrite:!1,trackingContext:k})})]})}},41841:function(e,t,n){n.d(t,{x:function(){return T},y:function(){return E}});var r=n(57135),i=n(9970),o=n(96583),a=n(88254),l=n(10063),c=n(66091),s=function(){function e(t){(0,c.Z)(this,e),this.code="",this.currentIndent=0,this.lib=t}var t=e.prototype;return t.indent=function(){this.currentIndent+=1},t.dedent=function(){if(0===this.currentIndent)throw new Error("indent at zero");this.currentIndent-=1},t.addIndents=function(){for(var e=0;e<this.currentIndent;e++)this.code+="  "},t.push=function(e){var t=e.split("\n"),n=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;this.addIndents(),this.code+=l,this.newLine()}}catch(c){r=!0,i=c}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}},t.newLine=function(){this.code+="\n"},t.closeCurly=function(){this.addIndents(),this.code+=this.lib.getClosingBrackets()},t.toString=function(){return this.code},e}(),u=n(90532),d={testRunnerName:function(){return"TestRunner"},testSuiteName:function(){return"TestSuite"},defaultImports:function(){return"import org.junit.Before;\nimport org.junit.After;\nimport org.junit.Test;\nimport static org.junit.Assert.*;"},classIntro:function(){return"public class ".concat((0,u.Og)(d.testSuiteName())," {")},classConstructorName:function(){return(0,u.Og)(d.testSuiteName())},setupIntro:function(){return"@Before\npublic void setUp() {"},tearDownIntro:function(){return"@After\npublic void tearDown() {"},testIntro:function(e){return"".concat(d.testIntroPreName()).concat(e).concat(d.testIntroPostName())},testIntroPreName:function(){return"@Test\npublic void "},testIntroPostName:function(){return"() {"},getProperTestName:function(e){return e},parseTestResultName:function(e){return e.replace("(".concat((0,u.Og)(d.testSuiteName()),")"),"")},buildSuite:function(e){var t=e.tests,n=e.meta,r=new s(d);r.push(d.defaultImports()),n&&n.imports&&r.push(n.imports),r.newLine(),r.push(d.classIntro()),r.newLine(),r.indent(),n&&(n.initialization&&(r.push(n.initialization),r.newLine()),n.setup&&(r.push(d.setupIntro()),r.indent(),r.push(n.setup),r.dedent(),r.closeCurly(),r.newLine(),r.newLine()),n.tearDown&&(r.push(d.tearDownIntro()),r.indent(),r.push(n.tearDown),r.dedent(),r.closeCurly(),r.newLine(),r.newLine()));var i=!0,o=!1,a=void 0;try{for(var l,c=t[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value;u.code&&(r.push(d.testIntro(u.name)),r.indent(),r.push(u.code),r.dedent(),r.closeCurly(),r.newLine(),r.newLine())}}catch(f){o=!0,a=f}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return r.dedent(),r.closeCurly(),r.toString()},runSuite:function(e){return v.apply(this,arguments)},buildAndRunTests:function(e){var t=e.container,n=e.fs,r=e.packager,i=e.logger,o=e.tests,a=e.meta,l=d.buildSuite({tests:o,meta:a});return d.runSuite({container:t,fs:n,packager:r,logger:i,suiteCode:l})},hasClosingBrackets:function(){return!0},getClosingBrackets:function(){return"}"},hasSemicolon:function(){return!0},getCommentChar:function(){return"//"},getHelpText:function(){return"no react in this bitch either"},captureSetupError:function(e){var t=e.tag,n=e.raw;a.$e((function(e){e.setTag("unitTestLib","true"),e.setExtra("raw",n),e.setExtra("language","java10"),a.Tb(t)}))},exampleTest:{id:-1,failureMessage:"An Adder class should have an add method that adds two ints and returns the result",name:"add",code:"Adder adder = new Adder();\nint result = adder.add(1, 2);\nassertEquals(3, result);\n"}},f="__UNIT_TEST_RESULT_START__",h="__UNIT_TEST_RESULT_END__",p="import org.json.simple.JSONArray;\nimport org.json.simple.JSONObject;\nimport org.junit.runner.JUnitCore;\nimport org.junit.runner.Result;\nimport org.junit.runner.notification.Failure;\n\npublic class ".concat((0,u.Og)(d.testRunnerName())," {\n    public static void main(String[] args) {\n      Result result = JUnitCore.runClasses(").concat((0,u.Og)(d.testSuiteName()),'.class);\n      JSONArray failures = new JSONArray();\n\n        for (Failure failure : result.getFailures()) {\n            JSONObject obj = new JSONObject();\n            obj.put("name", failure.getTestHeader());\n            obj.put("stack", failure.getTrace());\n            failures.add(obj);\n        }\n        JSONObject out = new JSONObject();\n        out.put("passed", result.wasSuccessful());\n        out.put("failures", failures);\n        System.out.println();\n        System.out.println("').concat(f,'");\n        System.out.println(out);\n        System.out.println("').concat(h,'");\n    }\n}');function v(){return(v=(0,r.Z)((function(e){var t,n,r,a,c,s,v,m,g,Z,y,b,w,x,C,k,S,E,T,R,_,I,G,D;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return t=e.container,n=e.fs,r=e.packager,a=e.logger,c=e.suiteCode,v=a.startLogSpinner("Setting up the environment"),[4,(0,u.WT)(n)];case 1:return o.sent(),v("Creating your test files 1/2"),[4,(0,u.e3)({fs:n,code:c,filename:"".concat(d.testSuiteName(),".java")})];case 2:return m=o.sent(),(g=m.error)?("Failed to create suite code file",d.captureSetupError({tag:"Failed to create suite code file",raw:g}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}]):(v("Creating your test files 2/2"),[4,(0,u.e3)({fs:n,code:p,filename:"".concat(d.testRunnerName(),".java")})]);case 3:return Z=o.sent(),(y=Z.error)?("Failed to create test runner file",d.captureSetupError({tag:"Failed to create test runner file",raw:y}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}]):(a.stopLogSpinner(),a.clearLine(),a.logMessage("Installing imported packages\r\n"),[4,r.addPackages([{name:"junit:junit",version:"4.12"},{name:"com.googlecode.json-simple:json-simple",version:"1.1.1"},{name:"org.hamcrest:hamcrest-core",version:"1.3"}])]);case 4:return o.sent(),[4,r.installPackages()];case 5:return o.sent()?(a.clearLogs(),v=a.startLogSpinner("Compiling your files"),[4,t.exec("find",".","-type","f","-name","*.java","-print0")]):[2,{error:"Failed to install packages\r\n"}];case 6:if(b=o.sent(),w=b.output,x=b.error)return C="Failed to fetch working directory java files",d.captureSetupError({tag:C,raw:x}),[2,{error:"".concat(C,"\r\n\r\n")+(null===w||void 0===w?void 0:w.replace(/\n/g,"\n\r"))+"\r\n\r\n"+x}];if("string"!==typeof w)throw new Error("expected working directory files to be a string");return k=w.slice(0,-1).split("\0"),S=".:./target/dependency/*",[4,(s=t).exec.apply(s,["javac","-classpath",S,"-d","."].concat((0,i.Z)(k)))];case 7:return E=o.sent(),T=E.output,(R=E.error)?(_="Failed to compile test runner file",d.captureSetupError({tag:_,raw:R}),[2,{error:"".concat(_,"\r\n\r\n")+(null===T||void 0===T?void 0:T.replace(/\n/g,"\n\r"))+"\r\n\r\n"+R}]):(v("Running your tests"),[4,t.exec("java","-classpath",S,(0,u.Og)(d.testRunnerName()))]);case 8:if(I=o.sent(),G=I.output,D=I.error)return(0,l.j)(l.U3.REPL_UNIT_TEST_CONSTRUCTION_ERROR_INTERNAL),[2,{error:"Running tests failed\r\n\r\n"+(null===G||void 0===G?void 0:G.replace(/\n/g,"\n\r"))+"\r\n\r\n"+D}];if("string"!==typeof G)throw new Error("expected runOutput to be a string");return[2,{result:JSON.parse(G.slice(G.indexOf(f)+f.length,G.lastIndexOf(h))),error:null}]}}))}))).apply(this,arguments)}var m=d,g=function(e){return!!e&&e.trim().length>0&&e.split("\n").some((function(e){return!(e.trim().startsWith("#")||""===e.trim())}))},Z={testRunnerName:function(){return"test_runner"},testSuiteName:function(){return"test_suite"},defaultImports:function(){return"import unittest\nfrom main import *\n"},classIntro:function(){return"class UnitTests(unittest.TestCase):"},classConstructorName:function(){return"__init__"},setupIntro:function(){return"def setUp(self):"},tearDownIntro:function(){return"def tearDown(self):"},testIntro:function(e){return Z.testIntroPreName()+e+Z.testIntroPostName()},testIntroPreName:function(){return"def test_"},testIntroPostName:function(){return"(self):"},getProperTestName:function(e){return"test_".concat(e)},parseTestResultName:function(e){return e},buildSuite:function(e){var t=e.tests,n=e.meta,r=new s(Z);r.push(Z.defaultImports()),n&&n.imports&&r.push(n.imports),r.newLine(),r.push(Z.classIntro()),r.newLine(),r.indent(),n&&(n.initialization&&(r.push(n.initialization),r.newLine()),g(n.setup)&&(r.push(Z.setupIntro()),r.indent(),r.push(n.setup),r.dedent(),r.newLine()),g(n.tearDown)&&(r.push(Z.tearDownIntro()),r.indent(),r.push(n.tearDown),r.dedent(),r.newLine()));var i=!0,o=!1,a=void 0;try{for(var l,c=t[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value;r.push(Z.testIntro(u.name)),r.indent(),r.push(u.code||"pass"),r.dedent(),r.newLine()}}catch(d){o=!0,a=d}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return r.toString()},runSuite:function(e){return x.apply(this,arguments)},buildAndRunTests:function(e){var t=e.container,n=e.fs,r=e.packager,i=e.logger,o=e.tests,a=e.meta,l=Z.buildSuite({tests:o,meta:a});return Z.runSuite({container:t,fs:n,packager:r,logger:i,suiteCode:l})},hasClosingBrackets:function(){return!1},getClosingBrackets:function(){throw new Error("This language does not have closing brackets, check `hasClosingBrackets` first")},hasSemicolon:function(){return!1},getCommentChar:function(){return"#"},getHelpText:function(){return"no react in this bitch"},captureSetupError:function(e){var t=e.tag,n=e.raw;a.$e((function(e){e.setTag("unitTestLib","true"),e.setExtra("raw",n),e.setExtra("language","python3"),a.Tb(t)}))},exampleTest:{id:-1,failureMessage:"In main.py you should have an add functions that adds two numbers and returns the result",name:"add",code:"self.assertEquals(add(1, 2), 3)"}},y="__UNIT_TEST_RESULT_START__",b="__UNIT_TEST_RESULT_END__",w="import unittest\nimport ".concat((0,u.Og)(Z.testSuiteName()),"\nimport os\nimport json\nfrom time import sleep\n\nsuite = unittest.TestLoader().loadTestsFromTestCase(\n  ").concat((0,u.Og)(Z.testSuiteName()),'.UnitTests)\nf = open(os.devnull,"w")\ntest_res = unittest.TextTestRunner(stream=f).run(suite)\n\n# Merge errors and failures and normalize to {name, stack}\nfailures = [\n    {\n        "name": r[0]._testMethodName,\n        "stack": r[1],\n    } for r in test_res.errors + test_res.failures\n]\nprint()\nprint(\'').concat(y,'\')\nsleep(1)\nprint(json.dumps({\n    "passed": test_res.wasSuccessful(),\n    "failures": failures,\n}))\nprint()\nprint(\'').concat(b,"');");function x(){return(x=(0,r.Z)((function(e){var t,n,r,i,a,c,s,d,f,h,p,v,m;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return t=e.container,n=e.fs,r=e.packager,i=e.logger,a=e.suiteCode,c=i.startLogSpinner("Setting up the environment"),[4,(0,u.WT)(n)];case 1:return o.sent(),c("Creating your test files 1/2"),[4,(0,u.e3)({fs:n,code:a,filename:"".concat(Z.testSuiteName(),".py")})];case 2:return s=o.sent(),(d=s.error)?("Failed to create suite code file",Z.captureSetupError({tag:"Failed to create suite code file",raw:d}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}]):(c("Creating your test files 2/2"),[4,(0,u.e3)({fs:n,code:w,filename:"".concat(Z.testRunnerName(),".py")})]);case 3:return f=o.sent(),(h=f.error)?("Failed to create test runner file",Z.captureSetupError({tag:"Failed to create test runner file",raw:h}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}]):(i.stopLogSpinner(),i.clearLine(),i.logMessage("Installing imported packages\r\n"),[4,r.installPackages()]);case 4:return o.sent()?(i.clearLogs(),i.startLogSpinner("Running your tests"),[4,t.exec("python","-B",(0,u.Og)("".concat(Z.testRunnerName(),".py")))]):[2,{error:"Failed to install packages\r\n"}];case 5:if(p=o.sent(),v=p.output,m=p.error)return(0,l.j)(l.U3.REPL_UNIT_TEST_CONSTRUCTION_ERROR_INTERNAL),[2,{error:"Running tests failed\r\n\r\n"+(null===v||void 0===v?void 0:v.replace(/\n/g,"\n\r"))+"\r\n"+m}];if("string"!==typeof v)throw new Error("expected runoutput to be a string");return[2,{result:JSON.parse(v.slice(v.indexOf(y)+y.length,v.lastIndexOf(b))),error:null}]}}))}))).apply(this,arguments)}var C={testRunnerName:function(){throw new Error("Node test runner uses jest directly")},testSuiteName:function(){return"test_suite"},defaultImports:function(){return"const index = require('./index.js');"},classIntro:function(){return'describe("UnitTests", function() {'},classConstructorName:function(){return null},setupIntro:function(){return"beforeAll(async function() {"},tearDownIntro:function(){return"afterAll(async function() {"},testIntro:function(e){return C.testIntroPreName()+e+C.testIntroPostName()},testIntroPreName:function(){return'test("'},testIntroPostName:function(){return'", async function() {'},getProperTestName:function(e){return e},parseTestResultName:function(e){return e},buildSuite:function(e){var t=e.tests,n=e.meta,r=new s(C);r.push(C.defaultImports()),n&&n.imports&&r.push(n.imports),r.newLine(),r.push(C.classIntro()),r.newLine(),r.indent(),n&&(n.initialization&&(r.push(n.initialization),r.newLine()),n.setup&&(r.push(C.setupIntro()),r.indent(),r.push(n.setup),r.dedent(),r.closeCurly(),r.newLine(),r.newLine()),n.tearDown&&(r.push(C.tearDownIntro()),r.indent(),r.push(n.tearDown),r.dedent(),r.closeCurly(),r.newLine(),r.newLine()));var i=!0,o=!1,a=void 0;try{for(var l,c=t[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value;u.code&&(r.push(C.testIntro(u.name)),r.indent(),r.push(u.code),r.dedent(),r.closeCurly(),r.newLine(),r.newLine())}}catch(d){o=!0,a=d}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return r.dedent(),r.closeCurly(),r.toString()},runSuite:function(e){return k.apply(this,arguments)},buildAndRunTests:function(e){var t=e.container,n=e.fs,r=e.packager,i=e.logger,o=e.tests,a=e.meta,l=C.buildSuite({tests:o,meta:a});return C.runSuite({container:t,fs:n,packager:r,logger:i,suiteCode:l})},hasClosingBrackets:function(){return!0},getClosingBrackets:function(){return"});"},hasSemicolon:function(){return!0},getCommentChar:function(){return"//"},getHelpText:function(){return"no react yet"},captureSetupError:function(e){var t=e.tag,n=e.raw;a.$e((function(e){e.setTag("unitTestLib","true"),e.setExtra("raw",n),e.setExtra("language","nodejs"),a.Tb(t)}))},exampleTest:{id:-1,failureMessage:"",name:"add",code:"expect(index.add(1, 2)).toBe(3);"}};function k(){return(k=(0,r.Z)((function(e){var t,n,r,i,a,c,s,d,f,h,p,v,m,g,Z,y,b,w,x,k,S,E;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return t=e.container,n=e.fs,r=e.packager,i=e.logger,a=e.suiteCode,c=i.startLogSpinner("Setting up the environment"),[4,(0,u.WT)(n)];case 1:return o.sent(),c("Creating your test files 1/2"),[4,(0,u.e3)({fs:n,code:a,filename:"".concat(C.testSuiteName(),".js")})];case 2:return s=o.sent(),(d=s.error)?("Failed to create suite code file",C.captureSetupError({tag:"Failed to create suite code file",raw:d}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}]):(c("Creating your test files 2/2"),f=69,h="jest.config.json",p={testRegex:(0,u.Og)("".concat(C.testSuiteName(),".js")),testEnvironment:"node",testFailureExitCode:f},[4,(0,u.e3)({fs:n,code:JSON.stringify(p),filename:h})]);case 3:return v=o.sent(),(m=v.error)?("Failed to create config file",C.captureSetupError({tag:"Failed to create config file",raw:m}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}]):(i.stopLogSpinner(),i.clearLine(),i.logMessage("Installing imported packages\r\n"),[4,r.installPackages()]);case 4:return o.sent()?(i.clearLogs(),c=i.startLogSpinner("Running your tests"),g=(0,u.Og)("output.json"),[4,t.exec("jest","--json","--outputFile",g,"--config",(0,u.Og)(h),"--forceExit","--passWithNoTests")]):[2,{error:"Failed to install packages\r\n"}];case 5:return Z=o.sent(),y=Z.output,(b=Z.error)&&!b.endsWith(f.toString())?((0,l.j)(l.U3.REPL_UNIT_TEST_CONSTRUCTION_ERROR_INTERNAL),[2,{error:"Running tests failed\r\n\r\n"+(null===y||void 0===y?void 0:y.replace(/\n/g,"\n\r"))+"\r\n"+b}]):(c("Parsing your test results"),[4,n.readFile(g)]);case 6:return(w=o.sent()).error?("Error reading test results",C.captureSetupError({tag:"Error reading test results",raw:w.error}),[2,{error:"There was an error getting test results, if this happens please contact support."}]):(x=w.content.toString(),(k=JSON.parse(x)).success?[2,{error:null,result:{passed:!0,failures:[]}}]:(S=k.testResults[0],(E=S.assertionResults.filter((function(e){return"passed"!==e.status})).map((function(e){return{name:e.title,stack:e.failureMessages[0]}}))).length?[2,{error:null,result:{passed:!1,failures:E}}]:[2,{error:S.message.replace(/\n/g,"\r\n")}]))}}))}))).apply(this,arguments)}var S={java10:m,java10_beta:m,java:m,python3:Z,python3_beta:Z,python:Z,nodejs:C,javascript:C,nodejs_beta:C};function E(e){return e in S}function T(e){if(!E(e))throw new Error("".concat(e," is not a supported unit testing language, it has to be one of ").concat(Object.keys(S)));return S[e]}},90532:function(e,t,n){n.d(t,{Og:function(){return u},WT:function(){return h},e3:function(){return d}});var r=n(57135),i=n(96583),o=n(88254),a=n(54829),l=n(54129),c=n(85345),s="_test_runner";function u(e){return s+e}function d(e){return f.apply(this,arguments)}function f(){return(f=(0,r.Z)((function(e){var t,n,r,o,a;return(0,i.__generator)(this,(function(i){return t=e.fs,n=e.code,r=e.filename,o=u(r),a=c.Z.from(n,"utf8"),[2,t.writeFile(o,a)]}))}))).apply(this,arguments)}function h(e){return p.apply(this,arguments)}function p(){return(p=(0,r.Z)((function(e){var t,n;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,e.readDir(a.Ql)];case 1:return(t=r.sent()).error?[2]:[4,Promise.all(t.children.map((function(t){return t.filename.startsWith(s)?t.type===l.Tv.File?e.deleteFile(t.filename):e.deleteDir(t.filename):Promise.resolve(null)})))];case 2:return r.sent(),[3,4];case 3:return n=r.sent(),o.$e((function(e){e.setTag("unitTestLib","true"),o.Tb(n)})),[3,4];case 4:return[2]}}))}))).apply(this,arguments)}},79794:function(e,t,n){n.d(t,{AF:function(){return w},Hd:function(){return C},IV:function(){return T},Rb:function(){return g},aA:function(){return m},kO:function(){return S},lQ:function(){return _},rU:function(){return y}});var r=n(72006),i=n(43119),o=n(71440),a=n(46653);function l(){var e=(0,i.Z)(["\n  fragment UnitTestsReplUnitTestMeta on ReplUnitTestMeta {\n    id\n    imports\n    initialization\n    setup\n    tearDown\n  }\n"]);return l=function(){return e},e}function c(){var e=(0,i.Z)(["\n  fragment UnitTestsReplUnitTest on ReplUnitTest {\n    id\n    name\n    code\n    failureMessage\n  }\n"]);return c=function(){return e},e}function s(){var e=(0,i.Z)(["\n  mutation createUnitTestMeta($input: CreateReplUnitTestMetaInput!) {\n    createReplUnitTestMeta(input: $input) {\n      ... on ReplUnitTestMeta {\n        id\n        ...UnitTestsReplUnitTestMeta\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return s=function(){return e},e}function u(){var e=(0,i.Z)(["\n  mutation updateUnitTestMeta($input: UpdateReplUnitTestMetaInput!) {\n    updateReplUnitTestMeta(input: $input) {\n      ... on ReplUnitTestMeta {\n        id\n        ...UnitTestsReplUnitTestMeta\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return u=function(){return e},e}function d(){var e=(0,i.Z)(["\n  mutation createUnitTest($input: CreateReplUnitTestInput!) {\n    createReplUnitTest(input: $input) {\n      ... on ReplUnitTest {\n        id\n        ...UnitTestsReplUnitTest\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function f(){var e=(0,i.Z)(["\n  mutation updateUnitTest($input: UpdateReplUnitTestInput!) {\n    updateReplUnitTest(input: $input) {\n      ... on ReplUnitTest {\n        id\n        ...UnitTestsReplUnitTest\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}function h(){var e=(0,i.Z)(["\n  mutation deleteUnitTest($testId: Int!) {\n    deleteReplUnitTest(testId: $testId) {\n      ... on ReplUnitTest {\n        id\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return h=function(){return e},e}function p(){var e=(0,i.Z)(["\n  mutation updateReplUnitTestLastRun(\n    $input: UpdateReplUnitTestLastRunInput!\n    $replId: String!\n  ) {\n    updateReplUnitTestLastRun(input: $input) {\n      ... on UpdateReplUnitTestLastRunUpdatedTests {\n        __typename\n        updatedTests {\n          ... on ReplUnitTest {\n            id\n            __typename\n            lastRun(replId: $replId) {\n              ... on ReplUnitTestLastRun {\n                __typename\n                status\n              }\n              ... on UserError {\n                __typename\n                message\n              }\n            }\n          }\n          ... on UserError {\n            __typename\n            message\n          }\n        }\n      }\n      ... on UserError {\n        __typename\n        message\n      }\n    }\n  }\n"]);return p=function(){return e},e}var v={},m=(0,o.Ps)(l()),g=(0,o.Ps)(c()),Z=(0,o.Ps)(s(),m);function y(e){var t=(0,r.Z)({},v,e);return a.D(Z,t)}var b=(0,o.Ps)(u(),m);function w(e){var t=(0,r.Z)({},v,e);return a.D(b,t)}var x=(0,o.Ps)(d(),g);function C(e){var t=(0,r.Z)({},v,e);return a.D(x,t)}var k=(0,o.Ps)(f(),g);function S(e){var t=(0,r.Z)({},v,e);return a.D(k,t)}var E=(0,o.Ps)(h());function T(e){var t=(0,r.Z)({},v,e);return a.D(E,t)}var R=(0,o.Ps)(p());function _(e){var t=(0,r.Z)({},v,e);return a.D(R,t)}},62967:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(91338),i=n(18713),o=n(56579),a=n(59496),l=n(41841);function c(){var e=(0,r.Z)(),t=(0,o.Z)().dotReplit,n=null===e||void 0===e?void 0:e.language,c=(0,a.useState)(null),s=c[0],u=c[1],d=(0,a.useState)(!0),f=d[0],h=d[1];return(0,a.useEffect)((function(){if(n){if((0,l.y)(n))return u(n),void h(!1);var e=!1,r=t.watch((function(t){var n,r;if(e||(e=!0,h(!1)),t.error)t.error===i.Yt.NotFound&&u(null);else{var o=null===(n=t.config.unitTest)||void 0===n||null===(r=n.language)||void 0===r?void 0:r.toLowerCase();o&&(0,l.y)(o)?u(o):u(null)}}));return function(){r()}}}),[n,t]),{language:s,isLoading:f}}},92336:function(e,t,n){n.d(t,{I5:function(){return f},sY:function(){return u}});var r=n(72006),i=n(43119),o=n(71440),a=n(53486);function l(){var e=(0,i.Z)(["\n  fragment ReplEnvironmentWebviewRepl on Repl {\n    id\n    prodUrl: hostedUrl(dotty: true)\n    devUrl: hostedUrl(dev: true)\n    currentUserPermissions {\n      linkDomain\n    }\n    lang {\n      id\n    }\n  }\n"]);return l=function(){return e},e}function c(){var e=(0,i.Z)(["\n  query ReplEnvironmentWebview($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        ...ReplEnvironmentWebviewRepl\n      }\n    }\n  }\n  ","\n"]);return c=function(){return e},e}var s={},u=(0,o.Ps)(l()),d=(0,o.Ps)(c(),u);function f(e){var t=(0,r.Z)({},s,e);return a.a(d,t)}},90440:function(e,t,n){n.d(t,{Z:function(){return Q}});var r=n(72006),i=n(4405),o=n(94660),a=n(59496),l=n(88254),c=n(92336),s=n(79351),u=n(29356),d=n.n(u),f=n(94972),h=n(1665),p=n(79460),v=n(10063);function m(){return a.useEffect((function(){(0,v.j)(v.U3.WS_REPLCO_UNREACHABLE)}),[]),(0,o.BX)("div",{className:"jsx-88c49dc4f1cb807b unreachable",children:[(0,o.BX)(p.gC,{align:"center",spacing:4,children:[(0,o.BX)(p.gC,{align:"center",children:[(0,o.tZ)(h.Z,{level:1,children:"\ud83d\ude48"}),(0,o.tZ)(h.Z,{level:4,children:"This Repl link isn\u2019t broken!"}),(0,o.tZ)(h.Z,{level:4,foreground:2,children:"It\u2019s just blocked."})]}),(0,o.BX)(p.gC,{spacing:2,className:"why",children:[(0,o.tZ)(f.Z,{foreground:2,children:"Why this might be happening:"}),(0,o.tZ)(f.Z,{foreground:2,children:(0,o.BX)("ul",{className:"jsx-88c49dc4f1cb807b",children:[(0,o.BX)("li",{className:"jsx-88c49dc4f1cb807b",children:["repl.co URLs could be"," ",(0,o.tZ)(f.Z,{fontWeight:"medium",foreground:1,children:"blocked by a firewall,"})," ","so contact your IT administrator"]}),(0,o.BX)("li",{className:"jsx-88c49dc4f1cb807b",children:["repl.co URLs could be"," ",(0,o.tZ)(f.Z,{fontWeight:"medium",foreground:1,children:"blocked by your ISP,"})," ","so try getting in touch with them"]})]})})]}),(0,o.BX)(f.Z,{foreground:2,align:"center",children:["If you have any other questions, please check out"," ",(0,o.tZ)("a",{href:"https://docs.replit.com/teams-edu/it-administrators-toolkit",target:"_blank",rel:"noopener noreferrer",className:"jsx-88c49dc4f1cb807b",children:"our IT docs"})," ","or"," ",(0,o.tZ)("a",{href:"https://replit.com/support",target:"_blank",rel:"noopener noreferrer",className:"jsx-88c49dc4f1cb807b",children:"contact support"}),"."]})]}),(0,o.tZ)(d(),{id:"88c49dc4f1cb807b",children:".unreachable.jsx-88c49dc4f1cb807b{padding:var(--space-32)}.unreachable.jsx-88c49dc4f1cb807b ul.jsx-88c49dc4f1cb807b{list-style-position:inside}.unreachable.jsx-88c49dc4f1cb807b li.jsx-88c49dc4f1cb807b{padding-bottom:var(--space-16)}"})]})}var g=a.createContext(!1),Z=n(19666),y=n(7330),b=n(19978),w=n(2272),x=n(65782),C=n(18948),k=n(96810),S=n(79175),E=n(61829),T=n(62687),R=(0,a.forwardRef)((function(e,t){return(0,o.tZ)(T.h,(0,r.Z)({ref:t,className:e.className,css:[{color:"var(--foreground-dimmest)",":hover":{color:"var(--foreground-default)"}},e.css]},e))})),_=n(9612),I=n(19540),G=new Set(["draw.js"]);function D(e,t){var n=(0,b.f6)(),r=(0,I.R3)(),i=a.useCallback((function(e,n){var r,i;null===(r=t.current)||void 0===r||null===(i=r.contentWindow)||void 0===i||i.postMessage({action:"FILE_UPDATE",file:e,content:n},"*")}),[t]);a.useEffect((function(){if(t.current&&n){var r=!0,o=!1,a=void 0;try{for(var l,c=function(){var n=l.value;t.current.onload=function(){e.readFile(n).then((function(e){e.error||i(n,e.content.toString())}))}},s=G[Symbol.iterator]();!(r=(l=s.next()).done);r=!0)c()}catch(u){o=!0,a=u}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}}}),[e,i,t,n]),a.useEffect((function(){if(n&&r&&G.has(r))return e.watchTextFile(r,{onReady:function(e){var t=e.initialContent;return i(r,t)},onChange:function(e){var t=e.latestContent;return i(r,t)}})}),[e,r,i,n])}var P=function(e){var t=e.iframe,n=(0,s.Z)();return a.useEffect((function(){var e="https://".concat(n,".id.repl.co"),t=function(t){if(t.origin===e&&"DOWNLOAD"===t.data.action){var n=document.createElement("a");document.body.appendChild(n),n.setAttribute("style","display: none"),n.href=t.data.url,n.download=t.data.filename,n.click(),document.body.removeChild(n)}};return window.addEventListener("message",t),function(){window.removeEventListener("message",t)}}),[n]),(0,o.BX)(o.HY,{children:[(0,o.tZ)(R,{alt:"Save image",onClick:function(){var e,n;null===(e=t.current)||void 0===e||null===(n=e.contentWindow)||void 0===n||n.postMessage({action:"REQUEST_SCREENSHOT"},"*")},children:(0,o.tZ)(E.Z,{})}),(0,o.tZ)(R,{alt:"Toggle Record",onClick:function(){var e,n;null===(e=t.current)||void 0===e||null===(n=e.contentWindow)||void 0===n||n.postMessage({action:"REQUEST_TOGGLE_RECORD"},"*")},children:(0,o.tZ)(_.Z,{})})]})},B=n(86163),U=n(45715),A=n(31641),N=n(72030),L=n(31140),X=n(40406),M=n(72353),O=n(64927);var W={id:"DevToolsIntro",title:"Try our new devtools",content:function(){return(0,o.BX)(Z.G,{css:y.l0.m(2),children:["No need to reach for your browser\u2019s console. You can now:",(0,o.BX)(Z.G,{tag:"ul",css:[y.l0.px(16),y.l0.py(8),{listStyle:"disc",lineHeight:1.7}],children:[(0,o.tZ)("li",{children:"Explore the DOM tree"}),(0,o.tZ)("li",{children:"View console logs"}),(0,o.tZ)("li",{children:"Run JavaScript"}),(0,o.tZ)("li",{children:"Inspect localStorage"}),(0,o.tZ)("li",{children:"and more!"})]}),"\u2026directly from our brand new devtools. Press this button to toggle it."]})}};function F(e){var t=e.targetElement,n=function(e){var t=(0,O.Pp)({variables:{tours:e}}).data;return a.useMemo((function(){var n,r,i;return null===(i=null===t||void 0===t||null===(n=t.currentUser)||void 0===n||null===(r=n.toursSeen)||void 0===r?void 0:r.find((function(t){return t.id===e})))||void 0===i?void 0:i.seen}),[t,e])}("workspace-desktop-new-user-tour"),r=(0,L.Z)("workspace","devtools-intro"),i=r.shouldDisplay,l=r.register,c=r.dismiss;return a.useEffect((function(){l()}),[l]),!0===n&&t&&i?(0,o.BX)(o.HY,{children:[(0,o.tZ)(X.w,{targetElement:t}),(0,o.tZ)(M.k,{placement:"bottom-start",targetElement:t,activeStep:W,currentStepIndex:0,done:c,goto:function(){},totalSteps:1,disableAnimation:!0})]}):null}var j=n(22488),z=(0,N.F4)("from{transform:rotate(0deg);}to{transform:rotate(359deg);}");function H(e){var t=e.refreshing,n=e.devToolsBadge,r=e.url,i=e.onToggleDevtools,l=a.useRef(null),c=i&&e.isVisible&&!(0,j.isMobile)({tablet:!1}),s=(0,w.Z)(a.useState(!1),2),u=s[0],d=s[1];return(0,o.BX)(Z.G,{css:[y.l0.rowWithGap(8),y.l0.p(8),y.l0.align.center],children:[(0,o.tZ)(R,{alt:t?"Refreshing...":"Refresh",onClick:e.onRefresh,css:t&&{animation:"".concat(z," infinite 0.5s")},children:(0,o.tZ)(C.Z,{})}),(0,o.tZ)(A.II,{dataCy:"ws-webview-url-bar-input",css:[y.l0.px(4),y.l0.py(2),y.l0.flex.growAndShrink(1),y.l0.fontSize(12)],value:r,type:"text",onFocus:function(t){e.trackUrlSelect(),t.currentTarget.select()},readOnly:!0}),(0,o.BX)(Z.G,{css:[y.l0.rowWithGap(4)],children:[e.canEditDomain?(0,o.BX)(U.Z,{showArrow:!0,maxWidth:320,isOpen:u,onClickOutside:function(){return d(!1)},growToMaxWidth:!0,children:[(0,o.tZ)(R,{alt:"Custom domain",onClick:function(){return d(!u)},children:(0,o.tZ)(x.Z,{})}),(0,o.tZ)(S.Z,{onLink:function(){return d(!1)},onUnlink:function(){return d(!1)},replId:e.replId})]}):null,i?(0,o.tZ)(R,{alt:"Toggle developer tools",ref:l,onClick:i,css:{position:"relative"},suffix:!!n&&(0,o.tZ)("span",{css:{position:"absolute",color:y.TV.accentNegativeStrongest,borderRadius:y.TV.borderRadiusRound,padding:"".concat(y.TV.space2," ").concat(y.TV.space4),backgroundColor:y.TV.accentNegativeDimmer,top:-5,right:-3,fontSize:9},children:n}),children:(0,o.tZ)(B.Z,{})}):null,(0,o.tZ)("a",{href:r,css:{color:"inherit"},target:"_blank",children:(0,o.tZ)(R,{alt:"Open in a new tab",children:(0,o.tZ)(k.Z,{})})}),e.isKaboomDraw&&e.iframe?(0,o.tZ)(P,{iframe:e.iframe}):null]}),c?(0,o.tZ)(F,{targetElement:l.current}):null]})}var V=n(66554),q=n(12388),$=n(58530);function Y(){return(0,o.BX)($.G7,{css:[$.l0.align.center,$.l0.p(64)],children:[(0,o.BX)($.G7,{css:[$.l0.align.center],children:[(0,o.tZ)(h.Z,{level:1,children:"\ud83d\ude48"}),(0,o.tZ)($.xv,{css:[$.l0.textAlign.center,$.l0.pb(8)],multiline:!0,variant:"headerDefault",children:"We've detected a crash loop"}),(0,o.tZ)($.xv,{css:[$.l0.textAlign.center],multiline:!0,variant:"subheadDefault",color:"dimmer",children:"Preview is disabled until you click the run button again."})]}),(0,o.tZ)($.G7,{css:[$.l0.p(16)],children:(0,o.tZ)($.xv,{multiline:!0,css:[$.l0.color.foregroundDimmer,$.l0.textAlign.center,$.l0.pb(16)],children:"There may be errors in the code that are causing your application to repeatedly crash."})})]})}var K=function(e,t){var n=e.fs,u=e.session,d=e.trackUrlSelect,f=e.isVisible,h=e.className,p=e.containerRef,w=(0,s.Z)(),x=(0,c.I5)({variables:{id:w}}).data,C="Repl"===(null===x||void 0===x?void 0:x.repl.__typename)?x.repl:null,k=(0,a.useContext)(g),S=(0,V.S)().isCircuitBroken,E=(0,a.useRef)(null),T=(0,a.useState)(!1),R=T[0],_=T[1],I=(0,a.useState)(0),G=I[0],P=I[1],B=(0,b.f6)();D(n,E);var U="html"===(null===C||void 0===C?void 0:C.lang.id)||"html_beta"===(null===C||void 0===C?void 0:C.lang.id),A=null;A=C?k?(0,o.tZ)(m,{}):S?(0,o.tZ)(Y,{}):(0,o.tZ)("iframe",(0,r.Z)({title:"webview","data-cy":"ws-webview",ref:E,src:C.devUrl,css:[y.l0.flex.growAndShrink(1),{border:"none",display:"block",backgroundColor:y.TV.white}]},q.Z)):null,(0,a.useEffect)((function(){var e=function(e){var t;if((new URL(e.origin).hostname.endsWith(".id.repl.co")||new URL(e.origin).hostname.endsWith(".id.firewalledreplit.co"))&&"object"===typeof e.data&&(null===(t=e.data)||void 0===t?void 0:t.type))switch(e.data.type){case"event":var n=e.data,o=n.event,a=n.payload;return void("error"===o?l.Tb(a):(0,v.j)(o,(0,i.Z)((0,r.Z)({},a),{replId:w,isHTML:U})));case"show-badge":return void P(e.data.count);case"ready":var c,s;if(e.data.wasShown)null===(c=E.current)||void 0===c||null===(s=c.contentWindow)||void 0===s||s.postMessage({type:"toggleDevtools",source:"automatic"},"*");return}};if(E.current)return window.addEventListener("message",e),function(){window.removeEventListener("message",e)}}),[w,U,E.current,u]);var N=function(){P(0),_(!0),n.flush().then((function(){E.current&&(E.current.src+="")})).finally((function(){_(!1)}))};return(0,a.useImperativeHandle)(t,(function(){return{refresh:N}})),C?(0,o.BX)(Z.G,{className:h,css:[y.l0.backgroundColor.backgroundDefault,y.l0.height("100%"),y.l0.borderRadius(4),{overflow:"hidden"}],innerRef:p,children:[(0,o.tZ)(H,{canEditDomain:C.currentUserPermissions.linkDomain,url:C.prodUrl,trackUrlSelect:function(){d&&d(C.devUrl)},replId:w,refreshing:R,onRefresh:N,isKaboomDraw:B,iframe:E,isVisible:f,devToolsBadge:G,onToggleDevtools:function(){var e,t;P(0),null===(e=E.current)||void 0===e||null===(t=e.contentWindow)||void 0===t||t.postMessage({type:"toggleDevtools",source:"manual"},"*")}}),A]}):null},Q=(0,a.forwardRef)(K)},6751:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(59496);function i(e){var t=e.container,n=e.runner,i=e.refreshWebView;(0,r.useEffect)((function(){var e,r=[];return"shellrunner"===n.mode&&r.push(n.onOutput((function(t){t&&t.includes("exit status 1")&&(e=Date.now())}))),r.push(t.onPortOpened((function(t){if(!t.isVnc){var n=Date.now();void 0!==e&&n-e<1e3||i()}}))),function(){return r.forEach((function(e){return e()}))}}),[t,i,n])}},11492:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(59496),i=n(57627);function o(e){var t=e.runner,n=e.refreshWebView;(0,r.useEffect)((function(){if("html"===t.mode)return t.onStateChanged((function(e){e===i.A.RUNNING&&n()}))}),[t,n])}},66554:function(e,t,n){n.d(t,{S:function(){return d},e:function(){return u}});var r=n(2272),i=n(57627),o=n(56579),a=n(51954),l=n(59496),c=n(5109),s=(0,c.cn)(!1),u=function(){return(0,c.KO)(s)};function d(){var e=(0,o.Z)().runner,t=(0,r.Z)(u(),2),n=t[0],c=t[1];return l.useEffect((function(){if("shellrunner"===e.mode){var t,n=[],r=Date.now(),o=Array(6),l=0;return n.push(e.onLocalRun((function(){r=Date.now(),c(!1)}))),n.push(e.onStateChanged((function(e){if(t===i.A.RUNNING&&e===i.A.IDLE){var n=Date.now();o[l%6]=n;var s=o.at((l-5)%6);void 0!==s&&n-s<6e4&&null!=r&&r<s&&(c(!0),a.kg.info("webview circuit broken",{lastRunnerStops:JSON.stringify(o),runnerStopCount:l,lastLocalRunTimestamp:r})),l++,t=e}else t=e}))),function(){c(!1),n.forEach((function(e){return e()}))}}}),[e,c]),{isCircuitBroken:n}}},67996:function(e,t,n){n.d(t,{AR:function(){return g},R9:function(){return v},Ve:function(){return Z},aq:function(){return y},gp:function(){return m},jF:function(){return b}});var r=n(43119),i=n(71440);function o(){var e=(0,r.Z)(["\n  fragment TopLevelExtensionUser on User {\n    __typename\n    id\n    username\n    displayName\n    image\n  }\n"]);return o=function(){return e},e}function a(){var e=(0,r.Z)(["\n  fragment TopLevelExtensionManifest on ExtensionManifest {\n    __typename\n    name\n    description\n    version\n    scopes {\n      name\n      reason\n    }\n    icon\n    tags\n    fileHandlers {\n      glob\n      handler\n      name\n      icon\n    }\n    tools {\n      handler\n      name\n      icon\n    }\n  }\n"]);return a=function(){return e},e}function l(){var e=(0,r.Z)(["\n  fragment TopLevelExtension on Extension {\n    __typename\n    id\n    url\n    name\n    description\n    user {\n      id\n      ...TopLevelExtensionUser\n    }\n    manifest {\n      ... on ExtensionManifest {\n        ...TopLevelExtensionManifest\n      }\n      ... on ExtensionManifestError {\n        message\n      }\n    }\n    installCount\n  }\n  ","\n  ","\n"]);return l=function(){return e},e}function c(){var e=(0,r.Z)(["\n  fragment TopLevelExtensionInstallation on ExtensionInstallation {\n    __typename\n    id\n    repl {\n      id\n    }\n    user {\n      id\n    }\n    extension {\n      id\n      ...TopLevelExtension\n    }\n    installer {\n      id\n    }\n  }\n  ","\n"]);return c=function(){return e},e}function s(){var e=(0,r.Z)(["\n  query ExtensionInstallationById($installationId: String!) {\n    extensionInstallationById(id: $installationId) {\n      __typename\n      ... on ExtensionInstallation {\n        ...TopLevelExtensionInstallation\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n"]);return s=function(){return e},e}function u(){var e=(0,r.Z)(["\n  query ExtensionInstallationsInRepl($replId: String!) {\n    extensionInstallations(replId: $replId) {\n      __typename\n      ... on ExtensionInstallationList {\n        installations {\n          ...TopLevelExtensionInstallation\n        }\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n"]);return u=function(){return e},e}function d(){var e=(0,r.Z)(["\n  mutation InstallExtension($extensionId: String!, $replId: String) {\n    installExtension(extensionId: $extensionId, replId: $replId) {\n      __typename\n      ... on ExtensionInstallation {\n        ...TopLevelExtensionInstallation\n        extension {\n          id\n          installation(replId: $replId) {\n            ...TopLevelExtensionInstallation\n          }\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function f(){var e=(0,r.Z)(["\n  mutation UninstallExtension($installationId: String!, $replId: String!) {\n    uninstallExtension(installationId: $installationId) {\n      __typename\n      ... on ExtensionInstallation {\n        ...TopLevelExtensionInstallation\n        extension {\n          id\n          installation(replId: $replId) {\n            ...TopLevelExtensionInstallation\n          }\n        }\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}var h=(0,i.Ps)(o()),p=(0,i.Ps)(a()),v=(0,i.Ps)(l(),h,p),m=(0,i.Ps)(c(),v),g=(0,i.Ps)(s(),m);var Z=(0,i.Ps)(u(),m);var y=(0,i.Ps)(d(),m);var b=(0,i.Ps)(f(),m)},8265:function(e,t,n){n.d(t,{EO:function(){return r.EO},JJ:function(){return i.JJ},L4:function(){return r.L4},LM:function(){return r.LM},Mu:function(){return i.Mu},WF:function(){return r.WF},WG:function(){return i.WG},ot:function(){return r.ot},r9:function(){return i.r9}});var r=n(84697),i=n(35601)},84697:function(e,t,n){n.d(t,{WF:function(){return P},Kf:function(){return N},ot:function(){return D},L4:function(){return A},EO:function(){return U},LM:function(){return B}});var r=n(57135),i=n(81962),o=n(72006),a=n(4405),l=n(96583),c=n(51954),s=n(10063),u=n(58513),d=n(59496),f=n(77685),h=n(85234),p=n.n(h),v=n(44945),m=n(47854),g=n(67996);function Z(e){return y.apply(this,arguments)}function y(){return(y=(0,r.Z)((function(e){var t,n,r,i,o,a;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return t=e.extensionId,n=e.replId,m.l?[4,m.l.mutate({mutation:g.aq,variables:{extensionId:t,replId:n}})]:[2,{error:new Error("expected apolloClient to be initialized"),result:null}];case 1:return(i=l.sent()).errors&&i.errors.length>0?(o=i.errors.map((function(e){return e.message})).join(", "),[2,{error:new Error("Error when installing extension: "+o),result:null}]):(a=null===(r=i.data)||void 0===r?void 0:r.installExtension)?"UnauthorizedError"===(null===a||void 0===a?void 0:a.__typename)||"UserError"===(null===a||void 0===a?void 0:a.__typename)?[2,{error:new Error("Error when installing extension: "+a.message),result:null}]:a.extension?a.extension.url?[2,{result:a,error:null}]:[2,{error:new Error("Error when installing extension: Extension does not have a URL and cannot be installed"),result:null}]:[2,{error:new Error("Error when installing extension: expected extension to be set"),result:null}]:[2,{error:new Error("Error when installing extension: expected result"),result:null}]}}))}))).apply(this,arguments)}function b(e){return w.apply(this,arguments)}function w(){return(w=(0,r.Z)((function(e){var t,n,r,i,o,a;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return t=e.installationId,n=e.replId,m.l?[4,m.l.mutate({mutation:g.jF,variables:{installationId:t,replId:n}})]:[2,{error:new Error("expected apolloClient to be initialized"),result:null}];case 1:return(i=l.sent()).errors&&i.errors.length>0?(o=i.errors.map((function(e){return e.message})).join(", "),[2,{error:new Error("Error when uninstalling extension: "+o),result:null}]):(a=null===(r=i.data)||void 0===r?void 0:r.uninstallExtension)?"NotFoundError"===(null===a||void 0===a?void 0:a.__typename)||"UserError"===(null===a||void 0===a?void 0:a.__typename)?[2,{error:new Error("Error when uninstalling extension: "+a.message),result:null}]:[2,{result:a,error:null}]:[2,{error:new Error("Error when uninstalling extension: expected result"),result:null}]}}))}))).apply(this,arguments)}function x(e){return C.apply(this,arguments)}function C(){return C=(0,r.Z)((function(e){var t,n,r,i=arguments;return(0,l.__generator)(this,(function(o){switch(o.label){case 0:return t=i.length>1&&void 0!==i[1]&&i[1],m.l?[4,m.l.query({query:g.AR,variables:{installationId:e},fetchPolicy:t?"network-only":"cache-first"})]:[2,{error:new Error("expected apolloClient to be initialized"),result:null}];case 1:return n=o.sent(),"ExtensionInstallation"!==(r=n.data.extensionInstallationById).__typename?[2,{error:new Error("Expected to find extension installation"),result:null}]:r.extension?[2,{result:r,error:null}]:[2,{error:new Error("Expected installation.extension"),result:null}]}}))})),C.apply(this,arguments)}function k(e){return S.apply(this,arguments)}function S(){return(S=(0,r.Z)((function(e){var t,n;return(0,l.__generator)(this,(function(r){switch(r.label){case 0:return m.l?[4,m.l.query({query:g.Ve,variables:{replId:e}})]:[2,{error:new Error("expected apolloClient to be initialized"),result:null}];case 1:return t=r.sent(),"ExtensionInstallationList"!==(n=t.data.extensionInstallations).__typename?[2,{error:new Error("Expected to find ExtensionInstallationList"),result:null}]:[2,{result:n.installations,error:null}]}}))}))).apply(this,arguments)}function E(e){return T.apply(this,arguments)}function T(){return(T=(0,r.Z)((function(e){var t,r,i,o,a,c;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:t=(0,f.BP)(e),l.label=1;case 1:return l.trys.push([1,5,,6]),[4,fetch(t)];case 2:return[4,l.sent().text()];case 3:return r=l.sent(),[4,n.e(2884).then(n.t.bind(n,22884,23))];case 4:return i=l.sent(),o=i.parse(r),(a=(0,f.U4)(o)).error?[2,{error:a.error,result:null}]:[2,{result:a.manifest,error:null}];case 5:return"SyntaxError"===(c=l.sent()).name?[2,{error:new Error("Error when fetching manifest: invalid JSON"),result:null}]:[2,{error:new Error("Error when fetching manifest: "+c.message),result:null}];case 6:return[2]}}))}))).apply(this,arguments)}var R=n(35601),_=n(42718),I=n(59833);function G(){var e=(0,_.E4)(R.We);return d.useCallback(function(){var t=(0,r.Z)((function(t){return(0,l.__generator)(this,(function(n){return e({installationId:t}),[2]}))}));return function(e){return t.apply(this,arguments)}}(),[e])}function D(){var e=M(),t=e.throwSystemError,n=e.throwExtensionError,c=(0,_.E4)(R.nk),s=(0,_.Ld)();return d.useCallback(function(){var e=(0,r.Z)((function(e){var r,u,d,h,p,m,g,Z,y;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return r=e.installationId,u=e.forceRefetch,d=void 0===u||u,(h=s.get(R.Lq).find((function(e){return e.installationId===r})))?[4,E(h.baseUrl)]:[3,2];case 1:return(p=l.sent()).error?(c((0,a.Z)((0,o.Z)({},h),{manifest:(0,f.fF)()})),m="Failed to load extension manifest",(0,i.Z)(p.error,v.jm)&&(m=p.error.issues.map((function(e){return"".concat(e.path,": ").concat(e.message)})).join("\n")),n({extensionId:h.extensionId,installationId:h.installationId,extensionError:{error:p.error,friendlyMessage:m}}),[2]):(c((0,a.Z)((0,o.Z)({},h),{manifest:p.result})),[3,4]);case 2:return[4,x(r,d)];case 3:return(g=l.sent()).error?(t({friendlyMessage:"Something went wrong while downloading an extension",error:g.error}),[2]):(Z=g.result)?(y=Z.extension)?y.manifest?"ExtensionManifestError"===y.manifest.__typename?(n({extensionId:(0,I.T)(y.id),installationId:(0,I.A)(Z.id),extensionError:{friendlyMessage:"An error occurred while loading the extension manifest: ".concat(y.manifest.message),error:new Error(y.manifest.message)}}),[2]):y.manifest&&"ExtensionManifest"===y.manifest.__typename?(c({extensionId:(0,I.T)(y.id),installationId:(0,I.A)(Z.id),manifest:(0,f.tr)(y.manifest),baseUrl:(0,f.BY)(y.url)}),[2,Z]):(n({extensionId:(0,I.T)(y.id),installationId:(0,I.A)(Z.id),extensionError:{friendlyMessage:"An error occurred while loading the extension manifest",error:new Error("Expected extension manifest to be defined")}}),[2]):(n({extensionId:(0,I.T)(y.id),installationId:(0,I.A)(Z.id),extensionError:{friendlyMessage:"Extension failed to install",error:new Error("Expected extension manifest to be defined")}}),[2]):(t({friendlyMessage:"Extension failed to install",error:new Error("Expected extension to be defined")}),[2]):(t({friendlyMessage:"Extension failed to install",error:new Error("Expected installation to be defined")}),[2]);case 4:return[2]}}))}));return function(t){return e.apply(this,arguments)}}(),[c,n,t,s])}function P(){var e=D(),t=M().throwSystemError;return d.useCallback(function(){var n=(0,r.Z)((function(n){var r,i,o;return(0,l.__generator)(this,(function(a){switch(a.label){case 0:return r=n.extension,i=n.replId,(0,s.j)(s.U3.EXTENSION_INSTALLED,{name:r.name,extensionId:r.id}),[4,Z({extensionId:r.id,replId:i})];case 1:return(o=a.sent()).error?(t({error:o.error,friendlyMessage:"Something went wrong while installing an extension"}),[2]):[4,e({installationId:(0,I.A)(o.result.id)})];case 2:return a.sent(),[2,o.result]}}))}));return function(e){return n.apply(this,arguments)}}(),[e,t])}function B(){var e=G(),t=(0,_.Ld)(),n=M().throwSystemError;return d.useCallback(function(){var i=(0,r.Z)((function(r){var i,o,a,c;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return i=r.installationId,o=r.replId,a=t.get(R._t),(c=a.find((function(e){return e.installationId===i})))?c.installationId&&c.extensionId?((0,s.j)(s.U3.EXTENSION_UNINSTALLED,{name:c.manifest.name,extensionId:c.extensionId}),[4,b({installationId:c.installationId,replId:o})]):(n({friendlyMessage:"Failed to uninstall extension",error:new Error("Expected installationId to be defined")}),[2]):(n({friendlyMessage:"Extension appears to be already uninstalled",error:new Error("Expected extension to be defined")}),[2]);case 1:return l.sent(),[4,e(c.installationId)];case 2:return l.sent(),[2]}}))}));return function(e){return i.apply(this,arguments)}}(),[e,t,n])}function U(){var e=G(),t=D();return d.useCallback(function(){var n=(0,r.Z)((function(n){return(0,l.__generator)(this,(function(r){switch(r.label){case 0:return[4,e(n)];case 1:return r.sent(),[4,t({installationId:n,forceRefetch:!0})];case 2:return r.sent(),[2]}}))}));return function(e){return n.apply(this,arguments)}}(),[e,t])}function A(){var e=D(),t=M().throwSystemError;return d.useCallback(function(){var n=(0,r.Z)((function(n){var r,i,o,a,s,u,d,f,h;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return[4,k(n)];case 1:if((r=l.sent()).error)return t({friendlyMessage:"Failed to load installed extensions",error:r.error}),[2];i=!0,o=!1,a=void 0,l.label=2;case 2:l.trys.push([2,9,10,11]),s=r.result[Symbol.iterator](),l.label=3;case 3:if(i=(u=s.next()).done)return[3,8];d=u.value,l.label=4;case 4:return l.trys.push([4,6,,7]),[4,e({installationId:(0,I.A)(d.id),forceRefetch:!0})];case 5:return l.sent(),[3,7];case 6:return f=l.sent(),c.kg.error("Error when loading extension",{extension:!0,errors:f.message}),[3,7];case 7:return i=!0,[3,3];case 8:return[3,11];case 9:return h=l.sent(),o=!0,a=h,[3,11];case 10:try{i||null==s.return||s.return()}finally{if(o)throw a}return[7];case 11:return[2]}}))}));return function(e){return n.apply(this,arguments)}}(),[e,t])}function N(){var e=D(),t=(0,R.qr)(),n=(0,R.Mu)(),i=(0,_.E4)(R.ot);return d.useCallback(function(){var o=(0,r.Z)((function(r){var o,a,c,s;return(0,l.__generator)(this,(function(l){return o=(0,f.BY)(r),(a=t.find((function(e){return e.baseUrl===o})))||(c=(0,I.T)(p()()),s=(0,I.A)(p()()),i(a={extensionId:c,installationId:s,baseUrl:o})),n.find((function(e){return e.extensionId===(null===a||void 0===a?void 0:a.extensionId)}))||e({installationId:a.installationId}),[2]}))}));return function(e){return o.apply(this,arguments)}}(),[t,n,i,e])}var L=(0,u.cn)(null,(function(e,t,n){t(R.wQ,n),c.kg.error("Extension System Error",{extension:!0,extensionSystem:!0,originalError:n.error.message,friendlyMessage:n.friendlyMessage})})),X=(0,u.cn)(null,(function(e,t,n){var r=e(R._t).find((function(e){return e.extensionId===n.extensionId}));if(c.kg.error("Extension Error",{extension:!0,extensionId:n.extensionId,originalError:n.extensionError.error.message,friendlyMessage:n.extensionError.friendlyMessage}),!r)return t(R.nk,{extensionId:n.extensionId,installationId:n.installationId,manifest:(0,f.fF)({name:n.extensionId}),baseUrl:""}),void t(R.f4,{extensionId:n.extensionId,extensionError:n.extensionError});t(R.f4,{extensionId:n.extensionId,extensionError:n.extensionError})}));function M(){return{throwSystemError:(0,_.E4)(L),throwExtensionError:(0,_.E4)(X)}}},35601:function(e,t,n){n.d(t,{JJ:function(){return w},Lq:function(){return d},Mu:function(){return y},WG:function(){return C},We:function(){return v},_t:function(){return u},c_:function(){return x},f4:function(){return m},nk:function(){return h},ot:function(){return p},qr:function(){return k},r9:function(){return b},wQ:function(){return f}});var r=n(57135),i=n(72006),o=n(4405),a=n(96583),l=n(58513),c=n(92153),s=n(42718),u=(0,l.cn)([]);var d=(0,l.cn)([]),f=(0,l.cn)(null),h=(0,l.cn)(null,function(){var e=(0,r.Z)((function(e,t,n){return(0,a.__generator)(this,(function(r){if(e(u).find((function(e){return e.extensionId===n.extensionId})))throw new Error("Extension already loaded");return t(u,(function(e){return(0,c.ZP)(e,(function(e){var t=function(e){var t,n=e.baseUrl,r=e.extensionId,i=e.installationId,o=e.manifest;return{baseUrl:n,extensionId:r,installationId:i,manifest:o,stateAtom:(0,l.cn)({error:null,panes:[],scopes:new Set(null===(t=o.scopes)||void 0===t?void 0:t.map((function(e){return e.name})))})}}(n);e.push(t)}))})),[2]}))}));return function(t,n,r){return e.apply(this,arguments)}}()),p=(0,l.cn)(null,function(){var e=(0,r.Z)((function(e,t,n){return(0,a.__generator)(this,(function(r){if(e(d).find((function(e){return e.extensionId===n.extensionId||e.installationId===n.installationId||e.baseUrl===n.baseUrl})))throw new Error("Extension already loaded");return t(d,(function(e){return(0,c.ZP)(e,(function(e){e.push(n)}))})),[2]}))}));return function(t,n,r){return e.apply(this,arguments)}}()),v=(0,l.cn)(null,function(){var e=(0,r.Z)((function(e,t,n){return(0,a.__generator)(this,(function(e){return t(u,(function(e){return(0,c.ZP)(e,(function(e){var t=e.findIndex((function(e){return"extensionId"in n?e.extensionId===n.extensionId:e.installationId===n.installationId}));-1!==t&&e.splice(t,1)}))})),[2]}))}));return function(t,n,r){return e.apply(this,arguments)}}()),m=(0,l.cn)(null,(function(e,t,n){var r=e(u).find((function(e){return e.extensionId===n.extensionId}));if(!r)throw new Error("Extension not found");t(r.stateAtom,(function(e){return(0,c.ZP)(e,(function(e){e.error=n.extensionError}))}))})),g=(0,l.cn)((function(e){return e(u).map((function(e){var t;return null===(t=e.manifest.fileHandlers)||void 0===t?void 0:t.map((function(t){return(0,o.Z)((0,i.Z)({},t),{extension:e})}))})).flat().filter((function(e){return!!e}))})),Z=(0,l.cn)((function(e){return e(u).map((function(e){var t;return null===(t=e.manifest.tools)||void 0===t?void 0:t.map((function(t){return(0,o.Z)((0,i.Z)({},t),{extension:e})}))})).flat().filter((function(e){return!!e}))}));function y(){return(0,s.ZC)(u)}function b(e){var t=y().find((function(t){return t.installationId===e}));return t&&e?t.stateAtom:null}function w(e){var t=b(e);if(!t)throw new Error("Extension not found");return(0,s.ZC)(t)}function x(){return(0,s.ZC)(g)}function C(){return(0,s.ZC)(Z)}function k(){return(0,s.ZC)(d)}},42718:function(e,t,n){n.d(t,{E4:function(){return d},Ld:function(){return s},Wv:function(){return f},ZC:function(){return u}});var r=n(2272),i=n(94660),o=n(58513),a=n(57011),l=n(59496),c=(0,l.createContext)(null);function s(){return function(){var e=(0,l.useContext)(c);if(!e)throw new Error("Expected extensions context");return e}().store}function u(e){var t=s();return(0,a.Dv)(e,{store:t})}var d=function(e){var t=s();return(0,a.b9)(e,{store:t})};function f(e){var t=e.children,n=(0,r.Z)(l.useState((function(){return(0,o.MT)()})),1)[0];return(0,i.tZ)(c.Provider,{value:{store:n},children:t})}},59833:function(e,t,n){n.d(t,{A:function(){return i},T:function(){return r}});Symbol("extensionId"),Symbol("installationId");function r(e){return e}function i(e){return e}},64774:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(56579),i=n(59496),o=n(1540);function a(e){var t=(0,r.Z)().fs,n=(0,i.useCallback)((function(n){var r=n.code,i=n.insertAt,a=n.newLine,l=void 0===a||a;if(!e||(0,o.T3)(e)||(0,o.sL)(e)||(0,o.IQ)(e))throw new Error("Invalid file, this should never happen");if(0!==r.length)var c=t.watchTextFile(e,{onReady:function(e){var n=e.initialContent,o=e.writeChange,a=n.toString(),s="end"===i?a.length:i,u=r;l&&(0!==s&&s!==a.length&&-1===(s=a.indexOf("\n",s))&&(s=a.length),0!==s&&"\n"!==a[s-1]&&(u="\n"+u),"\n"!==a[s]&&(u+="\n")),o({from:s,insert:u}),t.flush().finally((function(){c()}))}})}),[e,t]);return!e||(0,o.T3)(e)||(0,o.sL)(e)?null:n}},58888:function(e,t,n){n.d(t,{Z:function(){return g}});var r=n(57135),i=n(9970),o=n(96583),a=n(59496),l=n(64697),c=n(10063),s=n(54829),u=n(54129),d=n(19540),f=n(56579),h=n(82002),p=n(1540),v=n(27741),m=n(34886);function g(e){var t=e.moveOrDeleteFile,n=(0,f.Z)().fs,g=(0,v.K)(),Z=(0,a.useRef)(new Map),y=(0,d.ex)(),b=(0,a.useState)(!1),w=b[0],x=b[1],C=(0,a.useState)(!1),k=C[0],S=C[1],E=(0,a.useState)([]),T=E[0],R=E[1],_=(0,m.k)(),I=(0,h.uV)(),G=T.map((function(e){return e.path})).map((function(e){return{title:e,path:e}})),D=(0,a.useState)(),P=D[0],B=D[1],U=(0,d.Gg)();(0,a.useEffect)((function(){if(y&&!Z.current.has(y)&&y!==s.rq){var e=function(e){var n=e.node.path;U(e.eventType===u.kS.Move?{path:n,type:"move",to:e.to}:{path:n,type:"delete"}),t&&t(e),Z.current.delete(y),R((function(e){return e.filter((function(e){return e.path!==y}))}))};(0,p.Mb)(y)?n.watchTextFile(y,{onMoveOrDelete:e,onError:function(e,t){e.code||(n.flush(),n.persist({skipDebounce:!0}),I({error:e,extras:t,tags:{ot:!0},origin:"useContentsDiverged: fs.watchTextFile"}))},onReconnectFail:function(e,t){R((function(n){return(0,i.Z)(n.filter((function(e){return e.path!==y}))||[]).concat([{path:y,prompt:t,cb:e}])})),g("user:ot:diverged",{path:y,divergence:t}),x(!0),P||B(y)}}):n.watchFile(y,{onChange:function(){},onMoveOrDelete:e}),Z.current.set(y,!0)}}),[y,n,I,t,P,g,U]);var A,N,L=function(){var e=(0,r.Z)((function(e){return(0,o.__generator)(this,(function(t){switch(t.label){case 0:return(0,c.j)(c.U3.FILE_RECONNECT_FALLBACK_CHOSEN,{choice:e}),(0,c.j)(c.U3.CONTENTS_DIVERGED_ACTION,{action:"local"===e?"client":"server"}),S(!0),[4,Promise.all(T.map((function(t){return R((function(e){var n=e.filter((function(e){return e.path!==t.path}));return 0===n.length?x(!1):B(n[0].path),n})),t.cb(e)})))];case 1:return t.sent(),S(!1),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),X=P?T.find((function(e){return e.path===P})):null,M=null===X||void 0===X?void 0:X.prompt,O=P,W=(0,l.J)({left:{code:null!==(A=null===M||void 0===M?void 0:M.localContent)&&void 0!==A?A:"",filePath:O},right:{code:null!==(N=null===M||void 0===M?void 0:M.remoteContent)&&void 0!==N?N:"",filePath:O}}),F=W.left,j=W.right;return{isConverging:k,didContentsDiverge:w,showMoreDetail:_,failedFiles:T,failedFilesOptions:G,selectedFile:P,setSelectedFile:B,reviewingPrompt:M,onChoice:L,local:F,remote:j}}},77593:function(e,t,n){n.d(t,{P:function(){return d},Z:function(){return h}});var r=n(57135),i=n(96583),o=n(54703),a=n.n(o),l=n(59496),c=n(70980),s=n(19588),u=n(79351);var d=function(){var e=(0,r.Z)((function(e,t,n,r){var o,a;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return[4,(0,c.W)({fs:e,dotReplit:n,replId:r})];case 1:return o=i.sent(),(a=o.entrypoint)&&t.openFile(a),[2]}}))}));return function(t,n,r,i){return e.apply(this,arguments)}}(),f=function(){var e=(0,r.Z)((function(e,t){var n,r,o,a;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return(0,s.u9)()?[4,(0,s.mv)(e)]:[2];case 1:return n=i.sent(),r=n.path,o=n.line,a=n.col,r?(r!==t.getActiveFile()&&t.openFile(r),t.updateDeeplink({path:r,line:o,col:a}),[2]):[2]}}))}));return function(t,n){return e.apply(this,arguments)}}();function h(e,t,n){var o=(0,u.Z)(),c=(0,l.useRef)(!1);(0,l.useEffect)((function(){return t.onDeeplinkUpdated((function(e){var t=function(e){var t=e.path,n=e.line,r=e.col,i="#".concat(t);return n?r?"".concat(i,":").concat(n,":").concat(r):"".concat(i,":").concat(n):i}(e);window.location.hash=t}))}),[t]),(0,l.useEffect)((function(){(0,r.Z)((function(){return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return t.getActiveFile()?[2]:[4,f(e,t)];case 1:return r.sent(),t.getActiveFile()||d(e,t,n,o),[2]}}))}))()}),[e,t,n,o]),(0,l.useEffect)((function(){var n=function(){var n=(0,r.Z)((function(){return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return c.current?(c.current=!1,[2]):[4,f(e,t)];case 1:return n.sent(),[2]}}))}));return function(){return n.apply(this,arguments)}}();return window.addEventListener("hashchange",n),function(){window.removeEventListener("hashchange",n)}}),[e,t]),(0,l.useEffect)((function(){return t.onSessionStateChanged((0,r.Z)((function(){var n,r,o;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return(n=t.getActiveFile())?(0,s.u9)()?[4,(0,s.mv)(e)]:[3,2]:[2];case 1:if(r=i.sent(),r.path===n)return[2];i.label=2;case 2:return c.current=!0,window.location.hash.length>0?t.updateDeeplink({path:n}):(o=a().asPath.includes("#")?a().asPath.slice(0,a().asPath.indexOf("#")):a().asPath,a().replace({pathname:a().pathname,query:a().query},"".concat(o,"#").concat(n),{shallow:!0})),[2]}}))})))}),[e,t])}},44070:function(e,t,n){n.d(t,{F:function(){return ne}});var r=n(57135),i=n(72006),o=n(4405),a=n(2272),l=n(96583),c=n(94868),s=n(99340),u=n(79351),d=n(88012),f=n(33209),h=n(56579),p=n(24896),v=n(38749),m=n(70980),g=n(59496),Z=n(80053),y=n(33859),b=n.n(y),w=n(76554),x=n(2472),C=n(43119),k=n(71440),S=n(3024),E=n(53486);function T(){var e=(0,C.Z)(["\n  query DotReplitEditorRootOriginRepl($rootOriginReplUrl: String!) {\n    repl(url: $rootOriginReplUrl) {\n      ... on Repl {\n        id\n        ...CrosisContextRepl\n      }\n    }\n    currentUser {\n      id\n      ...CrosisContextCurrentUser\n    }\n  }\n  ","\n  ","\n"]);return T=function(){return e},e}function R(){var e=(0,C.Z)(["\n  query DotReplitEditorRootOriginReplById($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        ...CrosisContextRepl\n      }\n    }\n    currentUser {\n      id\n      ...CrosisContextCurrentUser\n    }\n  }\n  ","\n  ","\n"]);return R=function(){return e},e}var _={},I=(0,k.Ps)(T(),S.C,S.D);var G=(0,k.Ps)(R(),S.C,S.D);var D="Couldn't fetch the template .replit. Please try again.",P=function(){var e=(0,s.Z)().showError,t=function(e){var t=(0,i.Z)({},_,e);return E.a(G,t)}({fetchPolicy:"no-cache",skip:!0}).refetch,n=function(e){var t=(0,i.Z)({},_,e);return E.a(I,t)}({fetchPolicy:"no-cache",skip:!0}).refetch,o=g.useCallback(function(){var i=(0,r.Z)((function(r){var i,o,a,c,s,u,d,f,h,p,v,m;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return i=r.replId,o=r.replUrl,i?[4,t({replId:i})]:[3,2];case 1:return a=l.sent(),[3,5];case 2:return o?[4,n({rootOriginReplUrl:o})]:[3,4];case 3:return a=l.sent(),[3,5];case 4:throw new Error("how did we even get here?");case 5:if(c=a.data,s=a.error,!c||s)return e(D),[2,null];if(u=c.repl,d=c.currentUser,"Repl"!==(null===u||void 0===u?void 0:u.__typename)||"CurrentUser"!==(null===d||void 0===d?void 0:d.__typename))return e(D),[2,null];(f=(0,w.ZP)({onUnrecoverableError:function(){e(D)}})).connect({context:{repl:u,currentUser:d,asViewer:!0}}),h=(0,x.Z)({container:f}),l.label=6;case 6:return l.trys.push([6,8,,9]),[4,h.readFile(Z.l)];case 7:return"content"in(v=l.sent())&&(p=v.content),[3,9];case 8:return l.sent(),e(D),f.destroy(),[2,null];case 9:if(f.destroy(),!p)return e(D),[2,null];try{m=b().parse(p.toString())}catch(g){return e(D),[2,null]}return[2,m]}}))}));return function(e){return i.apply(this,arguments)}}(),[t,n,e]);return o},B=n(33109);function U(){var e=(0,C.Z)(["\n  query WorkspacePatchDotReplitRepl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        rootOriginReplUrl\n      }\n    }\n  }\n"]);return U=function(){return e},e}var A={},N=(0,k.Ps)(U());var L=function(e,t){return{op:"add",path:e,value:JSON.stringify(t)}},X=new Map([["hintsList","hints"]]);function M(e){return O.apply(this,arguments)}function O(){return O=(0,r.Z)((function(e){var t,n,o,c,s,u,d,f,h,p,v,m,g,Z,y;function b(){return w.apply(this,arguments)}function w(){return(w=(0,r.Z)((function(){var e,n,r;return(0,l.__generator)(this,(function(a){switch(a.label){case 0:return(e="object"===typeof o.env?o.env:null)&&0!==Object.keys(e).length?(n="object"===typeof c.env?c.env:null,r=n?(0,i.Z)({},e,n):e,[4,t.updateDotReplit([L("env",r)])]):[2];case 1:return a.sent(),[2]}}))}))).apply(this,arguments)}function x(){return C.apply(this,arguments)}function C(){return(C=(0,r.Z)((function(){var e,r,i,a;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return(null===(e=c.nix)||void 0===e?void 0:e.channel)?[2]:(null===o||void 0===o||null===(r=o.nix)||void 0===r?void 0:r.channel)?[3,2]:[4,n.getLatestStableChannel()];case 1:return(a=l.sent()).channel?(i=a.channel,[3,3]):[2];case 2:i=o.nix.channel,l.label=3;case 3:return[4,t.updateDotReplit([L("nix/channel",i)])];case 4:return l.sent().error||s.push("Nix channel was not detected in your imported .replit file but is required for all Nix Repls. The latest stable Nix channel "+'"'.concat(i.channel,'" was automatically added to your .replit file.')),[2]}}))}))).apply(this,arguments)}function k(e,t){return S.apply(this,arguments)}function S(){return S=(0,r.Z)((function(e,n){var r,i,a,u,d,f;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return r=c[e],i=Boolean(r),Array.isArray(r)?i=r.length>0:r&&"object"===typeof r&&(i=Object.keys(r).length>0),u=null!==(a=X.get(e))&&void 0!==a?a:e,i||!o[u]?[2]:(d=L(u,o[u]),[4,t.updateDotReplit([d])]);case 1:return l.sent().error||!n||(f="A ".concat(n," was not detected in your imported .replit file so a recommended one was automatically added."),s.push(f)),[2]}}))})),S.apply(this,arguments)}return(0,l.__generator)(this,(function(r){switch(r.label){case 0:t=e.dotReplit,n=e.nixService,o=e.templateConfig,c=e.config,s=[],u={entrypoint:"entrypoint config",hidden:"hidden files config",audio:"audio config",run:"run command",refreshWebViewOnFileChange:"webview refresh config",language:"language config",onBoot:"onBoot command",languages:"languages config",compile:"compile command",debugger:"debugger config",packager:"packager config",interpreter:"interpreter config",unitTest:"unit test config",nix:x,env:b,hosting:"hosting config",gitHubImport:"GitHub import config",auth:"Repl Auth config",hintsList:"Hints config",ports:"Ports config",deployment:"deployment config",orderedEnv:null,modules:"nix modules config"},d=[],f=!0,h=!1,p=void 0;try{for(v=Object.entries(u)[Symbol.iterator]();!(f=(m=v.next()).done);f=!0)g=(0,a.Z)(m.value,2),Z=g[0],null!==(y=g[1])&&("function"===typeof y?d.push(y()):d.push(k(Z,y)))}catch(i){h=!0,p=i}finally{try{f||null==v.return||v.return()}finally{if(h)throw p}}return[4,Promise.all(d)];case 1:return r.sent(),[2,s]}}))})),O.apply(this,arguments)}function W(){var e=(0,h.Z)(),t=e.dotReplit,n=e.nixService,o=(0,u.Z)(),c=(0,a.Z)(function(e){var t=(0,i.Z)({},A,e);return B.t(N,t)}(),1)[0],d=P(),f=(0,s.Z)().showWarning;return(0,g.useCallback)((0,r.Z)((function(){var e,r,i,a,s,u,h,p,v,m,g;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return[4,t.getConfig()];case 1:return(e=l.sent().config)?[4,c({variables:{replId:o}})]:[2];case 2:return r=l.sent().data,(null===(i="Repl"===(null===r||void 0===r?void 0:r.repl.__typename)?r.repl:null)||void 0===i?void 0:i.rootOriginReplUrl)?[4,d({replUrl:i.rootOriginReplUrl})]:[2];case 3:return(a=l.sent())?[4,M({nixService:n,dotReplit:t,config:e,templateConfig:a})]:[2];case 4:s=l.sent(),u=!0,h=!1,p=void 0;try{for(v=s[Symbol.iterator]();!(u=(m=v.next()).done);u=!0)g=m.value,f(g,1e3)}catch(Z){h=!0,p=Z}finally{try{u||null==v.return||v.return()}finally{if(h)throw p}}return[2]}}))})),[o,f,t,n,c,d])}var F=n(50751),j=n(27730),z=n(82438),H=n(54829),V=n(54129),q=n(46653);function $(){var e=(0,C.Z)(["\n  query WorkspaceDoGitHubImportFlow($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        config {\n          gitRemoteUrl\n          doClone\n        }\n      }\n    }\n    currentUser {\n      id\n      gitHubInfo {\n        accessToken\n      }\n      username\n    }\n  }\n"]);return $=function(){return e},e}function Y(){var e=(0,C.Z)(["\n  mutation WorkspaceDoGitHubImportFlowFinishClone($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        config {\n          doClone\n        }\n      }\n    }\n  }\n"]);return Y=function(){return e},e}function K(){var e=(0,C.Z)(["\n  query GitHubImportRootOriginReplUrl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        rootOriginReplUrl\n      }\n    }\n  }\n"]);return K=function(){return e},e}var Q={},J=(0,k.Ps)($());var ee=(0,k.Ps)(Y());K();var te=n(91620).lW;function ne(e){var t=e.insertConfigPlugin,n=e.setConfigScreenLockIsOpen,y=(0,u.Z)(),b=(0,a.Z)(function(e){var t=(0,i.Z)({},Q,e);return q.D(ee,t)}(),2),w=b[0],x=b[1],C=(0,h.Z)(),k=C.container,S=C.fs,E=C.runner,T=C.dotReplit,R=C.session,_=(0,f.Z)(k),I=(0,s.Z)(),G=I.showError,D=I.showConfirm,P=W();(0,g.useEffect)((function(){x.error&&G("Failed to finish cloning Repl - "+x.error)}),[x.error]),(0,g.useEffect)((function(){x.data&&D("Finished cloning Repl")}),[x.data]),(0,g.useEffect)((function(){A()}),[]);var U=(0,a.Z)(function(e){var t=(0,i.Z)({},Q,e);return B.t(J,t)}({variables:{replId:y},fetchPolicy:"no-cache",onCompleted:function(){var e=(0,r.Z)((function(e){var t,n,r,i,o;return(0,l.__generator)(this,(function(a){return t=e.repl,n=e.currentUser,"Repl"===t.__typename&&n&&"CurrentUser"===n.__typename&&t.config.gitRemoteUrl&&t.config.doClone?(ce({remote:null!==(i=t.config.gitRemoteUrl)&&void 0!==i?i:"",accessToken:null!==(o=null===(r=n.gitHubInfo)||void 0===r?void 0:r.accessToken)&&void 0!==o?o:null,username:n.username}),[2]):[2]}))}));return function(t){return e.apply(this,arguments)}}()}),1),A=U[0],N={isInitialized:!1,hasConflictsWithFetchedRemote:!1,hasMergeBaseWithFetchedRemote:!0,authError:v.l4.NONE,badState:v.$U.None,remote:"",repoId:null,branch:"",defaultBranch:"main",branches:[],installations:[],changedFiles:[],commits:[],commitsAhead:null,commitsBehind:null,remoteToken:null,gitHubName:null,ownerId:null,gitHubAvatarUrl:null,gitHubEmail:null},L=function(){var e=(0,r.Z)((function(e){return(0,l.__generator)(this,(function(t){switch(t.label){case 0:return[4,_({args:p.D6.format(N,null!==e&&void 0!==e?e:"")})];case 1:return t.sent(),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=(0,r.Z)((function(e){return(0,l.__generator)(this,(function(t){switch(t.label){case 0:return[4,_({args:p.M7.format(N,e)})];case 1:return t.sent(),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=(0,r.Z)((function(){var e,t;return(0,l.__generator)(this,(function(n){switch(n.label){case 0:return[4,_({args:p.LO.format(N)})];case 1:return e=n.sent(),p.LO.parse?(t=p.LO.parse(N,null===e.error?e.output:""),[2,t.remote]):[2]}}))}));return function(){return e.apply(this,arguments)}}(),O=function(){var e=(0,r.Z)((function(e){var t,n,r,a;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return t=e.remote,n=e.remoteToken,[4,_({args:p.Di.format((0,o.Z)((0,i.Z)({},N),{remote:t,remoteToken:n}))})];case 1:return r=l.sent(),p.Di.parse?(a=p.Di.parse(N,null===r.error?r.output:"HEAD branch: main"),[2,a.defaultBranch]):[2]}}))}));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=(0,r.Z)((function(e){return(0,l.__generator)(this,(function(t){switch(t.label){case 0:return[4,_({args:p.lR.format((0,o.Z)((0,i.Z)({},N),{defaultBranch:e}))})];case 1:return t.sent(),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=(0,r.Z)((function(e){var t,n;return(0,l.__generator)(this,(function(r){switch(r.label){case 0:return t=e.remote,n=e.remoteToken,[4,K()];case 1:return r.sent(),[4,M()];case 2:return r.sent(),[4,ne({deepen:!0,remote:t,remoteToken:n})];case 3:return r.sent(),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=(0,r.Z)((function(){return(0,l.__generator)(this,(function(e){switch(e.label){case 0:return[4,_({args:p.GE.format(N)})];case 1:return e.sent(),[2]}}))}));return function(){return e.apply(this,arguments)}}(),ne=function(){var e=(0,r.Z)((function(e){var t,n,r,a;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return t=e.deepen,n=void 0!==t&&t,r=e.remote,a=e.remoteToken,r.startsWith("https://api.glitch.com")?[4,_({args:["git","fetch",r,"+refs/heads/*:refs/remotes/origin/*"]})]:[3,2];case 1:case 3:return l.sent(),[2];case 2:return[4,_({args:p.he.format((0,o.Z)((0,i.Z)({},N),{remote:r,remoteToken:a}),n)})]}}))}));return function(t){return e.apply(this,arguments)}}(),re=function(){var e=(0,r.Z)((function(){var e,t,n,r,i,o,a;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return[4,S.readDir(H.Ql)];case 1:return(r=l.sent()).error?[2]:[4,T.getConfig()];case 2:return i=l.sent(),(null===(e=i.config)||void 0===e||null===(t=e.gitHubImport)||void 0===t?void 0:t.requiredFiles)?(-1===(o=i.config.gitHubImport.requiredFiles).indexOf(".cache")&&o.push(".cache"),-1===o.indexOf(".upm")&&o.push(".upm"),a=o.map((function(e){return new RegExp(e)})),[4,Promise.all(r.children.filter((function(e){return!a.some((function(t){return null!=e.filename.match(t)}))})).map((function(e){return e.type===V.Tv.Directory?S.deleteDir(e.filename):S.deleteFile(e.filename)})))]):[3,4];case 3:return l.sent(),[3,6];case 4:return(null===(n=i.config)||void 0===n?void 0:n.entrypoint)?[4,S.deleteFile(i.config.entrypoint)]:[3,6];case 5:l.sent(),l.label=6;case 6:return[2]}}))}));return function(){return e.apply(this,arguments)}}(),ie=function(){var e=(0,r.Z)((function(e,t,n){var r;return(0,l.__generator)(this,(function(i){switch(i.label){case 0:return[4,L(n)];case 1:return i.sent(),[4,X(e)];case 2:return i.sent(),[4,M()];case 3:return i.sent(),[4,ne({deepen:!1,remote:e,remoteToken:t})];case 4:return i.sent(),[4,O({remote:e,remoteToken:t})];case 5:return r=i.sent(),[4,$(null!==r&&void 0!==r?r:"")];case 6:return i.sent(),[4,Y({remote:e,remoteToken:t})];case 7:return i.sent(),"html"!==E.mode?[3,10]:[4,(0,F.r)(k)];case 8:return i.sent(),[4,E.run()];case 9:i.sent(),i.label=10;case 10:return[2]}}))}));return function(t,n,r){return e.apply(this,arguments)}}(),oe=function(){var e=(0,r.Z)((function(){var e,t,n;return(0,l.__generator)(this,(function(r){switch(r.label){case 0:return[4,S.readDir(H.Ql)];case 1:return(e=r.sent()).error||(t=e.children.map((function(e){return e.filename})),(n=(0,m.T)(t,"nix"))&&R.openFile(n)),[2]}}))}));return function(){return e.apply(this,arguments)}}(),ae=function(){var e=(0,r.Z)((function(e,t){var n,r,i;return(0,l.__generator)(this,(function(o){switch(o.label){case 0:return[4,(0,j.J9)({repoNameWithOwner:e,accessToken:t})];case 1:return"error"in(n=o.sent())?[2,{hasDotReplit:!1,hasProcfile:!1}]:(r=n.some((function(e){return e.path===Z.l})),i=n.some((function(e){return e.path===c.E})),[2,{hasDotReplit:r,hasProcfile:i}])}}))}));return function(t,n){return e.apply(this,arguments)}}(),le=function(){var e=(0,r.Z)((function(e,t){var n,r,i,o,a,s,u,d;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return[4,(0,j.LK)({repoNameWithOwner:e,filePath:c.E,accessToken:t})];case 1:return"error"in(n=l.sent())?[2,{showConfigPanel:!0}]:(r=te.from(n.content,"base64").toString(),(i=(0,c.c)(r))&&(a=null!==(o=i.web)&&void 0!==o?o:i.worker)?(s=a.command+" "+a.options.join(" "),[4,T.updateDotReplit([(0,z.KQ)(s),(0,z.xz)("interpreter")])]):[2,{showConfigPanel:!0}]);case 2:return u=l.sent(),d=i.web&&!i.worker||!i.web&&i.worker,u.error||!d?[2,{showConfigPanel:!0}]:[2,{showConfigPanel:!1}]}}))}));return function(t,n){return e.apply(this,arguments)}}(),ce=function(){var e=(0,r.Z)((function(e){var r,i,o,a,c,s,u,f,h,p;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return r=e.remote,i=e.accessToken,o=e.username,n(!0),[4,re()];case 1:return l.sent(),[4,ie(r,i,o)];case 2:return l.sent(),[4,P()];case 3:return l.sent(),[4,w({variables:{input:{id:y,doClone:!1}}})];case 4:return l.sent(),[4,oe()];case 5:return l.sent(),a=(0,d.J)(r),c=!1,a?(s=a.username,u=a.repository,[4,ae("".concat(s,"/").concat(u),i)]):[3,9];case 6:return f=l.sent(),h=f.hasDotReplit,!f.hasProcfile||h?[3,8]:[4,le("".concat(s,"/").concat(u),i)];case 7:return p=l.sent(),c=!p.showConfigPanel,[3,9];case 8:c=h,l.label=9;case 9:return n(!1),"html"===E.mode?[2]:(c||t(),[2])}}))}));return function(t){return e.apply(this,arguments)}}()}},59513:function(e,t,n){n.d(t,{T:function(){return d}});var r=n(79351),i=n(72006),o=n(43119),a=n(71440),l=n(53486);function c(){var e=(0,o.Z)(["\n  query WorkspaceEduPaneEnabled($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        isModelSolution\n        isProject\n        isProjectFork\n        owner {\n          __typename\n          ... on Team {\n            id\n            isAdmin\n          }\n          ... on User {\n            id\n          }\n        }\n      }\n    }\n  }\n"]);return c=function(){return e},e}var s={},u=(0,a.Ps)(c());function d(){var e,t=function(e){var t=(0,i.Z)({},s,e);return l.a(u,t)}({variables:{replId:(0,r.Z)()}}).data,n="Repl"===(null===t||void 0===t||null===(e=t.repl)||void 0===e?void 0:e.__typename)?null===t||void 0===t?void 0:t.repl:null;if(!n)return!1;var o=n.owner;return!!o&&(n.isProjectFork&&!n.isModelSolution&&"Team"===o.__typename&&o.isAdmin)}},84520:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(59496),i=n(62322),o=n(56579),a=n(54129),l=n(76554);function c(){var e=(0,o.Z)().fs,t=(0,r.useState)(!1),n=t[0],c=t[1],s=(0,i.Z)(),u=(0,r.useState)(!1),d=u[0],f=u[1];return(0,r.useEffect)((function(){s===l.em.CONNECTED&&f(!0)}),[s]),(0,r.useEffect)((function(){return c(e.getStatus()===a.kO.Syncing),e.onStatusChange((function(e){c(e===a.kO.Syncing)}))}),[e]),d?{isSaving:n,isOffline:s!==l.em.CONNECTED}:{isSaving:!1,isOffline:!1}}},95764:function(e,t,n){n.d(t,{V:function(){return a},Z:function(){return l}});var r=n(59496),i=n(56579),o=n(54129),a=".tutorial";function l(){var e=(0,i.Z)().fs,t=(0,r.useState)({isLoading:!0,isTutorial:!1}),n=t[0],l=t[1];return(0,r.useEffect)((function(){e.watchDir(".",{onChange:function(e){l({isLoading:!1,isTutorial:e.some((function(e){return e.type===o.Tv.Directory&&e.filename===a}))})},onMoveOrDelete:function(){l({isLoading:!1,isTutorial:!1})},onError:function(){l({isLoading:!1,isTutorial:!1})}})}),[e]),n}},80256:function(e,t,n){n.d(t,{F:function(){return u}});var r=n(72006),i=n(79351),o=n(56579),a=n(92398),l=n(40795),c=n(2029),s=n(59496),u=function(){var e=(0,i.Z)(),t=(0,o.Z)().session,n=(0,c.Z)("fileTree").trackTimeToLoadFileStart,u=(0,a.CA)();return s.useCallback((function(i,o){var a=o.newTab,c=o.newPane,s=o.opener;n(i);var d={action:"select",source:"filetree"};a?d={action:"newTab",source:"filetree"}:c&&(d={action:"newPane",source:"filetree"}),(0,l.Z)((0,r.Z)({replId:e},d)),c?u({path:i,newPane:!0,opener:s}):t.openFile(i,{newTab:a,opener:s})}),[u,e,t,n])}},40699:function(e,t,n){n.d(t,{Z:function(){return l},f:function(){return a}});var r=n(59496),i=n(5109),o=n(51458),a=(0,i.cn)({current:null});function l(){var e=(0,o.Z)((0,i.Dv)(a));return(0,r.useCallback)((function(){var t,n;null===(t=e.current)||void 0===t||null===(n=t.current)||void 0===n||n.refresh()}),[e])}},21910:function(e,t,n){n.d(t,{T:function(){return Z}});var r=n(59496),i=n(5208),o=n(79351),a=n(72006),l=n(43119),c=n(71440),s=n(53486);function u(){var e=(0,l.Z)(["\n  query ShouldHideFileInWorkspace($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        isProjectFork\n        isModelSolution\n        isModelSolutionFork\n      }\n    }\n  }\n"]);return u=function(){return e},e}var d={},f=(0,c.Ps)(u());function h(e){var t=(0,a.Z)({},d,e);return s.a(f,t)}var p=n(42615),v=n(46620),m=n(16505),g=n(58979),Z=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,o.Z)(),n=(0,m.Z)(),a=h({variables:{replId:t}}),l=a.data,c=a.loading,s="Repl"===(null===l||void 0===l?void 0:l.repl.__typename)&&(l.repl.isProjectFork||l.repl.isModelSolution||l.repl.isModelSolutionFork),u=(0,i.W)(),d=(0,p.Z)();return r.useCallback((function(t){return!!((s||c)&&(0,v.TI)(t)||(0,v.MF)(t))||!d&&(e&&(0,v.uC)(t)||(0,g.C)(t)||(0,v.yb)(t,n)||(0,v.lv)(t,u))}),[s,c,n,d,u,e])}},34886:function(e,t,n){n.d(t,{k:function(){return d}});var r=n(54703),i=n(72006),o=n(43119),a=n(71440),l=n(53486);function c(){var e=(0,o.Z)(["\n  query WorkspaceShowAdmin {\n    currentUser {\n      id\n      isAdmin: hasRole(role: ADMIN)\n    }\n  }\n"]);return c=function(){return e},e}var s={},u=(0,a.Ps)(c());function d(){var e,t=function(e){var t=(0,i.Z)({},s,e);return l.a(u,t)}().data,n=(0,r.useRouter)();return(null===t||void 0===t||null===(e=t.currentUser)||void 0===e?void 0:e.isAdmin)||Boolean(n.query.debug)}},37058:function(e,t,n){n.d(t,{y:function(){return d}});var r=n(59496),i=n(47382),o=n(16505),a=n(2272),l=n(18713),c=n(26303),s=n(56579),u=n(1540),d=function(){var e=(0,o.Z)(),t=function(){var e=(0,s.Z)().dotReplit,t=(0,c.Z)(),n=(0,a.Z)(r.useState(null),2),i=n[0],o=n[1];return r.useEffect((function(){return e.watch((function(e){var n;t.current&&(e.error?e.error===l.Yt.NotFound&&o(null):o(null!==(n=e.config.entrypoint)&&void 0!==n?n:null))}))}),[e]),i}()||i.Z.getMainFileName(e);return r.useCallback((function(e,n){return(0,u.x$)(e,n,t)}),[t])}},98841:function(e,t,n){n.d(t,{B:function(){return D}});var r=n(2272),i=n(95764),o=n(81970),a=n(62967),l=n(59513),c=n(28609),s=n(79351),u=n(72006),d=n(43119),f=n(71440),h=n(53486);function p(){var e=(0,d.Z)(["\n  fragment WorkspaceToolPanesRepl on Repl {\n    isProjectFork\n    isModelSolution\n    isProject\n    isProjectFork\n    workspaceCta\n    owner {\n      __typename\n      ... on Team {\n        id\n        isAdmin\n        isTeamsPro: subscriptionIsType(subscriptionType: PRO)\n      }\n      ... on User {\n        id\n      }\n    }\n    currentUserPermissions {\n      containerWrite\n      editMultiplayers\n    }\n    hostingDeploymentPermissions {\n      canDeploy\n    }\n    lang {\n      id\n      key\n      engine\n      supportsGit\n      hasLibSearch\n      supportsPackager3\n      hasDAP\n    }\n    config {\n      isServer\n      isVnc\n    }\n  }\n"]);return p=function(){return e},e}function v(){var e=(0,d.Z)(["\n  query WorkspaceToolPanes($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        ...WorkspaceToolPanesRepl\n      }\n    }\n    currentUser {\n      id\n      isAdmin: hasRole(role: ADMIN)\n      userSubscriptionType\n    }\n  }\n  ","\n"]);return v=function(){return e},e}var m={},g=(0,f.Ps)(p()),Z=(0,f.Ps)(v(),g);var y=n(54703),b=n(12922),w=n(58870),x=n(38649),C=n(89074),k=n(33575),S=n(74296),E=n(8265),T=n(77685),R=n(48030);function _(){var e,t=function(e){var t=(0,u.Z)({},m,e);return h.a(Z,t)}({variables:{replId:(0,s.Z)()}}).data,n="Repl"===(null===t||void 0===t||null===(e=t.repl)||void 0===e?void 0:e.__typename)?null===t||void 0===t?void 0:t.repl:null;return n?{repl:n,currentUser:(null===t||void 0===t?void 0:t.currentUser)||null}:{repl:null,currentUser:null}}var I=["ghostwriterChat","education","tutorial","instructions","docs","chat","threadInbox","packager","git","debugger","shell","runnerOutput","envEditor","webview","vnc","database","neon","replAuth","markdown","autograder","unitTests","preferences","adminPanel","deployments","sshConfigurator","extensionStore","searchReplace","extension"],G=["shell","git","packager","envEditor","database","neon","ghostwriterChat","unitTests","submitEduRepl","preferences","docs","multiplayer","adminPanel","sshConfigurator"];function D(){var e,t=_(),n=t.repl,s=t.currentUser,u=(0,y.useRouter)(),d=(0,x.T3)(),f=(0,b.P)({controlName:"flag-neon-databases"}),h=(0,b.P)({controlName:"flag-postgres-db-god-mode"}),p=(0,b.P)({controlName:"flag-deployments"}),v=Boolean(p&&(null===n||void 0===n?void 0:n.hostingDeploymentPermissions.canDeploy)),m=(0,b.P)({controlName:"flag-repl-auth-sidebar"}),g=(0,b.P)({controlName:"flag-series-of-tubes"}),Z=(0,k.d)(),D=(0,b.P)({controlName:"flag-extensions",default:!1,type:"boolean"}),P=(0,b.P)({controlName:"flag-search-replace-pane",default:!1,type:"boolean"}),B=(0,b.P)({controlName:"flag-nix-modules-tool"}),U=(0,a.Z)().language,A=(0,l.T)(),N=(0,w.Ln)(),L=(0,i.Z)().isTutorial,X=(0,o.I)().length>0,M=(0,C.T)(),O=(0,E.WG)(),W=(null===M||void 0===M?void 0:M.debuggers)&&(null===M||void 0===M?void 0:M.debuggers.length)>0||!1,F=(0,R.jX)(null===s||void 0===s?void 0:s.userSubscriptionType),j="Team"===(null===n||void 0===n||null===(e=n.owner)||void 0===e?void 0:e.__typename)&&(null===n||void 0===n?void 0:n.owner.isTeamsPro),z=(null===s||void 0===s?void 0:s.isAdmin)||Boolean(u.query.debug);return(0,c.Z)((function(){var e=d&&(null===n||void 0===n?void 0:n.currentUserPermissions.editMultiplayers)?[{type:"multiplayer"}]:[];if(!n||!s)return e;var t=Boolean(n.config.isServer),i=Boolean(n.config.isVnc),o=n.lang.supportsGit,a=n.lang.key.startsWith("html"),l="nix"===n.lang.key,c=!a,u=n.isProject||n.isProjectFork,p=!a,y=g||F||j,b=Boolean(m&&X),w=[[{type:"shell"},!0],[{type:"instructions"},N],[{type:"markdown",data:{path:""}},!0],[{type:"threadInbox"},!0],[{type:"chat"},!0],[{type:"docs",data:{url:null}},!0],[{type:"webview"},t||a],[{type:"vnc"},i],[{type:"runnerOutput"},!a],[{type:"git"},o],[{type:"packager"},X],[{type:"envEditor"},c],[{type:"debugger"},W],[{type:"tutorial"},L],[{type:"database"},p],[{type:"neon"},h||l&&f],[{type:"replAuth"},b],[{type:"autograder"},u],[{type:"unitTests"},!u&&null!==U],[{type:"education"},Boolean(A)],[{type:"preferences"},!0],[{type:"adminPanel"},z],[{type:"deployments"},v],[{type:"sshConfigurator"},y],[{type:"ghostwriterChat"},Z],[{type:"searchReplace"},P],[{type:"extensionStore",data:{page:"store"}},D],[{type:"modules"},B]];if(d){var x=n.workspaceCta===S.Sy.Submit||n.workspaceCta===S.Sy.Resubmit;w.push([{type:"submitEduRepl"},x])}if(D){var C=!0,k=!1,E=void 0;try{for(var R,_=O[Symbol.iterator]();!(C=(R=_.next()).done);C=!0){var M=R.value;w.push([{type:"extension",data:{extensionId:M.extension.extensionId,installationId:M.extension.installationId,name:M.name||M.extension.manifest.name,url:(0,T.Vh)(M.extension.baseUrl,M.handler)}},!0])}}catch(J){k=!0,E=J}finally{try{C||null==_.return||_.return()}finally{if(k)throw E}}}var H=!0,V=!1,q=void 0;try{for(var $,Y=w[Symbol.iterator]();!(H=($=Y.next()).done);H=!0){var K=(0,r.Z)($.value,2),Q=K[0];K[1]&&(d&&!G.includes(Q.type)||e.push(Q))}}catch(J){V=!0,q=J}finally{try{H||null==Y.return||Y.return()}finally{if(V)throw q}}return function(e,t){return e.sort((function(e,n){return t.indexOf(e.type)-t.indexOf(n.type)}))}(e,d?G:I)}),[n,s,f,v,m,g,Z,U,A,N,L,X,W,z,d,h,B,D,B,P,O])}},47073:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(51954),i=n(79351),o=n(59496),a=n(56579),l=n(76382),c=n(17401),s=n(18713);var u=new Set;function d(e){var t=e.workspaceType,n=(0,i.Z)(),d=(0,a.Z)().dotReplit;(0,o.useEffect)((function(){if(!u.has(n)){u.add(n);var e=d.watch((function(n){if(!n.error||n.error!==s.Yt.Disconnected){try{!function(e){var t=Boolean(window.performance.getEntriesByName(c.Iy.pageNavStart,"mark").length),n="time to code";window.performance.measure(n,t?c.Iy.pageNavStart:void 0);var i=window.performance.getEntriesByName(n,"measure")[0];if(i){var o="page invisible fetch connection metadata",a=i.duration;Boolean(window.performance.getEntriesByName(c.Iy.fetchConnectionMetadataPageInvisibleStart,"mark").length)&&(window.performance.measure(o,c.Iy.fetchConnectionMetadataPageInvisibleStart,c.Iy.fetchConnectionMetadataPageInvisibleEnd),a-=window.performance.getEntriesByName(o,"measure")[0].duration,window.performance.clearMeasures(o),window.performance.clearMarks(c.Iy.fetchConnectionMetadataPageInvisibleStart),window.performance.clearMarks(c.Iy.fetchConnectionMetadataPageInvisibleEnd)),r.kg.time("time to code minus page invisible",a,{ssr:!t,workspaceType:e}),r.kg.time("time to code with page invisible",i.duration,{ssr:!t,workspaceType:e}),window.performance.clearMeasures(n),l.v.addTiming("time_to_code_minus_page_invisible",a),l.v.addTiming("time_to_code_with_page_invisible",i.duration)}else r.kg.info("Could not obtain measure for time to code",{workspaceType:e})}(t)}catch(i){r.kg.info("Could not measure time to code",{workspaceType:t,e:i,dotReplitResult:n.error?n.error:"success"})}e()}}));return e}}),[n,t,d])}},2029:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(1540),i=n(51954),o=n(27295),a=new Map,l=function(e){var t=a.get(e);if(void 0!==t){var n=t.start,r=t.source,l=window.performance.now(),c=(0,o.V)(e);i.kg.time("time to load file",l-n,{from:r,fileViewerType:c}),a.delete(e)}};function c(e){return{trackTimeToLoadFileStart:function(t){return function(e,t){if((0,r.Mb)(e)){var n=window.performance.now();a.set(e,{start:n,source:t})}}(t,e)},trackTimeToLoadFileEnd:l}}},67125:function(e,t,n){n.d(t,{p:function(){return m}});var r=n(72006),i=n(4405),o=n(80256),a=n(21910),l=n(28609),c=n(37058),s=n(19540),u=n(56579),d=n(99340),f=n(59496),h=n(40795),p=n(79351),v=n(56580),m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onFileDoubleClick,n=e.onFileDragEnd,m=(0,s.ex)(),g=(0,o.F)(),Z=(0,a.T)(!0),y=(0,c.y)(),b=(0,u.Z)().fs,w=(0,d.Z)().showError,x=(0,p.Z)(),C=(0,f.useCallback)((function(e){(0,h.Z)((0,i.Z)((0,r.Z)({},e),{replId:x}))}),[x]),k=(0,v.Z)().preferences,S="cmdOrCtrlKey"===(null===k||void 0===k?void 0:k.multiselectModifierKey)?"cmdOrCtrlKey":"altKey",E=(0,l.Z)((function(){return{flags:{flagFiletreeMultiselect:!0},preferences:{multiselectModifierKey:S},activeFile:m,watchDir:b.watchDir,openFile:g,shouldHideFile:Z,sortNode:y,readFile:b.readFile,deleteFile:b.deleteFile,deleteDir:b.deleteDir,moveFile:b.moveFile,moveDir:b.moveDir,onError:w,onAction:C,onFileDragEnd:n,onFileDoubleClick:t}}),[S,m,b.watchDir,b.readFile,b.deleteFile,b.deleteDir,b.moveFile,b.moveDir,g,Z,y,w,C,n,t]);return E}},48287:function(e,t,n){n.d(t,{_:function(){return c},n:function(){return a}});var r=n(2272),i=n(26936),o=n(95467);function a(e,t){var n=[],o=!0,a=!1,l=void 0;try{for(var c,s=t[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=(0,r.Z)(c.value,2),d=u[0],f=u[1];n.push({commandId:d,keyCombo:f})}}catch(h){a=!0,l=h}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}i.Z.set(e,n)}function l(e){if(e&&"object"===typeof e&&"commandId"in e&&"string"===typeof e.commandId){var t="keyCombo"in e&&"string"===typeof e.keyCombo?(0,o.SG)(e.keyCombo):null;if(t)return{commandId:e.commandId,keyCombo:t}}}function c(e){var t=i.Z.get(e,"array");if(t){var n=new Map,r=!0,o=!1,a=void 0;try{for(var c,s=t[Symbol.iterator]();!(r=(c=s.next()).done);r=!0){var u=l(c.value);u&&n.set(u.commandId,u.keyCombo)}}catch(d){o=!0,a=d}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n}}},87438:function(e,t,n){n.d(t,{h:function(){return s},x:function(){return c}});var r=n(9970),i=n(59496),o=n(27400),a=n(5109),l=(0,a.cn)([]);function c(e,t){var n=t.run,o=t.enabled,c=void 0===o||o,s=(0,a.b9)(l);(0,i.useEffect)((function(){if(c){var t=(Array.isArray(e)?e:[e]).map((function(e){return{shortcut:e,run:n}}));return s((function(e){return(0,r.Z)(e).concat((0,r.Z)(t))})),function(){s((function(e){return e.filter((function(e){return!t.includes(e)}))}))}}}),[e,n,s,c])}function s(){var e=(0,a.Dv)(l);return(0,i.useEffect)((function(){var t=function(t){var n=!0,r=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var c,s=a.value,u=s.shortcut,d=s.run;Boolean(u.cmdOrCtrlKey)===Boolean((0,o.j)(t))&&Boolean(u.altKey)===Boolean(t.altKey)&&Boolean(u.shiftKey)===Boolean(t.shiftKey)&&(null===(c=u.key)||void 0===c?void 0:c.toLowerCase())===t.key.toLowerCase()&&(t.preventDefault(),d(u))}}catch(f){r=!0,i=f}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}};return document.addEventListener("keydown",t),function(){document.removeEventListener("keydown",t)}}),[e]),null}},50751:function(e,t,n){function r(e){return new Promise((function(t){var n=e.openChannel({service:"gcsfiles"},(function(e){return e.channel.request({persistMirror:{path:"."}}).then((function(e){e.ok,n(),t()})),function(e){e.willReconnect&&n()}}))}))}n.d(t,{r:function(){return r}})},62954:function(e,t,n){n.d(t,{e:function(){return w},Z:function(){return b}});var r=n(72006),i=n(2272),o=n(88375),a=n(75164),l=n(77637),c=n(50007),s=n(15114),u="exit status 1";var d=n(86763),f=n.n(d),h=n(57135),p=n(9970),v=n(96583),m=n(88254),g="signal: broken pipe";function Z(){return(Z=(0,h.Z)((function(e){var t,n,r,i,s,d,f;return(0,v.__generator)(this,(function(h){switch(h.label){case 0:return n=e.container,0===(r=(0,l.Z)(e,["container"])).query.trim().length?[2,y(o.f.EMPTY_QUERY)]:n.getConnectionState()===c.em.DISCONNECTED?[2,y(o.f.CONTAINER_DISCONNECTED)]:[4,(t=n).exec.apply(t,(0,p.Z)((0,a.PR)(r)))];case 1:if(i=h.sent(),s=i.output,d=i.error)switch(d){case u:return[2,y(o.f.EMPTY_RESULTS)];case g:return[2,y(o.f.PARTIAL_RESULTS)];default:return m.Tb(new Error("Search command failed with error: ".concat(d))),[2,{error:d,data:null}]}return s&&(f=(0,a.Tq)()(s))?[2,y(f.error,f.filesMap)]:[2,y(o.f.EMPTY_RESULTS)]}}))}))).apply(this,arguments)}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{error:e,data:t}}function b(e){var t=e.container,n=e.onError,i=e.onUpdate,d=e.onLoadingStateChange,h=[],p=function(){},v=function(e){i(h=e)};return f()((function(e){p(),n(null),v([]),d(!0),p=function(e){var t=e.container,n=e.onComplete,r=e.onError,i=e.onParse,d=(0,l.Z)(e,["container","onComplete","onError","onParse"]),f=(0,s.Z)({container:t}),h=(0,a.Tq)(),p=!1,v=function(e){p||(n(e),p=!0,f.dispose())},m=function(e){r(e),v("error")},g=function(){return v("abort")},Z=function(){};if(0===d.query.trim().length)return g(),Z;switch(t.getConnectionState()){case c.em.DISCONNECTED:return m(o.f.CONTAINER_DISCONNECTED),Z;case c.em.CONNECTING:return m(o.f.CONTAINER_CONNECTING),Z}return f.onOutput((function(e){if(!p){var t=h(e);if(t){var n=t.error,r=t.filesMap,o=t.filesMapChanges;n&&m(n),o.forEach((function(e){var t=r.get(e);t&&r.set(e,(0,a.Vd)(t))})),i(r,o)}}})),f.onStderr((function(e){if(e.trim()===u)return m(o.f.EMPTY_RESULTS);m(o.f.INVALID_COMMAND)})),f.request({args:(0,a.PR)(d)}).then((function(e){if(e.error)return e.error.trim()===u?m(o.f.EMPTY_RESULTS):m(o.f.INVALID_COMMAND);n("finished")})),g}((0,r.Z)({container:t,onComplete:function(){return d(!1)},onError:n,onParse:function(e,t){return v((0,a.Md)(h,e,t))},mode:"json",context:0},e))}),200)}function w(e){var t=e.container,n=f()((function(e,n,a){(function(e){return Z.apply(this,arguments)})((0,r.Z)({container:t,mode:"json",context:1},e)).then((function(e){var t=e.data?function(e){var t={},n=!0,r=!1,o=void 0;try{for(var a,l=e.entries()[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var c=(0,i.Z)(a.value,2),s=c[0],u=c[1];t[s]=u.lines.map((function(e){return{content:e.content,lineNumber:e.lineNumber,matches:e.matches.map((function(e){return{column:e.start,length:e.length}}))}})).filter((function(e){return e.matches.length>0}))}}catch(d){r=!0,o=d}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}return t}(e.data):{},r=e.error===o.f.PARTIAL_RESULTS;return r?n({error:null,results:t,isPartialResult:r}):e.error?n({error:e.error,results:null,isPartialResult:r}):n({error:null,results:t,isPartialResult:r})})).catch(a)}),200);return function(e){return new Promise((function(t,r){return n(e,t,r)}))}}},1356:function(e,t,n){n.d(t,{Eu:function(){return c},m6:function(){return i}});var r=n(9970);function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],r=function(e){return e.forEach((function(e){return e&&n.push("-g",e)}))},i=[],l=[],c=!0,s=!1,u=void 0;try{for(var d,f=e[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var h=d.value;h.startsWith("**")?i.push(h):l.push(h)}}catch(p){s=!0,u=p}finally{try{c||null==f.return||f.return()}finally{if(s)throw u}}return l.length>0&&(r(["!*"]),new Set(l).forEach((function(e){r(a(e).map(o))}))),r(i),r(t.map((function(e){return"!".concat(o(e))}))),n}function o(e){return e.startsWith("**")||e.startsWith("/")?e:"/".concat(e)}function a(e){var t=function(e){var t;Array.isArray(i[e])||(i[e]=[]);var o=n[e],a=o.startsWith("{")&&o.endsWith("}")?c(o.substring(1,o.length-1),","):[o];(t=i[e]).push.apply(t,(0,r.Z)(a.map((function(t){var n=i[e-1];return n&&n.length>0?n.map((function(e){return"".concat(e,"/").concat(t)})):t})).flat(2)))},n=c(e,"/").filter((function(e){return e.length>0}));"**"!==n[n.length-1]&&n.push("**");for(var i={},o=0;o<n.length;o++)t(o);return Object.values(i).flat(2)}var l=function(){var e={},t={},n=function(n,r){e[n]=r,t[r]=n};return n("{","}"),n("(",")"),n("[","]"),{hasKey:function(t){return t in e},getKey:function(t){return e[t]},hasValue:function(e){return e in t},getValue:function(e){return t[e]}}}();function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";if(0===e.length)return[];var n=[],r=[],i="",o=!0,a=!1,c=void 0;try{for(var s,u=e[Symbol.iterator]();!(o=(s=u.next()).done);o=!0){var d=s.value;if(d===t){if(0===r.length){n.push(i),i="";continue}}else if(l.hasKey(d))r.push(d);else if(l.hasValue(d)&&r.pop()!==l.getValue(d))return[e];i+=d}}catch(f){a=!0,c=f}finally{try{o||null==u.return||u.return()}finally{if(a)throw c}}return 0!==r.length?[e]:(i.length>0&&n.push(i),n)}},75164:function(e,t,n){n.d(t,{Md:function(){return p},PR:function(){return v},Tq:function(){return s},Vd:function(){return h}});var r=n(72006),i=n(4405),o=n(9970),a=n(1356),l=n(88375),c=n(91620).lW;function s(){var e="",t=new Map;return function(n){var r=new Set,i=!1;if(n.trim().startsWith("error"))return{error:l.f.INVALID_COMMAND,filesMap:t,filesMapChanges:r};var o=n.indexOf("\n"),a=0,c=e+n;if(o>=0){for(o+=e.length;o>=0;){var s=c.substring(a,o).trim();if(0!==s.length){var f=u(s);if(f)d(f,t,r)||(i=!0)}a=o+1,o=c.indexOf("\n",a)}return e=c.substring(a),{error:i?l.f.INVALID_LINE:null,filesMap:t,filesMapChanges:r}}e=c}}function u(e){try{return JSON.parse(e)}catch(t){return null}}function d(e,t,n){switch(e.type){case"begin":var o=f(e.data.path);if(!o)return!1;t.set(o,{path:o,lines:[],dedentBy:0}),n.add(o);break;case"end":return!0;case"match":case"context":var a=f(e.data.path);if(!a)return!1;n.add(a);var l=t.get(a);if(!l)return!1;var c=function(e,t){var n,o,a=f(e.data.lines);if(!a)return null;var l=a.trimEnd().split(/\r?\n/),c=[];""===(null===(n=l[0])||void 0===n?void 0:n.trim())&&l.shift();""===(null===(o=l[l.length-1])||void 0===o?void 0:o.trim())&&l.pop();var s=0,u=0,d=e.data.submatches;return l.forEach((function(t,n){var r=e.data.line_number+n,i=u;u+=t.length+1;for(var o=[];s<d.length;){var a=d[s];if(a.start>=u)break;var l=a.start-i,f=void 0;if(f=a.end<u?a.end-a.start:a.end===u?a.end-a.start-1:t.length-l,l<t.length&&o.push({start:l,length:f}),a.end>u){a.start=u;break}s++}c.push({lineNumber:r,content:t,matches:o})})),(0,i.Z)((0,r.Z)({},t),{lines:t.lines.concat(c)})}(e,l);return c&&t.set(a,c),!0;case"error":return!1}return!0}function f(e){return e?"bytes"in e?c.from(e.bytes,"base64").toString():e.text:null}function h(e){var t,n=e.lines.length>0?(t=Math).min.apply(t,(0,o.Z)(e.lines.map((function(e){return e.content.match(/^[\t ]+/)})).flat().map((function(e){return(null===e||void 0===e?void 0:e.length)||0})))):0;return(0,i.Z)((0,r.Z)({},e),{dedentBy:n})}function p(e,t,n){for(var r=(0,o.Z)(e),i=new Set,a=0;a<r.length;a++){var l=r[a].path,c=t.get(l);n.has(l)&&c&&(r[a]=c,i.add(l))}var s=!0,u=!1,d=void 0;try{for(var f,h=n[Symbol.iterator]();!(s=(f=h.next()).done);s=!0){var p=f.value,v=t.get(p);!i.has(p)&&v&&r.push(v)}}catch(m){u=!0,d=m}finally{try{s||null==h.return||h.return()}finally{if(u)throw d}}return r}function v(e){var t,n=e.mode,r=e.query,i=e.context,l=e.isRegex,c=e.isCaseSensitive,s=e.isMatchingWholeWords,u=e.includeGlobs,d=e.excludeGlobs,f=["rg"];switch(n){case"json":f.push("--json");break;case"files":f.push("--files-with-matches")}return null!==i&&f.push("--context","".concat(i)),r.includes("\n")&&f.push("--multiline"),l||f.push("--fixed-strings"),f.push(c?"--case-sensitive":"--ignore-case"),s&&f.push("--word-regexp"),(t=f).push.apply(t,(0,o.Z)((0,a.m6)(u,d))),f.push("--",r,"."),f}},88375:function(e,t,n){var r;n.d(t,{f:function(){return r}}),function(e){e.PARTIAL_RESULTS="Displaying partial results, try being more specific with your search.",e.EMPTY_RESULTS="Nothing came up searching your Repl's content.",e.EMPTY_QUERY="No search query was provided.",e.INVALID_LINE="We encountered an invalid line while parsing your search results.",e.INVALID_COMMAND="Ripgrep returned an invalid response.",e.CONTAINER_DISCONNECTED="Disconnected from the container.",e.CONTAINER_CONNECTING="Connecting to the container."}(r||(r={}))},16194:function(e,t,n){n.d(t,{YI:function(){return U},kW:function(){return B}});var r,i=n(72006),o=n(4405),a=n(94660),l=n(29356),c=n.n(l),s=(n(59496),n(94972));!function(e){e.TEXT="TEXT",e.MENTION="MENTION",e.LINK="LINK",e.REPL_LINK="REPL_LINK",e.DEEP_LINK="DEEP_LINK",e.CODE="CODE",e.BOLD="BOLD",e.ITALICS="ITALICS",e.STRIKETHROUGH="STRIKETHROUGH",e.QUOTE="QUOTE"}(r||(r={}));var u=function(e){var t=e.fragment,n=e.onClick;return(0,a.tZ)(s.Z,{size:"small",onClick:n,children:t.content})},d=function(e){var t=e.fragment,n=e.onClick;return(0,a.tZ)(s.Z,{size:"small",fontWeight:"medium",onClick:n,children:t.content})},f=function(e){var t=e.fragment,n=e.onClick;return(0,a.tZ)("a",{href:t.url,onClick:n,rel:"noreferrer noopener nofollow",target:"_blank",children:t.content})},h=function(e){var t=e.fragment,n=e.onClick;return(0,a.tZ)("a",{href:t.url,onClick:n,target:"_blank",children:t.content})},p=function(e){var t=e.fragment,n=e.onClick;return(0,a.tZ)("a",{href:t.url,onClick:n,children:t.content})},v=function(e){var t=e.fragment,n=e.onClick,r=e.style;return(0,a.tZ)("code",{onClick:n,style:r,children:t.content})},m=function(e){var t=e.fragment,n=e.onClick;return(0,a.tZ)("b",{onClick:n,children:t.content})},g=function(e){var t=e.fragment,n=e.onClick;return(0,a.tZ)("i",{onClick:n,children:t.content})},Z=function(e){var t=e.fragment,n=e.onClick;return(0,a.BX)("span",{onClick:n,className:"jsx-e2f6e2707e7599fa",children:[t.content,(0,a.tZ)(c(),{id:"e2f6e2707e7599fa",children:"span.jsx-e2f6e2707e7599fa{text-decoration:line-through}"})]})},y=function(e){var t=e.fragment,n=e.onClick;return(0,a.BX)("blockquote",{onClick:n,className:"jsx-8741a91fadaf26be",children:[t.content,(0,a.tZ)(c(),{id:"8741a91fadaf26be",children:"blockquote.jsx-8741a91fadaf26be{border-left:2px solid var(--foreground-dimmest);padding-left:6px;color:var(--foreground-dimmest)}"})]})},b=/(@[0-9a-zA-Z_]+)/,w=/(#[-a-zA-Z0-9@:%._+~#=/]+)/,x=/(https?:\/\/[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{2,6}\b(?:[-a-zA-Z0-9()@:%_+.~#?&//=]*))/,C=/(`.+?`)/,k=/(\*\*.+?\*\*)/,S=/(_.+?_)/,E=/(\*.+?\*)/,T=/(~~.+?~~)/,R=/(^>.+?$\n?)/m,_=/\/@([0-9a-zA-Z_]+)\/(.+)/;function I(e){var t=e.url;return{type:r.LINK,url:t,content:t}}function G(e){var t=e.hash;return{type:r.DEEP_LINK,url:t,content:t}}function D(e,t){if(x.test(e)){var n={};try{n=new window.URL(e)}catch(o){return{content:e,type:r.TEXT}}return["repl.it","replit.com","firewalledreplit.com",document.location.host].includes(n.host)?n.pathname===t.replUrl?G({hash:n.hash}):_.test(n.pathname)?function(e){var t=e.url,n=_.exec(t.pathname);if(!n)throw new Error("Not a Repl URL");return{type:r.REPL_LINK,url:t.href,content:"@".concat(n[1],"/").concat(n[2]).concat(t.hash)}}({url:n}):I({url:e}):I({url:e})}if(w.test(e))return G({hash:e});if(R.test(e))return function(e){var t=e.text;return{type:r.QUOTE,content:t}}({text:e.slice(1).trim()});if(C.test(e))return function(e){var t=e.code;return{type:r.CODE,content:t}}({code:e.slice(1,-1)});if(k.test(e))return function(e){var t=e.text;return{type:r.BOLD,content:t}}({text:e.slice(2,-2)});if(S.test(e)||E.test(e))return function(e){var t=e.text;return{type:r.ITALICS,content:t}}({text:e.slice(1,-1)});if(T.test(e))return function(e){var t=e.text;return{type:r.STRIKETHROUGH,content:t}}({text:e.slice(2,-2)});if(b.test(e)){var i=e.slice(1);if(!t.users||t.users.includes(i))return function(e){var t=e.username;return{type:r.MENTION,username:t,content:"@".concat(t)}}({username:i})}return{content:e,type:r.TEXT}}var P=new RegExp([C.source,k.source,S.source,E.source,T.source,x.source,b.source,w.source,R.source].join("|"),"m");function B(e,t){var n=e.split(P),i=[],o=[],a=!0,l=!1,c=void 0;try{for(var s,u=n[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var d=s.value;if(d){var f=D(d,t);if(f){if(f.type===r.MENTION){if(!f.username)continue;i.push(f.username)}o.push(f)}}}}catch(h){l=!0,c=h}finally{try{a||null==u.return||u.return()}finally{if(l)throw c}}return{tokens:o,mentions:i}}function U(e){var t=e.message,n=e.onMentionClick,l=void 0===n?function(){}:n,c=e.codeStyles,s=void 0===c?{}:c;return(0,a.tZ)(a.HY,{children:t.tokens.map((function(e,t){var n={fragment:e,key:t};return e.type===r.MENTION?(0,a.tZ)(d,(0,o.Z)((0,i.Z)({},n),{onClick:function(){return l(e)}})):e.type===r.LINK?(0,a.tZ)(f,(0,i.Z)({},n)):e.type===r.REPL_LINK?(0,a.tZ)(h,(0,i.Z)({},n)):e.type===r.DEEP_LINK?(0,a.tZ)(p,(0,i.Z)({},n)):e.type===r.CODE?(0,a.tZ)(v,(0,o.Z)((0,i.Z)({},n),{style:s})):e.type===r.BOLD?(0,a.tZ)(m,(0,i.Z)({},n)):e.type===r.ITALICS?(0,a.tZ)(g,(0,i.Z)({},n)):e.type===r.STRIKETHROUGH?(0,a.tZ)(Z,(0,i.Z)({},n)):e.type===r.QUOTE?(0,a.tZ)(y,(0,i.Z)({},n)):(0,a.tZ)(u,(0,i.Z)({},n))}))})}},7537:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(94660),i=(n(59496),n(58530)),o=n(69735),a=n(94972),l={Content:function(){return(0,r.tZ)(i.G7,{style:{padding:32},children:(0,r.tZ)(a.Z,{children:"Sorry, this feature is not supported."})})},Icon:function(){return(0,r.tZ)(o.Z,{})},getTitle:function(){return"Unsupported"}}},39465:function(e,t,n){n.d(t,{R:function(){return f},b:function(){return h}});var r=n(94660),i=n(87438),o=n(56579),a=n(89368),l=n(90440),c=n(5109),s=n(40699),u=n(6751),d=n(11492),f={Content:function(e){var t=e.options.isHidden,n=(0,o.Z)(),a=n.container,f=n.fs,p=n.session,v=n.runner,m=(0,c.Dv)(s.f),g=(0,s.Z)();return(0,u.Z)({container:a,runner:v,refreshWebView:g}),(0,d.Z)({runner:v,refreshWebView:g}),(0,i.x)(h,{run:function(){g()}}),(0,r.tZ)(l.Z,{fs:f,session:p,ref:m,isVisible:!t})},Icon:function(e){var t=e.size;return(0,r.tZ)(a.Z,{size:t})},getTitle:function(){return"Webview"}},h={cmdOrCtrlKey:!0,altKey:!1,shiftKey:!1,key:"S"}},90693:function(e,t,n){n.d(t,{U:function(){return aT}});var r={};n.r(r),n.d(r,{Component:function(){return zZ},receiver:function(){return Ng},reducer:function(){return Xg}});var i=n(94660),o=n(57389),a=n(2272),l=n(59496),c=n(34495),s=n(12512),u=n(59748),d=n(80417),f=n(56579),h=n(43589),p=n(30826),v=n.n(p),m=n(1540),g=n(83825),Z=n(58530),y=n(54129),b=n(65749),w=n(65253),x=n(51458),C=(0,l.memo)(g.Z);var k=(0,Z.Xb)({root:[Z.l0.colWithGap(8),Z.l0.height("100%"),Z.l0.width("100%"),Z.l0.overflow("auto"),Z.l0.zIndex(2),Z.l0.align.center,Z.l0.py(16),Z.l0.px(16),Z.l0.borderRadius(8),(0,o.Z)({margin:"0 auto"},"@media only screen and (min-width: ".concat(s.j.tabletMin,"px)"),Z.l0.px(32))],header:[Z.l0.rowWithGap(4),Z.l0.height(30),Z.l0.width("100%"),Z.l0.align.center],markdownContainer:[Z.l0.width("100%"),{"& .rendered-markdown":[Z.l0.flex.column,Z.l0.center],"& .rendered-markdown > *":[Z.l0.maxWidth(840),Z.l0.width("100%")],"& .rendered-markdown > table":Z.l0.maxWidth("100%")}]});function S(e){var t=(0,f.Z)().fs,n=(0,a.Z)(function(){var e=(0,l.useRef)(!1),t=(0,l.useRef)(null);return[(0,h.Z)((function(){e.current=!0,t.current&&clearTimeout(t.current),t.current=setTimeout((function(){e.current=!1}),150)}),{type:"throttle",wait:37.5}),e]}(),2),r=n[0],o=n[1],s=(0,l.useState)(e.path),p=s[0],g=s[1],S=(0,x.Z)(p),E=(0,l.useRef)(null),T=(0,b.T)(),R=e.path;(0,l.useEffect)((function(){R&&g(R)}),[R]);var _=e.isHidden,I=(0,w.p5)();(0,l.useEffect)((function(){if(!_){I.current&&(0,m.gK)(I.current.path)&&g(I.current.path);var e=v()((function(e){(0,c.Z)(e,{behavior:T?"auto":"smooth",scrollMode:"if-needed"})}),100),t=v()((function(t){if(t)if(t.path===S.current){if(!o.current){var n=E.current?function(e,t){var n=e.querySelectorAll(".rendered-markdown [data-sourcepos]");if(!(null===n||void 0===n?void 0:n.length))return null;var r=Array.from(n).reverse(),i=t.line,o=t.column,l=!0,c=!1,s=void 0;try{for(var u,d=r[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var f=u.value,h=f.dataset.sourcepos;if(!h)throw new Error("Expected data source pos on selected element");var p=(0,a.Z)(h.split("-"),2),v=p[0],m=p[1],g=(0,a.Z)(v.split(":").map(Number),2),Z=g[0],y=g[1],b=(0,a.Z)(m.split(":").map(Number),2),w=b[0],x=b[1];if(i>=Z&&o>=y&&(i<w||i===w&&o<=x))return f}}catch(C){c=!0,s=C}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}}(E.current,t.position):null;n&&e(n)}}else(0,m.gK)(t.path)&&g(t.path)}),200),n=I.subscribe(t);return function(){t.cancel(),e.cancel(),n()}}}),[I,_,T]);var G=(0,l.useState)(null),D=G[0],P=G[1];return(0,l.useEffect)((function(){if(P(null),p&&(0,m.Mb)(p))return t.watchTextFile(p,{onReady:function(e){var t=e.initialContent;P(t.toString())},onChange:function(e){var t=e.latestContent;P(t)},onMoveOrDelete:function(e){e.eventType===y.kS.Delete&&g(null)}})}),[p,t]),p?null===D?(0,i.tZ)(d.Z,{preventHighlightBorder:!0}):(0,i.BX)(Z.G7,{css:k.root,innerRef:r,children:[(0,i.BX)(Z.G7,{css:k.header,children:[(0,i.tZ)(u.Z,{}),(0,i.BX)(Z.xv,{color:"dimmer",children:["Preview of ",(0,i.tZ)("a",{href:"#".concat(p),children:p})]})]}),(0,i.tZ)(Z.G7,{innerRef:E,css:k.markdownContainer,children:(0,i.tZ)(C,{path:p,source:D,fs:t,sourcePos:!0})})]}):(0,i.tZ)(Z.G7,{css:[Z.l0.height("100%"),Z.l0.width("100%"),Z.l0.center],children:(0,i.tZ)(Z.xv,{children:"No previewed file"})})}var E=n(36387),T={Content:function(e){var t=e.pane,n=e.options;return(0,i.tZ)(S,{path:t.data.path,isHidden:Boolean(n.isHidden)})},Icon:function(e){var t=e.size;return(0,i.tZ)(E.Z,{fill:"currentColor",size:t})},getTitle:function(){return"Markdown"}},R=n(72006),_=n(4405),I=n(9970),G=n(38649),D=n(94565),P=n(54703),B=n.n(P),U=function(){return Boolean(B().query.embed||B().query.lite)},A=n(5109),N=n(29356),L=n.n(N),X=n(22488),M=n(26922),O=n(19666),W=n(7330),F=n(65193),j=n(27289),z=n(81162),H=n(86763),V=n.n(H),q=n(96405),$=Symbol("CodeEditorView"),Y=(0,A.cn)(null);function K(){return(0,A.KO)(Y,$)[0]}function Q(e){var t=(0,a.Z)((0,A.KO)(Y,$),2),n=t[0],r=t[1];(0,l.useEffect)((function(){n!==e&&r(e)}),[e,n,r])}var J=function(e){var t=e.buttons,n=e.onClick,r=e.onUndo,o=e.onRedo;return(0,i.BX)("nav",{className:"jsx-43582faf24448cbd",children:[t.map((function(e){return(0,i.tZ)("button",{onClick:function(t){t.stopPropagation(),t.preventDefault(),n(e)},className:"jsx-43582faf24448cbd",children:void 0!==e.label?e.label:e.value},e.value)})),(0,i.tZ)("button",{onClick:function(e){e.stopPropagation(),e.preventDefault(),r()},className:"jsx-43582faf24448cbd",children:(0,i.tZ)(F.Z,{})}),(0,i.tZ)("button",{onClick:function(e){e.stopPropagation(),e.preventDefault(),o()},className:"jsx-43582faf24448cbd",children:(0,i.tZ)(j.Z,{})}),(0,i.tZ)(L(),{id:"43582faf24448cbd",children:'nav.jsx-43582faf24448cbd{font-family:Monaco,Menlo,"Ubuntu Mono",Consolas,source-code-pro,monospace;height:48px;background-color:var(--background-root);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:stretch;-webkit-align-items:stretch;-moz-box-align:stretch;-ms-flex-align:stretch;align-items:stretch}button.jsx-43582faf24448cbd{color:var(--foreground-default);padding:10px;font-family:inherit;font-size:16px;background-color:transparent;border:0 none;-webkit-box-flex:1;-webkit-flex:1 1 auto;-moz-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto}'})]})},ee=[{value:"{}",cursorOffset:1},{value:"()",cursorOffset:1},{value:'""',cursorOffset:1}],te=function(e){var t=e.path,n=(0,I.Z)(ee).concat([{value:"= ",cursorOffset:2}]);return t.endsWith(".html")&&(n.unshift({value:"<>",cursorOffset:1}),n.unshift({label:"div",value:"<div></div>",cursorOffset:5})),n},ne="visualViewport"in window;function re(e){var t=e.filePath,n=e.isLoading,r=K(),o=(0,M.Z)();l.useEffect((function(){o&&r&&r.requestMeasure({read:function(){return{cursor:r.coordsAtPos(r.state.selection.main.head),scroller:r.scrollDOM.getBoundingClientRect()}},write:function(e){var t=e.cursor,n=e.scroller;if(t){var i=(t.top+t.bottom)/2,o=(n.top+n.bottom)/2;Math.abs(i-o)>5&&(r.scrollDOM.scrollTop+=i-o+(q.gn?50:0))}}})}),[o,r]);var c=(0,a.Z)(l.useState(0),2),s=c[0],u=c[1];if(l.useEffect((function(){if(q.gn){var e=window.visualViewport;if(ne&&e){var t=V()((function(){u(window.innerHeight-e.height-e.offsetTop)}),100);return e.addEventListener("scroll",t),e.addEventListener("resize",t),function(){e.removeEventListener("scroll",t),e.removeEventListener("resize",t)}}}}),[]),!o||n)return null;if(!(0,X.isMobile)({tablet:!1}))return null;var d=(0,i.tZ)(J,{onUndo:function(){r&&((0,z.Yw)(r),r.focus())},onRedo:function(){r&&((0,z.KX)(r),r.focus())},onClick:function(e){if(r){var t,n=null!==(t=r.state.selection.ranges[0].from)&&void 0!==t?t:0;r.dispatch({changes:{from:n,insert:e.value},selection:{anchor:n+e.cursorOffset}}),r.focus()}},buttons:te({path:t})});return!q.gn||ne?(0,i.tZ)(O.G,{css:[W.l0.position.fixed,W.l0.width("100%"),W.l0.zIndex(100),W.l0.bottom(s),W.l0.left(0)],children:d}):d}var ie=n(18811),oe=n(55281),ae=[{img:"/public/images/kaboomdraw/rect.png",code:"\ndrawRect({\n\tpos: vec2(80, 80),\n\twidth: 120,\n\theight: 80,\n\tcolor: rgb(250, 242, 164),\n})\n    ".trim()},{img:"/public/images/kaboomdraw/triangle.png",code:"\ndrawTriangle({\n\tpos: vec2(100, 100),\n\tp1: vec2(0, -48),\n\tp2: vec2(-60, 48),\n\tp3: vec2(60, 48),\n\tcolor: rgb(164, 250, 204),\n})\n  ".trim()},{img:"/public/images/kaboomdraw/circle.png",code:"\ndrawCircle({\n\tpos: vec2(100, 100),\n\tradius: 48,\n\tcolor: rgb(181, 164, 250),\n})\n    ".trim()},{img:"/public/images/kaboomdraw/ellipse.png",code:"\ndrawEllipse({\n\tpos: vec2(120, 100),\n\tradiusX: 64,\n\tradiusY: 40,\n\tcolor: rgb(164, 209, 250),\n})\n    ".trim()},{img:"/public/images/kaboomdraw/polygon.png",code:"\ndrawPolygon({\n\tpos: vec2(100, 100),\n\tpts: [\n\t\tvec2(0, -48),\n\t\tvec2(-64, 0),\n\t\tvec2(-32, 64),\n\t\tvec2(32, 64),\n\t\tvec2(64, 0),\n\t],\n\tcolor: rgb(250, 164, 226),\n})\n    ".trim()},{img:"/public/images/kaboomdraw/text.png",code:'\ndrawText({\n\ttext: "hi",\n\tpos: vec2(60, 60),\n})\n    '.trim()}],le=function(e){var t=e.img,n=e.code,r=(0,a.Z)((0,oe.c)({item:{type:ie.z.Code,code:n},type:ie.z.Code}),2)[1];return(0,i.tZ)("img",{alt:"kaboom shape",ref:r,src:t,css:[W.l0.p(12),{userDrag:"none",height:"100%",cursor:"pointer",transition:"0.1s transform",":hover":{transform:"scale(1.2)"}}]})},ce=function(){return(0,i.tZ)(O.G,{css:[W.l0.flex.row,W.l0.justify.spaceEvenly,W.l0.backgroundColor.backgroundHigher,W.l0.borderRadius(8),W.l0.width("calc(100% - 32px)"),W.l0.height("64px"),W.l0.position.absolute,W.l0.overflowY("hidden"),{zIndex:5,left:16,bottom:16,border:"solid 1px var(--outline-dimmest)"}],children:ae.map((function(e){return(0,i.tZ)(le,(0,R.Z)({},e),e.img)}))})},se=n(19978),ue=n(88102),de=n(57135),fe=n(96583),he=n(79750),pe=n(66693),ve=n(86925),me=n(94148),ge=n(37180),Ze=n(62687),ye=n(74840),be=n(79900),we=n(73415),xe=n(29847),Ce=n(9362),ke=n(19012),Se=n(97702),Ee=ve.tk.baseTheme({"& .cm-contextual-ai-tooltip .cm-content":{paddingBottom:"0px"}});var Te=function(e){var t=e.children,n=e.title,r=e.newInferenceAlt,o=e.width,a=e.dataCy,l=e.onRequestClose,c=e.onRequestNewInference,s=(0,we.Z)(l,[]);return(0,i.tZ)("div",{"data-cy":a,ref:s,children:(0,i.tZ)(Se.Z,{bsod:!0,tags:{ai:!0},extras:{title:n},origin:"ErrorBoundary: ContextualAiModal",children:(0,i.BX)(ye.T,{background:"higher",css:[W.l0.borderRadius(8),W.l0.maxWidth("100%"),W.l0.width(o||320),{background:W.TV.backgroundHigher,boxShadow:W.TV.shadow1,borderWidth:1,borderColor:W.TV.backgroundHighest,borderStyle:"solid"}],children:[(0,i.BX)("div",{css:[W.l0.display.flex,W.l0.justify.spaceBetween,W.l0.flex.row,W.l0.rowWithGap(2),W.l0.p(8),{borderBottom:"1px solid",borderBottomColor:W.TV.backgroundHighest}],children:[(0,i.BX)("div",{css:[W.l0.display.grid,W.l0.align.center,{gridAutoFlow:"column",gridGap:W.TV.space8}],children:[(0,i.tZ)("div",{css:[{color:W.TV.foregroundDefault}],children:n}),(0,i.tZ)("a",{href:be.$q,target:"_blank",css:W.l0.color.foregroundDefault,children:(0,i.tZ)(Ze.h,{alt:"Learn more about AI at Replit",tooltipDelay:"none",tooltipContents:"This feature is powered by Replit Ghostwriter. Click to learn more.",type:"button",children:(0,i.tZ)(Ce.Z,{color:W.TV.foregroundDimmer})})}),c?(0,i.tZ)(Ze.h,{alt:r||"Try again",onClick:c,type:"button",children:(0,i.tZ)(ke.Z,{})}):null]}),(0,i.tZ)("div",{className:"right",children:(0,i.tZ)(Ze.h,{alt:"Close",tooltipHidden:!0,onClick:l,type:"button",children:(0,i.tZ)(xe.Z,{})})})]}),t]})})})},Re=pe.Py.define({map:function(e,t){if(e)return e.map(t)}});function _e(e){var t=e.setExplainCodeParams,n=pe.QQ.define({create:function(){return null},update:function(e,t){var n=!1,r=null;return(0,ge.j)(t,Re,(function(e){r=e.value,n=!0})),n?r:e&&!t.changes.empty?e.map(t.changes):e},provide:function(e){return[ve.hJ.compute([e],(function(n){var r=n.field(e);return r?{pos:r.to,create:function(){var e=document.createElement("div");return e.className="cm-contextual-ai-tooltip",t({dom:e,code:n.doc.sliceString(r.from,r.to)}),{dom:e}}}:null}))]}});return[n,Ee]}var Ie=pe.Py.define();function Ge(e){var t=e.view,n=e.setGenerateCodePortalProps,r=pe.QQ.define({create:function(){return null},update:function(e,r){var i=null;return(0,ge.j)(r,Ie,(function(e){i=e.value})),null!==i?i?function(e){return{pos:e.selection.main.to,above:!1,create:function(){var r=document.createElement("div");return r.className="cm-contextual-ai-tooltip",n({dom:r,onRequestClose:function(){t.dispatch({effects:Ie.of(!1)})},selectedCode:e.doc.sliceString(e.selection.main.from,e.selection.main.to)}),{dom:r}}}}(r.state):null:(null===e||r.changes.empty||(e.pos=r.changes.mapPos(e.pos)),e)},provide:function(e){return ve.hJ.compute([e],(function(t){return t.field(e)}))}});return[r,Ee]}var De=pe.Py.define();function Pe(e){var t=e.view,n=e.setTransformCodePortalProps,r=pe.QQ.define({create:function(){return null},update:function(e,r){var i=null;return(0,ge.j)(r,De,(function(e){i=e.value})),null!==i?i?function(e){return{pos:e.selection.main.to,above:!1,create:function(){var r=document.createElement("div");return r.className="cm-contextual-ai-tooltip",n({dom:r,onRequestClose:function(){t.dispatch({effects:De.of(!1)})},selectedCode:e.doc.sliceString(e.selection.main.from,e.selection.main.to),replaceCode:function(n){t.dispatch(e.replaceSelection(n))}}),{dom:r}}}}(r.state):(null!=e&&t.focus(),null):(null===e||r.changes.empty||(e.pos=r.changes.mapPos(e.pos)),e)},provide:function(e){return ve.hJ.compute([e],(function(t){return t.field(e)}))}});return[r,Ee]}var Be=n(51954),Ue=n(10063),Ae=n(34928);function Ne(e){var t,n=e.getServerCapabilities();return{isAutoCompleteSupported:Boolean(null===n||void 0===n?void 0:n.completionProvider),isCompletionItemResolveSupported:Boolean(null===n||void 0===n||null===(t=n.completionProvider)||void 0===t?void 0:t.resolveProvider),isDocumentSymbolSupported:Boolean(null===n||void 0===n?void 0:n.documentSymbolProvider),isFindReferencesSupported:Boolean(null===n||void 0===n?void 0:n.referencesProvider),isFindDefinitionSupported:Boolean(null===n||void 0===n?void 0:n.definitionProvider),isFindTypeDefinitionSupported:Boolean(null===n||void 0===n?void 0:n.typeDefinitionProvider),isFindImplementationSupported:Boolean(null===n||void 0===n?void 0:n.implementationProvider),isTextDocumentSyncSupported:Boolean(null===n||void 0===n?void 0:n.textDocumentSync),isHoverSupported:Boolean(null===n||void 0===n?void 0:n.hoverProvider),isRenameSupported:Boolean(null===n||void 0===n?void 0:n.renameProvider),isCodeActionsSupported:Boolean(null===n||void 0===n?void 0:n.codeActionProvider),isSignatureHelpSupported:Boolean(null===n||void 0===n?void 0:n.signatureHelpProvider)}}function Le(e){var t=(0,a.Z)(l.useState(null),2),n=t[0],r=t[1];return l.useEffect((function(){if(e)return r(Ne(e)),e.onServerCapabilitiesChange((function(){r(Ne(e))}));r(null)}),[e]),n}var Xe=n(11214);function Me(e){var t=e.view,n=e.event,r=e.clipboardText,i=e.filePath,o=t.state.selection,a=function(){if(!n){var e=r||"";if(o.main.empty){var i=o.main.from+e.length;t.dispatch({changes:[{from:o.main.from,insert:e}],selection:pe.jT.range(i,i)})}else t.dispatch(t.state.replaceSelection(e))}};if((0,m.gK)(i))if(o.ranges.length>1)a();else if(o.main.from!==o.main.to)if(r&&(0,Xe.Z)(r)){n&&n.preventDefault();var l=t.state.sliceDoc(o.main.from,o.main.to),c="[".concat(l,"](").concat(r,")"),s=o.main.from+c.length;t.dispatch({changes:{from:o.main.from,to:o.main.to,insert:c},selection:pe.jT.range(s,s)})}else a();else a();else a()}var Oe=n(16092),We=n(19588),Fe=n(85234),je=n.n(Fe),ze=n(66091),He=n(5683),Ve=n(45347),qe=n(87995),$e=n(51644),Ye=n(63463),Ke=n(86832),Qe=n(60350);function Je(e){var t=e.containerProps,n=e.codeActions,r=e.onExecuted,o=e.path,a=(0,f.Z)().fs,l=(0,Ae.Z)(o);return n.length&&l?(0,i.tZ)(ue.XZ,(0,_.Z)((0,R.Z)({},t),{children:n.map((function(e,t){return(0,i.tZ)(Ke.Z,{onClick:function(t){t.stopPropagation(),(0,Qe.S)(e,l,a),r()},children:(0,i.tZ)(ue.sN,{isFirst:0===t,isLast:t===n.length-1,children:(0,i.tZ)(Ye.xv,{children:e.title})})},t)}))})):null}var et=n(88254),tt=n(28609);var nt=new Map;var rt="undefined"===typeof WeakRef?function(e){return{deref:function(){return e}}}:WeakRef,it=n(26303);function ot(e){var t=e.path,n=e.range,r=e.lspClient;n=function(e){var t,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:JSON.stringify)(e),r=null===(t=nt.get(n))||void 0===t?void 0:t.deref();return null!=r?r:(nt.set(n,new rt(e)),e)}(n);var i=(0,it.Z)(),o=l.useRef(null),c=(0,a.Z)(function(e,t){var n=l.useRef(),r=(0,tt.Z)((function(){return V()((function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];e.apply(void 0,(0,I.Z)(r)).then((function(e){var t;null===(t=n.current)||void 0===t||t.call(n,e)}))}),t)}),[e,t]);return[r,l.useCallback((function(e){n.current=e}),[])]}(l.useCallback(function(){var e=(0,de.Z)((function(e,t){return(0,fe.__generator)(this,(function(n){return r.isOpen(e)?(o.current={requestPath:e,requestRange:t},[2,r.request.codeActions(e,t)]):[2,{result:null}]}))}));return function(t,n){return e.apply(this,arguments)}}(),[r]),1e3),2),s=c[0],u=c[1],d=(0,a.Z)(l.useState([]),2),f=d[0],h=d[1],p=l.useCallback((0,de.Z)((function(){return(0,fe.__generator)(this,(function(e){return r&&t?(u((function(e){i.current&&("error"in e?(h([]),et.$e((function(n){n.setExtra("path",t),n.setExtra("request",o.current),et.Tb(new Error(e.error.message))}))):null===e.result||0===e.result.length?h([]):h(e.result))})),s(t,n),[2]):[2]}))})),[r,t,s,n,u,i]);return l.useEffect((function(){return p(),function(){s.cancel()}}),[p,s]),[f,p]}var at=n(53967),lt=n(99459),ct=n(75345),st=pe.Py.define();function ut(e){var t=e.state,n=t.doc,r=t.selection.main,i=r.from,o=r.to;return{start:(0,at.s)(n,i),end:(0,at.s)(n,o)}}var dt=function(e){var t=e.view,n=e.path,r=e.lspClient,o=e.visible,c=e.coords,s=(0,a.Z)(l.useState({x:0,y:0}),2),u=s[0],d=s[1],f=(0,a.Z)(ot({path:n,lspClient:r,range:ut(t)}),2),h=f[0],p=f[1],v=(0,ct.Z)(o),m=(0,ct.Z)(c),g=l.useCallback((function(){o.current=!1,t.focus()}),[t,o]);if(l.useEffect((function(){m&&d({x:m.left,y:m.top})}),[m]),l.useEffect((function(){var e=function(e){"Escape"===e.key&&g()};if(u)return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[g,u]),!h.length)return null;var Z=h.some((function(e){return"kind"in e&&"quickfix"===e.kind}))?"#75bdff":"#ffcc00";return(0,i.BX)("div",{role:"presentation",onMouseDown:function(e){v||(e.stopPropagation(),e.preventDefault(),d({x:e.nativeEvent.pageX,y:e.nativeEvent.pageY}),o.current=!v)},children:[(0,i.tZ)($e.Z,{css:{fill:Z,color:Z,cursor:"pointer"},className:"lightbulb"}),v?(0,i.tZ)(Je,{path:n,containerProps:{view:t,verticalOffset:ue.R$*h.length,closeMenu:g,width:"auto",coords:u},onExecuted:function(){g(),p()},codeActions:h}):null]})},ft=function(e){(0,He.Z)(n,e);var t=(0,Ve.Z)(n);function n(){var e;return(0,ze.Z)(this,n),(e=t.apply(this,arguments)).visible=(0,lt.u)(!1),e.coords=(0,lt.u)(null),e.container=l.createRef(),e}var r=n.prototype;return r.toDOM=function(e){var t=document.createElement("div");return t.setAttribute("aria-hidden","true"),t.className="cm-code-action",this.visible.current=!1,this.props.setDecoration(qe.createPortal((0,i.tZ)("span",{ref:this.container,children:(0,i.tZ)(dt,(0,_.Z)((0,R.Z)({},this.props),{view:e,visible:this.visible,coords:this.coords}))}),t)),t},r.contains=function(e){var t;return(null===(t=this.container.current)||void 0===t?void 0:t.contains(e))||!1},r.updateDOM=function(){return!0},n}(ve.l9);var ht=function(e){return ve.lg.fromClass(function(){function t(n){(0,ze.Z)(this,t),this.widget=new ft,this.widget.props=e,this.decoration=ve.p.widget({widget:this.widget,side:0}),this.updateDecorations(n)}var n=t.prototype;return n.update=function(e){var t=this;(e.docChanged||e.selectionSet)&&this.updateDecorations(e.view),(0,ge.j)(e,st,(function(n){var r=n.value;t.widget.visible.current=!0,t.widget.coords.current=r,t.updateDecorations(e.view)}))},n.updateDecorations=function(e){var t,n=e.state,r=n.doc,i=n.selection,o=r.lineAt(i.main.from);t=function(e){return/^( {2}|\u3000|\t)/.test(e)}(o.text)||1===o.number&&1===r.lines?o.from:1===o.number?Math.min(r.length,o.to+1):r.lineAt(o.from-1).from,this.decorations=ve.p.set([this.decoration.range(t)])},t}(),{decorations:function(e){return e.decorations},eventHandlers:{scroll:function(){this.widget.visible.current=!1}}})},pt=ve.tk.baseTheme({".cm-code-action":{position:"absolute",zIndex:101,top:"calc(50% - 8px)",left:"0",height:"16px",width:"16px",background:"transparent",fontFamily:Z.TV.fontFamilyDefault,"& svg":{display:"block"}}});var vt=n(85302),mt=new(function(e){(0,He.Z)(n,e);var t=(0,Ve.Z)(n);function n(){return(0,ze.Z)(this,n),t.apply(this,arguments)}return n.prototype.toDOM=function(){return document.createTextNode("\u25cf")},n}(ve.SJ)),gt=pe.Py.define({}),Zt=pe.Py.define({}),yt=ve.p.line({attributes:{class:"cm-debuggerLine"}}),bt=pe.Py.define({}),wt=pe.QQ.define({create:function(){return null},update:function(e,t){var n=!0,r=!1,i=void 0;try{for(var o,a=t.effects[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;if(l.is(bt))return l.value}}catch(c){r=!0,i=c}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return e}});function xt(e){var t=new pe.f_,n=e.state.field(wt);if(null!==n&&n<=e.state.doc.lines){var r=e.state.doc.line(n);t.add(r.from,r.from,yt)}return t.finish()}var Ct=ve.lg.fromClass(function(){function e(t){(0,ze.Z)(this,e),this.decorations=xt(t)}return e.prototype.update=function(e){this.decorations=xt(e.view)},e}(),{decorations:function(e){return e.decorations}});function kt(e,t){e.dispatch({effects:Zt.of({pos:t})})}var St=pe.QQ.define({create:function(){return pe.Xs.empty},update:function(e,t){e=e.map(t.changes);var n=!0,r=!1,i=void 0;try{for(var o,a=function(){var n=o.value;if(n.is(Zt)){var r=!1;e.between(n.value.pos,n.value.pos+1,(function(){r=!0})),e=r?e.update({filter:function(e){return e!==n.value.pos}}):e.update({add:[mt.range(n.value.pos)]})}n.is(gt)&&(e=Rt(n.value.lines,t.state))},l=t.effects[Symbol.iterator]();!(n=(o=l.next()).done);n=!0)a()}catch(c){r=!0,i=c}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}return e}}),Et=ve.tk.baseTheme({".cm-breakpoint-gutter .cm-gutterElement":{color:W.TV.accentPrimaryDefault,paddingLeft:W.TV.space4,paddingRight:W.TV.space2,cursor:"default"},".cm-debuggerLine":{backgroundColor:W.TV.accentPrimaryDimmest,borderRadius:W.TV.borderRadius4,marginRight:W.TV.space4}});function Tt(e,t){var n;return e&&0!==e.length?null===t||(null===(n=e[0].source)||void 0===n?void 0:n.path)!==t?null:e[0].line:null}function Rt(e,t){var n=(0,I.Z)(new Set(e.filter((function(e){return e<=t.doc.lines})))).map((function(e){return mt.range(t.doc.line(e).from)}));return pe.Xs.of(n,!0)}var _t=n(16345),It=n(12165);function Gt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=pe.Py.define(),r=pe.QQ.define({create:function(){return t},update:function(t,r){return(0,ge.j)(r,n,(function(n){t=e(n.value,t)})),t}});return{effect:n,state:r}}var Dt=n(8131),Pt=n(7225),Bt=n(22841),Ut=n(12922),At=n(31129),Nt={p:{padding:"".concat(Z.TV.space2," ").concat(Z.TV.space8),lineHeight:1.4,marginBottom:"".concat(Z.TV.space8," !important")},"p:first-child":{marginTop:"".concat(Z.TV.space4," !important")},"p:last-child":{marginBottom:"".concat(Z.TV.space4," !important")},pre:{margin:"".concat(Z.TV.space2," ").concat(Z.TV.space8)},"pre + p":{borderTop:"1px solid ".concat(Z.TV.outlineDimmest),paddingTop:Z.TV.space4},"h1, h2, h3":{margin:"".concat(Z.TV.space8," !important"),marginTop:"".concat(Z.TV.space12," !important"),padding:"0 !important",paddingBottom:"".concat(Z.TV.space4," !important"),fontSize:"100% !important",borderBottom:"1px solid ".concat(Z.TV.backgroundHighest," !important"),lineHeight:1},"h1:first-child, h2:first-child, h3:first-child":{marginTop:"".concat(Z.TV.space4," !important")},hr:{margin:"".concat(Z.TV.space8," !important"),borderTop:"2px solid ".concat(Z.TV.backgroundHighest," !important")},li:{margin:"".concat(Z.TV.space2," ").concat(Z.TV.space8)},".lsp-completion-detail":{borderBottom:"1px solid ".concat(Z.TV.backgroundHighest),marginBottom:Z.TV.space4},".cm-line":{paddingLeft:Z.TV.space4,paddingRight:Z.TV.space4},".cm-content":{paddingLeft:Z.TV.space4,paddingRight:Z.TV.space4}},Lt=l.memo((function(e){var t=e.content,n=e.className,r=(0,Ut.P)({controlName:"flag-use-new-code-rendering"});return(0,i.tZ)(Z.G7,{css:Nt,children:(0,i.tZ)(Dt.ZP,{className:n,components:{code:function(e){return r?(0,i.tZ)(At.Z,(0,R.Z)({minimal:!0,disableCopy:!0},e)):(0,i.tZ)(Bt.Z,(0,R.Z)({minimal:!0,disableCopy:!0},e))}},children:t})})}));function Xt(e){var t=e.content,n=e.className;return"string"===typeof t?(0,i.tZ)(Lt,{css:[{p:{whiteSpace:"pre-wrap"}}],className:n,content:t}):t.kind===Pt.a4.PlainText?(0,i.tZ)(Z.G7,{children:(0,i.tZ)(Z.xv,{className:n,multiline:!0,children:t.value})}):(0,i.tZ)(Lt,{className:n,content:t.value})}var Mt=Gt(),Ot=pe.Py.define(),Wt=pe.QQ.define({create:function(){return null},update:function(e,t){if(t.isUserEvent("select")||t.isUserEvent("undo")||t.isUserEvent("redo"))return null;if(!t.isUserEvent("input.type"))return e;if(t.changes.empty)return e;var n="";return t.changes.iterChanges((function(e,t,r,i,o){n=o.sliceString(0,1)})),n||null}});function Ft(e){var t=e.lspClient,n=e.path,r=e.setDecoration,o=function(e){return qe.createPortal((0,i.tZ)(jt,(0,R.Z)({},e)),a)},a=document.createElement("div"),l={};function c(e,t){return s.apply(this,arguments)}function s(){return s=(0,de.Z)((function(e,r){var i,o,a,l,c,s,d;return(0,fe.__generator)(this,(function(f){switch(f.label){case 0:return(l=(null===(i=t.getServerCapabilities())||void 0===i||null===(o=i.signatureHelpProvider)||void 0===o?void 0:o.triggerCharacters)||[])?(c=e.field(u,!1),s=e.field(Wt,!1),c||null!=s&&l.includes(s)?[4,Ht(e,r,t,n)]:[2,null]):[2,null];case 1:return(null===(d=f.sent())||void 0===d||null===(a=d.signatures)||void 0===a?void 0:a.length)?[2,d]:[2,null]}}))})),s.apply(this,arguments)}var u=pe.QQ.define({create:function(){return null},update:function(e,t){return t.isUserEvent("select.pointer")?null:(e&&t.newSelection.main.from!==e.pos&&(e=(0,_.Z)((0,R.Z)({},e),{pos:t.newSelection.main.from})),(0,ge.j)(t,Mt.effect,(function(n){var c=n.value;e=c?{pos:t.newSelection.main.from,create:function(){return function(e){var t=0,n=function(n){r((0,i.tZ)(o,{help:e,index:t,onLayout:n}))};return n(),l.dom=a,l.update=function(r){(0,ge.j)(r,Ot,(function(i){var o=t+i.value;o>e.signatures.length-1||o<0?setTimeout((function(){r.view.dispatch({effects:Mt.effect.of(null)})})):t=o,n((function(){(0,ve.E2)(r.view)}))}))},l}(c)},above:!0}:null})),e)},provide:function(e){return ve.hJ.from(e)}}),d=ve.lg.define((function(){var e=V()(function(){var e=(0,de.Z)((function(e){var t,n,r;return(0,fe.__generator)(this,(function(i){switch(i.label){case 0:return(t=e.state.selection.main).empty?(n=e.state.field(Mt.state,!1),[4,c(e.state,t.from)]):[3,2];case 1:(r=i.sent())&&!n&&(0,It._B)(e),e.dispatch({effects:Mt.effect.of(r)}),i.label=2;case 2:return[2]}}))}));return function(t){return e.apply(this,arguments)}}(),0);return{update:function(t){t.transactions.some((function(e){return e.selection}))&&t.state.selection.main.empty&&e(t.view)}}})),f=function(e){return function(t){return!!function(e){var t=e.state.field(Mt.state,!1);return null!=t&&t.signatures.length>1}(t)&&(t.dispatch({effects:Ot.of(e)}),!0)}},h=[{key:"ArrowDown",run:f(1)},{key:"ArrowUp",run:f(-1)},{key:"Escape",run:function(e){return!!e.state.field(Mt.state,!1)&&(e.dispatch({effects:Mt.effect.of(null)}),!0)}}];return[u,Mt.state,Wt,d,pe.Wl.high(ve.$f.of(h))]}var jt=function(e){var t,n,r=e.help,o=e.index,a=e.onLayout,c="1px solid ".concat(W.TV.outlineDimmer),s="min(425px, 80vw)";l.useLayoutEffect((function(){return null===a||void 0===a?void 0:a()}),[a]);var u=r.signatures[o],d=r.signatures.length>1;if(!u)return null;var f=u.documentation,h=null!=r.activeParameter&&(null===(t=u.parameters)||void 0===t||null===(n=t[r.activeParameter])||void 0===n?void 0:n.documentation);return(0,i.BX)(O.G,{css:[W.l0.flex.row,W.l0.backgroundColor.backgroundHigher,{width:"max-content"}],children:[d?(0,i.tZ)(O.G,{css:[W.l0.flex.row,W.l0.pl(4),{borderRight:c,paddingBottom:5}],children:(0,i.BX)("span",{css:[{alignSelf:"flex-end"},W.l0.p(4)],children:[o+1,"/",r.signatures.length]})}):null,(0,i.BX)(O.G,{children:[(0,i.tZ)(O.G,{css:[W.l0.py(4),W.l0.pl(d?4:8),W.l0.pr(8),W.l0.maxHeight(100),W.l0.overflowY("scroll"),W.l0.font.code,{lineHeight:W.TV.lineHeightSmall,maxWidth:s}],children:(0,i.tZ)(zt,{signature:u,activeParameter:r.activeParameter})}),Boolean(f||h)&&(0,i.BX)(O.G,{css:[W.l0.px(d?4:8),W.l0.py(2),W.l0.maxHeight(200),W.l0.overflow("scroll"),{borderTop:c,maxWidth:s}],children:[h?(0,i.tZ)(Xt,{content:h}):null,f?(0,i.tZ)(Xt,{content:f}):null]})]})]})};function zt(e){var t,n=e.signature,r=n.label,o=n.parameters,l=e.activeParameter;if(null==l||!o)return(0,i.tZ)("span",{children:r});var c=null===(t=o[l])||void 0===t?void 0:t.label;if(!c)return(0,i.tZ)("span",{children:r});var s=(0,a.Z)("string"===typeof c?[r.indexOf(c),r.indexOf(c)+c.length]:c,2),u=s[0],d=s[1];return(0,i.BX)("div",{children:[(0,i.tZ)("span",{children:r.slice(0,u)}),(0,i.tZ)("strong",{children:c}),(0,i.tZ)("span",{children:r.slice(d)})]})}function Ht(e,t,n,r){return Vt.apply(this,arguments)}function Vt(){return Vt=(0,de.Z)((function(e,t,n,r){var i;return(0,fe.__generator)(this,(function(o){switch(o.label){case 0:return[4,n.request.signatureHelp(r,(0,at.s)(e.doc,t))];case 1:return"error"in(i=o.sent())?[2,null]:[2,i.result]}}))})),Vt.apply(this,arguments)}var qt=n(98823),$t=n(92674),Yt=n.n($t),Kt=n(42188),Qt=new Map;function Jt(e){var t=e.lspClient,n=e.path,r=e.view,i=Yt().v4(),o=function(){var e;return(null!==(e=Qt.get(n))&&void 0!==e?e:[])[0]===i};return function(){var e,a=null!==(e=Qt.get(n))&&void 0!==e?e:[];Qt.set(n,(0,I.Z)(a).concat([i])),o()&&t.notify.didOpen(n,r.state.doc.toString())}(),{id:i,destroy:function(){var e,r=(null!==(e=Qt.get(n))&&void 0!==e?e:[]).filter((function(e){return e!==i}));0===r.length?(t.getServerState()===Kt.a.INITIALIZED&&t.isOpen(n)&&t.notify.didClose(n),Qt.delete(n)):Qt.set(n,r)},update:function(e){var r;if(o()&&e.docChanged){var i=null===(r=t.getServerCapabilities())||void 0===r?void 0:r.textDocumentSync;if(i!==qt.TextDocumentSyncKind.None&&t.isOpen(n))if(i!==qt.TextDocumentSyncKind.Full)t.notify.didChange(n,function(e,t){var n=[],r=t;return e.iterChanges((function(e,t,i,o,a){var l=a.sliceString(0),c=t-e,s=c+i;n.push({range:{start:(0,at.s)(r,i),end:(0,at.s)(r,s)},rangeLength:c,text:l}),r=r.replace(i,s,a)})),n}(e.changes,e.startState.doc));else{var a=e.view.state.doc.toString();t.notify.didChange(n,[{text:a}])}}}}}function en(e){var t=e.lspClient,n=e.path;return ve.lg.define((function(e){return Jt({lspClient:t,path:n,view:e})}))}var tn=n(34533);function nn(e){var t=e.lspClient,n=e.path,r=e.askGhostwriter;return ve.lg.define((function(e){var i=t.onDiagnostics((function(t){if(t.path===n){var i=function(e,t,n){var r=[],i=!0,o=!1,a=void 0;try{for(var l,c=function(){var e=l.value,i=(0,at.R)(t.doc,e.range.start),o=(0,at.R)(t.doc,e.range.end);if(i===o){var a=t.wordAt(o);if(a)i=a.from,o=a.to;else{if(!(o<t.doc.length))return"continue";o+=1}}if(i>=o)return et.$e((function(t){t.setExtra("diagnostic",e),t.setExtra("range",{from:i,to:o}),et.Tb(new Error("Exptected diagnostic range to not be empty"))})),"continue";var c="info";switch(e.severity){case Pt.H_.Error:c="error";break;case Pt.H_.Warning:c="warning";break;case Pt.H_.Hint:case Pt.H_.Information:c="info"}var s=[];n&&s.push({name:"\ud83d\udd2e Debug",apply:function(){return n(e.message)}}),r.push({from:i,to:o,severity:c,message:e.message,source:e.source,actions:s})},s=e[Symbol.iterator]();!(i=(l=s.next()).done);i=!0)c()}catch(d){o=!0,a=d}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}var u={error:1,warning:2,info:3};return r.sort((function(e,t){return u[t.severity]-u[e.severity]}))}(t.diagnostics,e.state,r);e.dispatch((0,tn.p0)(e.state,i))}}));return{destroy:function(){i()}}}))}var rn,on,an=n(44717),ln=n(77637),cn=n(28879),sn=n(57988),un=n(98539),dn=n(7742),fn=n(81962);!function(e){e[e.Dollar=0]="Dollar",e[e.Colon=1]="Colon",e[e.Comma=2]="Comma",e[e.CurlyOpen=3]="CurlyOpen",e[e.CurlyClose=4]="CurlyClose",e[e.Backslash=5]="Backslash",e[e.Forwardslash=6]="Forwardslash",e[e.Pipe=7]="Pipe",e[e.Int=8]="Int",e[e.VariableName=9]="VariableName",e[e.Format=10]="Format",e[e.Plus=11]="Plus",e[e.Dash=12]="Dash",e[e.QuestionMark=13]="QuestionMark",e[e.EOF=14]="EOF"}(rn||(rn={})),function(e){e[e.DollarSign=36]="DollarSign",e[e.Plus=43]="Plus",e[e.Comma=44]="Comma",e[e.Dash=45]="Dash",e[e.Slash=47]="Slash",e[e.Digit0=48]="Digit0",e[e.Digit9=57]="Digit9",e[e.Colon=58]="Colon",e[e.QuestionMark=63]="QuestionMark",e[e.A=65]="A",e[e.Z=90]="Z",e[e.Backslash=92]="Backslash",e[e.Underline=95]="Underline",e[e.a=97]="a",e[e.z=122]="z",e[e.OpenCurlyBrace=123]="OpenCurlyBrace",e[e.Pipe=124]="Pipe",e[e.CloseCurlyBrace=125]="CloseCurlyBrace"}(on||(on={}));var hn,pn=function(){function e(){(0,ze.Z)(this,e),this.value="",this.pos=0}var t=e.prototype;return t.text=function(e){this.value=e,this.pos=0},t.tokenText=function(e){return this.value.substr(e.pos,e.len)},t.next=function(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};var t,n=this.pos,r=0,i=this.value.charCodeAt(n);if("number"===typeof(t=e._table[i]))return this.pos+=1,{type:t,pos:n,len:1};if(e.isDigitCharacter(i)){t=8;do{r+=1,i=this.value.charCodeAt(n+r)}while(e.isDigitCharacter(i));return this.pos+=r,{type:t,pos:n,len:r}}if(e.isVariableCharacter(i)){t=9;do{i=this.value.charCodeAt(n+ ++r)}while(e.isVariableCharacter(i)||e.isDigitCharacter(i));return this.pos+=r,{type:t,pos:n,len:r}}t=10;do{r+=1,i=this.value.charCodeAt(n+r)}while(!isNaN(i)&&"undefined"===typeof e._table[i]&&!e.isDigitCharacter(i)&&!e.isVariableCharacter(i));return this.pos+=r,{type:t,pos:n,len:r}},e.isDigitCharacter=function(e){return e>=48&&e<=57},e.isVariableCharacter=function(e){return 95===e||e>=97&&e<=122||e>=65&&e<=90},e}();pn._table=(hn={},(0,o.Z)(hn,36,0),(0,o.Z)(hn,58,1),(0,o.Z)(hn,44,2),(0,o.Z)(hn,123,3),(0,o.Z)(hn,125,4),(0,o.Z)(hn,92,5),(0,o.Z)(hn,47,6),(0,o.Z)(hn,124,7),(0,o.Z)(hn,43,11),(0,o.Z)(hn,45,12),(0,o.Z)(hn,63,13),hn);var vn=function(){function e(){var t;(0,ze.Z)(this,e),this._children=[],t=this,["parent"].forEach((function(e){Object.defineProperty(t,e,{enumerable:!1,writable:!0})}))}var t=e.prototype;return t.appendChild=function(e){return(0,fn.Z)(e,mn)&&(0,fn.Z)(this._children[this._children.length-1],mn)?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this},t.replace=function(e,t){var n,r=e.parent,i=r.children.indexOf(e),o=r.children.slice(0);(n=o).splice.apply(n,[i,1].concat((0,I.Z)(t))),r._children=o,function e(t,n){var r=!0,i=!1,o=void 0;try{for(var a,l=t[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;c.parent=n,e(c.children,c)}}catch(s){i=!0,o=s}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}}(t,r)},t.toString=function(){return this.children.reduce((function(e,t){return e+t.toString()}),"")},t.len=function(){return 0},t.match=function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=Object.entries(En)[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var l=(0,a.Z)(i.value,2),c=l[0],s=l[1];if((0,fn.Z)(this,s)&&c in e)return e[c](this)}}catch(u){n=!0,r=u}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}},(0,sn.Z)(e,[{key:"children",get:function(){return this._children}},{key:"rightMostDescendant",get:function(){return this._children.length>0?this._children[this._children.length-1].rightMostDescendant:this}},{key:"snippet",get:function(){for(var e=this;;){if(!e)return;if((0,fn.Z)(e,kn))return e;e=e.parent}}}]),e}(),mn=function(e){(0,He.Z)(n,e);var t=(0,Ve.Z)(n);function n(e){var r;return(0,ze.Z)(this,n),(r=t.call(this)).value=e,r}var r=n.prototype;return r.toString=function(){return this.value},r.toTextmateString=function(){return n.escape(this.value)},r.len=function(){return this.value.length},r.clone=function(){return new n(this.value)},n.escape=function(e){return e.replace(/\$|}|\\/g,"\\$&")},n}(vn),gn=function(e){(0,He.Z)(n,e);var t=(0,Ve.Z)(n);function n(){return(0,ze.Z)(this,n),t.apply(this,arguments)}return n}(vn),Zn=function(e){(0,He.Z)(n,e);var t=(0,Ve.Z)(n);function n(e){var r;return(0,ze.Z)(this,n),(r=t.call(this)).index=e,r}var r=n.prototype;return r.toTextmateString=function(){var e="";return this.transform&&(e=this.transform.toTextmateString()),0!==this.children.length||this.transform?0===this.children.length?"${".concat(this.index).concat(e,"}"):this.choice?"${".concat(this.index,"|").concat(this.choice.toTextmateString(),"|").concat(e,"}"):"${".concat(this.index,":").concat(this.children.map((function(e){return e.toTextmateString()})).join("")).concat(e,"}"):"$".concat(this.index)},r.clone=function(){var e=new n(this.index);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map((function(e){return e.clone()})),e},n.compareByIndex=function(e,t){return e.index===t.index?0:e.isFinalTabstop?1:t.isFinalTabstop||e.index<t.index?-1:e.index>t.index?1:0},(0,sn.Z)(n,[{key:"isFinalTabstop",get:function(){return 0===this.index}},{key:"choice",get:function(){return 1===this._children.length&&(0,fn.Z)(this._children[0],yn)?this._children[0]:void 0}}]),n}(gn),yn=function(e){(0,He.Z)(n,e);var t=(0,Ve.Z)(n);function n(){var e;return(0,ze.Z)(this,n),(e=t.apply(this,arguments)).options=[],e}var r=n.prototype;return r.appendChild=function(e){return(0,fn.Z)(e,mn)&&(e.parent=this,this.options.push(e)),this},r.toString=function(){return this.options[0].value},r.toTextmateString=function(){return this.options.map((function(e){return e.value.replace(/\||,|\\/g,"\\$&")})).join(",")},r.len=function(){return this.options[0].len()},r.clone=function(){var e=new n;return this.options.forEach(e.appendChild,e),e},n}(vn),bn=function(e){(0,He.Z)(n,e);var t=(0,Ve.Z)(n);function n(){var e;return(0,ze.Z)(this,n),(e=t.apply(this,arguments)).regexp=new RegExp(""),e}var r=n.prototype;return r.resolve=function(e){var t=this,n=!1,r=e.replace(this.regexp,(function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=!0,t._replace(r.slice(0,-2))}));return!n&&this._children.some((function(e){return(0,fn.Z)(e,wn)&&Boolean(e.elseValue)}))&&(r=this._replace([])),r},r._replace=function(e){var t="",n=!0,r=!1,i=void 0;try{for(var o,a=this._children[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;if((0,fn.Z)(l,wn)){var c=e[l.index]||"";t+=c=l.resolve(c)}else t+=l.toString()}}catch(s){r=!0,i=s}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t},r.toString=function(){return""},r.toTextmateString=function(){return"/".concat(this.regexp.source,"/").concat(this.children.map((function(e){return e.toTextmateString()})),"/").concat((this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":""))},r.clone=function(){var e=new n;return e.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),e._children=this.children.map((function(e){return e.clone()})),e},n}(vn),wn=function(e){(0,He.Z)(n,e);var t=(0,Ve.Z)(n);function n(e,r,i,o){var a;return(0,ze.Z)(this,n),(a=t.call(this)).index=e,a.shorthandName=r,a.ifValue=i,a.elseValue=o,a}var r=n.prototype;return r.resolve=function(e){return"upcase"===this.shorthandName?e?e.toLocaleUpperCase():"":"downcase"===this.shorthandName?e?e.toLocaleLowerCase():"":"capitalize"===this.shorthandName?e?e[0].toLocaleUpperCase()+e.substr(1):"":"pascalcase"===this.shorthandName?e?this._toPascalCase(e):"":"camelcase"===this.shorthandName?e?this._toCamelCase(e):"":Boolean(e)&&"string"===typeof this.ifValue?this.ifValue:e||"string"!==typeof this.elseValue?e||"":this.elseValue},r._toPascalCase=function(e){var t=e.match(/[a-z0-9]+/gi);return t?t.map((function(e){return e.charAt(0).toUpperCase()+e.substr(1)})).join(""):e},r._toCamelCase=function(e){var t=e.match(/[a-z0-9]+/gi);return t?t.map((function(e,t){return 0===t?e.charAt(0).toLowerCase()+e.substr(1):e.charAt(0).toUpperCase()+e.substr(1)})).join(""):e},r.toTextmateString=function(){var e="${";return e+=this.index,this.shorthandName?e+=":/".concat(this.shorthandName):this.ifValue&&this.elseValue?e+=":?".concat(this.ifValue,":").concat(this.elseValue):this.ifValue?e+=":+".concat(this.ifValue):this.elseValue&&(e+=":-".concat(this.elseValue)),e+="}"},r.clone=function(){return new n(this.index,this.shorthandName,this.ifValue,this.elseValue)},n}(vn),xn=function(e){(0,He.Z)(n,e);var t=(0,Ve.Z)(n);function n(e){var r;return(0,ze.Z)(this,n),(r=t.call(this)).name=e,r}var r=n.prototype;return r.resolve=function(e){var t=e.resolve(this);return this.transform&&(t=this.transform.resolve(t||"")),void 0!==t&&(this._children=[new mn(t)],!0)},r.toTextmateString=function(){var e="";return this.transform&&(e=this.transform.toTextmateString()),0===this.children.length?"${".concat(this.name).concat(e,"}"):"${".concat(this.name,":").concat(this.children.map((function(e){return e.toTextmateString()})).join("")).concat(e,"}")},r.clone=function(){var e=new n(this.name);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map((function(e){return e.clone()})),e},n}(gn);function Cn(e,t){for(var n=(0,I.Z)(e);n.length>0;){var r,i=n.shift();if(!t(i))break;(r=n).unshift.apply(r,(0,I.Z)(i.children))}}var kn=function(e){(0,He.Z)(n,e);var t=(0,Ve.Z)(n);function n(){return(0,ze.Z)(this,n),t.apply(this,arguments)}var r=n.prototype;return r.offset=function(e){var t=0,n=!1;return this.walk((function(r){return r===e?(n=!0,!1):(t+=r.len(),!0)})),n?t:-1},r.fullLen=function(e){var t=0;return Cn([e],(function(e){return t+=e.len(),!0})),t},r.enclosingPlaceholders=function(e){for(var t=[],n=e.parent;n;)(0,fn.Z)(n,Zn)&&t.push(n),n=n.parent;return t},r.resolveVariables=function(e){var t=this;return this.walk((function(n){return(0,fn.Z)(n,xn)&&n.resolve(e)&&delete t._placeholders,!0})),this},r.appendChild=function(e){return delete this._placeholders,(0,un.Z)((0,dn.Z)(n.prototype),"appendChild",this).call(this,e)},r.replace=function(e,t){return delete this._placeholders,(0,un.Z)((0,dn.Z)(n.prototype),"replace",this).call(this,e,t)},r.toTextmateString=function(){return this.children.reduce((function(e,t){return e+t.toTextmateString()}),"")},r.clone=function(){var e=new n;return this._children=this.children.map((function(e){return e.clone()})),e},r.walk=function(e){Cn(this.children,e)},(0,sn.Z)(n,[{key:"placeholderInfo",get:function(){if(!this._placeholders){var e,t=[];this.walk((function(n){return(0,fn.Z)(n,Zn)&&(t.push(n),e=!e||e.index<n.index?n:e),!0})),this._placeholders={all:t,last:e}}return this._placeholders}},{key:"placeholders",get:function(){return this.placeholderInfo.all}}]),n}(vn),Sn=function(){function e(){(0,ze.Z)(this,e),this._scanner=new pn,this._token={type:14,pos:0,len:0}}var t=e.prototype;return t.text=function(e){return this.parse(e).toString()},t.parse=function(e,t,n){var r=new kn;return this.parseFragment(e,r),this.ensureFinalTabstop(r,null!==n&&void 0!==n&&n,null!==t&&void 0!==t&&t),r},t.parseFragment=function(e,t){var n=t.children.length;for(this._scanner.text(e),this._token=this._scanner.next();this._parse(t););var r=new Map,i=[];t.walk((function(e){return(0,fn.Z)(e,Zn)&&(e.isFinalTabstop?r.set(0,void 0):!r.has(e.index)&&e.children.length>0?r.set(e.index,e.children):i.push(e)),!0}));var o=function(e,n){var i=r.get(e.index);if(i){var a=new Zn(e.index);a.transform=e.transform;var l=!0,c=!1,s=void 0;try{for(var u,d=i[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var f=u.value.clone();a.appendChild(f),(0,fn.Z)(f,Zn)&&r.has(f.index)&&!n.has(f.index)&&(n.add(f.index),o(f,n),n.delete(f.index))}}catch(h){c=!0,s=h}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}t.replace(e,[a])}},a=new Set,l=!0,c=!1,s=void 0;try{for(var u,d=i[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var f=u.value;o(f,a)}}catch(h){c=!0,s=h}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}return t.children.slice(n)},t.ensureFinalTabstop=function(e,t,n){(t||n&&e.placeholders.length>0)&&(e.placeholders.find((function(e){return 0===e.index}))||e.appendChild(new Zn(0)))},t._accept=function(e,t){if(void 0===e||this._token.type===e){var n=!t||this._scanner.tokenText(this._token);return this._token=this._scanner.next(),n}return!1},t._backTo=function(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1},t._until=function(e){for(var t=this._token;this._token.type!==e;){if(14===this._token.type)return!1;if(5===this._token.type){var n=this._scanner.next();if(0!==n.type&&4!==n.type&&5!==n.type)return!1}this._token=this._scanner.next()}var r=this._scanner.value.substring(t.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),r},t._parse=function(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)},t._parseEscaped=function(e){var t;return!!(t=this._accept(5,!0))&&(t=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||t,e.appendChild(new mn(t)),!0)},t._parseTabstopOrVariableName=function(e){var t,n=this._token;return this._accept(0)&&(t=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(t)?new Zn(Number(t)):new xn(t)),!0):this._backTo(n)},t._parseComplexPlaceholder=function(e){var t,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(8,!0))))return this._backTo(n);var r=new Zn(Number(t));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(r),!0;if(!this._parse(r))return e.appendChild(new mn("${"+t+":")),r.children.forEach(e.appendChild,e),!0}else{if(!(r.index>0&&this._accept(7)))return this._accept(6)?this._parseTransform(r)?(e.appendChild(r),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(r),!0):this._backTo(n);for(var i=new yn;;){if(this._parseChoiceElement(i)){if(this._accept(2))continue;if(this._accept(7)&&(r.appendChild(i),this._accept(4)))return e.appendChild(r),!0}return this._backTo(n),!1}}},t._parseChoiceElement=function(e){for(var t=this._token,n=[];2!==this._token.type&&7!==this._token.type;){var r=void 0;if(!(r=(r=this._accept(5,!0))?this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||r:this._accept(void 0,!0)))return this._backTo(t),!1;n.push(r)}return 0===n.length?(this._backTo(t),!1):(e.appendChild(new mn(n.join(""))),!0)},t._parseComplexVariable=function(e){var t,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(9,!0))))return this._backTo(n);var r=new xn(t);if(!this._accept(1))return this._accept(6)?this._parseTransform(r)?(e.appendChild(r),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(r),!0):this._backTo(n);for(;;){if(this._accept(4))return e.appendChild(r),!0;if(!this._parse(r))return e.appendChild(new mn("${"+t+":")),r.children.forEach(e.appendChild,e),!0}},t._parseTransform=function(e){for(var t=new bn,n="",r="";!this._accept(6);){var i=void 0;if(i=this._accept(5,!0))n+=i=this._accept(6,!0)||i;else{if(14===this._token.type)return!1;n+=this._accept(void 0,!0)}}for(;!this._accept(6);){var o=void 0;if(o=this._accept(5,!0))o=this._accept(5,!0)||this._accept(6,!0)||o,t.appendChild(new mn(o));else if(!this._parseFormatString(t)&&!this._parseAnything(t))return!1}for(;!this._accept(4);){if(14===this._token.type)return!1;r+=this._accept(void 0,!0)}try{t.regexp=new RegExp(n,r)}catch(a){return!1}return e.transform=t,!0},t._parseFormatString=function(e){var t=this._token;if(!this._accept(0))return!1;var n=!1;this._accept(3)&&(n=!0);var r=this._accept(8,!0);if(!r)return this._backTo(t),!1;if(!n)return e.appendChild(new wn(Number(r))),!0;if(this._accept(4))return e.appendChild(new wn(Number(r))),!0;if(!this._accept(1))return this._backTo(t),!1;if(this._accept(6)){var i=this._accept(9,!0);return i&&this._accept(4)?(e.appendChild(new wn(Number(r),i)),!0):(this._backTo(t),!1)}if(this._accept(11)){var o=this._until(4);if(o)return e.appendChild(new wn(Number(r),void 0,o,void 0)),!0}else if(this._accept(12)){var a=this._until(4);if(a)return e.appendChild(new wn(Number(r),void 0,void 0,a)),!0}else if(this._accept(13)){var l=this._until(1);if(l){var c=this._until(4);if(c)return e.appendChild(new wn(Number(r),void 0,l,c)),!0}}else{var s=this._until(4);if(s)return e.appendChild(new wn(Number(r),void 0,void 0,s)),!0}return this._backTo(t),!1},t._parseAnything=function(e){return 14!==this._token.type&&(e.appendChild(new mn(this._scanner.tokenText(this._token))),this._accept(void 0),!0)},e.escape=function(e){return e.replace(/\$|}|\\/g,"\\$&")},e.asInsertText=function(t){return(new e).parse(t).toString()},e.guessNeedsClipboard=function(e){return/\${?CLIPBOARD/.test(e)},e}(),En={Text:mn,Placeholder:Zn,Variable:xn,FormatString:wn,Choice:yn};function Tn(e,t){var n=t.mapPos(e.from,-1,pe.gc.TrackDel),r=t.mapPos(e.to,1,pe.gc.TrackDel);return null==n||null==r?null:{field:e.field,from:n,to:r}}var Rn=function(){function e(t){(0,ze.Z)(this,e),this.lines=t.split(/\r\n?|\n/).map((function(e){return(new Sn).parse(e).children}))}return e.prototype.apply=function(t){var n=t.view,r=t.from,i=t.to,o=e.instantiate(this.lines,t),a=o.text,l=o.ranges,c={from:r,to:i,insert:pe.xv.of(a)},s={changes:c,scrollIntoView:!0,annotations:It.Jv.of(t.completion)};if(l.length&&(s.selection=Un(l,0)),l.length>1){var u=new Gn(l,0),d=s.effects=[Dn.of(u)];void 0===n.state.field(Bn,!1)&&d.push(pe.Py.appendConfig.of([Bn,Nn,Ln]))}if(r===i&&!l.length){var f=pe.as.of(c,n.state.doc.length),h=n.state.selection.ranges.map((function(e){return e.map(f,0)}));s.selection=pe.jT.create(h,n.state.selection.mainIndex)}return s},e.resolveVariable=function(e,t){var n=t.view,r=t.from,i=t.path;switch(e){case"TM_FILENAME":return(0,an.basename)(i);case"TM_FILENAME_BASE":return(0,an.basename)(i,(0,an.extname)(i));case"TM_DIRECTORY":return(0,an.dirname)(i);case"TM_FILEPATH":return i;case"TM_LINE_INDEX":return(n.state.doc.lineAt(r).number-1).toString();case"TM_LINE_NUMBER":return n.state.doc.lineAt(r).number.toString();default:return e}},e.instantiate=function(t,n){var r,i=n.view,o=n.from,a=i.state,l=[],c=[],s=a.doc.lineAt(o),u=/^\s*/.exec(s.text)[0],d=a.facet(cn.c),f=!0,h=!1,p=void 0;try{for(var v,m=function(){var t=v.value,r=0,i="",a=function(e){var t=0,n=r;if(0===r&&(t=/^\t*/.exec(e)[0].length)){var o=u+d.repeat(t);e=o+e.slice(t),n+=o.length}return i+=e,r+=e.length,{line:l.length,from:n,to:r}},s=function(t){var i=!0,u=!1,d=void 0;try{for(var f,h=t[Symbol.iterator]();!(i=(f=h.next()).done);i=!0){f.value.match({Text:function(e){a(e.value)},Variable:function(t){var r=t.name,i=t.transform,o=e.resolveVariable(r,n);i&&(o=o.replace(i.regexp,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.children.map((function(e){return e.match({Text:function(e){return e.value},FormatString:function(e){return e.resolve(t[e.index])}})})).filter(Boolean).join("")}))),a(o)},Choice:function(e){a(e.options[0].value)},Placeholder:function(e){var t,n=l.length?o+l.map((function(e){return e.length})).reduce((function(e,t){return e+t})):o;if(null===(t=e.children)||void 0===t?void 0:t.length){var i={field:e.index,from:n+r,to:null};c.push(i),s(e.children),i.to=n+r}else{a("");var u=n+r;c.push({field:e.index,from:u,to:u})}}})}}catch(p){u=!0,d=p}finally{try{i||null==h.return||h.return()}finally{if(u)throw d}}};s(t),l.push(i)},g=t[Symbol.iterator]();!(f=(v=g.next()).done);f=!0)m()}catch(y){h=!0,p=y}finally{try{f||null==g.return||g.return()}finally{if(h)throw p}}var Z=(r=Math).max.apply(r,(0,I.Z)(c.map((function(e){return e.field}))));return{text:l,ranges:c.map((function(e){var t=e.field,n=(0,ln.Z)(e,["field"]);return(0,_.Z)((0,R.Z)({},n),{field:0===t?Z:t-1})}))}},e}(),_n=ve.p.widget({widget:new(function(e){(0,He.Z)(n,e);var t=(0,Ve.Z)(n);function n(){return(0,ze.Z)(this,n),t.apply(this,arguments)}var r=n.prototype;return r.toDOM=function(){var e=document.createElement("span");return e.className="cm-snippetFieldPosition",e},r.ignoreEvent=function(){return!1},n}(ve.l9))}),In=ve.p.mark({class:"cm-snippetField"}),Gn=function(){function e(t,n){(0,ze.Z)(this,e),this.ranges=t,this.active=n,this.deco=ve.p.set(t.map((function(e){return(e.from===e.to?_n:In).range(e.from,e.to)})))}var t=e.prototype;return t.map=function(t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,l=this.ranges[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=Tn(a.value,t);if(!c)return null;n.push(c)}}catch(s){i=!0,o=s}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return new e(n,this.active)},t.isSelectionInsideField=function(e){var t=this;return e.ranges.every((function(e){return t.ranges.some((function(n){return n.field===t.active&&n.from<=e.from&&n.to>=e.to}))}))},e}(),Dn=pe.Py.define({map:function(e,t){return null===e||void 0===e?void 0:e.map(t)}}),Pn=pe.Py.define(),Bn=pe.QQ.define({create:function(){return null},update:function(e,t){var n=!0,r=!1,i=void 0;try{for(var o,a=t.effects[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;if(l.is(Dn))return l.value;if(l.is(Pn)&&e)return new Gn(e.ranges,l.value)}}catch(c){r=!0,i=c}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return e&&t.docChanged&&(e=e.map(t.changes)),e&&t.selection&&!e.isSelectionInsideField(t.selection)&&(e=null),e},provide:function(e){return ve.tk.decorations.from(e,(function(e){return e?e.deco:ve.p.none}))}});function Un(e,t){var n=e.filter((function(e){return e.field===t})).map((function(e){return pe.jT.range(e.from,e.to)}));if(0!==n.length)return pe.jT.create(n)}function An(e){return function(t){var n,r=t.state,i=t.dispatch,o=r.field(Bn,!1);if(!o||e<0&&0===o.active)return!1;var a=o.active+e,l=(n=Math).max.apply(n,(0,I.Z)(o.ranges.map((function(e){return e.field})))),c=e>0&&o.active>=l;return i(r.update({selection:Un(o.ranges,a),effects:Dn.of(c?null:new Gn(o.ranges,a))})),!0}}var Nn=pe.Wl.highest(ve.$f.of([{key:"Tab",run:An(1),shift:An(-1)},{key:"Escape",run:function(e){var t=e.state,n=e.dispatch;return!!t.field(Bn,!1)&&(n(t.update({effects:Dn.of(null)})),!0)}}])),Ln=ve.tk.domEventHandlers({mousedown:function(e,t){var n,r=t.state.field(Bn,!1);if(!r||null==(n=t.posAtCoords({x:e.clientX,y:e.clientY})))return!1;var i=r.ranges.find((function(e){return e.from<=n&&e.to>=n}));return!(!i||i.field===r.active)&&(t.dispatch({selection:Un(r.ranges,i.field),effects:Dn.of(r.ranges.some((function(e){return e.field>i.field}))?new Gn(r.ranges,i.field):null)}),!0)}}),Xn=n(78915),Mn=n(48074);function On(e){return null!=e.field(Mn.yn,!1)}var Wn=n(3342);function Fn(){return(0,i.tZ)(Z.G7,{css:[Z.l0.p(4)],children:(0,i.BX)(Z.xv,{css:[Z.l0.fontSize("90%"),{opacity:.6,lineHeight:"1"}],children:[(0,i.tZ)(Wn.Z,{width:8,height:8}),"\xa0",(0,i.tZ)(Xn.ZP,{small:!0,dimmed:!1,shortcut:{key:"tab"}})," ","to use Ghostwriter suggestion."]})})}var jn=ve.tk.baseTheme({".cm-tooltip.cm-ghostwriter-hint-tooltip":{boxShadow:"none",backgroundColor:"var(--background-higher)",padding:"0px",boxSizing:"content-box",borderTop:"1px solid var(--background-highest)",borderTopLeftRadius:"0px",borderTopRightRadius:"0px",marginTop:"-4px"}});function zn(e){return e.clientWidth.toString()+"px"}function Hn(){var e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e.selection;if("active"!==(0,It.LR)(e)||!On(e))return null;var r=(0,a.Z)(document.querySelectorAll(".cm-tooltip-autocomplete"),1),o=r[0];if(!o)return null;var l=o.style.borderBottomLeftRadius,c=o.style.borderBottomRightRadius;return{pos:null!==t&&void 0!==t?t:n.main.head,above:!1,create:function(){var e=document.createElement("div");return o.style.borderBottomLeftRadius="0px",o.style.borderBottomRightRadius="0px",e.className="cm-tooltip cm-ghostwriter-hint-tooltip",e.style.width=zn(o),qe.render((0,i.tZ)(Fn,{}),e),{dom:e,destroy:function(){o.style.borderBottomLeftRadius=l,o.style.borderBottomRightRadius=c}}}}},t=pe.QQ.define({create:e,update:function(t,n){return e(n.state,null===t||void 0===t?void 0:t.pos)},provide:function(e){return ve.hJ.compute([e],(function(t){return t.field(e)}))}});return[t,jn]}function Vn(e){var t=Object.keys(e).join(""),n=/\w/.test(t);return n&&(t=t.replace(/\w/g,"")),"[".concat(n?"\\w":"").concat(t.replace(".","").replace(/[^\w\s]/g,"\\$&"),"]")}function qn(e,t){var n=e.state,r=e.pos;if(e.explicit)return{triggerKind:qt.CompletionTriggerKind.Invoked};var i=n.doc.lineAt(r),o=i.text[r-i.from-1],a=i.text.substring(0,r-i.from);if(null===t||void 0===t?void 0:t.includes(o)){var l=o;return{triggerKind:qt.CompletionTriggerKind.TriggerCharacter,triggerCharacter:l}}return a.match(/\w$/)?{triggerKind:qt.CompletionTriggerKind.Invoked}:null}var $n=Object.entries(Pt.cm).reduce((function(e,t){var n=(0,a.Z)(t,2),r=n[0],i=n[1];return(0,R.Z)((0,o.Z)({},i,r.toLowerCase()),e)}),{});function Yn(e,t){var n=(0,at.R)(e.state.doc,t.range.start),r=(0,at.R)(e.state.doc,t.range.end);if(null!==n&&null!==r)return{from:n,to:r,insert:t.newText}}function Kn(e){var t=e.context,n=e.items,r=e.client,o=e.path,l=e.setDecoration,c=function(e,t){var n=new Set;return e.filter((function(e){var r=t.map((function(t){return e[t]})).join("\u241e");return!n.has(r)&&(n.add(r),!0)}))}(n.filter((function(e){return Boolean(e.label)})),["label","kind"]).map((function(e){var t=e.additionalTextEdits,n={label:e.label,detail:e.detail,apply:function(n,r,i,l){if(e.insertTextFormat!==Pt.lO.Snippet){var c=function(e){var t,n=e.view,r=e.item,i=e.from,o=e.to,l=n.state,c=l.doc,s=l.selection,u=[];if(r.textEdit){var d=r.textEdit,f=d.range,h=d.newText,p=(0,at.R)(c,f.start),v=(0,at.R)(c,f.end);if(null===p||null===v)return;u.push({from:p,insert:h,to:Math.max(v,s.main.to)})}else{var m=r.insertText||r.label;u.push({from:i,to:o,insert:m})}var g=(0,a.Z)(u,1)[0],Z="";null===(t=r.additionalTextEdits)||void 0===t||t.forEach((function(e){var t=Yn(n,e);t&&("from"in g&&t.from===g.from&&(Z=t.insert),u.push(t))}));var y=o-i;s.ranges.forEach((function(e){if(e!==s.main){if(!("insert"in g)||!g.insert)throw new Error("Expected insert in mainChange");var t=e.from-y,n=Z+g.insert;u.push({from:t,to:e.to,insert:n})}}));var b=u.map((function(e){return"from"in e&&"undefined"!==typeof e.to?(0,_.Z)((0,R.Z)({},e),{from:Math.min(e.from,e.to),to:Math.max(e.from,e.to)}):e})),w=pe.as.of(b,c.length),x=s.ranges.map((function(e){return e.map(w,0)}));return{changes:w,selection:pe.jT.create(x,s.mainIndex)}}({view:n,item:(0,_.Z)((0,R.Z)({},e),{additionalTextEdits:t}),to:l,from:i});c&&n.dispatch({changes:c.changes,selection:c.selection,annotations:It.Jv.of(r)})}else{var s,u,d,f,h=[];t&&h.push({changes:t.map((function(e){return Yn(n,e)}))});var p=null!==(f=null!==(d=null===(u=e.textEdit)||void 0===u?void 0:u.newText)&&void 0!==d?d:e.insertText)&&void 0!==f?f:e.label,v=new Rn(p);e.textEdit&&"range"in e.textEdit&&(i=(0,at.R)(n.state.doc,e.textEdit.range.start),l=Math.max(l,(0,at.R)(n.state.doc,e.textEdit.range.end)));var m=v.apply({view:n,from:i,to:l,path:o,completion:r});(s=n).dispatch.apply(s,(0,I.Z)(h).concat([m]))}},type:e.kind&&$n[e.kind],filterText:(e.filterText||e.label).toLowerCase(),sortText:(e.sortText||e.label).toLowerCase()},c=Ne(r).isCompletionItemResolveSupported;return r&&c?n.info=(0,de.Z)((function(){var n,a,c,s,u,d,f;return(0,fe.__generator)(this,(function(h){switch(h.label){case 0:return[4,r.request.resolveCompletionItem(e)];case 1:return n=h.sent(),a="cancelled"in n&&n.cancelled,c="result"in n?n.result:null,a||!c?[2,null]:(c.additionalTextEdits&&(t=c.additionalTextEdits),s=[],c.detail&&c.detail!==e.detail&&c.detail!==e.label&&(u=(0,an.extname)(o).slice(1),d=["```"+u,c.detail,"```"].join("\n"),s.push((0,i.tZ)(Xt,{className:"lsp-completion-detail",content:{value:d,kind:"markdown"}}))),c.documentation&&s.push((0,i.tZ)(Xt,{content:c.documentation})),0===s.length?[2,null]:(f=document.createElement("div"),l(qe.createPortal((0,i.tZ)(i.HY,{children:s}),f)),[2,f]))}}))})):e.documentation&&(n.info=function(){if(!e.documentation)return null;var t=document.createElement("div");return l(qe.createPortal((0,i.tZ)(i.HY,{children:(0,i.tZ)(Xt,{content:e.documentation})}),t)),t}),n}));c=c.sort((function(e,t){return e.sortText<t.sortText?-1:e.sortText>t.sortText?1:0}));for(var s=0;s<c.length;s++)c[s-1]&&c[s].sortText===c[s-s].sortText?c[s].boost=c[s-1].boost:c[s].boost=c.length-s;var u=(0,a.Z)(function(e){var t=Object.create(null),n=Object.create(null),r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value.filterText;t[c[0]]=!0;for(var s=1;s<c.length;s++)n[c[s]]=!0}}catch(d){i=!0,o=d}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}var u=Vn(t)+Vn(n)+"*$";return[new RegExp("^"+u),new RegExp(u)]}(c),2),d=u[0],f=u[1],h=t.matchBefore(f),p=t.pos;return h&&(p=h.from),{from:p,options:c,validFor:d}}var Qn=ve.tk.baseTheme({".lsp-completion-keyboard-shortcuts":{display:"none"},'[aria-selected="true"] .lsp-completion-keyboard-shortcuts':{float:"right",display:"inline-block"}}),Jn=n(72838),er=n(56580);function tr(e){var t=e.content,n=e.className,r=e.showHoveredVariable,o=(0,er.Z)().preferences,a=(0,Ut.P)({controlName:"flag-use-new-code-rendering"});if("string"!==typeof t&&"kind"in t)return(0,i.tZ)(Xt,{content:t});var l=(Array.isArray(t)?t:[t]).map((function(e){return"string"===typeof e?e:"```"+e.language+"\n"+e.value+"\n```"})).join("\n");return(0,i.tZ)(Dt.ZP,{css:[{p:{fontSize:o.fontSize}},r?[W.l0.maxHeight(rr),W.l0.overflowY("auto")]:void 0],className:n,components:{code:function(e){return a?(0,i.tZ)(At.Z,(0,R.Z)({minimal:!0,disableCopy:!0},e)):(0,i.tZ)(Bt.Z,(0,R.Z)({minimal:!0,disableCopy:!0},e))}},children:l})}function nr(e){var t=e.dom,n=(0,ln.Z)(e,["dom"]);return qe.createPortal((0,i.tZ)(ir,(0,R.Z)({},n)),t)}var rr=100;function ir(e){var t=e.className,n=e.content,r=e.textHovered,o=(0,Ut.P)({controlName:"flag-debugger-hover-variable"}),c=(0,f.Z)().debuggest,s=(0,ct.Z)(c.mainClient),u=s&&("running"===s.state.current||"paused"===s.state.current),d=(0,a.Z)(l.useState(!1),2),h=d[0],p=d[1],v=(0,a.Z)(l.useState(void 0),2),m=v[0],g=v[1],Z=o&&u&&m;return l.useEffect((function(){function e(){return e=(0,de.Z)((function(){var e,t,n;return(0,fe.__generator)(this,(function(i){switch(i.label){case 0:if(!o||!u)return[3,4];p(!0),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,s.evaluate({expression:r,context:"hover"})];case 2:return t=i.sent(),(null===(e=t.body)||void 0===e?void 0:e.result)&&(n=(0,R.Z)({name:r,value:t.body.result},t.body),g(n)),[3,4];case 3:return p(!1),[7];case 4:return[2]}}))})),e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[o,s,u,r]),(0,i.BX)(O.G,{css:[Nt,Z?W.l0.maxHeight(rr+190):W.l0.maxHeight(190),W.l0.minHeight(30),W.l0.overflowY("auto"),W.l0.borderRadius(4),W.l0.backgroundColor.backgroundHigher],children:[h?void 0:(0,i.tZ)(tr,{content:n,className:t,showHoveredVariable:Boolean(Z)}),Z?(0,i.tZ)(O.G,{css:[W.l0.maxHeight(190),W.l0.overflowY("auto")],children:(0,i.tZ)(Jn._,{depth:0,client:s,variable:m})}):void 0]})}function or(e){var t,n,r=e.hover,o=e.state,a=e.offset,l=e.languageId,c=e.setDecoration;if((Array.isArray(r.contents)||"string"===typeof r.contents)&&0===r.contents.length)return c(null),null;l.endsWith("css")&&Array.isArray(r.contents)&&(r.contents={kind:"markdown",value:"```html \n".concat(r.contents[0],"\n```\n").concat(r.contents[1],"\n      ")});var s="",u=o.doc;if(r.range)t=(0,at.R)(u,r.range.start),n=(0,at.R)(u,r.range.end),s=u.sliceString(t,n);else if(n=void 0,(t=a)<=o.doc.length){var d=o.wordAt(t);d?(s=u.sliceString(d.from,d.to),t=Math.min(t,d.from),n=d.to):s=u.sliceString(t,t+1)}return{pos:t,end:n,create:function(){var e=document.createElement("div");return e.classList.add("hover-tooltip"),e.style.padding="0",c((0,i.tZ)(nr,{dom:e,content:r.contents,textHovered:s})),{dom:e,mount:function(e){var t;t=function(){(0,ve.E2)(e)},[0,50,200,1e3].forEach((function(e){return setTimeout(t,e)}))}}},above:!0}}var ar,lr=n(71620),cr=n(1165),sr=n(44542),ur=n(24880);function dr(e){var t=e.dom,n=(0,ln.Z)(e,["dom"]);return qe.createPortal((0,i.tZ)(hr,(0,R.Z)({},n)),t)}function fr(e){var t=e.matchesMap,n=e.fileToContents,r=e.type,o=e.onClose,l=e.currentFile,c=Object.keys(t),s=(0,f.Z)().session;if(0===c.length){var u=r===ar.REFERENCES?"No references found":"No definitions found";return(0,i.tZ)(Ye.xv,{color:"dimmer",css:[W.l0.pl(4),W.l0.py(8)],children:u})}return(0,i.tZ)(O.G,{children:c.map((function(e){var r=function(t,n){e===l?s.updateDeeplink({path:e,line:t,col:n}):s.openFile(e,{line:t,col:n})},u=t[e],d=n[e],f=(0,lr.Z)(u,d);return(0,i.tZ)(O.G,{css:[W.l0.p(4)],children:(0,i.tZ)(cr.Vw,{path:e,extensions:[f],doc:d,numMatches:u.length,initiallyExpanded:1===c.length,onNavigateToCode:function(e){if(null!==e)r(e.line+1,e.character);else{var t=(0,a.Z)(u,1)[0],n=d.lineAt(t.from),i=t.from-n.from;r(n.number,i)}o()}})},e)}))})}function hr(e){var t=e.files,n=e.onClose,r=e.references,c=e.definitions,s=e.currentFile,u=e.currentFileContents,d=function(e,t){if(!p)throw new Error("Expected LSP Client");var n=p.documentUriToPath(e.uri),r=e.range,i=r.start,o=r.end;n in t||(t[n]=[]);var a=g[n],l=a.line(i.line+1),c=a.line(o.line+1);t[n].push({from:l.from+i.character,to:c.from+o.character})},h=(0,f.Z)().fs,p=(0,Ae.Z)(s),v=(0,we.Z)(n,[]),m=(0,a.Z)(l.useState((0,o.Z)({},s,pe.xv.of(u.split("\n")))),2),g=m[0],Z=m[1];l.useEffect((function(){if(t.length){var e=!1;return function(){n.apply(this,arguments)}(),function(){e=!0}}function n(){return n=(0,de.Z)((function(){var n;return(0,fe.__generator)(this,(function(r){switch(r.label){case 0:return n={},[4,Promise.all(t.map(function(){var e=(0,de.Z)((function(e){var t;return(0,fe.__generator)(this,(function(r){switch(r.label){case 0:return[4,h.readFile(e)];case 1:if((t=r.sent()).error)throw new Error("Something went wrong reading file with path ".concat(e,". Received error: ").concat(t.error));return n[e]=pe.xv.of(t.content.toString().split("\n")),[2]}}))}));return function(t){return e.apply(this,arguments)}}()))];case 1:return r.sent(),e?[2]:(Z((function(e){return(0,R.Z)({},e,n)})),[2])}}))})),n.apply(this,arguments)}}),[h,t]);var y=(0,I.Z)(r).concat((0,I.Z)(c));if(!p||y.some((function(e){return!(p.documentUriToPath(e.uri)in g)})))return(0,i.tZ)(O.G,{style:{width:W.TV.space128,height:W.TV.space128,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,i.tZ)(ur.Z,{size:32})});var b={},w={};return r.forEach((function(e){d(e,b)})),c.forEach((function(e){d(e,w)})),(0,i.BX)(O.G,{innerRef:v,css:[W.l0.minWidth("375px"),W.l0.maxWidth("500px"),W.l0.pt(4),W.l0.maxHeight("100%"),{overflowY:"scroll"}],children:[(0,i.tZ)(O.G,{css:{borderBottom:"1px solid var(--background-highest)"},children:(0,i.BX)(O.G,{css:[W.l0.p(4)],children:[(0,i.BX)(O.G,{css:[W.l0.flex.row,W.l0.justify.spaceBetween,W.l0.align.center,W.l0.pr(4)],children:[(0,i.tZ)(Ye.h4,{level:2,variant:"subheadDefault",css:[W.l0.p(4),W.l0.pl(8)],children:"Definitions"}),(0,i.tZ)(sr.Z,{filled:!1,border:!1,onClick:n,children:(0,i.tZ)(xe.Z,{})})]}),(0,i.tZ)(fr,{matchesMap:w,fileToContents:g,type:ar.DEFINITION,onClose:n,currentFile:s})]})}),(0,i.tZ)(O.G,{children:(0,i.BX)(O.G,{css:[W.l0.p(4)],children:[(0,i.tZ)(Ye.h4,{level:2,variant:"subheadDefault",css:[W.l0.p(4),W.l0.pl(8)],children:"References"}),(0,i.tZ)(fr,{matchesMap:b,fileToContents:g,type:ar.REFERENCES,onClose:n,currentFile:s})]})})]})}!function(e){e.DEFINITION="DEFINITION",e.REFERENCES="REFERENCES"}(ar||(ar={}));var pr=n(12209),vr=n(23318),mr=pe.Py.define();function gr(e){var t=e.setDecoration,n=e.lspClient,r=e.path,o=pe.Py.define(),l=pe.Py.define(),c=ve.tk.updateListener.of(function(){var e=(0,de.Z)((function(e){var t,i,c,s,u,d,f,h,p,v,m,g,Z,y,b,w,x,C,k,S,E,T,R,_,G,D,P,B,U,A,N;return(0,fe.__generator)(this,(function(L){switch(L.label){case 0:t=null,i=!0,c=!1,s=void 0;try{for(u=e.transactions[Symbol.iterator]();!(i=(d=u.next()).done);i=!0){f=d.value,h=!0,p=!1,v=void 0;try{for(m=f.effects[Symbol.iterator]();!(h=(g=m.next()).done);h=!0)(Z=g.value).is(mr)&&(t=Z.value)}catch(X){p=!0,v=X}finally{try{h||null==m.return||m.return()}finally{if(p)throw v}}}}catch(X){c=!0,s=X}finally{try{i||null==u.return||u.return()}finally{if(c)throw s}}return t?(y=Ne(n),b=e.state.doc,w=(0,at.s)(b,t),x=Promise.all([y.isFindReferencesSupported?n.request.findReferences(r,w,{includeDeclaration:!1}):{result:null},y.isFindDefinitionSupported?n.request.findDefinitions(r,w):{result:null}]),(0,vr.M)(e.view)(x),[4,x]):[2];case 1:if(C=a.Z.apply(void 0,[L.sent(),2]),k=C[0],S=C[1],"error"in k)throw new Error("Something went wrong fetching references: ".concat(k.error.message));if("error"in S)throw new Error("Something went wrong fetching definition: ".concat(S.error.message));return E=k.result,T=S.result,R=E&&E.length>0,_=T&&T.length>0,R||_?(G=[],D=[],E&&E.length>0&&(P=G).push.apply(P,(0,I.Z)(E)),T&&T.length>0&&(B=D).push.apply(B,(0,I.Z)(T)),U=(0,I.Z)(G).concat((0,I.Z)(D)).map((function(e){return n.documentUriToPath(e.uri)})).filter((function(e){return e!==r})),A=(0,I.Z)(new Set(U)),N=b.toJSON().join("\n"),e.view.dispatch({effects:o.of({references:G,definitions:D,currentFile:r,currentFileContents:N,files:A})}),[2]):((0,pr.J)(e.view,{message:"No references found",offset:t}),e.view.dispatch({effects:l.of(null)}),[2])}}))}));return function(t){return e.apply(this,arguments)}}()),s=pe.QQ.define({create:function(){return null},update:function(e,t){var n=e,r=!0,i=!1,a=void 0;try{for(var c,s=t.effects[Symbol.iterator]();!(r=(c=s.next()).done);r=!0){var u=c.value;u.is(o)&&(n=u.value),u.is(l)&&(n=null)}}catch(d){i=!0,a=d}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n},provide:function(e){return ve.hJ.compute([e],(function(n){var r=n.field(e);if(!r)return t(null),null;var o=n.selection.asSingle().main;return{pos:o.from,end:o.to,create:function(e){var n=document.createElement("div");return n.classList.add("cm-lsp-tooltip"),n.classList.add("replit-tooltip"),n.style.padding="0",t((0,i.tZ)(dr,(0,_.Z)((0,R.Z)({},r),{onClose:function(){e.dispatch({effects:l.of(null)})},dom:n}))),{dom:n}}}}))}});return[c,s]}var Zr=n(68217),yr=n(75408),br=n(87666),wr=n(56152);function xr(e){var t=e.dom,n=(0,ln.Z)(e,["dom"]);return qe.createPortal((0,i.tZ)(Cr,(0,R.Z)({},n)),t)}function Cr(e){var t=e.onRename,n=e.closeInput,r=e.variable,o=(0,we.Z)(n,[]),a=l.useRef(null),c=(0,yr.Y)(r,(function(e){return e?e===r?{message:"Must pick a new name"}:void 0:{message:"New name can't be empty"}}));return l.useEffect((function(){var e=function(e){"Escape"===e.key&&n()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[n]),(0,i.tZ)(O.G,{innerRef:o,css:[W.l0.flex.column,W.l0.justify.center,W.l0.borderRadius(4),W.l0.shadow(2),W.l0.width(200)],children:(0,i.tZ)("form",{onSubmit:function(e){e.preventDefault(),c.error||(n(),t(c.value))},children:(0,i.BX)(O.G,{css:[W.l0.justify.center],children:[(0,i.BX)(O.G,{css:[W.l0.flex.row,W.l0.align.center,W.l0.pr(4)],children:[(0,i.tZ)(Ye.h4,{level:2,variant:"subheadDefault",css:[W.l0.p(4),W.l0.pl(8)],children:"Rename"}),(0,i.tZ)(Ye.h4,{level:2,variant:"subheadDefault",color:"dimmer",css:[W.l0.maxWidth(100),W.l0.overflow("hidden"),{whiteSpace:"nowrap",textOverflow:"ellipsis"}],children:r}),(0,i.tZ)(Ze.h,{alt:"Close rename input",tooltipHidden:!0,onClick:n,css:[W.l0.position.absolute,W.l0.top(4),W.l0.right(4)],children:(0,i.tZ)(xe.Z,{})})]}),(0,i.tZ)(O.G,{css:[W.l0.justify.center,W.l0.align.center,W.l0.p(8),W.l0.pt(4)],children:(0,i.tZ)(Zr.ZP,{name:"rename",ref:a,onBlur:c.handleBlur,onChange:function(e){return c.setValue(e.target.value)},value:c.value,placeholder:"New name",autoFocus:!0,autoCorrect:"off",autoCapitalize:"off",autoComplete:"off",validationResults:c.error?[{message:c.error.message,state:"error"}]:void 0,style:{padding:W.TV.space4,borderRadius:W.TV.borderRadius4}})}),(0,i.tZ)(O.G,{css:[W.l0.flex.rowReverse,W.l0.p(8),W.l0.pt(0)],children:(0,i.tZ)(br.zx,{type:"submit",text:"Rename",colorway:"primary",iconLeft:(0,i.tZ)(wr.Z,{}),disabled:Boolean(c.error)||!c.value})})]})})})}var kr=pe.Py.define();var Sr=n(27400),Er=n(69422),Tr={current:null};function Rr(e){return _r.apply(this,arguments)}function _r(){return(_r=(0,de.Z)((function(e){var t,n,r,i,o,l,c,s,u,d,f,h,p,v;return(0,fe.__generator)(this,(function(m){switch(m.label){case 0:return t=e.offset,n=e.lspClient,r=e.session,i=e.view,(o=i.state.facet(Er.Yp))?Ne(n).isFindDefinitionSupported?(Tr.current&&n.notify.cancelRequest(Tr.current),Tr.current=n.generateId(),l=(0,at.s)(i.state.doc,t),[4,n.request.findDefinitions(o,l,{id:Tr.current,tap:(0,vr.M)(i)})]):[2]:[2];case 1:if(c=m.sent(),Tr.current=null,"error"in c)throw new Error("Something went wrong fetching definition location: ".concat(c.error.message));return s=c.result,c.cancelled?[2]:s&&0!==s.length?(u=(0,a.Z)(s,1),d=u[0],f=d.uri,h=d.range,p=h.start,(v=n.documentUriToPath(f))!==o?r.openFile(v,{line:p.line+1,col:p.character,newTab:!0}):r.updateDeeplink({path:v,line:p.line+1,col:p.character}),[2]):((0,pr.J)(i,{message:"No definition found",offset:t}),[2])}}))}))).apply(this,arguments)}var Ir=ve.p.mark({class:"cm-lsp-definition-target-word"}),Gr=ve.tk.baseTheme({".cm-lsp-definition-target-word span":{backgroundColor:Z.TV.backgroundHigher,color:Z.TV.accentPrimaryStrongest,cursor:"pointer",textDecoration:"underline"}});function Dr(e){var t,n=e.lspClient,r=e.path,o=e.decorations,a=e.rename,l=e.session,c=e.askGhostwriter,s=e.hintDefinitionEnabled,u=Ne(n),d=function(e){return function(t){setTimeout((function(){o.update((function(n){return n.set(e,t)}))}))}},f=[en({lspClient:n,path:r}),nn({lspClient:n,path:r,askGhostwriter:c})];return(0,X.isMobile)()||(u.isAutoCompleteSupported&&f.push(function(e){var t=e.lspClient,n=e.path,r=e.setDecoration;function o(){return(o=(0,de.Z)((function(e){var i,o,a,l,c,s,u;return(0,fe.__generator)(this,(function(d){switch(d.label){case 0:return(o=t.getServerCapabilities())?(a=(null===o||void 0===o||null===(i=o.completionProvider)||void 0===i?void 0:i.triggerCharacters)||[],(l=qn(e,a))?[4,t.request.completion(n,(0,at.s)(e.state.doc,e.pos),l)]:[2,null]):[2,null];case 1:return"error"in(c=d.sent())?[2,null]:(s=c.result,e.aborted?[2,null]:s?(u=Array.isArray(s)?s:s.items,[2,Kn({context:e,items:u,client:t,path:n,setDecoration:r})]):[2,null])}}))}))).apply(this,arguments)}return[(0,It.ys)({defaultKeymap:!1,closeOnBlur:!1,addToOptions:[{render:function(e,t){if(!On(t))return null;var n=document.createElement("div");return n.className="lsp-completion-keyboard-shortcuts",qe.render((0,i.tZ)(Xn.ZP,{small:!0,shortcut:{key:"\u23ce"}}),n),n},position:200}],override:[(0,It.eC)(["LineComment","BlockComment"],(function(e){return o.apply(this,arguments)}))]}),Qn,pe.Wl.low(Hn())]}({setDecoration:d("autocomplete"),lspClient:n,path:r})),u.isSignatureHelpSupported&&f.push(Ft({setDecoration:d("signatureSuggestion"),lspClient:n,path:r})),u.isHoverSupported&&f.push(function(e){var t=e.lspClient,n=e.path,r=e.setDecoration,i=(0,ve.bF)(function(){var e=(0,de.Z)((function(e,i){var o,a,l,c;return(0,fe.__generator)(this,(function(s){switch(s.label){case 0:return o=(0,at.s)(e.state.doc,i),[4,t.request.hover(n,o)];case 1:return a=s.sent(),l=t.getLanguageId(n),"error"in a||null===(c=a.result)?(r(null),[2,null]):[2,or({hover:c,offset:i,state:e.state,languageId:l,setDecoration:r})]}}))}));return function(t,n){return e.apply(this,arguments)}}(),{hideOn:function(e){return!e.annotation(pe.YW.remote)&&!!(e.isUserEvent("input")||e.isUserEvent("delete")||e.isUserEvent("select"))},hoverTime:0});return i}({setDecoration:d("hoverTooltip"),lspClient:n,path:r})),u.isCodeActionsSupported&&f.push((t={setDecoration:d("codeActions"),lspClient:n,path:r},[pt,ht(t)])),u.isFindDefinitionSupported&&(f.push(function(e){var t=e.lspClient,n=e.session;return ve.tk.domEventHandlers({click:function(e,r){var i=r.state.selection.main;if(i.from!==i.to)return!1;if((0,Sr.j)(e)){var o=e.clientX,a=e.clientY,l=r.posAtCoords({x:o,y:a});if(null!==l)return Rr({offset:l,lspClient:t,session:n,view:r}),!1}}})}({lspClient:n,session:l})),s&&f.push(function(e){var t=e.filePath,n=e.lspClient,r={current:null},i=pe.Py.define(),o=pe.Py.define(),a=pe.Py.define(),l=pe.QQ.define({create:function(){return{keyDown:!1,mousePosition:null}},update:function(e,t){var n=!0,r=!1,a=void 0;try{for(var l,c=t.effects[Symbol.iterator]();!(n=(l=c.next()).done);n=!0){var s=l.value;s.is(i)&&(e.mousePosition=s.value),s.is(o)&&(e.keyDown=s.value)}}catch(u){r=!0,a=u}finally{try{n||null==c.return||c.return()}finally{if(r)throw a}}return e}}),c=pe.QQ.define({create:function(){return{exists:!1,range:null}},update:function(e,t){var n=!0,r=!1,i=void 0;try{for(var o,l=t.effects[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var c=o.value;c.is(a)&&(e=c.value)}}catch(s){r=!0,i=s}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}return e}}),s=pe.QQ.define({create:function(){return ve.p.none},update:function(e,t){var n=t.state.field(l,!1);if(!n)return ve.p.none;var r=n.keyDown,i=n.mousePosition;if(!r)return ve.p.none;if(!i)return ve.p.none;var o=t.state.field(c,!1);if(!o||!o.exists||!o.range)return ve.p.none;var a=(0,at.R)(t.state.doc,o.range.start),s=(0,at.R)(t.state.doc,o.range.end);if(a===s)return ve.p.none;var u=(0,at.R)(t.state.doc,i);return u<a||u>s?ve.p.none:ve.p.set(Ir.range(a,s),!0)},provide:function(e){return ve.tk.decorations.from(e)}}),u=ve.tk.domEventHandlers({mousemove:function(e,t){if(0!==e.buttons){var n=t.state.selection.main;if(n.from!==n.to)return void t.dispatch({effects:i.of(null)})}var r=e.clientX,a=e.clientY,l=t.posAtCoords({x:r,y:a}),c=null;null!=l&&(c=(0,at.s)(t.state.doc,l)),t.dispatch({effects:[i.of(c),o.of((0,Sr.j)(e))]})},keydown:function(e,t){(0,Sr.j)(e)&&t.dispatch({effects:o.of(!0)})},keyup:function(e,t){(0,Sr.j)(e)&&t.dispatch({effects:o.of(!1)})}}),d=ve.tk.updateListener.of(function(){var e=(0,de.Z)((function(e){var i,o,s,u,d,f,h,p,v,m,g;return(0,fe.__generator)(this,(function(Z){switch(Z.label){case 0:return(i=e.state.field(l)).keyDown&&i.mousePosition?(o=(0,at.R)(e.state.doc,i.mousePosition),!e.docChanged&&(s=e.state.field(c))&&s.range&&(u=(0,at.R)(e.state.doc,s.range.start),d=(0,at.R)(e.state.doc,s.range.end),o>=u&&o<=d)?[2]:(f=e.state.wordAt(o))?r.current&&(h=r.current.word,p=f.from===h.from,v=f.to===h.to,p&&v)?[2]:(r.current&&n.notify.cancelRequest(r.current.id),m=n.generateId(),r.current={id:m,word:f},g=(0,at.s)(e.state.doc,o),[4,n.request.findDefinitions(t,g,{id:m}).then((function(t){if(r.current=null,void 0!==t.cancelled&&!0!==t.cancelled){var n=t.result;if(n){var i=e.state.wordAt(o),l=n.length>0&&null!=i,c=null;if(i){var s=(0,at.s)(e.state.doc,i.from),u=(0,at.s)(e.state.doc,i.to);c=Pt.e6.create(s,u)}e.view.dispatch({effects:a.of({exists:l,range:c})})}}}))]):[2]):[2];case 1:return Z.sent(),[2]}}))}));return function(t){return e.apply(this,arguments)}}());return[Gr,d,u,l,c,s]}({lspClient:n,filePath:r}))),(u.isFindDefinitionSupported||u.isFindReferencesSupported)&&f.push(gr({setDecoration:d("tooltip"),lspClient:n,path:r})),u.isRenameSupported&&f.push(function(e){var t=e.setDecoration,n=e.hook;return pe.QQ.define({create:function(){return null},update:function(e,t){var n=e,r=!0,i=!1,o=void 0;try{for(var a,l=t.effects[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;c.is(kr)&&(n=c.value)}}catch(s){i=!0,o=s}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return n},provide:function(e){return ve.hJ.compute([e],(function(r){var o=r.field(e);if(null===o)return t(null),null;if(o>r.doc.length)return null;var a=r.wordAt(o);return a?{pos:o,create:function(){var e=document.createElement("div");e.classList.add("cm-lsp-rename-tooltip"),e.classList.add("replit-tooltip"),e.style.padding="0";var l=r.sliceDoc(a.from,a.to);return t((0,i.tZ)(xr,{variable:l,dom:e,onRename:function(e){return n.onRename(e,o)},closeInput:n.closeRenameInput})),{dom:e}}}:null}))}})}({setDecoration:d("renameInput"),hook:a}))),f}var Pr=n(90658);function Br(e){var t=e.view,n=e.filePath,r=(0,Ae.Z)(n),i=l.useRef(null),o=l.useRef(0),c=(0,f.Z)().session,s=(0,a.Z)(l.useState(null),2),u=s[0],d=s[1],p=(0,_t.eC)(n),v=l.useCallback((function(){d(null),t&&t.focus()}),[t]);l.useEffect((function(){var e=function(e){"Escape"===e.key&&v()};if(u)return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[v,u]),l.useEffect((function(){if(t&&u)return t.scrollDOM.addEventListener("scroll",v),function(){t.scrollDOM.removeEventListener("scroll",v)}}),[t,u,v]);var g=(0,h.Z)((function(){if(t&&u){var e=t.coordsAtPos(o.current);d((function(t){return e?{x:e.left,y:e.top}:t}))}}),{type:"throttle",wait:25}),Z=l.useCallback(function(){var e=(0,de.Z)((function(e){var o,l,s,u,d,f,h,p,v,m,g,Z,y,b,w;function x(e,t){return C.apply(this,arguments)}function C(){return(C=(0,de.Z)((function(e,l){var u,d,f,h,p,v,m,g,Z;return(0,fe.__generator)(this,(function(y){switch(y.label){case 0:if(!r||!t)throw new Error("Expected client");return i.current&&r.notify.cancelRequest(i.current),i.current=r.generateId(),u=(0,at.s)(o.doc,s),[4,e(n,u,{id:i.current,tap:(0,vr.M)(t)})];case 1:if(d=y.sent(),i.current=null,"error"in d)throw new Error("Something went wrong fetching location: ".concat(d.error.message));return f=d.result,d.cancelled?[2]:f&&0!==f.length?(h=(0,a.Z)(f,1),p=h[0],v=p.uri,m=p.range,g=m.start,(Z=r.documentUriToPath(v))!==n?c.openFile(Z,{line:g.line+1,col:g.character}):c.updateDeeplink({path:Z,line:g.line+1,col:g.character}),[2]):((0,pr.J)(t,{message:l,offset:s}),[2])}}))}))).apply(this,arguments)}return(0,fe.__generator)(this,(function(i){switch(i.label){case 0:if(!t)throw new Error("Expected view");switch(o=t.state,l=o.selection.main,s=l.head,(0,Ue.j)(Ue.U3.EDITOR_CONTEXT_MENU_ACTION_RAN,{action:e}),e){case ue.D2.Cut:return[3,1];case ue.D2.Copy:return[3,2];case ue.D2.Paste:return[3,3];case ue.D2.JumpToDefinition:return[3,8];case ue.D2.JumpToTypeDefinition:return[3,10];case ue.D2.JumpToImplementation:return[3,12];case ue.D2.FindReferences:return[3,14];case ue.D2.Rename:return[3,15];case ue.D2.SelectAllOccurrences:return[3,16];case ue.D2.CodeActions:return[3,17];case ue.D2.ToggleBreakpoint:return[3,18];case ue.D2.StartThread:return[3,19];case ue.D2.ExplainCode:return[3,20];case ue.D2.GenerateCode:return[3,21];case ue.D2.TransformCode:return[3,22];case ue.D2.CopyLinkToPos:return[3,23]}return[3,24];case 1:return u=o.doc.sliceString(l.from,l.to),(0,Oe.Z)(u),t.dispatch(o.replaceSelection("")),[3,25];case 2:return d=o.doc.sliceString(l.from,l.to),(0,Oe.Z)(d),[3,25];case 3:f="",i.label=4;case 4:return i.trys.push([4,6,,7]),[4,window.navigator.clipboard.readText()];case 5:return f=i.sent(),[3,7];case 6:return h=i.sent(),Be.kg.error("CodeMirror context menu paste failed",{message:h.message}),[3,25];case 7:return Me({filePath:n,view:t,clipboardText:f}),[3,25];case 8:if(!r)throw new Error("Expected client");return[4,Rr({offset:s,lspClient:r,session:c,view:t})];case 9:return i.sent(),[3,25];case 10:if(!r)throw new Error("Expected client");return[4,x(r.request.findTypeDefinitions,"No type definition found")];case 11:return i.sent(),[3,25];case 12:if(!r)throw new Error("Expected client");return[4,x(r.request.findImplementations,"No implementation found")];case 13:return i.sent(),[3,25];case 14:return t.dispatch({effects:[mr.of(s)]}),[3,25];case 15:return t.dispatch({effects:[kr.of(s)]}),[3,25];case 16:if(o.selection.main.empty){if(!(p=o.wordAt(s)))return[2];t.dispatch({selection:p})}return(0,he.tm)(t),setTimeout((function(){return t.focus()})),[3,25];case 17:return(v=t.coordsAtPos(s))?(t.dispatch({effects:[st.of(v)]}),[3,25]):[2];case 18:return m=o.doc.lineAt(s),kt(t,m.from),[3,25];case 19:return t.dispatch({effects:[Pr.UQ.of(je()())]}),[3,25];case 20:return g=t.state.selection.main,t.dispatch({effects:[Re.of(g),ve.tk.scrollIntoView(g.to)]}),[3,25];case 21:return t.dispatch({effects:Ie.of(!0)}),[3,25];case 22:return t.dispatch({effects:De.of(!0)}),[3,25];case 23:return Z=(0,at.s)(o.doc,s),y=Z.line,b=Z.character,w=(0,We.dr)({path:n,line:y+1,col:b}),(0,Oe.Z)(w),[3,25];case 24:throw new Error("Unexpected action: ".concat(e));case 25:return[2]}}))}));return function(t){return e.apply(this,arguments)}}(),[t,r,n,c]),y=(0,a.Z)(l.useState(!1),2),b=y[0],w=y[1];(0,me.Z)({view:t,initialExtension:ve.tk.updateListener.of((function(e){e.transactions.some((function(e){return e.reconfigured}))&&w("undefined"!==typeof e.view.state.field(St,!1))}))});var x=Le(r),C=l.useMemo((function(){if(!t)return[];var e=[];return x&&(x.isFindDefinitionSupported&&e.push(ue.D2.JumpToDefinition),x.isFindTypeDefinitionSupported&&e.push(ue.D2.JumpToTypeDefinition),x.isFindImplementationSupported&&e.push(ue.D2.JumpToImplementation),(x.isFindDefinitionSupported||x.isFindReferencesSupported)&&e.push(ue.D2.FindReferences),x.isRenameSupported&&e.push(ue.D2.Rename),x.isCodeActionsSupported&&e.push(ue.D2.CodeActions)),e.push(ue.D2.SelectAllOccurrences),e.push(ue.JJ),e.push(ue.D2.CopyLinkToPos),b&&e.push(ue.D2.ToggleBreakpoint),e.push(ue.D2.StartThread),p&&e.push(ue.D2.ExplainCode),e.push(ue.D2.GenerateCode),e.push(ue.D2.TransformCode),e.push(ue.JJ),e.push(ue.D2.Cut),e.push(ue.D2.Copy),window.navigator.clipboard&&"readText"in window.navigator.clipboard&&e.push(ue.D2.Paste),e}),[t,x,b,p]),k=(0,me.Z)({view:t});return l.useEffect((function(){if(t){var e=C.filter((function(e){return!(0,ue.s3)(e)})).filter((function(e){return"keyboardShortcut"in ue.Wo[e]})).filter((function(e){return e!==ue.D2.Cut&&e!==ue.D2.Copy&&e!==ue.D2.Paste})).map((function(e){var t=ue.Wo[e].keyboardShortcut,n={key:t.key,preventDefault:!0,run:function(){return Z(e),!0}};return t.altKey&&(n.key="Alt-".concat(n.key)),t.shiftKey&&(n.key="Shift-".concat(n.key)),t.cmdOrCtrlKey&&(n.key="Mod-".concat(n.key)),n}));return t.dispatch({effects:k.reconfigure(ve.$f.of(e))}),function(){t.dispatch({effects:k.reconfigure([])})}}}),[t,Z,C,k]),{onAction:Z,actions:C,contextMenuCoords:u,onContextMenu:function(e){if(!(0,X.isMobile)({tablet:!1})&&t){e.preventDefault();var r=e.clientX,i=e.clientY,a=t.state.selection.main,l=t.posAtCoords({x:r,y:i}),c=t.state.doc.length,s=null===l?c:l;if(o.current=s,s<a.from||s>a.to){var u=pe.jT.cursor(s);t.dispatch({selection:u})}var f=(0,m.r6)(n);(0,Ue.j)(Ue.U3.EDITOR_CONTEXT_MENU_OPENED,{ext:f}),d({x:r,y:i})}},closeMenu:v,resizeRef:g}}var Ur=n(91338);function Ar(e){var t=e.view,n=e.debuggest,r=e.filePath,i=e.isLoading,o=(0,f.Z)().fs,a=(0,Ur.Z)(),c=(0,ct.Z)(n.mainClient),s=(0,me.Z)({view:t});l.useEffect((function(){if(!i&&a&&c&&t){var e=(0,vt.ZF)("/home/runner/".concat(a.slug,"/").concat(r)),n=function(e,t,n,r){var i,o=[];o.push(t.breakpoints.subscribe((function(t){var r=t.get(n);e.dispatch({effects:gt.of({lines:r?r.map((function(e){return e.line})):[]})})})));var a=ve.tk.updateListener.of((function(i){i.transactions.forEach((function(i){i.effects.forEach((function(i){if(i.is(Zt)){var o=(0,vt.om)(n);if(!o)throw new Error("Expected relative path");t.toggleBreakpoint(n,{line:e.state.doc.lineAt(i.value.pos).number,otVersion:r.getOTVersion(o),otIndex:i.value.pos})}}))}))}));o.push(t.stackFrames.subscribe((function(t){var r=Tt(t,n);e.dispatch({effects:bt.of(r)})})));var l=(0,ve.v5)({class:"cm-breakpoint-gutter",markers:function(e){return e.state.field(St)},initialSpacer:function(){return mt},domEventHandlers:{mousedown:function(e,t){return kt(e,t.from),!0}}}),c=(null===(i=t.breakpoints.current.get(n))||void 0===i?void 0:i.map((function(e){return e.line})))||[],s=[pe.Wl.highest(l),St.init((function(e){return Rt(c,e)})),a,wt.init((function(){return Tt(t.stackFrames.current,n)})),Ct,Et];return{extensions:s,dispose:function(){return o.forEach((function(e){return e()}))}}}(t,c,e,o),l=n.extensions,u=n.dispose;return t.dispatch({effects:s.reconfigure(l)}),function(){t.dispatch({effects:s.reconfigure([])}),u()}}}),[c,t,a,r,i,o,s])}var Nr=n(36340),Lr=n(16629);var Xr=function(){return(0,i.tZ)("div",{css:[W.l0.p(16)],children:(0,i.BX)(Lr.ZP,{viewBox:"0 0 100 10",backgroundColor:W.TV.backgroundHigher,foregroundColor:W.TV.backgroundHighest,speed:1.5,children:[(0,i.tZ)("rect",{x:"0",y:"0",rx:"2",ry:"2",width:"100",height:"4"}),(0,i.tZ)("rect",{x:"0",y:"6",rx:"2",ry:"2",width:"33",height:"4"})]})})},Mr=n(69735),Or=n(34621),Wr=n(91216),Fr=n(74755),jr=n(57813),zr=n(64514),Hr=n(31549),Vr=n(30535),qr=n(74296),$r=n(43119),Yr=n(71440),Kr=n(46653);function Qr(){var e=(0,$r.Z)(["\n  mutation AIFeedback($input: CodexFeedback2Input!) {\n    giveCodexFeedback2(input: $input) {\n      ... on CodexFeedback2 {\n        __typename\n      }\n      ... on UnauthorizedError {\n        __typename\n      }\n      ... on NotFoundError {\n        __typename\n      }\n    }\n  }\n"]);return Qr=function(){return e},e}var Jr={},ei=(0,Yr.Ps)(Qr());var ti=function(e){var t=e.provideFeedback;return(0,i.BX)(Z.G7,{css:[Z.l0.rowWithGap(8),Z.l0.justify.start,Z.l0.align.center],children:[(0,i.tZ)(Z.hU,{alt:"Helpful",colorway:"positive",children:(0,i.tZ)(Hr.Z,{css:{"&:not(:hover)":[Z.l0.color.foregroundDimmer]},onClick:function(){return t(qr.TY.Yes)}})}),(0,i.tZ)(Z.hU,{alt:"Unhelpful",colorway:"negative",children:(0,i.tZ)(jr.Z,{css:{"&:not(:hover)":[Z.l0.color.foregroundDimmer]},onClick:function(){return t(qr.TY.No)}})})]})},ni=function(e){var t=e.provideFeedback;return(0,i.BX)(Z.G7,{css:[Z.l0.rowWithGap(8),Z.l0.justify.start,Z.l0.align.center],children:[(0,i.tZ)(Z.zx,{text:"Yes",onClick:function(){return t(qr.TY.Yes)},small:!0,colorway:"positive",iconLeft:(0,i.tZ)(Fr.Z,{}),css:{backgroundColor:Z.TV.backgroundHighest,":hover":{backgroundColor:Z.TV.accentPositiveDimmest}}}),(0,i.tZ)(Z.zx,{text:"No",onClick:function(){return t(qr.TY.No)},colorway:"negative",small:!0,iconLeft:(0,i.tZ)(xe.Z,{}),css:{backgroundColor:Z.TV.backgroundHighest,":hover":{backgroundColor:Z.TV.accentNegativeDimmest}}})]})},ri=function(e){var t=e.feedback;return e.inferenceClass===qr.Sg.Chat?t===qr.TY.Yes?(0,i.tZ)(Vr.Z,{}):(0,i.tZ)(zr.Z,{}):(0,i.BX)(i.HY,{children:[(0,i.tZ)(Fr.Z,{}),(0,i.tZ)(Z.xv,{variant:"small",children:"Thanks for the feedback!"})]})};function ii(e){var t=e.inferenceId,n=e.language,r=e.inferenceClass,o=e.feedbackFeature,c=(0,l.useState)(null),s=c[0],u=c[1],d=(0,a.Z)(function(e){var t=(0,R.Z)({},Jr,e);return Kr.D(ei,t)}(),2),f=d[0],h=d[1],p=h.data,v=h.error,m=h.called,g=function(e){r===qr.Sg.Generation?(0,Ue.j)(Ue.U3.CODEX_FEEDBACK_SUBMITTED,{feedback:e,language:n,feature:"generation"}):r===qr.Sg.Chat&&(0,Ue.j)(Ue.U3.GHOSTWRITER_CHAT_FEEDBACK_SUBMITTED,{feedback:e}),f({variables:{input:{feedback:e,inferenceClass:r,inferenceId:t}}}),u(e)};return(0,i.tZ)(Z.G7,{css:[Z.l0.flex.row,Z.l0.align.center,Z.l0.justify.start,Z.l0.rowWithGap(4),Z.l0.width("100%"),Z.l0.color.foregroundDimmer],children:m&&s&&"NotFoundError"!==(null===p||void 0===p?void 0:p.giveCodexFeedback2.__typename)&&"UnauthorizedError"!==(null===p||void 0===p?void 0:p.giveCodexFeedback2.__typename)&&!v?(0,i.tZ)(ri,{feedback:s,inferenceClass:r}):(0,i.tZ)(i.HY,{children:(0,i.BX)(Z.G7,{css:[Z.l0.flex.grow(1),Z.l0.flex.row,Z.l0.align.center,Z.l0.maxWidth("100%"),Z.l0.flex.wrap,Z.l0.justify.spaceBetween,Z.l0.fontSize(12),{gap:"4px"}],children:[(0,i.tZ)(Z.xv,{variant:"small",color:"dimmer",children:oi(r)}),(0,i.tZ)(Z.G7,{css:[Z.l0.rowWithGap(8),Z.l0.justify.start,Z.l0.align.center],children:r===qr.Sg.Chat?(0,i.tZ)(ti,{provideFeedback:g}):(0,i.tZ)(ni,{provideFeedback:g})}),o?(0,i.tZ)(Wr.Z,{feature:Or.l.AI}):null]})})})}function oi(e){switch(e){case qr.Sg.Explanation:return"Is this a good explanation?";case qr.Sg.Chat:return"";default:return"Is this code valuable?"}}var ai=n(7954),li=n(53486);function ci(){var e=(0,$r.Z)(["\n  query CurrentUserHasContextualAIFeatures {\n    currentUser {\n      id\n      hasContextualAIFeatures\n    }\n  }\n"]);return ci=function(){return e},e}var si={},ui=(0,Yr.Ps)(ci());function di(){var e,t=function(e){var t=(0,R.Z)({},si,e);return li.a(ui,t)}(),n=t.data,r=t.loading;return{enabled:Boolean(null===n||void 0===n||null===(e=n.currentUser)||void 0===e?void 0:e.hasContextualAIFeatures),loading:r}}function fi(){var e=(0,$r.Z)(["\n  query ExplainCode($code: String!, $language: String!, $replId: String) {\n    explainCode(code: $code, language: $language, replId: $replId) {\n      ... on ExplainCodeResult {\n        id\n        explanation\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return fi=function(){return e},e}function hi(){var e=(0,$r.Z)(["\n  mutation ExplainCodeCodexFeedback($input: CodexFeedback2Input!) {\n    giveCodexFeedback2(input: $input) {\n      ... on CodexFeedback2 {\n        __typename\n        id\n        feedback\n      }\n      ... on UnauthorizedError {\n        __typename\n      }\n      ... on NotFoundError {\n        __typename\n      }\n    }\n  }\n"]);return hi=function(){return e},e}var pi={},vi=(0,Yr.Ps)(fi());var mi=(0,Yr.Ps)(hi());var gi=n(79351),Zi=n(47854),yi=function(){var e=(0,de.Z)((function(e){var t,n,r;return(0,fe.__generator)(this,(function(i){switch(i.label){case 0:return t=e.code,n=e.language,[4,null===Zi.l||void 0===Zi.l?void 0:Zi.l.query({query:vi,variables:{code:t,language:n}})];case 1:return"ExplainCodeResult"===(null===(r=i.sent())||void 0===r?void 0:r.data.explainCode.__typename)?[2,r.data.explainCode.explanation]:[2]}}))}));return function(t){return e.apply(this,arguments)}}();function bi(e){var t,n,r,i,o,l,c,s,u,d,f,h,p,v,m,g=e.language,Z=e.code,y=(0,gi.Z)(),b=function(e){var t=(0,R.Z)({},pi,e);return li.a(vi,t)}({fetchPolicy:"no-cache",variables:{code:Z,language:g,replId:y},skip:!g||!Z,notifyOnNetworkStatusChange:!0}),w=(0,a.Z)(function(e){var t=(0,R.Z)({},pi,e);return Kr.D(mi,t)}(),2),x=w[0],C=w[1],k=function(){var e=(0,de.Z)((function(e){var t,n;return(0,fe.__generator)(this,(function(r){return"ExplainCodeResult"!==(null===(t=b.data)||void 0===t?void 0:t.explainCode.__typename)||b.loading||C.loading||(x({variables:{input:{feedback:e,inferenceClass:qr.Sg.Explanation,inferenceId:null===(n=b.data)||void 0===n?void 0:n.explainCode.id}}}),(0,Ue.j)(Ue.U3.CODEX_FEEDBACK_SUBMITTED,{feature:"explanation",language:g,feedback:e})),[2]}))}));return function(t){return e.apply(this,arguments)}}(),S="ExplainCodeResult"===(null===(t=b.data)||void 0===t||null===(n=t.explainCode)||void 0===n?void 0:n.__typename)?b.data.explainCode.explanation:void 0,E="ExplainCodeResult"===(null===(r=b.data)||void 0===r||null===(i=r.explainCode)||void 0===i?void 0:i.__typename)?null===(o=b.data)||void 0===o||null===(l=o.explainCode)||void 0===l?void 0:l.id:void 0,T="UserError"===(null===(c=b.data)||void 0===c||null===(s=c.explainCode)||void 0===s?void 0:s.__typename)||"UnauthorizedError"===(null===(u=b.data)||void 0===u||null===(d=u.explainCode)||void 0===d?void 0:d.__typename)?b.data.explainCode.message:null,_="ExplainCodeResult"===(null===(f=b.data)||void 0===f||null===(h=f.explainCode)||void 0===h?void 0:h.__typename)&&"CodexFeedback2"===(null===(p=C.data)||void 0===p||null===(v=p.giveCodexFeedback2)||void 0===v?void 0:v.__typename)&&b.data.explainCode.id===(null===(m=C.data.giveCodexFeedback2)||void 0===m?void 0:m.id)?C.data.giveCodexFeedback2.feedback:null;return{id:E,getCodeExplanation:yi,loading:b.loading,explanation:S,errorMessage:T,refetchExplanation:(0,de.Z)((function(){return(0,fe.__generator)(this,(function(e){return(0,Ue.j)(Ue.U3.CODEX_FEATURE_USED,{feature:"explanation",isRetry:!0,action:"refresh",language:g}),[2,b.refetch()]}))})),giveCodexFeedback:k,codexFeedback:_}}function wi(e){var t=e.dom,n=e.filePath,r=e.code;return(0,qe.createPortal)((0,i.tZ)(xi,{code:r,filePath:n}),t)}function xi(e){var t=e.filePath,n=e.code,r=function(){null===p||void 0===p||p.dispatch({effects:[Re.of(null)]})},o=(0,_t.UP)(t),a=bi({code:n,language:o}),c=a.id,s=a.explanation,u=a.errorMessage,d=a.loading,f=a.refetchExplanation,h=null,p=K(),v=di(),m=v.enabled,g=v.loading;if(l.useEffect((function(){m&&(0,Ue.j)(Ue.U3.CODEX_FEATURE_USED,{feature:"explanation",isRetry:!1,action:"submit",language:o})}),[o,m]),g)return null;if(d)h=(0,i.tZ)(Xr,{});else if(m)h=s&&c?(0,i.BX)("div",{css:[W.l0.p(8),W.l0.display.grid,{gridGap:W.TV.space8}],children:[(0,i.tZ)("pre",{css:{fontFamily:W.TV.fontFamilyCode,whiteSpace:"pre-wrap",lineHeight:W.TV.lineHeightDefault,fontSize:W.TV.fontSizeDefault,color:W.TV.foregroundDefault,backgroundColor:W.TV.backgroundHighest,padding:W.TV.space8,borderRadius:W.TV.borderRadius8},children:s}),d?null:(0,i.tZ)(ii,{inferenceId:c,language:o,inferenceClass:qr.Sg.Explanation})]}):(0,i.tZ)(Z.G7,{css:[W.l0.p(8)],children:(0,i.tZ)(Z.E_,{colorway:"negative",icon:(0,i.tZ)(Mr.Z,{}),text:null!==u&&void 0!==u?u:"Oops! An unexpected error occurred. Please try again or contact support."})});else if(!m&&!d)return(0,i.tZ)(Te,{title:"Explain Code",newInferenceAlt:"Generate new explanation",onRequestClose:r,width:320,children:(0,i.BX)(Z.G7,{css:[W.l0.colWithGap(12),W.l0.p(8)],children:[(0,i.tZ)(Z.xv,{multiline:!0,children:"Activate Ghostwriter to get access to Explain Code and other AI-powered features!"}),(0,i.tZ)(Z.G7,{css:{alignSelf:"center"},children:(0,i.tZ)(ai.Z,{context:"explain_code_modal"})})]})});return(0,i.tZ)(Te,{dataCy:"explain-code-modal",title:"Explain Code",newInferenceAlt:"Generate new explanation",onRequestNewInference:f,onRequestClose:r,width:420,children:h})}var Ci=n(83177),ki=n(99340),Si=n(64774),Ei=n(65189),Ti=n(39792),Ri=n(36877),_i=n(14334),Ii=n(52951),Gi=n(33109);function Di(){var e=(0,$r.Z)(["\n  query GenerateCode($input: GenerateCodeInput!) {\n    currentUser {\n      id\n      isAdmin: hasRole(role: ADMIN)\n    }\n    generateCode(input: $input) {\n      ... on GenerateCodeResult {\n        id\n        code\n        metadata\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return Di=function(){return e},e}function Pi(){var e=(0,$r.Z)(["\n  query GenerateCodeModalCurrentUser {\n    currentUser {\n      id\n      userPowerUpsByType {\n        __typename\n        ... on UserPowerUpsTypes {\n          ghostwriter {\n            active\n          }\n        }\n      }\n    }\n  }\n"]);return Pi=function(){return e},e}var Bi={},Ui=(0,Yr.Ps)(Di());Pi();var Ai=n(20345);function Ni(e){var t=e.filePath,n=e.selectedCode,r=e.onRequestClose,o=(0,gi.Z)(),c=(0,Si.Z)(t),s=K(),u=(0,a.Z)(l.useState(n),2),d=u[0],f=u[1],h=(0,a.Z)(l.useState(""),2),p=h[0],v=h[1],m=(0,a.Z)(l.useState(!1),2),g=m[0],y=m[1],b=l.useRef(null),w=(0,a.Z)(function(e){var t=(0,R.Z)({},Bi,e);return Gi.t(Ui,t)}({fetchPolicy:"no-cache"}),2),x=w[0],C=w[1],k=C.called,S=C.data,E=C.error,T=C.loading,_=di(),I=_.enabled,G=_.loading,P=(0,Ut.P)({controlName:"flag-use-new-code-rendering"}),B=(0,_t.Sf)(t),U=function(){if(!T&&""!==d){var e=d===p;(0,Ue.j)(Ue.U3.CODEX_FEATURE_USED,{feature:"generation",isRetry:e,action:e?"refresh":"submit",language:B}),v(d),x({variables:{input:{language:B,prompt:d,replId:o}}})}},A=(0,ki.Z)().showConfirm;if(G)return null;if(!I)return(0,i.tZ)(Te,{title:"Generate Code",newInferenceAlt:"Generate new code",onRequestClose:r,width:320,children:(0,i.BX)(Z.G7,{css:[Z.l0.colWithGap(12),Z.l0.p(8)],children:[(0,i.tZ)(Z.xv,{multiline:!0,children:"Activate Ghostwriter to get access to Generate Code and other AI-powered features!"}),(0,i.tZ)(Z.G7,{css:{alignSelf:"center"},children:(0,i.tZ)(ai.Z,{context:"generate_code_modal"})})]})});var N=null,L=null===S||void 0===S?void 0:S.generateCode.__typename;if(T)N=(0,i.tZ)(Xr,{});else if(E||"UserError"===L||"UnauthorizedError"===L){var X,M;N=(0,i.tZ)(Z.G7,{children:(0,i.tZ)(Z.E_,{colorway:"negative",icon:(0,i.tZ)(Mr.Z,{}),text:"UserError"!==L&&"UnauthorizedError"!==L||!(null===S||void 0===S||null===(X=S.generateCode)||void 0===X?void 0:X.message)?"Oops! An unexpected error occurred. Please try again or contact support.":null===S||void 0===S||null===(M=S.generateCode)||void 0===M?void 0:M.message})})}else if("GenerateCodeResult"===L&&null!=(null===S||void 0===S?void 0:S.generateCode)){var O,W=S.generateCode,F=W.code,j=W.id;if(null==F||""===F)N=(0,i.tZ)(Z.G7,{children:(0,i.tZ)(Z.E_,{colorway:"warning",icon:(0,i.tZ)($e.Z,{}),text:"That prompt gave us some trouble. Try re-wording it."})});else N=(0,i.BX)(Z.G7,{css:[Z.l0.colWithGap(8)],children:[(0,i.BX)(Z.Tg,{background:"default",css:[Z.l0.py(8),Z.l0.px(8),Z.l0.borderRadius(8)],children:[(0,i.tZ)(Z.G7,{dataCy:"generate-code-modal-generation-preview",css:[Z.l0.maxHeight(300),Z.l0.overflowY("auto")],children:P?(0,i.tZ)(Ai.Z,{code:F,filePath:t}):(0,i.tZ)(Ci.ZP,{code:F,filePath:t,hideIndentMarker:!0,hideGutter:!0})}),(0,i.BX)(Z.G7,{css:[Z.l0.flex.row,Z.l0.justify.spaceBetween,Z.l0.align.center,Z.l0.pt(8),Z.l0.px(4)],children:[(0,i.BX)(Z.G7,{css:[Z.l0.rowWithGap(4),Z.l0.align.center],children:[(0,i.tZ)(D.Z,{path:t,size:16}),(0,i.tZ)(Z.xv,{color:"dimmer",css:[{textTransform:"capitalize"},Z.l0.fontSize(12)],children:B})]}),(0,i.BX)(Z.G7,{css:Z.l0.rowWithGap(8),children:[(0,i.tZ)(Z.zx,{small:!0,iconLeft:(0,i.tZ)(Ti.Z,{}),text:"Copy to clipboard",onClick:function(){(0,Oe.Z)(F).then((function(){A("Code copied to clipboard")})),(0,Ue.j)(Ue.U3.CODEX_FEATURE_USED,{feature:"generation",action:"copied-to-clipboard",language:B})}}),"function"===typeof c&&s?(0,i.tZ)(Z.zx,{dataCy:"generate-code-modal-insert-button",small:!0,iconLeft:(0,i.tZ)(_i.Z,{}),text:"Insert in editor",colorway:"primary",onClick:function(){var e=s.state.selection.main.head;c({code:F,insertAt:e}),(0,Ue.j)(Ue.U3.CODEX_FEATURE_USED,{feature:"generation",action:"inserted-in-editor",language:B}),r()}}):null,(null===S||void 0===S||null===(O=S.currentUser)||void 0===O?void 0:O.isAdmin)?(0,i.tZ)(Z.u,{tooltip:(0,i.tZ)(Z.G7,{children:(0,i.tZ)("pre",{css:[{whiteSpace:"pre-wrap"}],children:JSON.stringify(JSON.parse(S.generateCode.metadata),null," ")})}),placement:"bottom",children:(0,i.tZ)(Z.hU,{colorway:"warning",alt:"Debug metadata",tooltipHidden:!0,children:(0,i.tZ)(Ei.Z,{})})}):null]})]})]}),(0,i.tZ)(Z.G7,{css:[Z.l0.flex.row,Z.l0.align.center,Z.l0.justify.spaceBetween],children:(0,i.tZ)(ii,{inferenceId:j,language:B,inferenceClass:qr.Sg.Generation})})]})}return(0,i.tZ)(Te,{dataCy:"generate-code-modal",title:"Generate Code",onRequestClose:r,width:500,children:(0,i.BX)(Z.G7,{css:[Z.l0.p(8),Z.l0.colWithGap(8)],children:[(0,i.BX)(Z.G7,{tag:"form",onSubmit:function(e){e.preventDefault(),U()},css:[Z.l0.rowWithGap(8)],children:[(0,i.tZ)(Z.II,{autoFocus:!0,dataCy:"generate-code-modal-prompt-input",placeholder:'Write a prompt (e.g. "draw a square")',value:d,onChange:function(e){return t=e.target.value,g||((0,Ue.j)(Ue.U3.CODEX_FEATURE_USED,{action:"prompt-written",feature:"generation",language:B}),y(!0)),void f(t);var t},ref:b,maxLength:1e3,onKeyDown:function(e){"Escape"===e.key&&r(),e.metaKey&&"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),U())}}),(0,i.tZ)(Z.zx,{text:"Generate",dataCy:"generate-code-modal-submit-button",colorway:"primary",disabled:T||""===d,type:"submit",iconRight:!T&&k?(0,i.tZ)(Ii.Z,{}):(0,i.tZ)(Ri.Z,{})})]}),N]})})}function Li(e){var t=e.dom,n=(0,ln.Z)(e,["dom"]);return qe.createPortal((0,i.tZ)(Ni,(0,R.Z)({},n)),t)}var Xi=n(34834);function Mi(){var e=(0,$r.Z)(["\n  query TransformCode($input: TransformCodeInput!) {\n    currentUser {\n      id\n      isAdmin: hasRole(role: ADMIN)\n    }\n    transformCode(input: $input) {\n      ... on TransformCodeResult {\n        id\n        code\n        metadata\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on ServiceUnavailable {\n        message\n      }\n    }\n  }\n"]);return Mi=function(){return e},e}function Oi(){var e=(0,$r.Z)(["\n  query TransformCodeModalCurrentUser {\n    currentUser {\n      id\n      userPowerUpsByType {\n        __typename\n        ... on UserPowerUpsTypes {\n          ghostwriter {\n            active\n          }\n        }\n      }\n    }\n  }\n"]);return Oi=function(){return e},e}var Wi={},Fi=(0,Yr.Ps)(Mi());Oi();function ji(e){var t=e.filePath,n=e.selectedCode,r=e.onRequestClose,o=e.replaceCode,c=(0,gi.Z)(),s=(0,ki.Z)(),u=s.showError,d=s.showConfirm,f=(0,a.Z)(l.useState(""),2),h=f[0],p=f[1],v=(0,a.Z)(l.useState(""),2),m=v[0],g=v[1],y=(0,a.Z)(l.useState(!1),2),b=y[0],w=y[1],x=l.useRef(null),C=l.useRef(!1),k=(0,a.Z)(function(e){var t=(0,R.Z)({},Wi,e);return Gi.t(Fi,t)}({fetchPolicy:"no-cache",onError:function(e){return u(e.message)}}),2),S=k[0],E=k[1],T=E.called,_=E.data,I=E.error,G=E.loading,P=di(),B=P.enabled,U=P.loading,A=(0,Ut.P)({controlName:"flag-use-new-code-rendering"}),N=G;l.useEffect((function(){if(C.current)return r();C.current=!0}),[t,r]);var L=(0,_t.Sf)(t),X=function(){if(!N&&""!==h){var e=h===m;(0,Ue.j)(Ue.U3.CODEX_FEATURE_USED,{feature:"transformation",isRetry:e,action:e?"refresh":"submit",language:L}),g(h),S({variables:{input:{input:n,language:L,prompt:h,replId:c}}})}},M=null===_||void 0===_?void 0:_.transformCode.__typename,O=I||"UserError"===M||"UnauthorizedError"===M;if(U)return null;if(!B)return(0,i.tZ)(Te,{title:"Transform Code",newInferenceAlt:"Transform your code",onRequestClose:r,width:320,children:(0,i.BX)(Z.G7,{css:[Z.l0.colWithGap(12),Z.l0.p(8)],children:[(0,i.tZ)(Z.xv,{multiline:!0,children:"Activate Ghostwriter to get access to Transform Code and other AI-powered features!"}),(0,i.tZ)(Z.G7,{css:{alignSelf:"center"},children:(0,i.tZ)(ai.Z,{context:"transform_code_modal"})})]})});var W=null;if(N)W=(0,i.tZ)(Xr,{});else if(O){var F,j;W=(0,i.tZ)(Z.G7,{children:(0,i.tZ)(Z.E_,{colorway:"negative",icon:(0,i.tZ)(Mr.Z,{}),text:"UserError"!==M&&"UnauthorizedError"!==M||!(null===_||void 0===_||null===(F=_.transformCode)||void 0===F?void 0:F.message)?"Oops! An unexpected error occurred. Please try again or contact support.":null===_||void 0===_||null===(j=_.transformCode)||void 0===j?void 0:j.message})})}else if("ServiceUnavailable"===M)W=(0,i.tZ)(Z.G7,{children:(0,i.tZ)(Z.E_,{colorway:"warning",icon:(0,i.tZ)($e.Z,{}),text:"That prompt gave us some trouble. Try re-wording it."})});else if("TransformCodeResult"===M&&null!=_){var z,H=_.transformCode,V=H.code,q=H.id;if(null==V||""===V)W=(0,i.tZ)(Z.G7,{children:(0,i.tZ)(Z.E_,{colorway:"warning",icon:(0,i.tZ)($e.Z,{}),text:"That prompt gave us some trouble. Try re-wording it."})});else W=(0,i.BX)(Z.G7,{css:[Z.l0.colWithGap(8)],children:[(0,i.BX)(Z.Tg,{background:"default",css:[Z.l0.py(8),Z.l0.px(4),Z.l0.borderRadius(8)],children:[(0,i.tZ)(Z.G7,{dataCy:"transform-code-modal-generation-preview",css:[Z.l0.maxHeight(300),Z.l0.overflowY("auto")],children:A?(0,i.tZ)(Ai.Z,{code:V,filePath:t}):(0,i.tZ)(Ci.ZP,{code:V,filePath:t,hideIndentMarker:!0,hideGutter:!0})}),(0,i.BX)(Z.G7,{css:[Z.l0.flex.row,Z.l0.justify.spaceBetween,Z.l0.align.center,Z.l0.pt(8),Z.l0.px(4)],children:[(0,i.BX)(Z.G7,{css:[Z.l0.rowWithGap(4),Z.l0.align.center],children:[(0,i.tZ)(D.Z,{path:t,size:16}),(0,i.tZ)(Z.xv,{color:"dimmer",css:[{textTransform:"capitalize"},Z.l0.fontSize(12)],children:L})]}),(0,i.BX)(Z.G7,{css:Z.l0.rowWithGap(8),children:[(0,i.tZ)(Z.zx,{iconLeft:(0,i.tZ)(Ti.Z,{}),text:"Copy to clipboard",onClick:function(){(0,Oe.Z)(V).then((function(){d("Code copied to clipboard")})),(0,Ue.j)(Ue.U3.CODEX_FEATURE_USED,{feature:"transformation",action:"copied-to-clipboard",language:L})},small:!0}),(0,i.tZ)(Z.zx,{dataCy:"transform-code-modal-replace-button",iconLeft:(0,i.tZ)(Xi.Z,{}),text:"Replace selection",colorway:"primary",small:!0,onClick:function(){try{o(V)}catch(e){u("Couldn't replace code. Please make sure you don't edit your selection.")}(0,Ue.j)(Ue.U3.CODEX_FEATURE_USED,{feature:"transformation",action:"replaced-selection-in-editor",language:L}),r()}}),(null===_||void 0===_||null===(z=_.currentUser)||void 0===z?void 0:z.isAdmin)?(0,i.tZ)(Z.u,{tooltip:(0,i.tZ)(Z.G7,{children:(0,i.tZ)("pre",{css:[{whiteSpace:"pre-wrap"}],children:JSON.stringify(JSON.parse(_.transformCode.metadata),null," ")})}),placement:"bottom",children:(0,i.tZ)(Z.hU,{colorway:"warning",alt:"Debug metadata",tooltipHidden:!0,children:(0,i.tZ)(Ei.Z,{})})}):null]})]})]}),(0,i.tZ)(Z.G7,{css:[Z.l0.flex.row,Z.l0.align.baseline,Z.l0.justify.spaceBetween],children:(0,i.tZ)(ii,{inferenceId:q,language:L,inferenceClass:qr.Sg.Transformation})})]})}else N||I||(W=null);return(0,i.tZ)(Te,{dataCy:"transform-code-modal",title:"Transform Code",onRequestClose:r,width:500,children:(0,i.BX)(Z.G7,{css:[Z.l0.p(8),Z.l0.colWithGap(8)],children:[(0,i.BX)(Z.G7,{tag:"form",onSubmit:function(e){e.preventDefault(),X()},css:[Z.l0.rowWithGap(8)],children:[(0,i.tZ)(Z.II,{dataCy:"transform-code-modal-prompt-input",autoFocus:!0,placeholder:'Write a prompt (e.g. rename all variables to "foo")',value:h,onChange:function(e){return t=e.target.value,b||((0,Ue.j)(Ue.U3.CODEX_FEATURE_USED,{feature:"transformation",action:"prompt-written",language:L}),w(!0)),void p(t);var t},ref:x,onKeyDown:function(e){"Escape"===e.key&&r(),e.metaKey&&"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),X())}}),(0,i.tZ)(Z.zx,{dataCy:"transform-code-modal-submit-button",text:"Transform",colorway:"primary",disabled:N||""===h,type:"submit",iconRight:!N&&T?(0,i.tZ)(Ii.Z,{}):(0,i.tZ)(Ri.Z,{})})]}),W]})})}function zi(e){var t=e.dom,n=(0,ln.Z)(e,["dom"]);return qe.createPortal((0,i.tZ)(ji,(0,R.Z)({},n)),t)}var Hi=n(88689);function Vi(e,t){if(0===e.length)return pe.n0.fromJSON([t,-1]);for(var n=[],r=0,i=0;i<e.length;i++)for(var o=e[i],a=0;a<o.changes.length;a++){var l=o.changes[a],c=o.fromA+l.fromA,s=o.fromA+l.toA,u=o.fromB+l.fromB,d=o.fromB+l.toB;c>r&&n.push(c-r,-1),n.push(s-c,d-u),r=s}return r<t&&n.push(t-r,-1),pe.n0.fromJSON(n)}var qi,$i,Yi=function(){function e(t,n,r,i){var o;if((0,ze.Z)(this,e),this.text=t,this.chunks=null,this.changes=null,this.pending=null,!t)return this.isIgnored=!0,this.isAddedFile=!1,void(this.hasNoChanges=!0);if(this.isIgnored=!1,this.isAddedFile=0===t.length,r&&i){var a,l,c=null!==(l=null===(a=r.pending)||void 0===a?void 0:a.length)&&void 0!==l?l:i.changes.length,s=Math.abs(i.changes.newLength-c);if(!r.changes||s>=250||function(e){return!(e.isUserEvent("input.type")||e.isUserEvent("delete.forward")||e.isUserEvent("delete.backward"))}(i)){var u=r.pending?r.pending.composeDesc(i.changes):i.changes;this.chunks=r.chunks?Hi.z.updateB(r.chunks,t,n,u):Hi.z.build(t,n),this.changes=Vi(this.chunks,t.length)}else this.chunks=r.chunks,this.changes=r.changes.composeDesc(i.changes),this.pending=r.pending?r.pending.composeDesc(i.changes):i.changes}else this.chunks=Hi.z.build(t,n),this.changes=Vi(this.chunks,t.length);this.hasNoChanges=!this.isAddedFile&&0===(null===(o=this.chunks)||void 0===o?void 0:o.length)}var t=e.prototype;return t.isEqual=function(e){return null===e?null===this.text:null!==this.text&&this.text.length===e.length&&(0===this.text.length&&0===e.length||this.text.toString()===e)},t.forEachChange=function(e){null!==this.changes&&this.changes.iterChangedRanges((function(t,n,r,i){return e(r,i)}),!0)},e}(),Ki=pe.Py.define(),Qi=pe.QQ.define({create:function(e){return new Yi(null,e.doc)},update:function(e,t){var n=!0,r=!1,i=void 0;try{for(var o,a=t.effects[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;if(l.is(Ki)){var c=null===l.value?null:t.state.toText(l.value);return new Yi(c,t.newDoc)}}}catch(s){r=!0,i=s}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t.docChanged?new Yi(e.text,t.newDoc,e,t):e}}),Ji=Z.TV.space2,eo="cm-git-diff-gutter",to="".concat(eo,"-element"),no="".concat(to,"-added"),ro="".concat(to,"-modified"),io="".concat(to,"-file-added"),oo=Z.TV.greenDefault,ao=Z.TV.greenStronger,lo=Z.TV.blueDefault,co=Z.TV.blueStronger,so=Z.TV.greenDimmer,uo=Z.TV.greenDefault,fo=ve.tk.baseTheme((qi={},(0,o.Z)(qi,".".concat(eo,", .").concat(to),{width:Ji}),(0,o.Z)(qi,".".concat(no),{backgroundColor:oo,"&.cm-activeLineGutter":{backgroundColor:ao}}),(0,o.Z)(qi,".".concat(ro),{backgroundColor:lo,"&.cm-activeLineGutter":{backgroundColor:co}}),(0,o.Z)(qi,".".concat(io),{backgroundColor:so,"&.cm-activeLineGutter":{backgroundColor:uo}}),qi));!function(e){e[e.ADDED=0]="ADDED",e[e.MODIFIED=1]="MODIFIED",e[e.FILE_ADDED=2]="FILE_ADDED"}($i||($i={}));var ho=function(e){(0,He.Z)(n,e);var t=(0,Ve.Z)(n);function n(e){var r;switch((0,ze.Z)(this,n),r=t.call(this),e){case $i.ADDED:r.elementClass="".concat(to," ").concat(no);break;case $i.MODIFIED:r.elementClass="".concat(to," ").concat(ro);break;case $i.FILE_ADDED:r.elementClass="".concat(to," ").concat(io)}return r}return n.prototype.eq=function(e){return(0,fn.Z)(e,n)&&this.elementClass===e.elementClass},n}(ve.SJ),po=(0,ve.v5)({class:eo,markers:function(e){var t=e.state.doc,n=e.state.field(Qi,!1);if(!n||n.isIgnored)return[];if(n.hasNoChanges)return[];if(1===t.lines){var r=n.isAddedFile?new ho($i.FILE_ADDED):new ho($i.ADDED);return pe.Xs.of([{from:0,to:0,value:r}])}var i=e.viewport.from,o=e.viewport.to,a=new pe.f_;if(n.isAddedFile){for(var l=t.lineAt(i),c=t.lineAt(o),s=l.number;s<=c.number;s++){var u=t.line(s).from,d=new ho($i.FILE_ADDED);a.add(u,u,d)}return a.finish()}var f=new Set,h=function(e,t){f.has(e.number)||(f.add(e.number),a.add(e.from,e.from,new ho(t)))};return n.forEachChange((function(e,n){if(!(i>n||o<e))if(e!==n){var r=t.lineAt(e),a=t.lineAt(n);if(!f.has(r.from)||!f.has(a.from))for(var l=r.number;l<=a.number;l++){var c=t.line(l);c.from!==n&&(c.from>=e&&c.to<=n?h(c,$i.ADDED):h(c,$i.MODIFIED))}}else h(t.lineAt(e),$i.ADDED)})),a.finish()},lineMarkerChange:function(e){if(e.geometryChanged)return!0;var t=!0,n=!1,r=void 0;try{for(var i,o=e.transactions[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value,l=!0,c=!1,s=void 0;try{for(var u,d=a.effects[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){if(u.value.is(Ki))return!0}}catch(f){c=!0,s=f}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}}}catch(f){n=!0,r=f}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return!1}}),vo=pe.Wl.highest([fo,po]),mo=function(){function e(t,n,r){var i=this;(0,ze.Z)(this,e),this.view=t,this.git=n,this.path=r,this.disposed=!1,this.dispose=n.onRefresh((function(){return i.fetchThenUpdateState()})),this.fetchThenUpdateState()}var t=e.prototype;return t.fetchThenUpdateState=function(){var e=this;return(0,de.Z)((function(){var t,n,r,i;return(0,fe.__generator)(this,(function(o){switch(o.label){case 0:return[4,e.git.getFileContents({path:e.path,revision:"HEAD"})];case 1:return t=o.sent(),e.disposed?[2]:void 0===(n=e.view.state.field(Qi,!1))?[2]:(i=t.error?null:null!==(r=t.content)&&void 0!==r?r:"",n.isEqual(i)||e.view.dispatch({effects:Ki.of(i)}),[2])}}))}))()},t.destroy=function(){this.dispose(),this.disposed=!0},e}();function go(e,t,n){var r=(0,l.useState)((function(){return new pe.F6}))[0],i=(0,x.Z)(e);(0,l.useEffect)((function(){if(n){var e=i.current();if(e){var t=void 0===r.get(n.state)?pe.Py.appendConfig.of(r.of(e)):r.reconfigure(e);return n.dispatch({effects:t}),function(){n.dispatch({effects:r.reconfigure([])})}}}}),[n,r,i].concat((0,I.Z)(t)))}function Zo(e){var t=e.view,n=e.filePath,r=(0,Ut.P)({controlName:"flag-git-gud"}),i=(0,Ut.P)({controlName:"flag-git-gud-gutter"}),o=(0,f.Z)().git;go((function(){return r&&i?function(e,t){if(!t)return[];var n=ve.lg.define((function(n){return new mo(n,e,t)}));return[Qi,vo,n]}(o,n):null}),[r,i,o,n],t)}var yo=n(95706),bo=n(62426),wo=n(5784),xo=n(76538),Co=n(2134),ko=n(81461),So=n(283),Eo=n(59313),To=n(46350),Ro=n(50609),_o=n(99231),Io=(0,_o._C)({keyword:yo.Z,constant:bo.Z,class:So.Z,interface:Eo.Z,function:wo.Z,method:wo.Z,variable:xo.Z,file:Co.Z,field:Co.Z,property:ko.Z,type:To.Z,namespace:Ro.Z});function Go(e){var t=e.size;return(0,i.tZ)("span",{css:{width:t,height:t},children:"\xa0"})}var Do={render:function(e){var t,n=document.createElement("span"),r=null!==(t=Io.get(e.type))&&void 0!==t?t:Go;return qe.render((0,i.tZ)("span",{className:"cm-autocomplete-replit-icon",children:(0,i.tZ)(r,{size:12})}),n),n},position:20},Po=n(24263),Bo=n(14176);function Uo(e){return!On(e.state)&&(0,It.dk)(e)}function Ao(e){return(0,It.dk)(e)}function No(e){return!On(e.state)&&("active"===(0,It.LR)(e.state)?((0,It._B)(e),e.dispatch({effects:Bo.he.of(Po.z.Now)}),!0):((0,It._B)(e),!1))}function Lo(e){var t=e.view,n=(0,me.Z)({view:t});l.useEffect((function(){t&&t.dispatch({effects:n.reconfigure([pe.Wl.high(ve.$f.of([{key:"Tab",run:Uo},{key:"Enter",run:Ao},{key:"Escape",run:No},{key:"Ctrl-Space",run:It.WA},{key:"ArrowDown",run:(0,It.gq)(!0)},{key:"ArrowUp",run:(0,It.gq)(!1)},{key:"PageDown",run:(0,It.gq)(!0,"page")},{key:"PageUp",run:(0,It.gq)(!1,"page")}]))])})}),[t,n])}function Xo(e){var t=e.view,n=(0,P.useRouter)(),r=(0,er.Z)().preferences.codeIntelligence,i=(0,G.Vg)(n)||!r,o=(0,me.Z)({view:t});Lo({view:t}),(0,l.useEffect)((function(){if(t&&!i)return t.dispatch({effects:o.reconfigure([(0,It.ys)({defaultKeymap:!1,icons:!1,addToOptions:[Do]})])}),function(){t.dispatch({effects:o.reconfigure([])})}}),[t,o,i])}function Mo(e){var t=e.view,n=e.line,r=e.col,i=t.state.doc,o=Math.max(1,Math.min(n,i.lines)),a=i.line(o),l=a.to,c=a.from,s=r||0,u=Math.min(c+s,l),d=pe.jT.cursor(u);t.dispatch({selection:d,effects:[ve.tk.scrollIntoView(u,{x:"center",y:"center"})]}),t.focus()}var Oo=n(51274);function Wo(){var e=l.useRef((0,lt.u)(new Map)).current,t=l.useCallback((function(t){var n=new Map(e.current);t(n),e.current=n}),[e]),n=l.useCallback((function(){e.current=new Map}),[e]);return(0,tt.Z)((function(){return{observable:e,update:t,unmount:n}}),[t,e,n])}var Fo=function(e){var t=e.source,n=(0,ct.Z)(t);return(0,i.tZ)(i.HY,{children:Array.from(n,(function(e){var t=(0,a.Z)(e,2),n=t[0],r=t[1];return(0,i.tZ)(l.Fragment,{children:r},n)}))})},jo=n(53698);var zo=n(53706),Ho=pe.Py.define(),Vo=pe.QQ.define({create:function(){return null},update:function(e,t){var n=e;return(0,ge.j)(t,Ho,(function(e){n=e.value})),n}});function qo(e,t){return $o.apply(this,arguments)}function $o(){return $o=(0,de.Z)((function(e,t){var n,r,i,o,a,l,c,s,u;return(0,fe.__generator)(this,(function(d){switch(d.label){case 0:return[4,e.request.documentSymbol(t)];case 1:if(!(n=d.sent())||n.cancelled)return[2,null];if(!(r="result"in n&&!n.cancelled?n.result:null))return[2,null];i=[],o=!0,a=!1,l=void 0;try{for(c=r[Symbol.iterator]();!(o=(s=c.next()).done);o=!0)(u=s.value)&&"range"in u&&i.push(u)}catch(f){a=!0,l=f}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}return[2,i.length?i:null]}}))})),$o.apply(this,arguments)}var Yo=n(92398),Ko=n(33575),Qo=n(63281),Jo=n(21477),ea=n(92555),ta=n(19540);function na(e){var t=e.view,n=e.filePath,r=e.isLoading,i=e.decorations,o=(0,er.Z)().preferences.codeIntelligence,a=(0,f.Z)(),c=a.session,s=a.fs,u=a.dotReplit,d=(0,Ae.Z)(n),h=Le(d),p=(0,Ut.P)({controlName:"flag-lsp-hover-cmd-definition"}),v=function(e){var t=e.view,n=e.filePath,r=l.useRef(null),i=(0,f.Z)().fs,o=(0,Ae.Z)(n),a=l.useCallback(function(){var e=(0,de.Z)((function(e,a){var l,c,s;return(0,fe.__generator)(this,(function(u){switch(u.label){case 0:if(!t)throw new Error("Expected view");if(!o)throw new Error("Expected client");if(!n)throw new Error("Expected non-null file path");if(null==a)throw new Error("Expected rename input params");return r.current&&o.notify.cancelRequest(r.current),l=o.generateId(),r.current=l,[4,o.request.rename(n,(0,at.s)(t.state.doc,a),e,{id:l,tap:(0,vr.M)(t)})];case 1:if(c=u.sent(),r.current=null,"error"in c)throw new Error("Something went wrong renaming ".concat(c.error.message));return c.cancelled?[2]:(s=c.result)?((0,jo.w)({edit:s,fs:i,client:o}),t.dispatch({effects:[kr.of(null)]}),[2]):[2]}}))}));return function(t,n){return e.apply(this,arguments)}}(),[o,t,n,i]),c=l.useCallback((function(){if(!t)throw new Error("Expected view");t.dispatch({effects:[kr.of(null)]}),t.focus()}),[t]);return l.useMemo((function(){return{onRename:a,closeRenameInput:c}}),[a,c])}({view:t,filePath:n});!function(e){var t=e.view,n=e.filePath,r=e.lspClient;go((function(){if(!t||!n||!r)return null;if(!Ne(r).isDocumentSymbolSupported)return null;var e=(0,zo.Z)((0,de.Z)((function(){var e;return(0,fe.__generator)(this,(function(i){switch(i.label){case 0:return[4,qo(r,n)];case 1:return e=i.sent(),t.dispatch({effects:Ho.of(e)}),[2]}}))})),{wait:200}),i=ve.tk.updateListener.of((function(t){t.docChanged&&e()}));return e(),[i,Vo]}),[t,n,r],t)}({view:t,filePath:n,lspClient:d}),Lo({view:t});var m=r||!o||!t||!d||!h||!d.isSupportedFile(n),g=(0,me.Z)({view:t}),Z=(0,Yo.dK)(),y=(0,Ko.d)(),b=(0,Qo.ql)(),w=(0,ta.AA)(),x=l.useCallback((function(e){Z({type:"ghostwriterChat"});var t=w();b({text:(0,ea.Vh)(e),type:Jo.NK.Debugger,fs:s,dotReplit:u,recentFiles:t})}),[Z,b,s,u,w]);l.useEffect((function(){if(!m)return t.dispatch({effects:g.reconfigure([Dr({lspClient:d,path:n,decorations:i,rename:v,session:c,askGhostwriter:y?x:void 0,hintDefinitionEnabled:p})])}),function(){t.dispatch({effects:g.reconfigure([])}),i.unmount()}}),[d,t,h,g,n,c,i,v,m,x,y,p]),l.useEffect((function(){if(d&&(n&&Ne(d).isTextDocumentSyncSupported))return s.watchTextFile(n,{onFlush:function(){d.isOpen(n)&&d.notify.didSave(n)}})}),[s,n,d])}var ra=n(2029),ia=n(82002),oa=n(63110),aa=pe.q6.define();var la=n(12018),ca=n(28110),sa={"#1BC47D":"rgba(27, 196, 125, 0.2)","#EF5533":"rgba(239, 85, 51, 0.2)","#18A0FB":"rgba(24, 160, 251, 0.2)","#FFC700":"rgba(255, 199, 0, 1)","#907CFF":"rgba(144, 124, 255, 0.2)","#00B5CE":"rgba(0, 181, 206, 0.2)","#EE46D3":"rgba(238, 70, 211, 0.2)"};var ua=pe.Py.define(),da=pe.Py.define(),fa=pe.Py.define(),ha=pe.QQ.define({create:function(){return{}},update:function(e,t){if(!t.changes.empty){var n=function(e){return t.changes.mapPos(Math.min(t.changes.length,e))},r={},i=!0,o=!1,l=void 0;try{for(var c,s=Object.values(e)[Symbol.iterator]();!(i=(c=s.next()).done);i=!0){var u=c.value;r[u.id]=(0,_.Z)((0,R.Z)({},u),{position:n(u.position),selectionStart:n(u.selectionStart),selectionEnd:n(u.selectionEnd)})}}catch(k){o=!0,l=k}finally{try{i||null==s.return||s.return()}finally{if(o)throw l}}e=r}var d=!0,f=!1,h=void 0;try{for(var p,v=t.effects[Symbol.iterator]();!(d=(p=v.next()).done);d=!0){var m=p.value;if(m.is(ca.R)&&(e=(0,R.Z)({},e)),m.is(ua)&&m.value.position<=t.newDoc.length&&((e=(0,R.Z)({},e))[m.value.id]=(0,R.Z)({},m.value)),m.is(da)&&(e=(0,R.Z)({},e),m.is(da)&&delete e[m.value]),m.is(fa)){e=(0,R.Z)({},e);var g=!0,Z=!1,y=void 0;try{for(var b,w=Object.entries(e)[Symbol.iterator]();!(g=(b=w.next()).done);g=!0){var x=(0,a.Z)(b.value,2),C=x[0];x[1].username===m.value&&delete e[C]}}catch(k){Z=!0,y=k}finally{try{g||null==w.return||w.return()}finally{if(Z)throw y}}}}}catch(k){f=!0,h=k}finally{try{d||null==v.return||v.return()}finally{if(f)throw h}}return e},provide:function(e){return[ve.tk.decorations.computeN([e],(function(t){var n=t.field(e);return Object.values(n).map((function(e){var t=e.selectionStart<e.selectionEnd?e.selectionStart:e.selectionEnd,n=e.selectionStart>e.selectionEnd?e.selectionStart:e.selectionEnd;return t===n?null:ve.p.set(ve.p.mark({attributes:{style:"background-color: ".concat(e.color.selection,"; display: inline-block;")},cursor:e}).range(t,n))})).filter((function(e){return null!==e}))}))]}});function pa(e){return ve.tk.updateListener.of((function(t){var n=t.state.selection;n!==t.startState.selection&&(t.transactions.every((function(e){return e.annotation(pe.YW.remote)}))||e(n.ranges.map((function(e){var n=t.state.doc.lineAt(e.head);return{position:e.head,line:n.number,column:e.head-n.from+1,selectionStart:e.from,selectionEnd:e.to}})),n.mainIndex))}))}function va(e){var t=e.view,n=e.presence,r=e.fs,i=e.filePath,a=(0,l.useState)(null),c=a[0],s=a[1],u=(0,la.Z)({presence:n}),d=(0,l.useRef)({}),f=(0,it.Z)();(0,l.useEffect)((function(){var e=u.reduce((function(e,t){return t.username&&t.color?(0,_.Z)((0,R.Z)({},e),(0,o.Z)({},t.username,t.color)):e}),{});d.current=e}),[u]);var h=(0,me.Z)({view:t});return(0,l.useEffect)((function(){if(t){var e=n.onUserLeave((function(e){t.dispatch({effects:fa.of(e.username)})})),o=r.watchTextFile(i,{onReady:function(e){var n=e.updateSelections;t.dispatch({effects:h.reconfigure([ha,pa((function(e){n(e)}))])}),s(i)},onCursor:function(e){var n=function(e){var t,n=e.cursor,r=e.usernameColorsMap,i=null===(t=n.user)||void 0===t?void 0:t.name;if(i){var o,a=n.id,l=n.position,c=n.selectionStart,s=n.selectionEnd,u=r[i];if(u&&a&&"number"===typeof l&&"number"===typeof c&&"number"===typeof s)return ua.of({id:a,username:i,position:l,color:{cursor:u,selection:(o=u,sa[o]||"")},selectionStart:c,selectionEnd:s})}}({cursor:e,usernameColorsMap:d.current});n&&t.dispatch({effects:n})},onRemoveCursor:function(e){t.dispatch({effects:da.of(e)})},onError:function(){t.dispatch({effects:h.reconfigure([])})},onMoveOrDelete:function(){t.dispatch({effects:h.reconfigure([])})}});return function(){e(),o(),t.dispatch({effects:h.reconfigure([])}),f.current&&s(null)}}}),[t,i,r,n,h]),{loadedFile:c}}var ma=n(63530);var ga=ve.tk.theme({".multiplayer-cursor":{width:"2px",left:"0",top:"0"},".multiplayer-cursor .multiplayer-label":{boxShadow:Z.TV.shadow1,borderRadius:Z.TV.borderRadius4,padding:"1px",position:"absolute",left:"0px",animation:"fadeOut 2s ease-in forwards",color:"white",display:"inline-block"},".multiplayer-cursor:hover .multiplayer-label":{animation:"auto"}});function Za(e){e.style.transform="translate(-10000px, -10000px)"}function ya(e){var t=document.createElement("div");t.textContent=e.username,t.style.backgroundColor=e.color.cursor,t.classList.add("multiplayer-label");var n=document.createElement("div");return n.classList.add("multiplayer-cursor"),n.style.backgroundColor=e.color.cursor,n.style.position=q.gn?"absolute":"fixed",n.appendChild(t),{dom:n,label:t}}var ba=new Map;function wa(e){return"".concat(e.username,":").concat(e.position,":").concat(e.selectionStart,":").concat(e.selectionEnd)}var xa=ve.lg.define((function(e){var t=function(){c&&(c.disconnect(),o.forEach((function(e){c.observe(e.view.dom)})))},n=function(){if(!Boolean(!i||0===Object.values(i).length)&&(e.inView&&e.requestMeasure(u),a!==e.inView)){if(a=e.inView)return;o.forEach((function(e){Za(e.view.dom)}))}},r=function(){null===s&&(s=setTimeout((function(){s=null,n()}),50))},i=e.state.field(ha,!1),o=new Map((i?Object.values(i):[]).map((function(e){return[e.id,{view:ya(e),cursor:e}]}))),a=!0,l=0,c="function"===typeof IntersectionObserver?new IntersectionObserver((function(e){Date.now()>l-50&&e.length>0&&e[e.length-1].intersectionRatio<1&&r()}),{threshold:[1]}):null;t();var s=null;window.addEventListener("resize",r);var u={read:function(){return{editorRect:e.scrollDOM.getBoundingClientRect(),dimensions:new Map((i?Object.values(i):[]).map((function(t){var n=o.get(t.id),r=n?function(e,t){var n=ba.get(e);if(n)return n;var r=t.getBoundingClientRect().width;return ba.set(e,r),r}(t.username,n.view.label):null;return[t.id,{position:e.coordsAtPos(t.position),labelWidth:r}]})))}},write:function(e){o.forEach((function(t,n){var r=e.dimensions.get(n);!function(e){var t=e.cursorView,n=e.position,r=e.labelWidth,i=e.editorRect,o=t.dom,a=t.label;if(n&&r){var l=n.bottom-n.top;if(n.bottom<=i.top+l||n.top+l>=i.bottom||n.right<i.left-.1||n.left>i.right+.1)Za(o);else{var c=n.left+r-i.right,s="0px";c>0?(s="-".concat(c,"px"),a.style.borderBottomLeftRadius="4px"):a.style.borderBottomLeftRadius="0px",a.style.transform="translate(".concat(s,", -100%)");var u=q.gn?{x:n.left-i.left+"px",y:n.top-i.top+"px"}:{x:"calc(".concat(n.left,"px + var(--fixed-position-offset-x))"),y:"calc(".concat(n.top,"px + var(--fixed-position-offset-y))")},d=u.x,f=u.y;o.style.transform="translate(".concat(d,", ").concat(f,")"),o.style.height=l+"px"}}else Za(o)}({cursorView:t.view,position:(null===r||void 0===r?void 0:r.position)||null,labelWidth:(null===r||void 0===r?void 0:r.labelWidth)||null,editorRect:e.editorRect})}))},key:Math.random().toString()};return{update:function(r){r.transactions.length&&(l=Date.now());var a=r.state.field(ha,!1);if(a!==r.startState.field(ha,!1)){var c=new Map,s=new Set;if(a){var u=new Map((0,I.Z)(o.values()).map((function(e){return[wa(e.cursor),e.view]})));Object.values(a).forEach((function(t){var n=u.get(wa(t));if(n)s.add(n),c.set(t.id,{view:n,cursor:t});else{var r=ya(t);c.set(t.id,{view:r,cursor:t}),e.dom.appendChild(r.dom)}}))}o.forEach((function(e){s.has(e.view)||e.view.dom.remove()})),o=c,i=a,t(),n()}else r.geometryChanged&&n()},destroy:function(){window.removeEventListener("resize",r),o.forEach((function(e){e.view.dom.remove()})),i=void 0,o=new Map,null===c||void 0===c||c.disconnect(),s&&clearTimeout(s)},maybeMeasure:n}}),{eventHandlers:{scroll:function(){this.maybeMeasure()}}}),Ca=[ga,xa];function ka(e){var t=e.view,n=e.presence,r=e.fs,i=e.filePath,o=function(e){var t=e.view,n=e.fs,r=e.filePath,i=(0,l.useState)(null),o=i[0],a=i[1],c=(0,it.Z)(),s=(0,me.Z)({view:t}),u=(0,ra.Z)().trackTimeToLoadFileEnd,d=(0,ia.uV)();return(0,l.useEffect)((function(){if(t){var e=0,i=n.watchTextFile(r,{onReady:function(i){var o=i.initialContent,l=i.writeChange,c=i.version;e=c,u(r),t.dispatch({changes:{from:0,to:t.state.doc.length,insert:o},annotations:[pe.YW.addToHistory.of(!1),pe.YW.remote.of(!0),aa.of(!0)]}),t.dispatch({effects:s.reconfigure(ve.tk.updateListener.of((function(t){if(t.docChanged){var i=!0,o=!1,a=void 0;try{for(var c,s=function(){var i=c.value;if(i.annotation(pe.YW.remote)||i.annotation(aa))return"continue";var o=i.annotation(oa.Z)?{author:"ghostwriter"}:{};try{l(i.changes,o)}catch(a){throw n.readFile(r,{fromDisk:!1}).then((function(n){var o="replitReadError: "+n.error;n.error||(o=n.content.toString()),d({origin:"Codemirror: ot/writeChange",error:a,tags:{ot:!0},extras:{filePath:r,transactionChanges:JSON.stringify(i.changes),otherTransactionChanges:JSON.stringify(t.transactions.filter((function(e){return e!==i})).map((function(e){return e.changes}))),transactionDoc:i.newDoc.sliceString(0),updateDoc:t.state.doc.sliceString(0),otClientDoc:o,version:e}})})),a}},u=t.transactions[Symbol.iterator]();!(i=(c=u.next()).done);i=!0)s()}catch(f){o=!0,a=f}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}}})))}),a(r)},onChange:function(i){var o=i.changes,a=i.changeSource,l=i.version;e=l;try{t.dispatch({changes:o,annotations:[pe.YW.remote.of(a===y.Fl.Container),pe.YW.addToHistory.of(a===y.Fl.Local),aa.of(!0)]})}catch(c){throw n.readFile(r,{fromDisk:!1}).then((function(e){var n="replitReadError: "+e.error;e.error||(n=e.content.toString()),d({origin:"Codemirror: ot/syncRemoteOp",error:c,tags:{ot:!0},extras:{filePath:r,changes:JSON.stringify(o),changeSource:a,version:l,otClientDoc:n,cmDoc:t.state.doc.sliceString(0)}})})),c}},onError:function(){t.dispatch({effects:s.reconfigure([])})},onMoveOrDelete:function(){t.dispatch({effects:s.reconfigure([])})}});return function(){i(),t.dispatch({effects:[s.reconfigure([])]}),c.current&&a(null)}}}),[t,r,n,c,s,u,d]),{loadedFile:o}}({view:t,fs:r,filePath:i}),a=o.loadedFile,c=va({view:t,fs:r,filePath:i,presence:n}).loadedFile;!function(e){var t=e.view,n=(0,f.Z)().presence,r=(0,ma.Z)(),i=(0,me.Z)({view:t});l.useEffect((function(){if(r&&t){var e=function(){n.getFollowedUser()&&n.unfollowUser()};return t.dispatch({effects:i.reconfigure(ve.tk.domEventHandlers({wheel:e,keydown:function(t){"Control"!==t.key&&"Meta"!==t.key&&e()},click:e}))}),function(){t.dispatch({effects:i.reconfigure([])})}}}),[r,t,n,i]);var o=(0,me.Z)({view:t});l.useEffect((function(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(t){var n=pe.jT.cursor(e);t.dispatch({effects:[ve.tk.scrollIntoView(n,{x:"center",y:"center"})]})}};if(t&&r){var n=t.state.field(ha,!1);if(n){var i=Object.values(n).find((function(e){return e.username===r.username}));i&&e(i.position)}return t.dispatch({effects:o.reconfigure(ve.tk.updateListener.of((function(t){var n,i=!0,o=!1,a=void 0;try{for(var l,c=t.transactions[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value,u=!0,d=!1,f=void 0;try{for(var h,p=s.effects[Symbol.iterator]();!(u=(h=p.next()).done);u=!0){var v=h.value;v.is(ua)&&v.value.username===r.username&&(n=v.value)}}catch(m){d=!0,f=m}finally{try{u||null==p.return||p.return()}finally{if(d)throw f}}}}catch(m){o=!0,a=m}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}n&&e(n.position)})))}),function(){t.dispatch({effects:o.reconfigure([])})}}}),[t,r,o])}({view:t});var s=i!==a||i!==c,u=(0,me.Z)({view:t});return(0,me.Z)({view:t,initialExtension:Ca}),(0,l.useEffect)((function(){t&&t.dispatch({effects:u.reconfigure([ve.tk.editable.of(!s),pe.yy.readOnly.of(s)])})}),[t,s,u]),{isLoading:s}}var Sa=n(47382),Ea=n(16828),Ta=n(79960);function Ra(){var e=(0,a.Z)(l.useState(!1),2),t=e[0],n=e[1];return(0,i.BX)(i.HY,{children:[(0,i.tZ)("a",{css:Ea.R,onClick:function(){return n(!0)},onKeyDown:function(){return n(!0)},role:"button",tabIndex:0,children:"generate code with Ghostwriter"}),(0,i.tZ)(Ta.Z,{context:"workspace_placeholder_text",isOpen:t,onRequestClose:function(){return n(!1)},uponPurchaseGoTo:"cyclesPage",powerUp:"ghostwriter"})]})}function _a(){var e=(0,$r.Z)(["\n  query IsReplLesson($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        lesson {\n          id\n        }\n      }\n      ... on ReplRedirect {\n        __typename\n      }\n      ... on SubscriptionExpiredError {\n        __typename\n      }\n    }\n  }\n"]);return _a=function(){return e},e}var Ia={},Ga=(0,Yr.Ps)(_a());var Da=function(e){var t,n,r=function(e){var t=(0,R.Z)({},Ia,e);return li.a(Ga,t)}({variables:{replId:e.replId}}),i=r.data,o=r.loading;return{isLesson:"Repl"===(null===i||void 0===i?void 0:i.repl.__typename)&&"UserCourseLesson"===(null===i||void 0===i||null===(t=i.repl)||void 0===t||null===(n=t.lesson)||void 0===n?void 0:n.__typename),isLoading:o}},Pa=n(69978),Ba=n(62246);function Ua(){var e=(0,$r.Z)(["\n  query ReplCodeExamples($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        deprecatedLanguageConfig {\n          id\n          mainFile\n          examples {\n            name\n            code\n          }\n        }\n      }\n    }\n  }\n"]);return Ua=function(){return e},e}var Aa={},Na=(0,Yr.Ps)(Ua());var La=n(72030);function Xa(e){var t=e.name,n=e.children,r=e.onClick;return(0,i.BX)(Z.G7,{onClick:function(){return r()},css:[Z.gU.nofill,Z.l0.p(8)],children:[(0,i.tZ)(Z.xv,{variant:"subheadDefault",css:Z.l0.pb(16),children:t}),(0,i.tZ)(Z.G7,{css:[Z.l0.backgroundColor.backgroundDefault,Z.l0.p(8),Z.l0.borderRadius(8)],children:n})]})}var Ma="@media (min-width: ".concat(s.j.tabletMax,"px)"),Oa=(0,La.iv)([Z.l0.colWithGap(16),(0,o.Z)({},Ma,{width:"calc(50%  - 8px)",flex:"0 0 auto",gap:"16px"})]);function Wa(e){var t=e.children;return(0,i.tZ)(Z.G7,{css:[(0,o.Z)({},Ma,[Z.l0.rowWithGap(16)])],children:t})}function Fa(e){var t=e.mainFile,n=e.examples,r=e.onSelect,o=(0,Ut.P)({controlName:"flag-use-new-code-rendering"});return(0,i.BX)(Z.G7,{css:[Z.l0.colWithGap(24)],children:[(0,i.tZ)(Z.h4,{level:1,variant:"headerDefault",children:"Code examples"}),(0,i.tZ)(Z.xv,{multiline:!0,children:"Get started with some program examples."}),(0,i.BX)(Wa,{css:[Z.l0.colWithGap(16)],children:[(0,i.tZ)(Z.G7,{css:Oa,children:n.slice(0,(n.length+1)/2).map((function(e){return(0,i.tZ)(Xa,{name:e.name,onClick:function(){return r(e)},children:o?(0,i.tZ)(Ai.Z,{code:e.code,filePath:t,fontSize:12,disableCursorStyling:!0}):(0,i.tZ)(Ci.ZP,{code:e.code,filePath:t,fontSize:12,hideGutter:!0})},e.name)}))}),(0,i.tZ)(Z.G7,{css:Oa,children:n.slice((n.length+1)/2).map((function(e){return(0,i.tZ)(Xa,{name:e.name,onClick:function(){return r(e)},children:o?(0,i.tZ)(Ai.Z,{code:e.code,filePath:t,fontSize:12,disableCursorStyling:!0}):(0,i.tZ)(Ci.ZP,{code:e.code,filePath:t,fontSize:12,hideGutter:!0})},e.name)}))})]})]})}function ja(e){var t=e.replId,n=e.onSelect,r=function(e){var t=(0,R.Z)({},Aa,e);return li.a(Na,t)}({variables:{replId:t}}),o=r.data,a=r.loading,l=r.error;if(a)return(0,i.tZ)(Z.G7,{css:[Z.l0.colWithGap(0),Z.l0.justify.center,Z.l0.align.center,Z.l0.pt(32),Z.l0.pb(32)],children:(0,i.tZ)(ur.Z,{})});if(l)return(0,i.tZ)(Z.G7,{css:[Z.l0.colWithGap(0),Z.l0.justify.center,Z.l0.align.center,Z.l0.pt(32),Z.l0.pb(32)],children:l.message});var c="Repl"===(null===o||void 0===o?void 0:o.repl.__typename)?o.repl:null;if(!c)return null;var s=c.deprecatedLanguageConfig,u=s.mainFile,d=s.examples;return(null===d||void 0===d?void 0:d.length)?(0,i.tZ)(Fa,{mainFile:u,examples:d,onSelect:n}):(0,i.tZ)(Z.G7,{css:[Z.l0.colWithGap(0),Z.l0.justify.center,Z.l0.align.center,Z.l0.pt(32),Z.l0.pb(32)],children:(0,i.BX)(Z.xv,{multiline:!0,children:["Sorry, this language doesn\u2019t have any examples. Want to add some? Contact us at ",(0,i.tZ)("a",{href:"mailto:support@replit.com",children:"support@replit.com"}),"!"]})})}function za(){var e=(0,$r.Z)(["\n  query PlaceholderTextCurrentUser {\n    currentUser {\n      id\n      userPowerUpsByType {\n        __typename\n        ... on UserPowerUpsTypes {\n          ghostwriter {\n            active\n            CTA\n          }\n        }\n      }\n    }\n  }\n"]);return za=function(){return e},e}var Ha={},Va=(0,Yr.Ps)(za());function qa(e){var t=e.onRequestClose,n=e.filePath,r=(0,Ba.e)(Pa.y.Examples),o=(0,Ba.e)(Pa.y.Editor),c=(0,a.Z)(l.useState(!1),2),s=c[0],u=c[1],d=(0,Si.Z)(n),f=(0,gi.Z)(),h=l.useRef(null===r||void 0===r?void 0:r.isActive),p=l.useRef();p.current=null===r||void 0===r?void 0:r.isActive;var v=l.useRef(null===r||void 0===r?void 0:r.goto);return v.current=null===r||void 0===r?void 0:r.goto,l.useEffect((function(){return function(){var e;p.current&&(null===(e=v.current)||void 0===e||e.call(v,Pa.y.Editor))}}),[]),l.useEffect((function(){(null===o||void 0===o?void 0:o.isActive)&&!h.current&&(s?o.goto(Pa.y.Examples):u(!0))}),[o,t,s]),l.useEffect((function(){(null===r||void 0===r?void 0:r.isActive)?h.current=!0:h.current&&t(null)}),[t,null===r||void 0===r?void 0:r.isActive]),d?(0,i.tZ)("div",{ref:null===r||void 0===r?void 0:r.delegateTooltip,children:(0,i.tZ)(ja,{replId:f,onSelect:function(e){d({code:e.code,insertAt:0}),t({exampleName:e.name})}})}):(0,i.tZ)("div",{children:"Please make sure you have a file open"})}var $a=function(e){var t,n=e.onShowGenerateCodeModal,r=e.filePath,o=(0,Ur.Z)(),c=Da({replId:(null===o||void 0===o?void 0:o.id)||""}),s=c.isLesson,u=c.isLoading,d=(0,Ut.P)({controlName:"flag-expt-hide-placeholder-if-lesson"}),f=function(e){var t=(0,R.Z)({},Ha,e);return li.a(Va,t)}(),h=f.data,p=f.loading,v=di(),m=v.enabled,g=v.loading,y=(0,a.Z)(l.useState(!1),2),b=y[0],w=y[1],x=(null===o||void 0===o?void 0:o.language)||"",C=Sa.Z.getDocs(x),k=(0,Yo.yR)(),S=l.useCallback((function(e){(0,Ue.j)(Ue.U3.LANGUAGE_EXAMPLES_VIEWED,(0,R.Z)({language:null===o||void 0===o?void 0:o.language,replId:null===o||void 0===o?void 0:o.id},e)),w(!1)}),[o]);if(u||p||g)return null;var E="UserPowerUpsTypes"===(null===h||void 0===h||null===(t=h.currentUser)||void 0===t?void 0:t.userPowerUpsByType.__typename)&&h.currentUser.userPowerUpsByType.ghostwriter.CTA,T=!m&&(E===qr.e4.Activate||E===qr.e4.ActivateAlreadyTrialed),_=s&&d?(0,i.BX)(i.HY,{children:["Not sure what to do?"," ",(0,i.tZ)("a",{css:Ea.R,onClick:function(){k&&k()},onKeyDown:function(){k&&k()},role:"button",tabIndex:0,children:"Watch the video"})," ","and follow the written tutorial!"]}):(0,i.BX)(i.HY,{children:["Not sure what to do? Run some"," ",(0,i.tZ)("a",{"data-cy":"ws-editor-examples",css:Ea.R,onClick:function(){w(!0)},onKeyDown:function(){w(!0)},role:"button",tabIndex:0,children:"examples"}),!(0,X.isMobile)()&&m?(0,i.BX)(i.HY,{children:[C?", ":" or ",(0,i.tZ)("a",{css:Ea.R,onClick:n,onKeyDown:n,role:"button",tabIndex:0,children:"generate code"})]}):null,!(0,X.isMobile)()&&T?(0,i.BX)(i.HY,{children:[C?", ":" or ",(0,i.tZ)(Ra,{})]}):null,C&&(0,i.BX)(i.HY,{children:[", or view"," ",(0,i.tZ)("a",{target:"_blank",css:Ea.R,href:C,children:"documentation"})]})," ","(start typing to dismiss)"]});return(0,i.tZ)(i.HY,{children:(0,i.BX)("div",{css:{fontFamily:"var(--font-family-monospace)",color:"var(--foreground-dimmest)"},children:[_,(0,i.tZ)(Z.u_,{maxWidth:872,isOpen:b,onRequestClose:function(){return S(null)},children:(0,i.tZ)(qa,{onRequestClose:S,filePath:r})})]})})};function Ya(e){var t=e.dom,n=e.onShowGenerateCodeModal,r=e.filePath;return qe.createPortal((0,i.tZ)($a,{onShowGenerateCodeModal:n,filePath:r}),t)}function Ka(){var e=(0,$r.Z)(["\n  query DeprecatedLanguageConfig($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        deprecatedLanguageConfig {\n          id\n          mainFile\n        }\n      }\n    }\n  }\n"]);return Ka=function(){return e},e}var Qa={},Ja=(0,Yr.Ps)(Ka());function el(e){var t=function(e){var t=(0,R.Z)({},Qa,e);return li.a(Ja,t)}({variables:{replId:e.replId}}).data;return"Repl"===(null===t||void 0===t?void 0:t.repl.__typename)?t.repl.deprecatedLanguageConfig:null}var tl=n(31641),nl=n(24),rl=n(67837);function il(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;if(!e.valid)return[];for(var r=[],i=e.getCursor(t),o=i.next();!o.done&&r.length<n;)r.push(o.value),o=i.next();return r}var ol=pe.Py.define();function al(e){return e>500?"large":e>350?"medium":"small"}var ll=O.K.div,cl=(0,Z.Xb)({root:[W.l0.rowWithGap(8),W.l0.px(4),W.l0.py(8),{borderBottom:"1px solid",borderColor:W.TV.outlineDimmest}],buttonWrap:[W.l0.center,W.l0.height(32)],navButtonsWrap:[W.l0.rowWithGap(4),W.l0.align.center],content:[W.l0.flex.growAndShrink(1),W.l0.colWithGap(16)],layoutLarge:W.l0.rowWithGap(16),layoutNormal:W.l0.colWithGap(8),matchLabel:[W.l0.position.absolute,W.l0.top(0),W.l0.right(0),W.l0.height("100%"),W.l0.center,W.l0.pr(4)],inputControlsSmall:[W.l0.colWithGap(8),W.l0.flex.growAndShrink(1)],inputControlsLarge:[W.l0.rowWithGap(8),W.l0.align.center,W.l0.flex.growAndShrink(1)],buttonsWrap:[W.l0.rowWithGap(4),W.l0.align.center],inputRowWrap:[W.l0.flex.growAndShrink(1),W.l0.position.relative],settingsWrap:[W.l0.flex.row,W.l0.align.center,W.l0.rowWithGap(8)],replaceWrapSmall:[W.l0.colWithGap(8),{marginRight:-19}],replaceWrapLarge:[W.l0.rowWithGap(8),W.l0.align.center,{marginRight:162}],replaceInputWrap:[W.l0.flex.growAndShrink(1)],replaceButtons:[W.l0.rowWithGap(4),W.l0.align.center]});function sl(e){var t=e.view,n=function(){if(!t)throw new Error("Expected view");(0,he.g)(t);var e=t.state.selection.main;t.dispatch({effects:ve.tk.scrollIntoView(e.from,{y:"center",x:"center"})}),D<=1||_((function(t){if(null===t){var n=S.findIndex((function(t){return t.from===e.from&&t.to===e.to}));return-1===n?1:n+1}return t>=D?1:t+1}))},r=function(){if(!t)throw new Error("Expected view");(0,he.a7)(t);var e=t.state.selection.main;t.dispatch({effects:ve.tk.scrollIntoView(e.from,{y:"center",x:"center"})}),D<=1||_((function(t){if(null===t){var n=S.findIndex((function(t){return t.from===e.from&&t.to===e.to}));return-1===n?1:n+1}return t<=1?D||1:t-1}))},o=function(e){var n=e;return!!t&&(0,ve.$1)(t,n,"search-panel")},c=(0,a.Z)(l.useState(!1),2),s=c[0],u=c[1],d=(0,a.Z)(l.useState(!1),2),f=d[0],p=d[1],v=(0,a.Z)(l.useState(!1),2),m=v[0],g=v[1],Z=(0,a.Z)(l.useState(""),2),y=Z[0],b=Z[1],w=(0,a.Z)(l.useState(""),2),x=w[0],C=w[1],k=(0,a.Z)(l.useState([]),2),S=k[0],E=k[1],T=(0,a.Z)(l.useState(null),2),R=T[0],_=T[1],I=(0,it.Z)(),G=l.useRef(new he.Jb({search:""})),D=S.length,P=l.useCallback((function(e){e.eq(G.current)||(b(e.search),C(e.replace),p(e.caseSensitive),g(e.regexp),G.current=e)}),[]),B=l.useCallback((function(){u(!0)}),[]),U=l.useCallback(V()((function(e){I.current&&(E(il(G.current,e)),_(null))}),250),[]);l.useEffect((function(){return function(){return U.cancel()}}),[]),function(e){var t=e.view,n=e.onDocChanged,r=e.onSearchQuery,i=e.onExpandSearchPanel;l.useEffect((function(){t&&t.dispatch({effects:pe.Py.appendConfig.of([ve.tk.updateListener.of((function(e){e.transactions.forEach((function(e){e.effects.forEach((function(e){e.is(he.ql)&&r(e.value),e.is(ol)&&i()}))}))})),ve.tk.updateListener.of((function(e){e.docChanged&&n(e.view.state.doc)}))])})}),[t,r,i])}({view:t,onSearchQuery:P,onExpandSearchPanel:B,onDocChanged:U}),l.useEffect((function(){if(t){var e=(0,he.uP)(t.state);b(e.search),C(e.replace),p(e.caseSensitive),g(e.regexp),G.current=e}}),[t]),l.useEffect((function(){if(t){var e=new he.Jb({search:y,replace:x,caseSensitive:f,regexp:m}),n=G.current;e.eq(n)||(G.current=e,t.dispatch({effects:he.ql.of(e)}),E(il(e,t.state.doc)),_(null))}}),[t,y,x,f,m]);var A=(0,a.Z)(l.useState(al(0)),2),N=A[0],L=A[1],X=(0,h.Z)((function(e){e.width&&L(al(e.width))}));if(!t)return null;var M=D>0,W=y.length>0?"0 / 0":null,F=M?"".concat(R||1," / ").concat(D):W,j=F?8*F.length:null,z=(0,i.BX)(O.G,{css:cl.settingsWrap,children:[(0,i.tZ)(nl.X,{id:"Match case",name:"case",checked:f,onChange:function(){p((function(e){return!e}))}}),(0,i.tZ)(Ye.xv,{variant:"small",color:f?"default":"dimmer",children:"Match case"}),(0,i.tZ)(nl.X,{id:"Regexp",name:"re",checked:m,onChange:function(){g((function(e){return!e}))}}),(0,i.tZ)(Ye.xv,{variant:"small",color:m?"default":"dimmer",children:"Regexp"})]});return(0,i.tZ)(ll,{ref:X,onKeyDown:function(e){o(e)&&e.preventDefault()},children:(0,i.BX)(ye.T,{elevated:!0,css:cl.root,children:[(0,i.tZ)(O.G,{css:cl.buttonWrap,children:(0,i.tZ)(Ze.h,{alt:s?"Close replace panel":"Show replace panel",onClick:function(){u((function(e){return!e}))},children:(0,i.tZ)(rl.Z,{rotate:s?90:0,style:{transition:"200ms ease"}})})}),(0,i.BX)(O.G,{css:cl.content,children:[(0,i.BX)(O.G,{css:"large"===N?cl.layoutLarge:cl.layoutNormal,children:[(0,i.BX)(O.G,{css:"small"===N?cl.inputControlsSmall:cl.inputControlsLarge,children:[(0,i.BX)(O.G,{css:cl.inputRowWrap,children:[(0,i.tZ)(tl.II,{style:{padding:4,paddingRight:null!==j&&void 0!==j?j:void 0},placeholder:"Find",value:y,name:"search","main-field":"true",onKeyDown:function(e){(0,Sr.j)(e)&&"f"===e.key?e.currentTarget.select():"enter"===e.key.toLowerCase()&&(o(e)||(e.preventDefault(),e.shiftKey?r():n()))},onChange:function(e){b(e.target.value)}}),F?(0,i.tZ)(O.G,{css:cl.matchLabel,children:(0,i.tZ)(Ye.xv,{variant:"small",color:"dimmest",children:F})}):null]}),(0,i.BX)(O.G,{css:cl.navButtonsWrap,children:[(0,i.tZ)(Ze.h,{alt:"Previous",onClick:function(){r()},children:(0,i.tZ)(rl.Z,{rotate:-90})}),(0,i.tZ)(Ze.h,{alt:"Next",onClick:function(){n()},children:(0,i.tZ)(rl.Z,{rotate:90})}),(0,i.tZ)(br.zx,{small:!0,text:"Select all",onClick:function(){(0,he.i3)(t),t.focus()}})]})]}),z]}),s?(0,i.BX)(O.G,{css:"small"===N?cl.replaceWrapSmall:cl.replaceWrapLarge,children:[(0,i.tZ)(O.G,{css:cl.replaceInputWrap,children:(0,i.tZ)(tl.II,{style:{padding:4},placeholder:"Replace",name:"replace",value:x,onKeyDown:function(e){"enter"===e.key.toLowerCase()&&(o(e)||(e.preventDefault(),(0,he.K9)(t)))},onChange:function(e){C(e.target.value)}})}),(0,i.BX)(O.G,{css:cl.replaceButtons,children:[(0,i.tZ)(br.zx,{small:!0,text:"Replace",onClick:function(){(0,he.K9)(t)}}),(0,i.tZ)(br.zx,{small:!0,text:"Replace all",onClick:function(){(0,he.ko)(t)}})]})]}):null]}),(0,i.tZ)(O.G,{css:cl.buttonWrap,children:(0,i.tZ)(Ze.h,{alt:"Close Search Panel",tooltipHidden:!0,onClick:function(){(0,he.N$)(t)},children:(0,i.tZ)(xe.Z,{})})})]})})}function ul(e){var t=e.dom,n=e.view;return qe.createPortal((0,i.tZ)(sl,{view:n}),t)}var dl=n(97693);function fl(e){var t=e.view,n=e.filePath,r=e.isLoading,i=function(){var e=(0,l.useContext)(dl.Z);if(!e)throw new Error("Expected codemirror state to be in codemirror state context");return e}(),o=(0,me.Z)({view:t});(0,l.useEffect)((function(){if(t&&!r){var e,a=i.current.fileMap.get(n);if(a&&t.state.doc.eq(a.doc)){if(t.state.field(z.cE,!1))throw new Error("History was preconfigured on this view, if you want to use state cache, please make sure history is not already configured for this view");var l=[];a.foldedRanges.between(0,t.state.doc.length,(function(e,t){l.push(cn.SW.of({from:e,to:t}))})),t.dispatch({effects:(0,I.Z)(l).concat([ve.tk.scrollIntoView(a.scrollPos,{y:"start"})]),selection:a.selection}),e=[z.cE.init((function(){return a.history})),(0,z.m8)()]}else e=(0,z.m8)();var c=!1,s={read:function(e){if(!c){var t=i.current.fileMap.get(n);if(t){var r=function(e){var t=e.scrollDOM.getBoundingClientRect();if(0===t.top&&0===t.bottom)return null;var n=t.top+e.defaultLineHeight;return e.posAtCoords({x:0,y:n},!1)}(e);null===r||r>t.doc.length||i.current.fileMap.set(n,(0,_.Z)((0,R.Z)({},t),{scrollPos:r}))}}}},u=!1;return t.dispatch({effects:o.reconfigure([e,ve.tk.updateListener.of((function(e){c||(!function(e){var t,r=i.current.fileMap.get(n),o=null!==(t=null===r||void 0===r?void 0:r.scrollPos)&&void 0!==t?t:0;i.current.fileMap.set(n,{history:e.field(z.cE,!1),foldedRanges:(0,cn.q2)(e),selection:e.selection,doc:e.doc,scrollPos:o})}(e.state),u||(u=!0,e.view.requestMeasure(s),setTimeout((function(){return u=!1}),500)))}))])}),function(){c=!0,t.dispatch({effects:o.reconfigure([])})}}}),[t,n,i,r,o])}var hl=n(53674),pl=n(78248);function vl(e,t,n,r){var i=(0,ki.Z)().showError,a=(0,gi.Z)(),c=(0,pl.eR)({variables:{replId:a,path:e},onError:function(e){i(e.message)},skip:!r||t});return l.useMemo((function(){var r;return t||c.loading||c.error||!c.data||"ThreadsByFileResult"!==(null===(r=c.data.threadsByFile)||void 0===r?void 0:r.__typename)?{}:c.data.threadsByFile.threads.filter((function(t){return t.path===e&&(!n||!t.isResolved)})).reduce((function(e,t){return(0,_.Z)((0,R.Z)({},e),(0,o.Z)({},t.id,t))}),{})}),[c.loading,c.data,c.error,e,t,n])}var ml=n(19513),gl=n(7495),Zl=n(87993),yl=n(42301),bl=n(67927),wl=n(22877);function xl(e){var t=e.view,n=e.filePath,r=e.enable,i=e.isLoading,o=function(e){return[pe.Wl.highest((0,Pr.zj)(h)),Pr.cR,Pr.OQ,Pr.ZS,Pr.PQ,p?pe.Wl.highest((0,Pr.QO)()):[],ve.tk.decorations.compute([Pr.OQ,Pr.ZS,Pr.PQ],(function(e){var t=e.field(Pr.OQ),n=e.field(Pr.ZS),r=e.field(Pr.PQ),i=n||Object.values(t).find((function(e){return e.id===r}));return ve.p.set((0,I.Z)(Object.values(t)).map((function(e){var t=i&&e.id===i.id;return function(e,t,n,r,i){if(t===n)return null;var o=(0,a.Z)(r,2),l=o[0],c=o[1];return ve.p.mark({class:"replit-thread-highlight cm-thread-".concat(e),attributes:{style:"background-color: ".concat(i?c:l)},id:e}).range(t,n)}(e.id,e.indexStart,e.indexEnd,Z,t)})).filter((function(t){return null!==t&&t.from!==t.to&&t.from<=e.doc.length&&t.to<=e.doc.length})),!0)})),ve.tk.decorations.compute([Pr.OQ,Pr.ZS,Pr.PQ],(function(e){var t=e.field(Pr.OQ),n=e.field(Pr.ZS),r=e.field(Pr.PQ),i=(0,I.Z)(Object.values(t)).concat((0,I.Z)(n?[n]:[])).filter(Boolean).find((function(e){return e.id===r}));return i?ve.p.set([ve.p.widget({widget:new Pr.nE(i.id,u),block:!0,side:1}).range(i.indexEnd)],!0):ve.p.none})),ve.tk.updateListener.of((function(e){(0,ge.j)(e,ca.R,(function(){var t=(0,I.Z)(e.view.dom.querySelectorAll(".cm-thread-portal-widget")),n=e.view.dom.querySelector(".cm-scroller"),r=e.view.dom.querySelector(".cm-gutters");if(t.length&&n&&r){var i=!0,o=!1,a=void 0;try{for(var l,c=t[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;(0,gl.L)(s,n,r)}}catch(u){o=!0,a=u}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}}}))})),ve.tk.updateListener.of((function(e){(0,ge.j)(e,Pr.eR,(function(n){var r=n.value,i=e.state.field(Pr.OQ)[r];i&&(null===t||void 0===t||t.dispatch({selection:{anchor:i.indexStart,head:i.indexStart},effects:[ve.tk.scrollIntoView(i.indexStart,{x:"center",y:"center"})]}))}))}))]},c=(0,a.Z)(l.useState({}),2),s=c[0],u=c[1],d=(0,me.Z)({view:t}),h=(0,Zl.x)(),p=(0,Ut.P)({type:"boolean",controlName:"flag-thread-selection-experiment"}),v=(0,A.Dv)(ml.Q);l.useEffect((function(){t&&v&&t.dispatch({effects:[Pr.YM.of(v),Pr.eR.of(v)]})}),[t,v]);var m=(0,wl.Fg)().theme,g=(0,a.Z)(l.useState([yl.TV.accentPrimaryDimmest,yl.TV.accentPrimaryDimmer]),2),Z=g[0],y=g[1];l.useEffect((function(){var e=m.values.global.accentPrimaryDimmest,t=(0,bl.w)(e),n="rgba(".concat(t.join(","),", 0.5)");y([n,yl.TV.accentPrimaryDimmer])}),[m]),l.useEffect((function(){if(t&&r)return t.dispatch({effects:d.reconfigure(o())}),function(){t.dispatch({effects:d.reconfigure([])})}}),[t,n,d,r]);return function(e,t,n,r){var i=(0,f.Z)().fs,o=(0,hl.kL)(n),a=o.contentRef,c=o.loadedFile,s=o.transformSelectionRef;l.useEffect((function(){var o=!1,l=s.current,u=a.current;if(c&&l&&u&&!r&&t){var d=Object.values(e);0!==d.length?Promise.all(d.map((function(e){return(0,hl.Ft)({anchor:e,version:i.getOTVersion(n),transformSelection:l,content:u})}))).then((function(e){if(!o){var n=e.filter((function(e){return Boolean(e)})).map((function(e){if(!e)throw new Error("expected resolved anchor");return(0,R.Z)({},e.anchor,null===e||void 0===e?void 0:e.newSelection)}));return t.dispatch({effects:Pr.qi.of(n.reduce((function(e,t){return e[t.id]=t,e}),{}))}),function(){o=!0,t&&t.dispatch({effects:Pr.qi.of({})})}}})):t.dispatch({effects:Pr.qi.of({})})}}),[e,t,c,i,s,a,n,r])}(vl(n,i,!0,r),t,n,i),{threadElements:s}}var Cl=n(98033),kl=n(47355),Sl=n(8019),El=n(99100),Tl=function(e){var t=e.caretSize,n=void 0===t?[8,12]:t,r=(0,ln.Z)(e,["caretSize"]);return(0,i.BX)("svg",(0,_.Z)((0,R.Z)({width:n[0],height:n[1],viewBox:"0 0 12 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r),{children:[(0,i.tZ)("mask",{id:"outline",fill:"white",children:(0,i.tZ)("path",{d:"M0 8L5.2 1.06667C5.6 0.533333 6.40033 0.533776 6.80033 1.06711C8.67223 3.56297 9.93719 5.24959 12 8H0Z"})}),(0,i.tZ)("path",{d:"M0 8L5.2 1.06667C5.6 0.533333 6.40033 0.533776 6.80033 1.06711C8.67223 3.56297 9.93719 5.24959 12 8H0Z",fill:"url(#gradient-fill)"}),(0,i.tZ)("path",{d:"M0 8L-0.8 7.4L-2 9H0V8ZM12 8V9H14L12.8 7.4L12 8ZM5.2 1.06667L4.4 0.466667L5.2 1.06667ZM6.80033 1.06711L6.00033 1.66711L6.80033 1.06711ZM12 7H0V9H12V7ZM0.8 8.6L6 1.66667L4.4 0.466667L-0.8 7.4L0.8 8.6ZM6.00033 1.66711C7.87223 4.16297 9.13719 5.84959 11.2 8.6L12.8 7.4C10.7372 4.64959 9.47223 2.96297 7.60033 0.467109L6.00033 1.66711ZM6 1.66667L6.00033 1.66711L7.60033 0.467109C6.80082 -0.598902 5.20049 -0.600655 4.4 0.466667L6 1.66667Z",fill:"#0079F2",mask:"url(#outline)"}),(0,i.tZ)("defs",{children:(0,i.BX)("linearGradient",{id:"gradient-fill",x1:"5.07692",y1:"0",x2:"5.07692",y2:"21.3333",gradientUnits:"userSpaceOnUse",children:[(0,i.tZ)("stop",{stopColor:"#57ABFF"}),(0,i.tZ)("stop",{offset:"1",stopColor:"#0079F2"})]})})]}))},Rl=n(84063),_l=n(45395),Il=n(33270),Gl=n(20296),Dl=n(28898),Pl=n(26936),Bl=n(6600),Ul=n(88109),Al=n(36273),Nl=n(20465);function Ll(){var e=(0,$r.Z)(["\n  query InlineThreadCurrentUser {\n    currentUser {\n      id\n    }\n  }\n"]);return Ll=function(){return e},e}var Xl={},Ml=(0,Yr.Ps)(Ll());var Ol=n(79460),Wl=n(96972),Fl=n(79206),jl=function(e){var t=e.isCreating,n=e.threadId,r=e.filePath,o=e.isResolved,a=e.isLoading,c=e.isPlaceholder,s=e.caretPosition,u=e.onRequestClose,d=void 0===u?function(){}:u,f=e.onResolveThread,h=void 0===f?function(){}:f,p="Inbox",v="Next thread",m="Previous thread",g="Collapse",y=vl(null===r?"":r,a,!0,!0),b=[12,8];switch((0,er.Z)().preferences.fontSize){case 10:b=[8,6];break;case 14:b=[10,6];break;case 18:b=[12,8];break;case 24:b=[14,10]}var w=l.useMemo((function(){return Object.values(y).sort((function(e,t){return e.indexStart-t.indexStart}))}),[y]),x=l.useMemo((function(){return w.findIndex((function(e){return e.id===n}))}),[w,n]),C=(0,A.b9)(ml.Q),k=function(){var e=(0,de.Z)((function(){var e;return(0,fe.__generator)(this,(function(t){return e=x===w.length-1?w[0].id:w[x+1].id,C(e),[2]}))}));return function(){return e.apply(this,arguments)}}(),S=function(){var e=(0,de.Z)((function(){var e;return(0,fe.__generator)(this,(function(t){return e=0===x?w[w.length-1].id:w[x-1].id,C(e),[2]}))}));return function(){return e.apply(this,arguments)}}(),E=(0,Yo.LR)();return(0,i.BX)(Z.Tg,{background:"root",css:[Z.l0.flex.row,Z.l0.align.center,Z.l0.justify.spaceBetween,Z.l0.position.relative,Z.l0.px(12),Z.l0.py(8),{borderBottomWidth:Z.TV.borderWidthDefault,borderBottomStyle:"solid",borderBottomColor:Z.TV.outlineDimmest}],children:[null!==s&&(0,i.tZ)("span",{css:[Z.l0.position.absolute,Z.l0.top(-b[1]),Z.l0.left(s),Z.l0.height("fit-content"),Z.l0.display.flex,Z.l0.flex.row,Z.l0.align.center],children:(0,i.tZ)(Tl,{caretSize:b})}),(0,i.tZ)(Z.zx,{iconLeft:(0,i.tZ)(Gl.Z,{}),onClick:function(){E()},text:p,small:!0}),w.length>1?(0,i.BX)(Z.G7,{css:[Z.l0.flex.row,Z.l0.align.center,Z.l0.rowWithGap(4)],children:[(0,i.tZ)(Z.hU,{alt:m,onClick:S,children:(0,i.tZ)(kl.Z,{})}),(0,i.BX)(Z.xv,{color:"dimmest",variant:"small",children:[x+1,"/",w.length]}),(0,i.tZ)(Z.hU,{alt:v,onClick:k,children:(0,i.tZ)(Cl.Z,{})})]}):null,(0,i.BX)(Z.G7,{css:[Z.l0.flex.row,Z.l0.align.center,Z.l0.rowWithGap(4)],children:[t||o||c?null:(0,i.tZ)(Z.zx,{onClick:h,text:"Resolve",small:!0,iconLeft:(0,i.tZ)(wr.Z,{})}),!t&&o?(0,i.tZ)(Z.DR,{text:"Resolved",colorway:"positive"}):null,(0,i.tZ)(Z.zx,{onClick:d,text:g,small:!0,iconLeft:(0,i.tZ)(_l.Z,{})})]})]})},zl=function(e){var t,n,r,o=e.threadId,c=e.isResolved,s=e.onMessageChange,u=e.onMessageSubmit,d=e.isPlaceholder,f=e.onRequestClose,h=void 0===f?function(){}:f,p=(0,a.Z)(l.useState(""),2),v=p[0],m=p[1],g=(0,a.Z)(l.useState(Yt().v4()),2),y=g[0],b=g[1],w=(0,Il.Z)(),x=w.ref,C=w.update,k=l.useRef(null),S={placeholder:function(){return d?"Start a new thread\u2026 (Markdown is supported)":c?"Reply to re-open thread\u2026":"Reply\u2026 (Markdown is supported)"}},E="Post reply",T="Cancel",I=function(){var e=v.trim();0!==e.length&&(u({message:e,messageId:y}),m(""),b(Yt().v4()))},G=null===(t=function(e){var t=(0,R.Z)({},Xl,e);return li.a(Ml,t)}().data)||void 0===t||null===(n=t.currentUser)||void 0===n?void 0:n.id,D=(0,Nl.Z)(),P=(0,a.Z)((0,Ul.Z)({"@":function(){var e=(0,de.Z)((function(e){var t,n;return(0,fe.__generator)(this,(function(r){return t=D.filter((function(e){return e.id!==G})),e&&(n=e.toLowerCase(),t=t.filter((function(e){return e.username.toLowerCase().startsWith(n)}))),[2,t.slice(0,5).map((function(e){return{icon:(0,i.tZ)(Bl.Z,{url:e.image,style:{height:"24px",width:"24px",minWidth:"24px",minHeight:"24px"}}),value:e.username}}))]}))}));return function(t){return e.apply(this,arguments)}}()}),2),B=P[0].suggestions,U=P[1],A=(0,Al.Kb)({items:(null===B||void 0===B?void 0:B.results)||[],defaultHighlightedIndex:0,isOpen:(null!==(r=null===B||void 0===B?void 0:B.results.length)&&void 0!==r?r:0)>0,onSelectedItemChange:function(e){var t=e.selectedItem;if(B&&t){var n=B.applySuggestion({targetValue:v,suggestionValue:t.value}),r=n.fullValue,i=n.cursorIndex;m(r),setTimeout((function(){k.current&&(k.current.setSelectionRange(i,i),k.current.focus(),C())}))}}}),N=A.isOpen,X=A.getInputProps,M=A.getMenuProps,O=A.getItemProps,W=A.highlightedIndex,F=A.getComboboxProps;return l.useEffect((function(){var e="threads/drafts/".concat(o),t=Pl.Z.get(e,"string");t&&m(t);var n=k.current;return function(){if(n){var t=n.value;0!==t.length?Pl.Z.set(e,t):Pl.Z.remove(e)}}}),[o]),(0,i.BX)(Z.Tg,{background:"root",css:[Z.l0.px(12),Z.l0.pb(8),Z.l0.pt(8),{borderTop:"1px solid ".concat(Z.TV.outlineDimmest)}],className:"inline-thread-input",children:[(0,i.BX)("div",(0,_.Z)((0,R.Z)({css:[Z.l0.flex.row,Z.l0.align.start,Z.l0.rowWithGap(8),Z.l0.width("full")]},F()),{className:"jsx-45ff32690e481e34",children:[d?(0,i.tZ)(Z.zx,{text:T,onClick:h}):null,(0,i.BX)("div",{css:[{width:"100%"}],className:"jsx-45ff32690e481e34",children:[(0,i.tZ)(Z.B,(0,R.Z)({},X({ref:function(e){k.current=e,x(e),U(e)},value:v,onChange:function(e){var t=e.target.value;m(t),s({message:t,messageId:y})},onKeyDown:function(e){N||(e.preventDownshiftDefault=!0,"Enter"!==e.key||e.shiftKey||(e.stopPropagation(),e.preventDefault(),I(),requestAnimationFrame((function(){C()}))))},onKeyUp:function(e){"Escape"===e.key&&(e.stopPropagation(),e.preventDefault(),h())},placeholder:S.placeholder(),css:[Z.l0.height(32),Z.l0.align.start,{resize:"vertical",width:"100%",flexGrow:1}],autoFocus:!0}))),(0,i.tZ)("div",{css:{position:"relative"},className:"jsx-45ff32690e481e34",children:(0,i.tZ)("div",(0,_.Z)((0,R.Z)({},M({css:[{position:"absolute",top:Z.TV.space2,overflow:"hidden"},Z.l0.borderRadius(16),Z.l0.shadow(1),Z.l0.backgroundColor.backgroundDefault]})),{className:"jsx-45ff32690e481e34",children:null===B||void 0===B?void 0:B.results.map((function(e,t){return(0,l.createElement)("div",(0,_.Z)((0,R.Z)({},O({item:e,index:t})),{key:e.value,className:"jsx-45ff32690e481e34"}),(0,i.BX)(Ol.Ug,{spacing:2,css:[W===t?Z.l0.backgroundColor.backgroundHighest:null,Z.l0.p(8)],children:[e.icon,(0,i.tZ)("div",{className:"jsx-45ff32690e481e34",children:e.value})]}))}))}))})]}),(0,i.tZ)(Z.G7,{css:[Z.l0.pt(4)],children:(0,i.tZ)(Z.hU,{alt:E,tooltipDelay:"long",onClick:I,children:(0,i.tZ)(Sl.Z,{})})})]})),(0,i.tZ)(L(),{id:"45ff32690e481e34",children:".inline-thread-input .popover-control-container{-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1}"})]})};var Hl=function(e){var t,n=e.threadId,r=e.isCreating,o=e.isResolved,a=void 0!==o&&o,c=e.onRequestClose,s=void 0===c?function(){}:c,u=e.view,d=e.filePath,f=(0,Rl.Z)(n,u,d),p=f.thread,v=f.loading,m=f.isPlaceholder,g=f.getLatestAnchor,y=f.updateThread,b=f.changeThreadMessage,w=f.finalizeThreadMessage,x=(0,er.Z)().preferences.fontSize,C=(0,l.useRef)(null);(0,Fl.Z)(p);var k=g(),S=u&&!v&&"number"===typeof(null===k||void 0===k?void 0:k.indexEnd)&&k.indexEnd<=u.state.doc.length?null===(t=u.coordsAtPos(k.indexEnd))||void 0===t?void 0:t.left:null,E=(null===u||void 0===u?void 0:u.dom.getBoundingClientRect().left)||null,T=S&&E?S-E-6:null,R=x;switch(x){case 10:R=13;break;case 14:R=19;break;case 18:R=25;break;case 24:R=34}var _=(0,ki.Z)().showConfirm,G=(0,gi.Z)(),D=(0,l.useRef)(null);l.useEffect((function(){setTimeout((function(){D.current&&(D.current.scrollTop=D.current.scrollHeight)}),0)}),[null===p||void 0===p?void 0:p.messages]);var P=l.useMemo((function(){return(null===p||void 0===p?void 0:p.messages)?(0,I.Z)(p.messages).sort((function(e,t){return Date.parse(e.timeCreated)-Date.parse(t.timeCreated)})):[]}),[null===p||void 0===p?void 0:p.messages]),B=function(e){var t=(0,l.useRef)(0);return(0,h.Z)((function(n){var r=n.height;r!==t.current&&(null===e||void 0===e||e.requestMeasure()),t.current=r}))}(u);return(0,i.BX)(Z.G7,{innerRef:(0,Wl.l)(C,B),css:[Z.l0.font.default,{borderTopWidth:Z.TV.borderWidthDefault,borderBottomWidth:Z.TV.borderWidthDefault,borderStyle:"solid",borderColor:Z.TV.accentPrimaryDefault}],children:[m||v?null:(0,i.tZ)(jl,{isCreating:r,isResolved:a,isLoading:v,threadId:n,filePath:d,caretPosition:T,isPlaceholder:m,onRequestClose:s,onResolveThread:function(){y({changes:{isResolved:!0}}),_("Thread resolved. You can reopen it from the inbox.")}}),!v||m?(0,i.BX)(i.HY,{children:[!r&&P.length>0?(0,i.tZ)("div",{css:[Z.l0.px(12),Z.l0.py(12),Z.l0.maxHeight(300),Z.l0.overflowY("auto"),Z.l0.colWithGap(16),Z.l0.fontSize(x)],ref:D,children:P.map((function(e){return(0,i.tZ)(El.Z,{thread:p,message:e},e.id)}))}):null,(0,i.tZ)(zl,{threadId:n,isPlaceholder:m,isResolved:a,onRequestClose:s,onMessageChange:b,onMessageSubmit:function(e){w(e),(0,Ue.j)(Dl.U3.MESSAGE_SENT,{replId:G,source:"threads",newThread:m})}})]}):(0,i.tZ)(Z.G7,{css:[Z.l0.height(R)],children:(0,i.tZ)(Lr.ZP,{viewBox:"0 0 400 21",backgroundColor:Z.TV.accentPrimaryDimmest,backgroundOpacity:0,foregroundColor:Z.TV.accentPrimaryDimmest,foregroundOpacity:.2,speed:1,children:(0,i.tZ)("rect",{x:"0",y:"0",width:"100%",height:"100%"})})})]})};function Vl(e){var t=e.threadId,n=e.view,r=e.filePath;return(0,i.tZ)("div",{css:[Z.l0.width("100%"),Z.l0.backgroundColor.backgroundRoot],children:(0,i.tZ)(Hl,{threadId:t,onRequestClose:function(){n.dispatch({effects:[Pr.YM.of(null)]})},view:n,filePath:r})})}var ql=n(18376),$l=n(33382),Yl=n(94972),Kl=n(34886),Ql=(0,lt.u)(null),Jl=(0,lt.u)(null),ec=(0,lt.u)({from:0,to:0}),tc=ve.p.mark({class:"ast-hover"}),nc=ve.tk.baseTheme({".ast-hover":{background:Z.TV.backgroundHighest}});function rc(e){var t=e.view,n=(0,me.Z)({view:t}),r=(0,Kl.k)();(0,l.useEffect)((function(){if(r&&t){Ql.current=t.state;var e=pe.Py.define(),i=(0,_o.uf)([Jl.subscribe((function(n){t.dispatch({effects:e.of(n)})})),ec.subscribe((function(e){t.dispatch({selection:{anchor:e.from,head:e.to}})}))]);return t.dispatch({effects:n.reconfigure([ve.tk.updateListener.of((function(e){(e.selectionSet||e.docChanged)&&(Ql.current=e.state)})),pe.QQ.define({create:function(){return ve.p.none},update:function(t,n){return t=t.map(n.changes),(0,ge.j)(n,e,(function(e){t=null==e.value?ve.p.none:ve.p.set([tc.range(e.value.from,e.value.to)])})),t},provide:function(e){return ve.tk.decorations.from(e)}}),nc])}),function(){Ql.current=null,i(),t.dispatch({effects:n.reconfigure([])})}}}),[t,r,n])}var ic=(0,l.memo)((function(e){var t=e.node,n=e.index,r=e.active,o=e.terminal,a=t.type.name,l={from:t.from,to:t.to};return(0,i.BX)(Z.G7,{css:[{marginLeft:4*n+(o?4:0)},Z.l0.mb(4),Z.l0.rowWithGap(2),Z.l0.align.center,Z.l0.cursor.pointer],onMouseEnter:function(){Jl.current=l},onClick:function(){Jl.current=null,ec.current=l},children:[(0,i.tZ)(Yl.Z,{size:"small",fontFamily:a.length>1?"sans-serif":"monospace",fontWeight:r?"bold":"regular",children:a}),(0,i.BX)(Yl.Z,{size:"xsmall",truncate:!0,children:["(",t.from," \u2013 ",t.to,")"]})]})}));function oc(e,t){for(var n=[];t(e);)n.push(e.node);return n}var ac=(0,l.memo)((function(e){var t=e.state,n=(0,cn.qz)(t),r=t.selection.main.head,o=(0,l.useMemo)((function(){return oc(n.cursorAt(r),(function(e){return e.parent()})).reverse()}),[n,r]),a=(0,l.useMemo)((function(){return oc(n.cursorAt(r),(function(e){return e.prevSibling()}))}),[n,r]),c=(0,l.useMemo)((function(){return oc(n.cursorAt(r),(function(e){return e.nextSibling()}))}),[n,r]);return(0,i.BX)(Z.G7,{css:Z.l0.ml(4),onMouseLeave:function(){Jl.current=null},children:[o.map((function(e,t){return(0,i.tZ)(ic,{node:e,index:t},t)})),a.map((function(e,t){return(0,i.tZ)(ic,{node:e,index:o.length,terminal:!0},t)})),(0,i.tZ)(ic,{node:n.resolveInner(t.selection.main.head),index:o.length,terminal:!0,active:!0}),c.map((function(e,t){return(0,i.tZ)(ic,{node:e,index:o.length,terminal:!0},t)}))]})}));var lc=n(90415),cc=n(6191),sc=n(84860),uc=RegExp("_(?<num>\\d+)$");function dc(e,t){return fc.apply(this,arguments)}function fc(){return(fc=(0,de.Z)((function(e,t){var n,r,i,o;return(0,fe.__generator)(this,(function(a){switch(a.label){case 0:return n=(0,m.Il)(t),[4,e.readDir(n||".")];case 1:return(r=a.sent()).error?[2,t]:(o=(i=function(e){if(r.children.find((function(t){return"FILE"===t.type&&t.filename===e}))){var t,n=(0,m.eb)(e),o=(0,m.r6)(e),a=n.match(uc);if(null===a||void 0===a||null===(t=a.groups)||void 0===t?void 0:t.num){var l=Number(a.groups.num);return i("".concat(n.replace(uc,""),"_").concat(l+1,".").concat(o))}return i("".concat(n,"_2.").concat(o))}return e})((0,m.UO)(t)),[2,n?n+"/"+o:o])}}))}))).apply(this,arguments)}var hc=n(85345),pc=function(){var e=(0,de.Z)((function(e,t,n){var r,i,o,a,l,c;return(0,fe.__generator)(this,(function(s){switch(s.label){case 0:return r=encodeURI(e.name),i=(0,m.Il)(n),[4,dc(t,i?i+"/"+r:r)];case 1:return o=s.sent(),[4,(0,sc.pV)(e)];case 2:return a=s.sent(),[4,t.writeFile(o,hc.Z.from(a))];case 3:return s.sent(),l=(0,m.eb)(e.name),c=(0,m.UO)(o),[2,"![".concat(l,"](").concat(c,")")]}}))}));return function(t,n,r){return e.apply(this,arguments)}}();var vc=function(e){(0,He.Z)(n,e);var t=(0,Ve.Z)(n);function n(e,r){var i;return(0,ze.Z)(this,n),(i=t.call(this)).src=e,i.pos=r,i}var r=n.prototype;return r.eq=function(e){return this.src===e.src&&this.pos===e.pos},r.toDOM=function(){var e=document.createElement("img");return e.src=this.src,e.dataset.pos=this.pos.toString(),e.style.maxHeight="64px",e.style.maxWidth="256px",e},r.ignoreEvent=function(){return!1},n}(ve.l9),mc=/"data:image\/\w+;base64,[^"\s]+"/g,gc=Number.MAX_VALUE,Zc=ve.lg.define((function(e){var t=new ve.Y1({regexp:mc,decoration:function(e,t,n){if(void 0===e[0])throw new Error("Failed to match image");var r=e[0].substring(1,e[0].length-1);return ve.p.replace({widget:new vc(r,n)})},maxLength:gc});return{matcher:t,deco:t.createDeco(e),update:function(e){e.docChanged&&(this.deco=t.updateDeco(e,this.deco))}}}),{decorations:function(e){return e.deco},provide:function(e){return ve.tk.atomicRanges.of((function(t){var n=t.plugin(e);return n?n.deco:ve.p.none}))}});var yc=n(39749),bc=n(93459);var wc=(0,X.isMobile)()?.01:.001;var xc=n(32699),Cc=new Set,kc=(0,xc.throttle)((function(){var e=!0,t=!1,n=void 0;try{for(var r,i=Cc[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;(0,Ue.j)(Ue.U3.WS_TYPED,{fileExt:o})}}catch(a){t=!0,n=a}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}Cc.clear()}),6e4);function Sc(e){var t=e.view,n=e.onType,r=e.filePath,i=(0,me.Z)({view:t});l.useEffect((function(){if(t&&n&&r){var e=(0,m.r6)(r)||(0,m.UO)(r);return t.dispatch({effects:i.reconfigure(ve.tk.updateListener.of((function(t){t.docChanged&&(t.transactions.some((function(e){return e.annotation(pe.YW.remote)}))||function(e){Cc.has(e)||(Cc.add(e),kc())}(e))})))}),function(){t.dispatch({effects:i.reconfigure([])})}}}),[t,n,r,i])}var Ec=n(54282),Tc=n(83410);function Rc(e){return{filePath:e,text:"",selections:[],hasFocus:!1}}function _c(e,t){return null==t?Rc(e):{filePath:e,text:null!==(n=t.state.doc.toString())&&void 0!==n?n:"",selections:t.state.selection.ranges.map((function(e){var t=e.from;return{location:t,length:e.to-t}})),hasFocus:t.hasFocus};var n}function Ic(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:je()(),i=_c(e,t),o={messageType:Ec.cF.TEXT_EDITOR_STATE,filePath:e,text:i.text,selections:i.selections,hasFocus:i.hasFocus,hasGhostwriterSuggestion:n.hasGhostwriterSuggestion,revisionId:n.revisionId};(0,Tc.bG)(o,r)}function Gc(e,t,n,r,i){return r===e&&r===n.textEditorState.filePath&&(t===n.textEditorState.filePath&&i===n.revisionId)}function Dc(e){var t=e.map((function(e){return pe.jT.range(e.location,e.location+e.length)}));return pe.jT.create(t)}function Pc(e,t,n,r,i,o){var a=i.payload;if((0,Ec.Se)(a))return function(e,t,n,r,i){if(!Gc(e,t,r,i.filePath,i.revisionId))return!1;var o=Dc(i.selections);return n.dispatch({selection:o,scrollIntoView:!0}),!0}(e,t,n,r,a);if((0,Ec.m7)(a))return function(e,t,n,r,i){if(!Gc(e,t,r,i.filePath,i.revisionId))return!1;var o=_c(e,n),a=Dc(i.selections);return n.dispatch({changes:{from:0,to:o.text.length,insert:i.text},selection:a,scrollIntoView:!0}),!0}(e,t,n,r,a);if((0,Ec.ac)(a))return function(e,t,n,r,i){if(!Gc(e,t,r,i.filePath,i.revisionId))return!1;var o=i.insertionRange,a=Dc(i.selections);return n.dispatch({changes:{from:o.location,to:o.location+o.length,insert:i.text},selection:a,scrollIntoView:!0}),!0}(e,t,n,r,a);if((0,Ec.fz)(a))return function(e,t,n,r,i){return!!Gc(e,t,r,i.filePath,i.revisionId)&&(n.dispatch(n.state.replaceSelection(i.text)),!0)}(e,t,n,r,a);if((0,Ec.T$)(a))!function(e,t,n,r,i){!!Gc(e,t,r,i.filePath,i.revisionId)&&Me({filePath:e,view:n,clipboardText:i.text})}(e,t,n,r,a);else{if(!(0,Ec.aB)(a))throw new Error("Invalid payload.");switch(a.action){case Ec.b9.REQUEST_BLUR:return function(e,t,n,r,i,o){if(!Gc(e,t,r,i,o))return!1;n.contentDOM.blur()}(e,t,n,r,a.filePath,a.revisionId);case Ec.b9.REQUEST_UNDO:return function(e,t,n,r,i,o){if(!Gc(e,t,r,i,o))return!1;return(0,z.Yw)(n),!0}(e,t,n,r,a.filePath,a.revisionId);case Ec.b9.REQUEST_REDO:return function(e,t,n,r,i,o){if(!Gc(e,t,r,i,o))return!1;return(0,z.KX)(n),!0}(e,t,n,r,a.filePath,a.revisionId);case Ec.b9.REQUEST_INDENT_SELECTION:return function(e,t,n,r,i){return!!Gc(e,t,r,i.filePath,i.revisionId)&&(z.at(n),!0)}(e,t,n,r,a);case Ec.b9.REQUEST_DEDENT_SELECTION:return function(e,t,n,r,i){return!!Gc(e,t,r,i.filePath,i.revisionId)&&(z.xi(n),!0)}(e,t,n,r,a);case Ec.b9.REQUEST_TOGGLE_COMMENT:return function(e,t,n,r,i){return!!Gc(e,t,r,i.filePath,i.revisionId)&&(z.O8(n),!0)}(e,t,n,r,a);case Ec.b9.REQUEST_ACCEPT_GHOSTWRITER_SUGGESTION:return function(e,t,n,r,i,o){return!!Gc(e,t,r,i.filePath,i.revisionId)&&!!(0,Mn.$o)(n)&&((0,Ue.j)(Ue.U3.CODE_SUGGESTION_USED,{type:"suggestionAccepted",language:(0,_t.Sf)(e),engine:o}),et.n_({category:"ghostwriter",message:"Suggestion accepted",level:"info"}),(0,It._B)(n),!0)}(e,t,n,r,a,o);case Ec.b9.REQUEST_FOCUS:return function(e){return e.focus(),!0}(n);default:throw new Error("Unknown BridgeTextEditorAction.")}}}var Bc=n(12791);function Uc(e){var t=e.view,n=e.filePath,r=(0,P.useRouter)(),i=(0,G.Vg)(r),o=(0,l.useRef)({revisionId:je()(),textEditorState:Rc(n),hasGhostwriterSuggestion:!1}),a=(0,l.useRef)(n),c=(0,Bc.L)().engine,s=(0,me.Z)({view:t});(0,l.useEffect)((function(){if(t&&i){var e=_c(n,t);o.current={revisionId:je()(),textEditorState:e,hasGhostwriterSuggestion:o.current.hasGhostwriterSuggestion},Ic(n,t,o.current);return t.dispatch({effects:s.reconfigure(ve.tk.updateListener.of((function(r){!function(r){var i,a=On(t.state),l=(null===(i=o.current)||void 0===i?void 0:i.hasGhostwriterSuggestion)!==a;r.docChanged?(o.current={revisionId:je()(),textEditorState:e,hasGhostwriterSuggestion:a},Ic(n,t,o.current)):(r.selectionSet||r.focusChanged||l)&&(o.current={revisionId:o.current.revisionId,textEditorState:e,hasGhostwriterSuggestion:a},Ic(n,t,o.current))}(r)})))}),function(){t.dispatch({effects:s.reconfigure([])})}}}),[t,n,s,i]),(0,l.useEffect)((function(){if(t&&i){var e=function(e){Ic(n,t,o.current,e.messageId)},r=function(r){Pc(n,a.current,t,o.current,r,c)?e(r):(0,Tc.pl)(r.messageId)},l=function(){var i=(0,de.Z)((function(i){var l,s;return(0,fe.__generator)(this,(function(u){try{if(l=i.data,!(0,Ec.CF)(l))return[2];if(l.protocolVersion!==Ec.Wj)return[2];switch(s=l.payload,l.messageDirection===Ec.s1.TO_NATIVE&&(0,Ec.H7)(s)&&(a.current=s.activePaneFilePath),s.messageType){case Ec.cF.ERROR:case Ec.cF.ACK:case Ec.cF.RESET:case Ec.cF.DEBUG:case Ec.cF.WORKSPACE_STATE:case Ec.cF.WORKSPACE_STATE_REQUEST:case Ec.cF.WORKSPACE_REQUEST_ACTION:case Ec.cF.SET_KEYBOARD_STATE:case Ec.cF.SHELL_INSERT_INPUT:case Ec.cF.SHELL_COMMAND:case Ec.cF.TEXT_EDITOR_STATE:case Ec.cF.TEXT_EDITOR_CLOSED:break;case Ec.cF.TEXT_EDITOR_STATE_REQUEST:e(l);break;case Ec.cF.REQUEST_SET_SELECTION:case Ec.cF.REQUEST_REPLACE_SELECTION:case Ec.cF.REQUEST_SET_TEXT:case Ec.cF.REQUEST_INSERT_TEXT:case Ec.cF.REQUEST_PASTE_TEXT:r(l);break;case Ec.cF.TEXT_EDITOR_REQUEST_ACTION:!function(r){Pc(n,a.current,t,o.current,r,c)?e(r):(0,Tc.pl)(r.messageId)}(l);break;default:throw new Error("Unknown BridgeMessageType.")}}catch(d){throw new Error("Invalid message: ".concat(d))}return[2]}))}));return function(e){return i.apply(this,arguments)}}();return window.addEventListener("message",l),Ic(n,t,o.current),function(){!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:je()(),n={messageType:Ec.cF.TEXT_EDITOR_CLOSED,filePath:e};(0,Tc.bG)(n,t)}(n),window.removeEventListener("message",l)}}}),[t,n,i,c])}var Ac=n(27741);var Nc=ve.tk.theme({".cm-content":{paddingBottom:"".concat(80,"px")}}),Lc=ve.tk.theme({".cm-content":{paddingBottom:"".concat(400,"px")}});function Xc(e){var t=e.view,n=(0,me.Z)({view:t}),r=(0,G.Vg)((0,P.useRouter)())?Nc:Lc;l.useEffect((function(){if(t)return t.dispatch({effects:n.reconfigure(r)}),function(){t.dispatch({effects:n.reconfigure([])})}}),[t,n,r])}var Mc=(0,La.iv)({position:"relative",overflowY:"auto",width:"100%",height:"100%",zIndex:3}),Oc=(0,La.iv)({position:"relative",overflowY:"auto",width:"100%",height:"100%",fontSize:"14px",backgroundColor:Z.TV.backgroundDefault}),Wc=(0,La.iv)({display:"flex",alignItems:"stretch",width:"100%",height:"100%","& > .cm-editor":{flex:"1 1 auto",width:"100%"}}),Fc=(0,La.iv)({position:"absolute",left:0,top:0,height:"100%",width:"100%",overflow:"hidden",zIndex:5});function jc(e){var t=e.selection.main.head,n=e.doc.lineAt(t);return{offset:t,line:n.number,column:t-n.from+1}}function zc(e){var t=e.view,n=e.path,r=(0,w.NH)();!function(e,t){var n=(0,x.Z)(t);go((function(){return ve.tk.updateListener.of((function(e){e.focusChanged?e.view.hasFocus?n.current({type:"focus",position:jc(e.state)}):n.current({type:"blur"}):e.selectionSet&&n.current({type:"update",position:jc(e.state)})}))}),[n],e),(0,l.useEffect)((function(){return function(){n.current({type:"blur"})}}),[])}(t,(function(e){r(n,e)}))}var Hc=ve.tk.theme({"&":{contain:"size"},"& > .cm-scroller":{contain:"strict"}});function Vc(e){var t=e.filePath,n=e.autoFocus,r=e.deeplink,o=(0,f.Z)(),c=o.fs,s=o.debuggest,u=o.presence,d=(0,ia.uV)(),h=(0,Ut.P)({controlName:"flag-ultra-hardcore"}),p="/replEnvironmentDesktop"===B().pathname,v=(0,Oo.Z)({filePath:t,noHistory:!0,onException:function(e){h?d({error:e,tags:{codemirror:!0},origin:"CodemirrorEditor: useEditor/onException"}):(0,ql.xp)(e,{tags:{origin:"CodemirrorEditor: useEditor/onException",codemirror:!0}})}}),g=v.view,Z=v.ref;Q(g),zc({view:g,path:t});var y=ka({view:g,presence:u,fs:c,filePath:t}).isLoading;!function(e){var t=e.view,n=e.isLoading,r=e.autoFocus;l.useEffect((function(){r&&t&&(n||t.focus())}),[t,n,r])}({view:g,autoFocus:n,isLoading:y}),fl({view:g,filePath:t,isLoading:y}),Xc({view:g}),function(e){var t=e.view,n=function(e,t){var n=performance.now();Be.kg.time(e,n-t)},r=(0,me.Z)({view:t});l.useEffect((function(){if(t)return t.dispatch({effects:r.reconfigure(pe.Wl.highest(ve.tk.domEventHandlers({keydown:function(e){if(Math.random()<wc){var t=e.timeStamp;requestAnimationFrame((function(){n("editor input latency",t),"undefined"!==typeof requestIdleCallback?requestIdleCallback((function(){n("editor input latency after layout",t)})):setTimeout((function(){n("editor input latency after layout",t)}))}))}}})))}),function(){t.dispatch({effects:r.reconfigure([])})}}),[t,r])}({view:g}),rc({view:g});var b=Wo();Xo({view:g}),na({view:g,filePath:t,isLoading:y,decorations:b}),Ar({view:g,debuggest:s,filePath:t,isLoading:y});var w=Br({view:g,filePath:t}),x=w.onAction,C=w.actions,k=w.contextMenuCoords,S=w.onContextMenu,E=w.closeMenu,T=w.resizeRef,I=function(e){var t=e.view,n=e.filePath,r=e.isLoading,i=el({replId:(0,gi.Z)()}),o=(0,a.Z)(l.useState(null),2),c=o[0],s=o[1],u=(0,me.Z)({view:t});return l.useEffect((function(){if(t&&i&&!r&&n===i.mainFile){var e=document.createElement("div");return s(e),t.dispatch({effects:u.reconfigure((0,ve.W$)(e))}),function(){t.dispatch({effects:u.reconfigure([])}),s(null)}}}),[t,i,n,r,u]),c}({view:g,filePath:t,isLoading:y}),G=function(e){var t=e.view,n=(0,a.Z)(l.useState(!1),2),r=n[0],i=n[1],o=(0,a.Z)(l.useState(null),2),c=o[0],s=o[1],u=(0,me.Z)({view:t});return l.useEffect((function(){if(t){var e=document.createElement("div");return s(e),t.dispatch({effects:u.reconfigure([(0,he.yC)({createPanel:function(){return{top:!0,pos:80,dom:e}}}),ve.tk.updateListener.of((function(t){if((0,he.Ep)(t.state)!==(0,he.Ep)(t.startState)){var n=(0,he.Ep)(t.state);if(i(n),n){var r=e.querySelector("[main-field]");if(!r)return;r.focus(),r.select()}}})),ve.$f.of([{win:"Ctrl-h",linux:"Ctrl-h",preventDefault:!0,run:function(){return t.dispatch({effects:ol.of(null)}),(0,he.nx)(t)}}])])}),function(){t.dispatch({effects:u.reconfigure([])}),s(null)}}}),[t,u]),{isOpen:r,domNode:c}}({view:g});!function(e){var t=e.filePath,n=e.view,r=e.isLoading,i=e.deeplink,o=(0,f.Z)().session;l.useEffect((function(){if(n&&!r&&i){var e=i.line,t=i.col;void 0!==e&&Mo({view:n,line:e,col:t})}}),[n,r,i]),l.useEffect((function(){if(n&&!r)return o.onDeeplinkUpdated((function(e){var r=e.path,i=e.line,o=e.col;r===t&&i&&Mo({view:n,line:i,col:o})}))}),[o,n,t,r])}({filePath:t,view:g,isLoading:y,deeplink:r}),Sc({view:g,filePath:t}),function(e){var t,n=e.view,r=(0,me.Z)({view:n}),i=(0,se.xZ)(null!==(t=null===n||void 0===n?void 0:n.state.facet(Er.Yp))&&void 0!==t?t:null);l.useEffect((function(){if(n&&!(0,X.isMobile)({tablet:!0})){var e=i?[bc.Gj,bc._j,bc.yK,bc.gm,bc.ZF]:[bc.ZF];return n.dispatch({effects:r.reconfigure((0,yc.ZP)({rules:e,key:"mod"}))}),function(){n.dispatch({effects:r.reconfigure([])})}}}),[n,r,i])}({view:g}),function(e){var t=e.view,n=(0,me.Z)({view:t}),r=(0,f.Z)().fs,i=null===t||void 0===t?void 0:t.state.facet(Er.Yp),o=(0,se.xZ)(null!==i&&void 0!==i?i:null);l.useEffect((function(){if(t)return t.dispatch({effects:n.reconfigure(ve.tk.domEventHandlers({paste:function(e){var n,a=null===e||void 0===e||null===(n=e.clipboardData)||void 0===n?void 0:n.files,l=function(e){var n=t.state.selection.main.head;t.dispatch({changes:{from:n,insert:e},selection:{anchor:n,head:n+e.length}})};if(a){var c=!0,s=!1,u=void 0;try{for(var d,f=a[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var h=d.value;o?(0,sc.L0)(h).then((function(e){return l('"'+e+'"')})):i&&(0,m.gK)(i)&&pc(h,r,i).then(l)}}catch(p){s=!0,u=p}finally{try{c||null==f.return||f.return()}finally{if(s)throw u}}}}}))}),function(){t.dispatch({effects:n.reconfigure([])})}}),[t,n,i,r,o])}({view:g}),function(e){var t=e.view,n=e.filePath,r=(0,me.Z)({view:t});l.useEffect((function(){if(t)return t.dispatch({effects:r.reconfigure(ve.tk.domEventHandlers({paste:function(e){var r;Me({filePath:n,view:t,event:e,clipboardText:null===(r=e.clipboardData)||void 0===r?void 0:r.getData("Text")})}}))}),function(){t.dispatch({effects:r.reconfigure([])})}}),[t,r,n])}({view:g,filePath:t}),function(e){var t=e.view,n=(0,me.Z)({view:t}),r=(0,se.f6)();l.useEffect((function(){if(t&&r)return t.dispatch({effects:n.reconfigure(Zc)}),function(){t.dispatch({effects:n.reconfigure([])})}}),[t,n,r])}({view:g}),function(e){var t=e.view,n=(0,me.Z)({view:t}),r=(0,f.Z)().session;l.useEffect((function(){var e=function(){return r.setIsCommandBarOpen(!0),!0};if(t)return t.dispatch({effects:n.reconfigure(ve.$f.of([{key:"Mod-Shift-p",run:e,preventDefault:!0},{key:"F1",run:e,preventDefault:!0}]))}),function(){t.dispatch({effects:n.reconfigure([])})}}),[t,r,n])}({view:g});var D=function(e){var t,n=e.view,r=e.filePath,i=(0,f.Z)().fs,o=(0,se.xZ)(null!==(t=null===n||void 0===n?void 0:n.state.facet(Er.Yp))&&void 0!==t?t:null),l=(0,a.Z)((0,lc.L)({accept:[ie.z.Code,cc.FILE],drop:function(e,t){if(n){var a=t.getClientOffset(),l=a?n.posAtCoords(a):null;if(null!==l){var c=function(e){n.focus(),n.dispatch({changes:{from:l,insert:e},selection:{anchor:l,head:l+e.length}})};if(e.type===ie.z.Code)c(e.code);else{var s=!0,u=!1,d=void 0;try{for(var f,h=e.files[Symbol.iterator]();!(s=(f=h.next()).done);s=!0){var p=f.value;o?(0,sc.L0)(p).then((function(e){return c('"'+e+'"')})):r&&(0,m.gK)(r)&&pc(p,i,r).then(c)}}catch(v){u=!0,d=v}finally{try{s||null==h.return||h.return()}finally{if(u)throw d}}}}}}}),2);return l[1]}({view:g,filePath:t});(0,Nr.Z)({view:g,filePath:t,decorations:b});var P=function(e){var t=e.view,n=e.filePath,r=(0,a.Z)(l.useState(null),2),i=r[0],o=r[1],c=(0,me.Z)({view:t});return l.useEffect((function(){if(t)return t.dispatch({effects:c.reconfigure(_e({setExplainCodeParams:o}))}),function(){t.dispatch({effects:c.reconfigure([])})}}),[t,c,n]),i}({view:g,filePath:t}),U=function(e){var t=e.view,n=(0,a.Z)(l.useState(null),2),r=n[0],i=n[1],o=(0,me.Z)({view:t}),c=l.useCallback((function(){if(!t)throw new Error("did not expect to be asked to open generate code modal without view");var e=t.state.selection.main;t.dispatch({effects:[Ie.of(!0),ve.tk.scrollIntoView(e.to)]})}),[t]);return l.useEffect((function(){if(t)return t.dispatch({effects:o.reconfigure(Ge({view:t,setGenerateCodePortalProps:i}))}),function(){t.dispatch({effects:o.reconfigure([])})}}),[t,o]),{generateCodePortalProps:r,openGenerateCodeModal:c}}({view:g}),A=U.generateCodePortalProps,N=U.openGenerateCodeModal,L=function(e){var t=e.view,n=(0,a.Z)(l.useState(null),2),r=n[0],i=n[1],o=(0,me.Z)({view:t}),c=l.useCallback((function(){if(!t)throw new Error("did not expect to be asked to open transform code modal without view");var e=t.state.selection.main;t.dispatch({effects:[De.of(!0),ve.tk.scrollIntoView(e.to)]})}),[t]);return l.useEffect((function(){if(t)return t.dispatch({effects:o.reconfigure(Pe({view:t,setTransformCodePortalProps:i}))}),function(){t.dispatch({effects:o.reconfigure([])})}}),[t,o]),{transformCodePortalProps:r,openTransformCodeModal:c}}({view:g}).transformCodePortalProps,M=xl({view:g,filePath:t,isLoading:y,enable:p});return Uc({view:g,filePath:t}),function(e){var t=e.view,n=e.filePath,r=(0,me.Z)({view:t}),i=(0,Ac.K)((0,tt.Z)((function(){return{path:n}}),[n]));(0,l.useEffect)((function(){if(t){var e=ve.tk.domEventHandlers({scroll:(0,xc.debounce)((function(){var e=0,n=0,r=!0,o=!1,a=void 0;try{for(var l,c=t.visibleRanges[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var s=l.value;e=Math.min(e,s.from),n=Math.max(e,s.to)}}catch(u){o=!0,a=u}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}i("user:scroll",{visibleLines:{from:t.state.doc.lineAt(e).number,to:t.state.doc.lineAt(n).number}})}),250)}),n=(0,xc.debounce)((function(e,t,n){i("user:selection",{inputMethod:n,from:e,to:t})}),250),o=ve.tk.updateListener.of((function(e){var t=e.transactions,r=!0,o=!1,a=void 0;try{for(var l,c=t[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var s=l.value;s.isUserEvent("input.paste")&&i("user:paste",{}),s.isUserEvent("input.drop")&&i("user:new-drop",{}),s.isUserEvent("move.drop")&&i("user:move-drop",{}),s.isUserEvent("delete.cut")&&i("user:cut",{}),s.isUserEvent("input.complete")&&i("user:complete",{}),s.isUserEvent("select")&&n(s.newSelection.main.from,s.newSelection.main.to,s.isUserEvent("select.pointer")?"pointer":"keyboard"),s.isUserEvent("undo")&&i("user:undo",{}),s.isUserEvent("redo")&&i("user:redo",{})}}catch(u){o=!0,a=u}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}}));return t.dispatch({effects:r.reconfigure([e,o])}),function(){t.dispatch({effects:r.reconfigure([])})}}}),[t,r,i])}({view:g,filePath:t}),Zo({view:g,filePath:t}),function(e){var t=e.view,n=(0,Ut.P)({controlName:"flag-editor-css-containment"});go((function(){return n?Hc:null}),[n],t)}({view:g}),(0,i.BX)("div",{ref:T,css:Oc,"data-cy":y?"workspace-cm-editor-loading":"workspace-cm-editor-".concat(t),children:[y?(0,i.tZ)("div",{css:Fc,children:(0,i.tZ)($l.Z,{})}):null,(0,i.tZ)("div",{ref:function(e){Z(e),D(e)},onContextMenu:S,css:Wc}),k&&g?(0,i.tZ)(ue.ZP,{view:g,coords:k,actions:C,closeMenu:E,onAction:x}):null,P?(0,i.tZ)(wi,{code:P.code,dom:P.dom,filePath:t}):null,A?(0,i.tZ)(Li,(0,_.Z)((0,R.Z)({},A),{filePath:t})):null,L?(0,i.tZ)(zi,(0,_.Z)((0,R.Z)({},L),{filePath:t})):null,I&&t?(0,i.tZ)(Ya,{dom:I,onShowGenerateCodeModal:N,filePath:t}):null,G.domNode&&G.isOpen?(0,i.tZ)(ul,{dom:G.domNode,view:g}):null,(0,i.tZ)(Fo,{source:b.observable}),g?(0,i.tZ)(i.HY,{children:Object.entries(M.threadElements).map((function(e){var n=(0,a.Z)(e,2),r=n[0],o=n[1];return qe.createPortal((0,i.tZ)(Vl,{threadId:r,view:g,filePath:t}),o)}))}):null]})}var qc,$c,Yc,Kc,Qc=n(31447),Jc=(0,lt.u)((function(){return null})),es=(0,lt.u)((function(){return null}));var ts=(0,A.cn)(null),ns=(0,A.cn)((function(e){return e(ts)}),(function(e,t,n){if(null===n)t(ts,null);else{var r=e(ts),i=r?(0,R.Z)({},r,n):(0,R.Z)({},n);if(!i.filePath||!i.changes)throw new Error('"filePath", "changes" required when initializing history state');Jc.set((function(){return i}));var o,a,l,c,s=i.changes.length;if(0===s)return i.users={},i.version=0,i.playing=!1,i.comparing=!1,i.count=0,void t(ts,i);null!==(o=(qc=i).count)&&void 0!==o||(qc.count=s),null!==(a=($c=i).version)&&void 0!==a||($c.version=s-1),null!==(l=(Yc=i).playing)&&void 0!==l||(Yc.playing=!1),null!==(c=(Kc=i).comparing)&&void 0!==c||(Kc.comparing=!1),(null===r||void 0===r?void 0:r.changes)&&i.changes!==r.changes&&(i.count=s,i.version=Math.min(i.version,s-1),i.playing=!1,i.comparing=!1),i.version===s-1&&(i.playing=!1),t(ts,i)}}));function rs(){return(0,A.KO)(ns,$)}var is=(0,l.createContext)({});function os(e,t){return(0,l.useMemo)((function(){return{openHistory:function(){return t({type:"history",data:{path:e}})},closeHistory:function(){return t({type:"codeEditor",data:{path:e}})}}}),[e,t])}function as(){var e=(0,ia.uV)();return(0,l.useCallback)((function(t,n,r){e({origin:"History2: useHistoryBSOD",error:t,tags:{source:"ws-history2",type:n},extras:(0,R.Z)({state:Jc.current()},r)})}),[e])}function ls(e){(0,Ue.j)(Dl.U3.HISTORY_USED,{action:e,which:"ws"})}var cs=(0,La.iv)([Z.l0.height("auto"),Z.l0.p(4),Z.l0.color.foregroundDimmer]);function ss(){var e=(0,l.useContext)(is).openHistory;return e?(0,i.tZ)(Z.Tg,{background:"root",css:[Z.l0.borderRadius(8)],children:(0,i.tZ)(Z.zx,{css:cs,small:!0,text:"History",iconRight:(0,i.tZ)(Qc.Z,{size:12}),onClick:function(){ls("historyOpened"),e()}})}):null}var us=n(54791),ds=n(4963),fs=n(61536),hs=n(32915),ps=n(90363);function vs(){var e,t=K(),n=null===t||void 0===t||null===(e=t.state)||void 0===e?void 0:e.facet(Er.Yp);return n?(0,i.tZ)(ms,{fileName:n}):null}function ms(e){var t=e.fileName,n=(0,er.Z)().preferences.codeIntelligence,r=function(){var e=K(),t=(0,l.useState)(null===e||void 0===e?void 0:e.state.facet(Er.Q$)),n=t[0],r=t[1],i=(0,me.Z)({view:e});return(0,l.useEffect)((function(){if(e)return e.dispatch({effects:i.reconfigure(ve.tk.updateListener.of((function(e){var t=e.startState.facet(Er.Q$),n=e.state.facet(Er.Q$);t!==n&&r(n)})))}),r(e.state.facet(Er.Q$)),function(){r(void 0),e.dispatch({effects:i.reconfigure([])})};r(void 0)}),[e,i]),n}(),o=null!=r,a=(0,Ae.Z)(t),c=function(e){var t=(0,f.Z)(),n=t.lsp,r=t.lspnix,i=(0,Ae.X)(),o=(0,er.Z)().preferences.codeIntelligence,a=(0,l.useState)(!1),c=a[0],s=a[1];(0,l.useEffect)((function(){null!=e&&s(!1)}),[e]);var u=(0,l.useCallback)((function(){null!==i&&o&&(i?(r.disable(),r.enable()):(n.stop(),n.start()),s(!0))}),[n,r,i,o]);return{isRestartingLSP:c,restartLSP:u}}(a),s=c.isRestartingLSP,u=c.restartLSP,d=(0,l.useState)(null===a||void 0===a?void 0:a.getServerState()),h=d[0],p=d[1],v=h===Kt.a.INITIALIZING||s,m=null!=a&&h===Kt.a.INITIALIZED,g=h===Kt.a.EXITED||h===Kt.a.EXITING;(0,l.useEffect)((function(){if(a)return p(a.getServerState()),(0,_o.uf)([a.onServerStateChange((function(e){p(e)}))])}),[a]);var y=function(e){var t=e.codeIntelligence,n=e.isRestartingLSP,r=e.isActiveLSP,i=e.isErrorLSP,o=e.hasPartialSupport;if(n)return"Restarting language server...";if(!t)return"Code Intelligence is disabled. Enable it in Settings.";if(i)return"Language support is not available because the language server encountered an error.";if(!r&&o)return"Language support may be inaccurate because Code Intelligence is not available."}({codeIntelligence:n,isRestartingLSP:s,isActiveLSP:m,isErrorLSP:g,hasPartialSupport:o});return(0,i.tZ)(Z.u,{isDisabled:void 0===y,tooltip:y,children:(0,i.tZ)(Z.zx,{css:[Z.l0.height("auto"),Z.l0.p(4),Z.l0.backgroundColor.backgroundDefault,Z.l0.color.foregroundDimmer],small:!0,iconLeft:Zs({isLoadingLSP:v,isActiveLSP:m,isErrorLSP:g,hasPartialSupport:o}),text:(0,i.tZ)(Z.G7,{css:[Z.l0.flex.growAndShrink(1),Z.l0.align.center,Z.l0.rowWithGap(8)],children:(0,i.tZ)(Z.xv,{variant:"small",children:gs({codeMirrorLanguageSupport:r,fileName:t})})}),onClick:function(){g&&u()}})})}function gs(e){var t,n=e.codeMirrorLanguageSupport,r=e.fileName,i=(0,us.v)(r);return i||(n?0===n.language.name.length?(0,m.r6)(r):(t=n.language.name).slice(0,1).toUpperCase()+t.slice(1).toLowerCase():"Plain Text")}function Zs(e){var t=e.isLoadingLSP,n=e.isActiveLSP,r=e.isErrorLSP,o=e.hasPartialSupport;return t?(0,i.tZ)(ur.Z,{size:16}):n?(0,i.tZ)(fs.Z,{size:16}):r?(0,i.tZ)(hs.Z,{size:16}):o?(0,i.tZ)(ps.Z,{size:16}):(0,i.tZ)(ds.Z,{size:16})}function ys(){var e=(0,l.useRef)(null),t=K(),n=(0,me.Z)({view:t}),r=function(t){e.current&&(e.current.textContent=t)};return(0,l.useEffect)((function(){if(t){var e=null,i=null,o=function(t){t!==i&&(i=t,null===e&&(e=requestAnimationFrame((function(){e=null,r(i?function(e){var t=e.selection,n="",r=0;if(t.ranges.length>1){r=t.ranges.reduce((function(e,t){return e+(t.to-t.from)}),0);var i=t.ranges.length;n="".concat(i," selections")}else{var o=t.ranges[0],a=e.doc.lineAt(o.head),l=o.head-a.from;r=o.to-o.from,n="Ln ".concat(a.number,", Col ").concat(l+1)}return r>0&&(n+=" (".concat(r," chars)")),n}(i):"")}))))};return t.dispatch({effects:n.reconfigure(ve.tk.updateListener.of((function(e){(e.docChanged||e.selectionSet)&&o(e.state)})))}),o(t.state),function(){r(""),null!==e&&(cancelAnimationFrame(e),e=null),t.dispatch({effects:n.reconfigure([])})}}r("")}),[t,n]),(0,l.useMemo)((function(){return(0,i.tZ)(Z.xv,{ref:e,color:"dimmer","data-cy":"current-position",variant:"small"})}),[])}function bs(){var e=(0,l.useState)(null),t=e[0],r=e[1],o=(0,l.useRef)(null),a=K(),c=(0,me.Z)({view:a}),s=(0,er.Z)().preferences,u="vim"===(null===s||void 0===s?void 0:s.keyboardHandler),d=(0,l.useCallback)((function(e){if(o.current){var n=null!==e&&void 0!==e?e:"";if(a&&t&&void 0===e){var r,i,l=t.getCM(a),c=null!==(i=null===(r=null===l||void 0===l?void 0:l.state.vim)||void 0===r?void 0:r.mode)&&void 0!==i?i:"normal";n="-- ".concat(c.toUpperCase()," --")}o.current.innerText!==n&&(o.current.innerText=n||"")}}),[a,t]);return(0,l.useEffect)((function(){u&&!t&&n.e(7814).then(n.bind(n,30998)).then((function(e){r(e),d()}))}),[u,t,d]),(0,l.useEffect)((function(){if(a&&u){var e=!1;return setTimeout((function(){e||(e=!0,a.dispatch({effects:c.reconfigure(ve.tk.updateListener.of((function(){return d()})))}))}),0),d(),function(){e?a.dispatch({effects:c.reconfigure([])}):e=!0}}d(null)}),[a,u,c,d]),(0,i.tZ)(i.HY,{children:u?(0,i.tZ)(Z.xv,{ref:o,color:"dimmer",variant:"small"}):null})}var ws=(0,Z.Xb)({root:[Z.l0.position.relative,Z.l0.rowWithGap(16),Z.l0.align.center,Z.l0.justify.spaceBetween,Z.l0.backgroundColor.backgroundDefault,Z.l0.px(8),{borderTop:"1px solid ".concat(Z.TV.backgroundHigher)},{height:"36px",contain:"strict"}],left:[Z.l0.rowWithGap(8),Z.l0.align.center,Z.l0.px(8)],right:[Z.l0.display.flex,Z.l0.flex.row,Z.l0.align.center,Z.l0.px(4)],group:[Z.l0.rowWithGap(8),Z.l0.display.flex,Z.l0.flex.row,Z.l0.align.center]});function xs(){var e=(0,Ut.P)({controlName:"flag-lsp-status-in-ws"}),t=!(0,X.isMobile)()&&e,n=(0,G.T3)()?void 0:{borderBottomLeftRadius:8,borderBottomRightRadius:8};return(0,i.BX)(Z.G7,{css:ws.root,style:n,children:[(0,i.BX)(Z.G7,{css:ws.group,children:[t?(0,i.tZ)(vs,{}):null,(0,i.tZ)(bs,{})]}),(0,i.BX)(Z.G7,{css:ws.group,children:[(0,i.tZ)(ys,{}),(0,i.tZ)(ss,{})]})]})}var Cs=n(42882),ks=n(43897),Ss=n(81202),Es=n.n(Ss);function Ts(e,t,n){var r=n.find((function(n){var r=n.range;return(0,at.R)(e,r.end)>=t&&(0,at.R)(e,r.start)<=t}));return null==r?[]:r.children?[r].concat(Ts(e,t,r.children)):[r]}function Rs(e,t){return e.length===t.length&&e.every((function(e,n){return e===t[n]}))}var _s=n(32992),Is=n(29973),Gs=n(60522),Ds=n(68985),Ps=n(13755),Bs=n(34646),Us=(0,La.iv)([Z.gU.nofill,{transitionProperty:"background-color, box-shadow, opacity",opacity:.8,":focus":{zIndex:1,opacity:1}}]),As={button:(0,La.iv)([Z.l0.reset.button,Z.l0.p(2),Z.l0.rowWithGap(4),Z.l0.align.center,Us]),text:(0,La.iv)({fontSize:Z.TV.fontSizeSmall})},Ns={opacity:1};function Ls(e){var t=e.icon,n=e.text,r=e.innerRef,o=e.ariaProps,a=e.active,c=(0,Ds.U)(o,r).buttonProps,s=(0,Ps.XI)({}),u=s.hoverProps,d=s.isHovered;return(0,i.BX)(Z.G7,(0,_.Z)((0,R.Z)({tag:"button",css:As.button,style:d||a?Ns:void 0,innerRef:r},(0,Bs.dG)(c,u)),{children:[t?(0,l.cloneElement)(t,{size:16}):null,(0,i.tZ)(Z.G7,{css:As.text,children:n})]}))}var Xs=n(30586),Ms=n(38237),Os={underlay:(0,La.iv)([Z.l0.coverContainer,Z.l0.position.fixed]),surface:(0,La.iv)([Z.l0.borderRadius(8),{boxShadow:Z.TV.shadow2,border:"1px solid",borderColor:Z.TV.backgroundHighest}])};function Ws(e){var t=e.state,n=e.triggerRef,r=e.placement,o=e.children,l=(0,a.Z)((0,Ms.Z)(),2),c=l[0],s=l[1],u=(0,Xs.Sv)({placement:r,triggerRef:n,popoverRef:c,offset:8},t),d=u.popoverProps,f=u.underlayProps;return(0,i.BX)(Xs.aV,{children:[(0,i.tZ)(Z.G7,(0,_.Z)((0,R.Z)({},f),{css:Os.underlay})),(0,i.BX)(Z.Tg,(0,_.Z)((0,R.Z)({elevated:!0,css:Os.surface,innerRef:s},d),{children:[(0,i.tZ)(Xs.U4,{onDismiss:t.close}),o,(0,i.tZ)(Xs.U4,{onDismiss:t.close})]}))]})}var Fs=n(40563),js=(0,La.iv)([Z.l0.p(4)]);function zs(e){var t=e.items,n=e.children,r=e.menuProps,o=e.selectedKeys,a=e.onAction,c=(0,Fs.D)({items:t,children:n,selectedKeys:o,selectionMode:"single"}),s=(0,l.useRef)(null),u=(0,Gs.H9)((0,R.Z)({items:t,onAction:a},r),c,s);return(0,i.tZ)(Z.G7,(0,_.Z)((0,R.Z)({},u.menuProps),{innerRef:s,css:js,children:(0,I.Z)(c.collection).map((function(e){return(0,i.tZ)(qs,{item:e,state:c},e.key)}))}))}var Hs={root:(0,La.iv)([Z.l0.flex.row,Z.l0.align.center,Z.l0.position.relative,Us]),selected:(0,La.iv)([{opacity:1,backgroundColor:Z.vb.interactiveBackground}])},Vs={opacity:1};function qs(e){var t=e.item,n=e.state,r=(0,l.useRef)(null),o=(0,Gs.iX)({key:t.key},n,r),a=o.menuItemProps,c=o.isSelected,s=(0,Ps.XI)({}),u=s.hoverProps,d=s.isHovered;return(0,i.tZ)(Z.G7,(0,_.Z)((0,R.Z)({innerRef:r,css:[Hs.root,c&&Hs.selected],style:d||c?Vs:void 0},(0,Bs.dG)(a,u)),{children:t.rendered}))}var $s={root:(0,La.iv)([Z.l0.p(4),Z.l0.rowWithGap(4),Z.l0.align.center]),text:(0,La.iv)([Z.l0.truncate,Z.l0.flex.growAndShrink(1),{fontSize:Z.TV.fontSizeDefault}])};function Ys(e){return(0,i.BX)(Z.G7,{css:[$s.root],children:[e.icon?(0,l.cloneElement)(e.icon,{size:16}):null,(0,i.tZ)(Z.G7,{css:$s.text,children:e.text})]})}var Ks=n(47259),Qs=n(497),Js=n(88442),eu=n(72518),tu=n(25865),nu=n(90822),ru=n(86163),iu=n(67842),ou=n(58868),au=n(90335),lu=function(e){var t=new Set(au.Z),n=new Map,r=!0,i=!1,o=void 0;try{for(var l,c=e[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var s=(0,a.Z)(l.value,3),u=s[0],d=s[1],f=s[2];if(!t.has(u))throw new Error("Symbol not supported by LSP client. Please add to the supported symbol icons array");"string"===typeof d&&(d=Io.get(d)),n.set(u,[d,null!==f&&void 0!==f?f:Z.TV.foregroundDefault])}}catch(h){i=!0,o=h}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return n}([[Pt.cR.Array,nu.Z],[Pt.cR.Boolean,iu.Z],[Pt.cR.Class,"class",Z.TV.yellowDefault],[Pt.cR.Constant,"constant",Z.TV.blueStronger],[Pt.cR.Constructor,"method",Z.TV.blurpleDefault],[Pt.cR.Enum,Js.Z,Z.TV.orangeDefault],[Pt.cR.EnumMember,xo.Z,Z.TV.blueStronger],[Pt.cR.Event,Ks.Z],[Pt.cR.Field,ru.Z],[Pt.cR.File,Co.Z],[Pt.cR.Function,"function",Z.TV.blurpleStronger],[Pt.cR.Interface,tu.Z,Z.TV.blueStronger],[Pt.cR.Key,yo.Z],[Pt.cR.Method,"method",Z.TV.blurpleDefault],[Pt.cR.Module,ou.Package,Z.TV.purpleDefault],[Pt.cR.Namespace,Qs.Z],[Pt.cR.Object,iu.Z,Z.TV.blueDimmer],[Pt.cR.Operator,iu.Z],[Pt.cR.Package,ou.Package,Z.TV.purpleDefault],[Pt.cR.Property,ru.Z],[Pt.cR.String,eu.Z],[Pt.cR.Struct,Qs.Z],[Pt.cR.TypeParameter,xo.Z],[Pt.cR.Variable,xo.Z,Z.TV.blueStronger]]);function cu(e){var t,n=e.kind,r=(0,a.Z)(null!==(t=lu.get(n))&&void 0!==t?t:[iu.Z,Z.TV.foregroundDefault],2),o=r[0],l=r[1];return(0,i.tZ)(o,{color:l,size:16})}function su(e){return CSS.escape(e.name)}function uu(e){var t=e.selectedSymbol,n=e.symbols,r=e.moveCursor,o=e.icon,a=e.text,c=(0,Is.W)({onOpenChange:function(e){e&&(0,Ue.j)(Ue.U3.CODE_NAVIGATION_USED,{action:"opened"})}}),s=l.useRef(null),u=(0,Gs.u4)({},c,s),d=u.menuTriggerProps,f=u.menuProps,h=t?new Set([t.name]):void 0;return(0,i.BX)(i.HY,{children:[(0,i.tZ)(Ls,{text:a,icon:o,innerRef:s,ariaProps:d,active:c.isOpen}),c.isOpen?(0,i.tZ)(Ws,{triggerRef:s,state:c,placement:"bottom left",children:(0,i.tZ)(zs,{menuProps:f,items:n,selectedKeys:h,onAction:function(e){var t=n.find((function(t){return su(t)===e}));t&&(r(t.selectionRange.start),(0,Ue.j)(Ue.U3.CODE_NAVIGATION_USED,{action:"jumped"}))},children:function(e){return(0,i.tZ)(Z.ck,{children:(0,i.tZ)(Ys,{icon:(0,i.tZ)(cu,{kind:e.kind}),text:e.name})},su(e))}})}):null]})}var du=l.memo((function(e){var t=e.symbols,n=e.symbolsPath,r=e.moveCursor,o=n.length?n[n.length-1]:null,a=o?o.children:t;return(0,i.BX)(i.HY,{children:[n.map((function(e,o){var a=0===o?t:n[o-1].children;return a?(0,i.BX)(l.Fragment,{children:[(0,i.tZ)(rl.Z,{size:12}),(0,i.tZ)(uu,{symbols:a,icon:(0,i.tZ)(cu,{kind:e.kind}),text:e.name,selectedSymbol:e,moveCursor:r})]},su(e)):null})),(null===a||void 0===a?void 0:a.length)?(0,i.BX)(i.HY,{children:[(0,i.tZ)(rl.Z,{size:12}),(0,i.tZ)(uu,{symbols:a,text:"...",moveCursor:r})]}):null]})}));function fu(e){var t=e.view,n=(0,tt.Z)((function(){return(0,A.cn)(null)}),[]),r=(0,A.b9)(n),i=l.useCallback((function(e){null===t||void 0===t||t.dispatch({scrollIntoView:!0,selection:pe.jT.cursor((0,at.R)(t.state.doc,e))}),null===t||void 0===t||t.focus()}),[t]);go((function(){var e=V()(r,200);return ve.tk.updateListener.of((function(t){var n=t.state.field(Vo,!1)||null,r=n!==t.startState.field(Vo,!1);(t.selectionSet||r)&&e({doc:t.view.state.doc,cursor:t.state.selection.main.head,symbols:n})}))}),[r],t);var o=(0,tt.Z)((function(){return(0,_s.kv)(n,(function(e){return(null===e||void 0===e?void 0:e.symbols)?Ts(e.doc,e.cursor,e.symbols):[]}),Rs)}),[n]),a=(0,tt.Z)((function(){return(0,_s.kv)(n,(function(e){return null===e||void 0===e?void 0:e.symbols}),Es())}),[n]);return{symbols:(0,A.Dv)(a),symbolsPath:(0,A.Dv)(o),moveCursor:i}}var hu=l.memo((function(e){var t=fu({view:e.view}),n=t.symbols,r=t.symbolsPath,o=t.moveCursor;return(null===n||void 0===n?void 0:n.length)?(0,i.tZ)(du,{symbols:n,symbolsPath:r,moveCursor:o}):null})),pu=n(46761),vu=n(87175),mu=n(14341),gu=n(11740),Zu=n(33555),yu=n(54829),bu=n(80460),wu=n(56501),xu=n(21910),Cu=n(37058);var ku=function(e){return e===yu.Ql?0:e.split("/").length};function Su(){var e=function(e){var t=e.openFile,n=e.activeFile,r=e.watchDir,i=(0,xu.T)(!0),o=(0,Cu.y)();return(0,tt.Z)((function(){return{flags:{flagFiletreeMultiselect:!1},activeFile:n,watchDir:r,openFile:t,shouldHideFile:i,sortNode:o,onError:function(){},onAction:function(){}}}),[n,t,i,o,r])}({openFile:function(){},watchDir:(0,f.Z)().fs.watchDir,activeFile:""});(0,wu.S)(e),(0,bu.Yc)()}function Eu(e){Su();var t=e.rootPath,n=e.children,r=e.activeFile,i=e.openFile,o=function(e){var t=e.rootPath,n=ku(t),r=(0,gu.h6)(t),i=[],o=!0,a=!1,l=void 0;try{for(var c,s=r[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=c.value,d=ku(u.path);d<=n||i.push({node:u,depth:d-n-1})}}catch(f){a=!0,l=f}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}return i}({rootPath:t}),a=(0,Fs.D)({items:o,children:n,selectedKeys:new Set([r]),selectionMode:"single"}),c=(0,l.useRef)(null),s=(0,Gs.H9)((0,R.Z)({items:o,onAction:function(e){var t=a.collection.getItem(e).value.node;t.type!==y.Tv.File?a.toggleKey(e):i(t.path)}},e.menuProps),a,c),u=(0,bu.Ol)();(0,l.useEffect)((function(){u(t)}),[u,t]);var d=(0,mu.Z)({path:t,initialExpanded:!0}),f=d.loading;(0,l.useEffect)((function(){var e;f||null===(e=c.current)||void 0===e||e.focus()}),[f]);var h=(0,Bs.dG)(s.menuProps,{onKeyDown:function(e){var t=a.selectionManager.focusedKey,n=a.collection.getItem(t);if(n&&n.value.node.type===y.Tv.Directory){var r=a.expandedKeys.has(t);switch(e.key){case"ArrowRight":r||a.toggleKey(t);break;case"ArrowLeft":r&&a.toggleKey(t)}}}});return{ref:c,state:a,loading:d.loading,menuProps:h}}var Tu=(0,La.iv)([Z.l0.p(4),Z.l0.maxHeight(400),Z.l0.minWidth(100),{overflowY:"auto"}]);function Ru(e){var t=Eu(e),n=t.state,r=t.loading,o=t.ref,a=t.menuProps;return(0,i.BX)(i.HY,{children:[(0,i.tZ)(Z.G7,(0,_.Z)((0,R.Z)({innerRef:o,css:Tu},a),{children:(0,I.Z)(n.collection).map((function(e){return e.value.node.type===y.Tv.Directory?(0,i.tZ)(Nu,{item:e,state:n},e.key):(0,i.tZ)(Bu,{item:e,state:n},e.key)}))})),r?(0,i.tZ)(Iu,{}):null]})}var _u=(0,La.iv)([Z.l0.p(4),Z.l0.height(32),Z.l0.center]);function Iu(){return(0,i.tZ)(Z.G7,{css:_u,children:(0,i.tZ)(ur.Z,{})})}var Gu={root:(0,La.iv)([Z.l0.height(32),Hs.root]),selected:Hs.selected};function Du(e){return(0,i.tZ)(Z.G7,(0,_.Z)((0,R.Z)({innerRef:e.innerRef,css:[Gu.root,e.isSelected&&Gu.selected],style:{marginLeft:16*e.depth}},e.menuItemProps),{children:e.children}))}function Pu(e){var t=e.item,n=e.state,r=t.value,i=r.node,o=r.depth,a=(0,l.useRef)(null),c=(0,Gs.iX)({key:t.key,closeOnSelect:i.type===y.Tv.File},n,a);return{ref:a,menuItemProps:c.menuItemProps,depth:o,isFocused:c.isFocused,isSelected:c.isSelected}}function Bu(e){var t=Pu(e);return(0,i.tZ)(Du,{depth:t.depth,innerRef:t.ref,menuItemProps:t.menuItemProps,isFocused:t.isFocused,isSelected:t.isSelected,children:e.item.rendered})}var Uu={root:[Z.l0.align.center,Z.l0.width(16),Z.l0.cursor.pointer,Z.l0.position.absolute,Z.l0.top("100%"),Z.l0.left(0),{"&:hover > div":{backgroundColor:Z.TV.accentPrimaryDefault,opacity:1}}],bar:(0,La.iv)([Z.l0.height("100%"),Z.l0.width(1),{opacity:.2,backgroundColor:Z.TV.foregroundDimmest}])};function Au(e){var t=function(e){var t=(0,gu.ZC)(e),n=(0,tt.Z)((function(){return(0,A.cn)((function(n){var r=n(t),i=0,o=e+"/";if(e===yu.Ql)return r.length;var a=!0,l=!1,c=void 0;try{for(var s,u=r[Symbol.iterator]();!(a=(s=u.next()).done);a=!0)s.value.path.startsWith(o)&&i++}catch(d){l=!0,c=d}finally{try{a||null==u.return||u.return()}finally{if(l)throw c}}return i}))}),[e,t]);return(0,A.Dv)(n,Zu.l)}(e.path);return(0,i.tZ)(Z.G7,{css:Uu.root,onClick:e.onClick,style:{height:32*t},children:(0,i.tZ)(Z.G7,{css:Uu.bar})})}function Nu(e){var t=e.state,n=e.item,r=Pu({state:t,item:n}),o=t.expandedKeys.has(n.key),a=n.value.node.path,c=(0,mu.Z)({path:a,initialExpanded:o}),s=(0,bu.Ol)();(0,l.useEffect)((function(){s(a)}),[s,a]);var u=c.expand,d=c.collapse;return(0,l.useEffect)((function(){o?u():d()}),[o,u,d]),(0,i.BX)(Du,{depth:r.depth,innerRef:r.ref,menuItemProps:r.menuItemProps,isFocused:r.isFocused,isSelected:r.isSelected,children:[c.expanded?(0,i.tZ)(Au,{path:a,onClick:function(){return t.toggleKey(n.key)}}):null,(0,l.cloneElement)(n.rendered,{expanded:o,loading:c.loading})]})}var Lu={root:(0,La.iv)([Z.l0.p(4),Z.l0.height("100%"),Z.l0.rowWithGap(4),Z.l0.align.center,Z.l0.flex.growAndShrink(1),Z.l0.color.foregroundDefault]),text:(0,La.iv)([Z.l0.truncate,Z.l0.flex.growAndShrink(1),{fontSize:Z.TV.fontSizeDefault}])};function Xu(e){var t=e.path,n=e.expanded,r=e.loading,o=(0,m.UO)(t);return(0,i.BX)(Z.G7,{css:Lu.root,children:[n?(0,i.tZ)(vu.Z,{}):(0,i.tZ)(pu.Z,{}),(0,i.tZ)(Z.G7,{css:Lu.text,children:o}),r?(0,i.tZ)(ur.Z,{}):null]})}function Mu(e){var t=e.path,n=(0,m.UO)(t);return(0,i.BX)(Z.G7,{css:Lu.root,children:[(0,i.tZ)(D.Z,{path:t,size:16}),(0,i.tZ)(Z.G7,{css:Lu.text,children:n})]})}function Ou(e){return CSS.escape(e.path)}function Wu(e){var t=e.node;return t.type===y.Tv.Directory?(0,i.tZ)(pu.Z,{size:16}):(0,i.tZ)(D.Z,{size:16,path:t.path})}function Fu(e){var t=e.node,n=e.openFile,r=(0,Is.W)({closeOnSelect:!1}),o=(0,l.useRef)(null),a=(0,Gs.u4)({},r,o),c=a.menuTriggerProps,s=a.menuProps,u=(0,m.Il)(t.path)||".",d=(0,m.UO)(t.path);return(0,i.BX)(i.HY,{children:[(0,i.tZ)(Ls,{text:d,icon:(0,i.tZ)(Wu,{node:t}),innerRef:o,ariaProps:c,active:r.isOpen}),r.isOpen?(0,i.tZ)(Ws,{state:r,triggerRef:o,placement:"bottom start",children:(0,i.tZ)(wu.D,{children:(0,i.tZ)(Ru,{rootPath:u,activeFile:t.path,openFile:n,menuProps:s,children:function(e){return(0,i.tZ)(Z.ck,{children:e.node.type===y.Tv.Directory?(0,i.tZ)(Xu,{path:e.node.path}):(0,i.tZ)(Mu,{path:e.node.path})},Ou(e.node))}})})}):null]})}var ju=(0,La.iv)([Z.l0.flex.row,Z.l0.align.center,Z.l0.height("100%"),Z.l0.px(2)]),zu=(0,l.memo)((function(e){var t=e.path,n=e.onFileClick,r=e.children,o=function(e){var t=e.split("/"),n=t.length;return t.map((function(e,r){return{type:r===n-1?y.Tv.File:y.Tv.Directory,path:t.slice(0,r+1).join("/")}}))}(t);return(0,i.BX)(Z.G7,{css:ju,children:[o.map((function(e){return(0,i.BX)(l.Fragment,{children:[(0,i.tZ)(Fu,{node:e,openFile:n}),e.type===y.Tv.Directory?(0,i.tZ)(rl.Z,{size:12}):null]},Ou(e))})),r||null]})})),Hu=n(89188),Vu=n(89814),qu=n(72343),$u=n(17007),Yu=(0,La.iv)([Z.l0.height(28),Z.l0.flex.row,Z.l0.align.center,{borderBottom:"1px solid ".concat(Z.TV.backgroundHigher),opacity:.8,":hover":{opacity:1}}]);function Ku(e){return"/replEnvironmentDesktop"===B().pathname?(0,i.tZ)(Z.G7,{css:Yu,children:e.children}):null}var Qu=(0,La.iv)([Z.l0.flex.row,Z.l0.align.center,Z.l0.flex.growAndShrink(1),Z.l0.overflowX("auto"),Z.l0.height("100%"),{"&::-webkit-scrollbar":{height:0},scrollbarWidth:"none"}]);function Ju(e){return(0,i.tZ)(Z.G7,{css:Qu,children:e.children})}var ed=(0,La.iv)([Z.l0.flex.growAndShrink(1),Z.l0.position.relative]);function td(e){return(0,i.tZ)(Z.G7,{css:[ed,e.children&&Z.l0.center],children:e.children})}function nd(e){return{type:(0,Hu.Dp)({path:e}),data:{path:e}}}function rd(e){var t=e.path,n=e.replacePane,r=(0,l.useCallback)((function(e){n(nd(e))}),[n]);return(0,i.tZ)(Ku,{children:(0,i.tZ)(Ju,{children:(0,i.tZ)(zu,{path:t,onFileClick:r})})})}function id(e){return{match:Vu.pl,data:{label:"Copy file path",icon:(0,i.tZ)(qu.Z,{}),type:"action",run:function(){(0,Oe.Z)(e)}}}}function od(e){return{match:Vu.pl,data:{label:"Copy link",icon:(0,i.tZ)($u.Z,{}),type:"action",run:function(){var t=(0,We.dr)({path:e});(0,Oe.Z)(t)}}}}function ad(e){return(0,tt.Z)((function(){return e?[id(e),od(e)]:null}),[e])}function ld(e){var t=e.path,n=e.replacePane,r=K(),o=(0,l.useCallback)((function(e){n(nd(e))}),[n]);return(0,i.tZ)(Ku,{children:(0,i.tZ)(Ju,{children:(0,i.tZ)(zu,{path:t,onFileClick:o,children:(0,i.tZ)(hu,{view:r})})})})}function cd(e){var t=(0,ks.Z)(),n=(0,se.xZ)(e.filePath),r=(0,Cs.Z)(Pa.y.Editor),o=(0,M.Z)();return(0,i.BX)("div",{ref:r,css:{position:"relative",display:"flex",flexDirection:"column",overflowY:"hidden",height:"100%",width:"100%",boxShadow:"".concat(t?"0 3px 0 3px ".concat(t):"0")},children:[e.replacePane?(0,i.tZ)(ld,{replacePane:e.replacePane,path:e.filePath}):null,(0,i.BX)("div",{css:Mc,children:[(0,i.tZ)(Vc,(0,R.Z)({},e)),n?(0,i.tZ)(ce,{}):null]}),(0,i.tZ)("div",{css:{display:o?"none":"block"},children:(0,i.tZ)(xs,{})}),e.hideMobileKeyboardToolbar?null:(0,i.tZ)(re,{filePath:e.filePath,isLoading:!1})]})}var sd=n(44055),ud=n(14966),dd=n(87438);var fd=(0,Z.Xb)({root:[Z.l0.coverContainer,Z.l0.center,Z.l0.p(16)]});function hd(e){var t=function(e,t){switch(e.code){case y.Df.NotFound:return'"'.concat(t,"\" doesn't exist");case y.Df.IsDirectory:return'"'.concat(t,'" is a directory');case y.Df.DiskQuotaExceeded:return"This Repl ran out of disk space"}}(e.error,e.path);return(0,i.tZ)(Z.G7,{css:fd.root,children:(0,i.tZ)(Z.G7,{children:(0,i.tZ)(Z.E_,{icon:(0,i.tZ)(Mr.Z,{}),colorway:"orange",text:t})})})}var pd={Content:function(e){var t=e.pane,n=e.options;return(0,i.tZ)(md,(0,_.Z)((0,R.Z)({},t.data),{isActive:n.isActive,isCommitted:n.isCommitted,isHidden:n.isHidden,replacePane:n.replacePane,commitPane:n.commitPane}))},Icon:function(e){var t=e.pane,n=e.size;return(0,i.tZ)(D.Z,{path:t.data.path||"",size:n})},getTitle:function(e){return e.data.path?(0,m.UO)(e.data.path):"No file open"}};function vd(e){var t=e.path,n=e.isActive,r=e.isCommitted,o=e.commitPane,a=K(),c=(0,sd.Gb)({filePath:t});!function(e){var t=e.view,n=e.onUpdate,r=(0,l.useRef)(0);go((function(){return n?ve.tk.updateListener.of((function(e){var t=!0,i=!1,o=void 0;try{for(var a,l=e.transactions[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var c=a.value;if(!(r.current>0)&&!c.annotation(pe.YW.remote)&&(c.isUserEvent("input")||c.isUserEvent("delete")))return void(n&&(r.current+=1,n()))}}catch(s){i=!0,o=s}finally{try{t||null==l.return||l.return()}finally{if(i)throw o}}})):null}),[n],t)}({view:a,onUpdate:o});var s=function(e){return(0,tt.Z)((function(){return e?{match:Vu.pl,data:{type:"action",label:"Toggle all folds",icon:(0,i.tZ)(ou.ChevronRight,{}),run:function(){0===(0,cn.q2)(e.state).size?(0,cn.g_)(e):(0,cn.jZ)(e)}}}:null}),[e])}(a),u=function(e,t){return(0,Ut.P)({controlName:"flag-ws-draft-files"})?e||!t?null:{match:Vu.pl,data:{type:"action",label:"Keep open",icon:(0,i.tZ)(Co.Z,{}),run:function(){t()}}}:null}(r,o);(0,dd.x)(sd.kq,{enabled:Boolean(n&&c),run:function(){null===c||void 0===c||c.format()}});var d=(0,tt.Z)((function(){return c?c.isFormatting?{type:"action",icon:(0,i.tZ)(ur.Z,{}),label:"Formatting...",run:function(){}}:{type:"action",icon:(0,i.tZ)(ud.Z,{}),label:"Format "+(0,m.UO)(t),run:function(){c.format()}}:null}),[c,t]),f=ad(t);return(0,Hu.L5)((function(){if(a){var e,t=[];if(s&&t.push(s),u&&t.push(u),f)(e=t).push.apply(e,(0,I.Z)(f));return{actions:d?[d]:void 0,commands:t,focus:function(){a.focus()}}}}),[a,d,s,u,t,f]),null}function md(e){var t=e.path,n=e.line,r=e.col,o=e.isActive,a=e.isCommitted,c=e.replacePane,s=e.commitPane,u=os(t,c),d=(0,P.useRouter)(),h=!U()&&!(0,G.Vg)(d)&&o,p=function(e){var t=(0,f.Z)().fs,n=(0,l.useState)(null),r=n[0],i=n[1];return(0,l.useEffect)((function(){if(e){var n=t.watchTextFile(e,{onError:function(e){i(e)}});return function(){n(),i(null)}}}),[t,e]),r}(t);return t?p?(0,i.tZ)(hd,{path:t,error:p}):(0,i.tZ)(A.zt,{scope:$,children:(0,i.BX)(is.Provider,{value:u,children:[(0,i.tZ)(cd,{filePath:t,autoFocus:h,deeplink:{line:n,col:r},hideMobileKeyboardToolbar:!0,replacePane:c},t),(0,i.tZ)(vd,{path:t,isActive:o,isCommitted:a,commitPane:s})]})}):null}var gd=n(96939),Zd=n(35439),yd={Content:function(e){var t=e.options;return(0,i.tZ)(bd,{visible:!t.isHidden})},Icon:function(e){var t=e.size;return(0,i.tZ)(Zd.Z,{size:t})},getTitle:function(){return"Console"}};function bd(e){var t=e.visible,n=(0,f.Z)(),r=n.session,o=n.runner,a=n.packager,c=n.container,s=n.debuggest,u=l.useRef(null),d=(0,ct.Z)(s.mainClient),h=(0,Ac.K)();return l.useEffect((function(){if(d)return d.onOutput((function(e){u.current&&u.current.write(e)}))}),[d]),l.useEffect((function(){var e=r.onTerminalClear((function(){u.current&&u.current.clear()})),t=r.onTerminalWrite((function(e){u.current&&u.current.write(e)}));return function(){e(),t()}}),[r]),l.useEffect((function(){t&&u.current&&u.current.focus()}),[t]),l.useEffect((function(){if(!(0,X.isMobile)())return o.onLocalRun((function(){var e,t;null===(e=u.current)||void 0===e||e.clear(),null===(t=u.current)||void 0===t||t.focus()}))}),[o]),(0,Hu.L5)((function(){return{focus:u.current?function(){var e;return null===(e=u.current)||void 0===e?void 0:e.focus()}:void 0}}),[]),"html"===o.mode?null:(0,i.tZ)(gd.Z,{tracker:h,runner:o,debugClient:d,packager:a,ref:u,onBootStatus:c.client().onBootStatus})}var wd=n(14771),xd=n(1665),Cd=n(65782),kd=n(87187),Sd=n(96843);function Ed(){var e=(0,$r.Z)(['\n  query EnvEditor {\n    currentUser {\n      id\n      seenIntro: tourSeen(name: "enveditorintro")\n    }\n  }\n']);return Ed=function(){return e},e}function Td(){var e=(0,$r.Z)(['\n  mutation EnvEditorIntroSeen {\n    toursSeen(name: "enveditorintro") {\n      success\n    }\n  }\n']);return Td=function(){return e},e}var Rd={},_d=(0,Yr.Ps)(Ed());var Id=(0,Yr.Ps)(Td());var Gd,Dd=Ue.U3.ENV_EDITOR_USED;function Pd(e){var t=e.secrets,n=e.update,r=(0,l.useState)(!1),o=r[0],a=r[1],c=(0,l.useState)(!1),s=c[0],u=c[1],d=(0,l.useState)(!1),f=d[0],h=d[1],p=(0,l.useState)(0),v=p[0],m=p[1],g=0===v,y=(0,l.useRef)();y.current||(y.current=(0,tn.ir)((function(e){var t=Bd(e.state.doc.toString());return m(t),0!==t?(0,Ue.j)(Dd,{action:"rawEditorUpdatedError"}):(0,Ue.j)(Dd,{action:"rawEditorUpdated"}),[]})));var b=(0,Oo.Z)({readOnly:s||f,hideGutter:!0,language:"json",extensions:[y.current]}),w=b.view,x=b.ref,C=function(){s||a(!1)},k=function(){var e=(0,de.Z)((function(){var e,t;return(0,fe.__generator)(this,(function(r){switch(r.label){case 0:if(!w)return[2];if(!function(){if(!w)return!1;var e=Bd(w.state.doc.toString());return m(e),0===e}())return[2];u(!0),r.label=1;case 1:return r.trys.push([1,3,,4]),e=JSON.parse(w.state.doc.toString()),[4,n(e)];case 2:return r.sent(),u(!1),h(!0),setTimeout((function(){C(),setTimeout((function(){h(!1)}),500)}),500),[3,4];case 3:return t=r.sent(),et.Tb(t),(0,Ue.j)(Dd,{action:"rawEditorUpdatedError"}),m(3),u(!1),[3,4];case 4:return[2]}}))}));return function(){return e.apply(this,arguments)}}();return(0,l.useEffect)((function(){if(w){var e=JSON.stringify(t,null,2);"{}"===e&&(e="{\n  \n}"),w.dispatch({changes:{from:0,to:w.state.doc.length,insert:e}}),w.dispatch({selection:{anchor:w.state.doc.length-2}}),w.focus()}}),[w,t]),(0,i.BX)(Z.G7,{css:[Z.l0.colWithGap(8)],children:[(0,i.tZ)(Z.xv,{variant:"subheadDefault",children:"Edit raw JSON (advanced)"}),(0,i.tZ)(Z.zx,{onClick:function(){return h(!1),a(!0),void(0,Ue.j)(Dd,{action:"rawEditorOpened"})},text:"Open raw editor"}),(0,i.tZ)(Z.u_,{isOpen:o,onRequestClose:function(){return C()},children:(0,i.BX)(Z.G7,{css:[Z.l0.p(4),Z.l0.colWithGap(8)],children:[(0,i.tZ)(Z.h4,{level:2,children:"Raw Secrets Editor"}),(0,i.tZ)(Z.xv,{multiline:!0,children:"Secrets are specified in JSON. Values must be strings."}),(0,i.tZ)(Z.Tg,{css:[Z.l0.borderRadius(4),Z.l0.p(4)],elevated:!0,children:(0,i.tZ)("div",{ref:x})}),(0,i.BX)(Z.G7,{css:[Z.l0.rowWithGap(4),Z.l0.justify.end],children:[!g&&(0,i.tZ)(Z.E_,{icon:(0,i.tZ)(ou.Exclamation,{}),colorway:"negative",text:Ud(v)}),(0,i.tZ)(Z.zx,{iconLeft:(0,i.tZ)(ou.Check,{}),big:!0,stretch:!0,colorway:f?"positive":"primary",text:f?"Saved!":"Save",disabled:!g||s||f,onClick:function(){return k()}})]})]})})]})}function Bd(e){try{var t=JSON.parse(e);for(var n in t){if("string"!==typeof n)return 2;if("string"!==typeof t[n])return 2}return 0}catch(r){return 1}}function Ud(e){switch(e){case 1:return"Make sure the data is valid JSON.";case 2:return"Make sure that all values are strings.";case 3:return"There was an error saving the secrets.";default:return""}}!function(e){e[e.VALID=0]="VALID",e[e.ERROR_PARSE=1]="ERROR_PARSE",e[e.ERROR_STRINGS=2]="ERROR_STRINGS",e[e.ERROR_SAVE=3]="ERROR_SAVE"}(Gd||(Gd={}));var Ad=n(45037),Nd=n(44135);function Ld(e){return function(t){t.stopPropagation(),e(t)}}function Xd(e,t){return e?e.trim()?t.includes(e)?"You already have a secret with this key":null:"The key must include a non-space character":"Please add a key for this secret"}function Md(e){return e?null:"Please add a value for this secret"}var Od,Wd=(0,La.iv)([Z.l0.height(Z.TV.space32),{resize:"none"}]);function Fd(e){var t=e.secret,n=e.otherKeys,r=e.onUpdateKey,o=e.onUpdateValue,c=e.onSave,s=e.onCancel,u=e.onDelete,d=(0,a.Z)(l.useState(),2),f=d[0],h=d[1],p=(0,a.Z)(l.useState(),2),v=p[0],m=p[1],g=l.useRef(null),y=l.useRef(null),b=function(){var e=Xd(t.key,n);if(e)return h(e),void(g.current&&g.current.focus());var r=Md(t.value);if(r)return m(r),void(y.current&&y.current.focus());c()};l.useEffect((function(){f&&(Xd(t.key,n)||h(null))}),[t.key,f,n]),l.useEffect((function(){v&&(Md(t.value)||m(null))}),[t.value,v]);var w=Ld((function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),b())})),x=(0,Nd.H)(),C=x("key"),k=x("value"),S=(0,Il.Z)().ref;return(0,i.BX)(Z.Tg,{elevated:!0,css:[Z.l0.p(16),Z.l0.borderRadius(8),Z.l0.colWithGap(16)],children:[(0,i.tZ)(jd,{id:C,label:"key",error:f,children:(0,i.tZ)(Z.II,{id:C,autoFocus:!0,ref:g,name:"key",value:t.key,spellCheck:!1,onChange:function(e){r(e.currentTarget.value)},onKeyDown:w})}),(0,i.tZ)(jd,{id:k,label:"value",error:v,children:(0,i.tZ)(Z.B,{css:Wd,id:k,ref:(0,Wl.l)(S,y),name:"value",value:t.value,spellCheck:!1,onChange:function(e){o(e.currentTarget.value)},onKeyDown:w})}),(0,i.BX)(Z.G7,{css:[Z.l0.rowWithGap(8),Z.l0.justify.spaceBetween],children:[u?(0,i.tZ)(Z.zx,{onClick:Ld(u),colorway:"negative",text:"Delete"}):null,(0,i.BX)(Z.G7,{css:Z.l0.rowWithGap(8),children:[s?(0,i.tZ)(Z.zx,{onClick:Ld(s),text:"Cancel"}):null,(0,i.tZ)(Z.zx,{colorway:"primary",onClick:Ld(b),text:u?"Save":"Add new secret"})]})]})]})}function jd(e){return(0,i.BX)(Z.G7,{css:[Z.l0.colWithGap(4)],children:[(0,i.tZ)("label",{htmlFor:e.id,children:(0,i.tZ)(Z.xv,{variant:"small",color:"dimmer",children:e.label})}),e.children,e.error?(0,i.BX)(Z.G7,{css:[Z.l0.rowWithGap(2),Z.l0.align.center],children:[(0,i.tZ)(Ad.Z,{}),(0,i.tZ)(Z.xv,{variant:"small",css:Z.l0.color.accentNegativeStrongest,children:e.error})]}):null]})}function zd(e){var t=e.onAdd,n=e.otherKeys,r=(0,a.Z)(l.useState({key:"",value:""}),2),o=r[0],c=r[1];return(0,i.tZ)(Fd,{secret:o,otherKeys:n,onUpdateKey:function(e){return c((function(t){return t?(0,_.Z)((0,R.Z)({},t),{key:e}):t}))},onUpdateValue:function(e){return c((function(t){return t?(0,_.Z)((0,R.Z)({},t),{value:e}):t}))},onSave:function(){c({key:"",value:""}),o.value&&o.key&&t(o)}})}function Hd(e){var t=e.secret,n=e.otherKeys,r=e.onUpdateSecret,o=e.onDeleteSecret,c=(0,a.Z)(l.useState(null),2),s=c[0],u=c[1];return s?(0,i.tZ)(Fd,{secret:s,otherKeys:n,onUpdateKey:function(e){return u((function(t){return t?(0,_.Z)((0,R.Z)({},t),{key:e}):t}))},onUpdateValue:function(e){return u((function(t){return t?(0,_.Z)((0,R.Z)({},t),{value:e}):t}))},onSave:function(){u(null),s.value&&s.key&&(s.value===t.value&&s.key===t.key||r(t.key,s))},onCancel:function(){return u(null)},onDelete:function(){return o(t.key)}}):(0,i.BX)(Z.G7,{tag:"button",css:[Z.gU.filled,Z.l0.p(8),Z.l0.rowWithGap(8),Z.l0.align.center,Z.l0.justify.spaceBetween,Z.l0.borderRadius(8)],onClick:function(){u((0,R.Z)({},t))},children:[(0,i.BX)(Z.G7,{css:[Z.l0.rowWithGap(8),Z.l0.align.center],children:[(0,i.tZ)(yo.Z,{size:24}),(0,i.tZ)(Z.xv,{children:t.key})]}),(0,i.tZ)(Cd.Z,{})]})}function Vd(e){var t=e.secrets,n=e.onUpdateSecret,r=e.onDeleteSecret;return(0,i.tZ)(Z.G7,{css:Z.l0.colWithGap(8),children:Object.keys(t).sort().map((function(e){return(0,i.tZ)(Hd,{otherKeys:Object.keys(t).filter((function(t){return t!==e})),secret:{key:e,value:t[e]},onUpdateSecret:n,onDeleteSecret:r},e)}))})}function qd(e){var t=e.secrets,n=e.activeFile,r=e.onInsertDone,o=(0,a.Z)(l.useState(Object.keys(t)[0]),2),c=o[0],s=o[1],u=(0,Si.Z)(n),d=(0,ta.Qt)(),f=function(e,t){if(!e)return null;switch((0,m.r6)(e)){case"js":case"ts":case"jsx":case"tsx":return{import:null,access:"const mySecret = process.env['".concat(t,"']")};case"py":return{import:"import os",access:"my_secret = os.environ['".concat(t,"']")};case"go":return{import:'import "os"',access:'mySecret := os.Getenv("'.concat(t,'")')};case"java":case"scala":return{import:null,access:'System.getenv("'.concat(t,'")')};case"rb":return{import:null,access:'ENV["'.concat(t,'"]')};case"c":case"cpp":return{import:"#include <stdlib.h>",access:'char* mySecret = getenv("'.concat(t,'")')};case"cs":return{import:"using System;",access:'string mySecret = System.Environment.GetEnvironmentVariable("'.concat(t,'");')};case"sh":return{import:null,access:'"$'.concat(t,'"')};default:return null}}(n,c);return f&&u?(0,i.BX)(Z.G7,{css:Z.l0.colWithGap(16),children:[f.import?(0,i.BX)(Z.G7,{css:Z.l0.colWithGap(8),children:[(0,i.tZ)(Z.xv,{multiline:!0,children:"Secrets will be available in your Repl as environment variables when you run and when you use the shell"}),(0,i.tZ)(Z.xv,{variant:"subheadDefault",children:"1. Add the imports"}),(0,i.tZ)(Z.Tg,{tag:"pre",elevated:!0,css:[Z.l0.borderRadius(8),Z.l0.p(8)],children:(0,i.tZ)(Z.xv,{css:Z.l0.font.code,children:f.access})}),(0,i.tZ)(Z.zx,{onClick:function(){u({code:f.import,insertAt:0}),(0,Ue.j)(Ue.U3.ENV_EDITOR_USED,{action:"insert"})},text:"Insert",iconRight:(0,i.tZ)(rl.Z,{})})]}):null,(0,i.BX)(Z.G7,{css:Z.l0.colWithGap(8),children:[(0,i.BX)(Z.xv,{variant:"subheadDefault",children:[f.import?"2. ":"","Access the secret by key as an environment variable"]}),(0,i.tZ)(kd.Z,{respectMaxWidth:!0,items:Object.keys(t),onClick:function(e){s(e)},renderAnchorComponent:function(e){var t=e.innerRef,n=(0,ln.Z)(e,["innerRef"]);return(0,i.tZ)(Z.zx,(0,_.Z)((0,R.Z)({ref:t},n),{filled:!1,iconOnRight:!0,text:c,iconRight:(0,i.tZ)(Sd.Z,{})}))},renderItemChildComponent:function(e){return(0,i.tZ)(Z.xv,{children:e})}}),(0,i.tZ)(Z.Tg,{tag:"pre",elevated:!0,css:[Z.l0.borderRadius(8),Z.l0.p(8)],children:(0,i.tZ)(Z.xv,{css:Z.l0.font.code,children:f.access})}),(0,i.tZ)(Z.G7,{css:Z.l0.flex.row,children:(0,i.tZ)(Z.zx,{outlined:!0,onClick:function(){var e,t,n=null!==(t=null===(e=d())||void 0===e?void 0:e.position.offset)&&void 0!==t?t:0;u({code:f.access,insertAt:n}),r&&r(),(0,Ue.j)(Ue.U3.ENV_EDITOR_USED,{action:"insert"})},text:"Insert",iconRight:(0,i.tZ)(rl.Z,{})})})]})]}):(0,i.BX)(Z.G7,{css:Z.l0.colWithGap(8),children:[(0,i.tZ)(Z.xv,{multiline:!0,children:"Secrets will be available in your Repl as environment variables when you run and when you use the shell"}),u?null:(0,i.tZ)(Z.xv,{multiline:!0,children:"Select a file to enable code inserter"})]})}function $d(e){var t=e.secrets,n=e.activeFile,r=e.onAdd,o=e.onIntroDone,c=(0,a.Z)(l.useState(Od.What),2),s=c[0],u=c[1];return s===Od.What?(0,i.BX)(Z.G7,{css:Z.l0.colWithGap(8),children:[(0,i.tZ)(Z.xv,{variant:"subheadDefault",children:"What\u2019s this?"}),(0,i.tZ)(Z.xv,{multiline:!0,children:"Using this feature will allow you to hide secret information like passwords while still being able to use them in the Repl"}),(0,i.tZ)(Z.zx,{onClick:function(){return u(Od.Add)},text:"Got it",css:[{alignSelf:"baseline"}],outlined:!0})]}):s===Od.Add?(0,i.BX)(Z.G7,{css:Z.l0.colWithGap(16),children:[(0,i.BX)(Z.G7,{css:Z.l0.colWithGap(8),children:[(0,i.tZ)(xd.Z,{level:5,children:"Add your first secret!"}),(0,i.tZ)(Z.xv,{multiline:!0,color:"dimmer",children:'The "key" is what you will use in the code itself and will be visible to everyone'}),(0,i.tZ)(Z.xv,{multiline:!0,color:"dimmer",children:'The "value" is where you put the private or secret text, hit shift+enter to add new lines'})]}),(0,i.tZ)(zd,{onAdd:function(e){r(e),u(Od.Use)},otherKeys:Object.keys(t)}),(0,i.tZ)(Z.zx,{onClick:function(){var e=Object.keys(t).length>0?Od.Use:Od.End;u(e),(0,Ue.j)(Ue.U3.ENV_EDITOR_USED,{action:"intro_skipped",step:Od.Add})},text:"Skip this step"})]}):s===Od.Use?(0,i.BX)(Z.G7,{css:Z.l0.colWithGap(8),children:[(0,i.tZ)(xd.Z,{level:5,children:"Now let\u2019s use it in the Repl."}),(0,i.tZ)(qd,{secrets:t,onInsertDone:function(){return u(Od.End)},activeFile:n}),(0,i.tZ)(Z.zx,{onClick:function(){u(Od.End),(0,Ue.j)(Ue.U3.ENV_EDITOR_USED,{action:"intro_skipped",step:Od.Use})},text:"Skip this step"})]}):(0,i.BX)(Z.G7,{css:Z.l0.colWithGap(8),children:[(0,i.tZ)(Z.xv,{children:"You\u2019re all set. You can add as many secrets as you want, we promise to keep them safe."}),(0,i.BX)(Z.xv,{children:["You can always"," ",(0,i.tZ)("a",{href:"https://docs.replit.com/programming-ide/storing-sensitive-information-environment-variables",target:"_blank",children:"visit our docs"})," ","for more information."]}),(0,i.tZ)(Z.xv,{children:"Please note, that people you invite as multiplayer collaborators will have access to these secrets."}),(0,i.tZ)(Z.zx,{onClick:o,text:"Got it"})]})}function Yd(e,t){var n=(0,R.Z)({},e);return"add"===t.type?n[t.key]=t.value:"update"===t.type?(delete n[t.oldKey],n[t.key]=t.value):delete n[t.key],n}function Kd(e){var t,n=e.readRawEnv,r=e.writeRawEnv,o=e.hideInserterAndIntro,c=(0,ta.R3)(),s=(0,it.Z)(),u=(0,a.Z)(l.useState(null),2),d=u[0],f=u[1],h=function(e){var t=(0,R.Z)({},Rd,e);return li.a(_d,t)}(),p=h.data,v=h.loading,m=h.updateQuery,g=(0,a.Z)(function(e){var t=(0,R.Z)({},Rd,e);return Kr.D(Id,t)}(),1)[0],b=(0,Ur.Z)();l.useEffect((function(){(0,Ue.Cn)(Ue.U3.ENV_EDITOR_USED,{action:"opened"}),Pl.Z.set("enveditortour",!0)}),[]),l.useEffect((function(){function e(){return(e=(0,de.Z)((function(){var e,t;return(0,fe.__generator)(this,(function(r){switch(r.label){case 0:return[4,n()];case 1:if((e=r.sent()).error===y.Df.NotFound)return s.current&&f({}),[2];if(e.error)throw new Error("Error getting .env");return s.current?(t=wd.Z.parse(e.content.toString()),f(t),[2]):[2]}}))}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[n,f,s]);var w=l.useRef(null),x=l.useRef([]),C=function(){var e=(0,de.Z)((function(e){var t,i,o,a,l;return(0,fe.__generator)(this,(function(c){switch(c.label){case 0:if(!d)throw new Error("trying to write secrets before loading");return t=Yd(d,e),f(t),x.current.push(e),i=Math.random(),w.current=i,[4,n()];case 1:return a=c.sent(),w.current!==i?[2]:(a.error?o=t:(o=wd.Z.parse(a.content.toString()),x.current.forEach((function(e){o=Yd(o,e)})),f(o)),x.current=[],l=wd.Z.serialize(o),[4,r(l)]);case 2:return c.sent(),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=(0,de.Z)((function(e){return(0,fe.__generator)(this,(function(t){return(0,Ue.j)(Ue.U3.ENV_EDITOR_USED,{action:"created",multiline:e.value.includes("\n")}),C((0,R.Z)({type:"add"},e)),[2]}))}));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=(0,de.Z)((function(e,t){return(0,fe.__generator)(this,(function(n){return(0,Ue.j)(Ue.U3.ENV_EDITOR_USED,{action:"updated",multiline:t.value.includes("\n")}),C((0,R.Z)({type:"update",oldKey:e},t)),[2]}))}));return function(t,n){return e.apply(this,arguments)}}(),E=function(){var e=(0,de.Z)((function(e){return(0,fe.__generator)(this,(function(t){return(0,Ue.j)(Ue.U3.ENV_EDITOR_USED,{action:"deleted"}),C({type:"delete",key:e}),[2]}))}));return function(t){return e.apply(this,arguments)}}();if(v||!d||!b)return(0,i.tZ)(Z.G7,{css:[Z.l0.center,Z.l0.coverContainer],children:(0,i.tZ)(ur.Z,{size:24})});if((null===p||void 0===p||null===(t=p.currentUser)||void 0===t?void 0:t.seenIntro)||o){var T=Object.keys(d);return(0,i.BX)(Z.G7,{css:Z.l0.colWithGap(32),children:[(0,i.BX)(Z.G7,{css:Z.l0.colWithGap(16),children:[(0,i.tZ)(Vd,{secrets:d,onUpdateSecret:S,onDeleteSecret:E}),(0,i.tZ)(zd,{onAdd:k,otherKeys:T})]}),T.length>0&&!o?(0,i.tZ)(qd,{secrets:d,activeFile:c}):null,(0,i.tZ)(Pd,{secrets:d,update:function(){var e=(0,de.Z)((function(e){var t;return(0,fe.__generator)(this,(function(n){switch(n.label){case 0:return f(e),t=wd.Z.serialize(e),[4,r(t)];case 1:return n.sent(),[2]}}))}));return function(t){return e.apply(this,arguments)}}()})]})}return(0,i.tZ)($d,{secrets:d,onAdd:k,activeFile:c,onIntroDone:function(){g(),m((function(e){return e.currentUser?(0,_.Z)((0,R.Z)({},e),{currentUser:(0,_.Z)((0,R.Z)({},e.currentUser),{seenIntro:!0})}):e}))}})}!function(e){e.What="What",e.Add="Add",e.Use="Use",e.End="End"}(Od||(Od={}));var Qd=n(94841);function Jd(e){var t=e.children;return(0,i.tZ)(Z.G7,{css:[Z.l0.height("100%"),Z.l0.overflowY("auto"),Hu.F3],children:(0,i.BX)(Z.G7,{css:[Z.l0.p(8),Z.l0.colWithGap(8),Z.l0.flex.grow(1)],children:[(0,i.BX)(Z.G7,{css:Z.l0.colWithGap(4),children:[(0,i.BX)(Z.G7,{css:[Z.l0.flex.row,Z.l0.justify.spaceBetween,Z.l0.flex.wrap],children:[(0,i.tZ)(xd.Z,{truncate:!0,level:4,children:"Secrets"}),(0,i.tZ)(Z.ZP,{iconLeft:(0,i.tZ)(Qd.Z,{}),href:"https://docs.replit.com/programming-ide/storing-sensitive-information-environment-variables",small:!0,text:"Docs",target:"_blank"})]}),(0,i.tZ)(Z.xv,{variant:"small",color:"dimmer",children:"System environment variables."})]}),(0,i.tZ)(Z.G7,{css:[Z.l0.flex.grow(1),Z.l0.py(8),Z.l0.position.relative],children:t})]})})}var ef=n(63012),tf={Content:function(){return(0,i.tZ)(nf,{})},Icon:function(e){var t=e.size;return(0,i.tZ)(ef.Z,{size:t})},getTitle:function(){return"Secrets"}};function nf(){var e=(0,f.Z)().fs;return(0,i.tZ)(Jd,{children:(0,i.tZ)(Kd,{readRawEnv:function(){return e.readFile(".env")},writeRawEnv:function(t){return e.writeFile(".env",t)}})})}var rf=n(90097),of=n(75399),af={Content:function(){return(0,i.BX)(Z.G7,{css:[Z.l0.overflow("auto"),Hu.F3],children:[(0,i.tZ)(Z.h4,{variant:"subheadBig",level:3,css:[Z.l0.p(8)],children:"Settings"}),(0,i.tZ)(rf.Z,{css:[{backgroundColor:"transparent"}]})]})},Icon:function(e){var t=e.size;return(0,i.tZ)(of.Z,{size:t})},getTitle:function(){return"Settings"}},lf=n(31140);var cf=n(14810),sf="index.html";var uf=(0,A.cn)({replId:"",packageManagers:{}});function df(e,t){return t.some((function(t){var n,r;return(null===(n=t.name)||void 0===n?void 0:n.toLowerCase())===(null===(r=e.name)||void 0===r?void 0:r.toLowerCase())}))}function ff(e){var t=(0,a.Z)((0,A.KO)(uf),2),n=t[0],r=t[1],i=(0,f.Z)(),c=i.fs,s=i.packager;return(0,l.useEffect)((function(){if((null===e||void 0===e?void 0:e.id)&&!n.packageManagers[e.id]){var t="html"===e.id?function(e){var t=(0,lt.u)(!1),n=(0,lt.u)([]);function r(){return(r=(0,de.Z)((function(){return(0,fe.__generator)(this,(function(e){switch(e.label){case 0:return t.current=!0,[4,c()];case 1:return e.sent(),t.current=!1,[2]}}))}))).apply(this,arguments)}function i(){return i=(0,de.Z)((function(n){return(0,fe.__generator)(this,(function(r){return[2,new Promise(function(){var r=(0,de.Z)((function(r){var i;return(0,fe.__generator)(this,(function(o){switch(o.label){case 0:return t.current?[2]:(t.current=!0,[4,e.stat(sf)]);case 1:return o.sent().exists?(i=e.watchTextFile(sf,{onReady:function(o){var a=o.initialContent,l=o.writeChange,s='<script src="'.concat(n.sourceCodeURL,'"><\/script>\n'),u=a,d=u.indexOf("<script");-1===d&&(d=u.indexOf("</body>")),l({from:d,insert:s}),e.flush().then((0,de.Z)((function(){return(0,fe.__generator)(this,(function(e){switch(e.label){case 0:return[4,c()];case 1:return e.sent(),r(),[2]}}))}))).catch((function(){r()})).finally((function(){i(),t.current=!1}))},onError:function(){i(),r(),t.current=!1}}),[2]):[2,r()]}}))}));return function(e){return r.apply(this,arguments)}}())]}))})),i.apply(this,arguments)}function o(){return o=(0,de.Z)((function(n){return(0,fe.__generator)(this,(function(r){return[2,new Promise(function(){var r=(0,de.Z)((function(r){var i;return(0,fe.__generator)(this,(function(o){switch(o.label){case 0:return t.current?[2]:(t.current=!0,[4,e.stat(sf)]);case 1:return o.sent().exists?(i=e.watchTextFile(sf,{onReady:function(o){var a=o.initialContent,l=o.writeChange,s=a,u=0,d=!0,f=!1,h=void 0;try{for(var p,v=s.split("\n")[Symbol.iterator]();!(d=(p=v.next()).done);d=!0){var m,g=p.value;if(m=g.match(/^\s*<script src="https:\/\/cdnjs.cloudflare.com\/ajax\/libs\/(.+)\/(.+)\/(.+).js"><\/script>$/)){var Z=m[1];n.name===Z&&l({from:u,to:u+g.length+1,insert:""})}u+=g.length+1}}catch(y){f=!0,h=y}finally{try{d||null==v.return||v.return()}finally{if(f)throw h}}e.flush().then((0,de.Z)((function(){return(0,fe.__generator)(this,(function(e){switch(e.label){case 0:return[4,c()];case 1:return e.sent(),r(),[2]}}))}))).catch((function(){r()})).finally((function(){i(),t.current=!1}))},onError:function(){i(),r(),t.current=!1}}),[2]):[2,r()]}}))}));return function(e){return r.apply(this,arguments)}}())]}))})),o.apply(this,arguments)}function a(){return(a=(0,de.Z)((function(e){return(0,fe.__generator)(this,(function(t){switch(t.label){case 0:return[4,fetch("/data/cdnjs/search/".concat(encodeURIComponent(e)),{credentials:"same-origin",headers:{"Content-Type":"application/json",Accept:"application/json"}})];case 1:return[4,t.sent().json()];case 2:return[2,t.sent().map((function(e){return{name:e.name,version:e.version,description:e.description,homepageURL:e.link,sourceCodeURL:e.include}}))]}}))}))).apply(this,arguments)}function l(){return(l=(0,de.Z)((function(e){var t,n;return(0,fe.__generator)(this,(function(r){switch(r.label){case 0:return[4,fetch("/data/cdnjs/info/".concat(encodeURIComponent(e)),{credentials:"same-origin",headers:{"Content-Type":"application/json",Accept:"application/json"}})];case 1:t=r.sent(),r.label=2;case 2:return r.trys.push([2,4,,5]),[4,t.json()];case 3:return(n=r.sent())?[2,{name:n.name,version:n.version,description:n.description,homepageURL:n.link,sourceCodeURL:n.include}]:[3,5];case 4:return r.sent(),[2,void 0];case 5:return[2]}}))}))).apply(this,arguments)}function c(){return s.apply(this,arguments)}function s(){return(s=(0,de.Z)((function(){var e;return(0,fe.__generator)(this,(function(t){switch(t.label){case 0:return[4,u()];case 1:return(e=t.sent()).error?n.current=[]:e.packages&&(n.current=e.packages),[2]}}))}))).apply(this,arguments)}function u(){return d.apply(this,arguments)}function d(){return d=(0,de.Z)((function(){return(0,fe.__generator)(this,(function(t){return[2,new Promise(function(){var t=(0,de.Z)((function(t){var n,r;return(0,fe.__generator)(this,(function(i){switch(i.label){case 0:return[4,e.stat(sf)];case 1:return i.sent().exists?(n=[],r=e.watchTextFile(sf,{onReady:function(e){var i=e.initialContent,o=!0,a=!1,l=void 0;try{for(var c,s=i.split("\n")[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u;if(u=c.value.match(/^\s*<script src="https:\/\/cdnjs\.cloudflare\.com\/ajax\/libs\/(.+)\/(.+)\/(.+).js"><\/script>$/)){var d=u[1],f=u[2];n.push({name:d,version:f})}}}catch(h){a=!0,l=h}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}r(),t({packages:n,error:null})},onError:function(e){r(),t({packages:null,error:e.message})}}),[2]):(t({packages:[],error:null}),[2])}}))}));return function(e){return t.apply(this,arguments)}}())]}))})),d.apply(this,arguments)}return{initialize:function(){return r.apply(this,arguments)},install:function(e){return i.apply(this,arguments)},uninstall:function(e){return o.apply(this,arguments)},search:function(e){return a.apply(this,arguments)},installedPackages:n,isInstalled:function(e){return n.current.some((function(t){var n,r;return(null===(n=t.name)||void 0===n?void 0:n.toLowerCase())===(null===(r=e.name)||void 0===r?void 0:r.toLowerCase())}))},fetchPackageInfo:function(e){return l.apply(this,arguments)},isRunning:t}}(c):function(e,t){var n=(0,lt.u)(!1),r=(0,lt.u)([]);function i(){return(i=(0,de.Z)((function(){var i;return(0,fe.__generator)(this,(function(o){switch(o.label){case 0:return n.current=!0,[4,e.listSpecfile(t)];case 1:return(i=o.sent()).error?r.current=[]:i.packages&&(r.current=i.packages),n.current=!1,[2]}}))}))).apply(this,arguments)}function o(){return(o=(0,de.Z)((function(n){return(0,fe.__generator)(this,(function(r){return[2,e.searchPackages(n,t)]}))}))).apply(this,arguments)}function a(){return(a=(0,de.Z)((function(i){var o,a,l;return(0,fe.__generator)(this,(function(c){switch(c.label){case 0:if(n.current)return[2];if((0,Ue.j)(Ue.U3.PACKAGE_MANAGER_USED,{action:"installed",packageId:i.name}),!i.name)throw new Error("Package has no name");return df(i,r.current)?[2]:(n.current=!0,[4,e.addPackages([i],t)]);case 1:return c.sent(),[4,e.listSpecfile(t)];case 2:return o=c.sent(),a=o.packages,l=o.error,a&&(r.current=a),l&&(r.current=[]),n.current=!1,[2]}}))}))).apply(this,arguments)}function l(){return(l=(0,de.Z)((function(i){var o,a,l;return(0,fe.__generator)(this,(function(c){switch(c.label){case 0:if(n.current)return[2];if(!i.name)throw new Error("Package has no name");return df(i,r.current)?((0,Ue.j)(Ue.U3.PACKAGE_MANAGER_USED,{action:"removed",packageId:i.name}),n.current=!0,[4,e.removePackages([i.name],t)]):[2];case 1:return c.sent(),[4,e.listSpecfile(t)];case 2:return o=c.sent(),a=o.packages,l=o.error,a&&(r.current=a),l&&(r.current=[]),n.current=!1,[2]}}))}))).apply(this,arguments)}function c(){return(c=(0,de.Z)((function(n){return(0,fe.__generator)(this,(function(r){switch(r.label){case 0:return[4,e.fetchPackageInfo(n,t)];case 1:return[2,r.sent()]}}))}))).apply(this,arguments)}return{initialize:function(){return i.apply(this,arguments)},install:function(e){return a.apply(this,arguments)},uninstall:function(e){return l.apply(this,arguments)},search:function(e){return o.apply(this,arguments)},installedPackages:r,isInstalled:function(e){return df(e,r.current)},fetchPackageInfo:function(e){return c.apply(this,arguments)},isRunning:n}}(s,e.id);r({replId:n.replId,packageManagers:(0,_.Z)((0,R.Z)({},n.packageManagers),(0,o.Z)({},e.id,t))})}}),[c,n,null===e||void 0===e?void 0:e.id,s,r]),e&&n.packageManagers[e.id]||null}var hf,pf=n(36918),vf=n(39141);!function(e){e.INSTALL="Install",e.INSTALLED="Installed",e.REMOVE="Remove",e.ERROR="Failed to Install"}(hf||(hf={}));var mf=(0,Z.Xb)({self:[Z.l0.p(8),Z.l0.borderRadius(8),Z.l0.width("100%")],header:[Z.l0.flex.row,Z.l0.justify.spaceBetween],description:[Z.l0.colWithGap(16),Z.l0.mt(8)]});function gf(e){var t=e.onActionClick,n=e.isAlreadyInstalled,r=e.isPackagerRunning,o=e.isIconLoading,a=e.statusMessage,c=e.itemName,s=e.itemDescription,u=e.itemVersion,d=e.itemHomepageURL,f=e.itemLicense,h=e.itemAuthor,p=e.itemDependencies,v=e.htmlItem,m=(0,l.useState)(!1),g=m[0],y=m[1],b=d||f||h||p&&p.length;return(0,i.BX)(Z.Tg,{css:mf.self,elevated:!0,children:[(0,i.BX)(Z.G7,{css:mf.header,children:[(0,i.tZ)(Z.h4,{variant:"subheadDefault",level:3,children:c}),b?(0,i.tZ)(Z.hU,{alt:"Show more about package",tooltipHidden:!0,onClick:function(){return y((function(e){return!e}))},children:(0,i.tZ)(rl.Z,{rotate:g?90:0})}):null]}),(0,i.BX)(Z.G7,{css:mf.description,children:[(0,i.tZ)(xf,{title:"Version ".concat(u),value:s||"This package has no description.",showMore:g}),d&&g?(0,i.tZ)(xf,{title:"Website",value:(0,i.tZ)("a",{href:d,rel:"noreferrer noopener",target:"_blank",children:d}),showMore:g}):null,f&&g?(0,i.tZ)(xf,{title:"License",value:f,showMore:g}):null,h&&g?(0,i.tZ)(xf,{title:"Author",value:h,showMore:g}):null,p&&p.length&&g?(0,i.tZ)(xf,{title:"Dependencies",value:(0,i.tZ)("ul",{css:{listStyle:"none"},children:null===p||void 0===p?void 0:p.map((function(e){return(0,i.tZ)("li",{children:e},e||"")}))}),showMore:g}):null,(0,i.tZ)(Z.zx,(0,R.Z)({iconLeft:(0,i.tZ)(Cf,{isAlreadyInstalled:n,isPackagerRunning:r,isIconLoading:o,htmlItem:!!v}),text:a,onClick:function(){return t()},disabled:r&&!o,loading:o},bf(a)))]})]})}var Zf=(0,Z.Xb)({self:[mf.self,Z.pt.backgroundPulse(),Z.l0.height(128)]});function yf(){return(0,i.tZ)(i.HY,{children:new Array(3).fill(0).map((function(e,t){return(0,i.tZ)(Z.Tg,{css:Zf.self,elevated:!0},"itemDetailSkeleton".concat(t))}))})}function bf(e){switch(e){case hf.REMOVE:return{colorway:"negative",outlined:!0};case hf.INSTALLED:return{colorway:"positive",outlined:!0};default:return{}}}var wf=(0,Z.Xb)({self:[Z.l0.colWithGap(2)],title:[Z.l0.color.foregroundDimmer]});function xf(e){var t=e.title,n=e.value,r=e.showMore;return(0,i.BX)(Z.G7,{css:wf.self,children:[(0,i.tZ)(Z.xv,{css:wf.title,children:t}),n?(0,i.tZ)(Z.xv,{multiline:!0,maxLines:r?void 0:2,children:n}):null]})}function Cf(e){var t=e.isAlreadyInstalled,n=e.isIconLoading,r=e.htmlItem;return n?(0,i.tZ)(ur.Z,{}):t?r?(0,i.tZ)(wr.Z,{}):(0,i.tZ)(pf.Z,{}):(0,i.tZ)(vf.Z,{})}var kf=(0,Z.Xb)({self:[Z.l0.color.foregroundDefault,Z.l0.colWithGap(16)],installedHeader:[Z.l0.fontSize(Z.TV.fontSizeSubheadDefault)],searchUIOuter:[Z.l0.flex.row,Z.l0.align.center],searchUIInner:[Z.l0.flex.grow(1),Z.l0.pr(8)],searchResult:[Z.l0.flex.column,{gap:Z.TV.space8,listStyle:"none",webkitOverflowScrolling:"touch"}],packagerSection:[Z.l0.flex.row,Z.l0.align.center],packagerSectionExpandHandle:[Z.l0.pr(8),{cursor:"pointer",userSelect:"none"}]}),Sf={fadeIn:{animation:"".concat((0,La.F4)("from{opacity:0}to{opacity:1}")," 100ms forwards ease-in-out alternate")}},Ef=(0,Z.Xb)({header:[Z.l0.fontSize(Z.TV.fontSizeSubheadDefault),Z.l0.flex.row,Z.l0.align.center,Z.l0.justify.spaceBetween,{textTransform:"capitalize"}],loading:[Z.l0.height(22),Z.l0.width("100%"),Z.l0.borderRadius(4),Z.pt.backgroundPulse()],container:[Sf.fadeIn,Z.l0.flex.grow(1)]}),Tf="No packages installed.",Rf="Installed packages";function _f(e){var t=e.packagerTitle,n=e.error,r=e.loading,o=e.packagesCount,a=e.displayingInstalledPackages,l=e.affectedFile,c=(0,f.Z)().session,s=(0,tt.Z)((function(){return a?0===o?Tf:Rf:n?"We couldn't search for your packages. Try again.":0===o?"No packages found":o+" packages found"}),[n,o,a]);return(0,i.tZ)(Z.G7,{css:Ef.container,children:r?(0,i.tZ)(Z.G7,{css:Ef.loading}):(0,i.BX)(i.HY,{children:[(0,i.BX)(Z.G7,{css:Ef.header,children:[(0,i.tZ)(Z.h4,{variant:"subheadDefault",level:2,children:t}),(0,i.tZ)(Z.h4,{level:3,children:s}),s===Rf&&a&&l?(0,i.tZ)(Z.hU,{alt:"Open "+l,tooltipPlacement:"bottom-start",onClick:function(){return c.openFile(l)},children:(0,i.tZ)(Co.Z,{})}):null]}),s===Tf?(0,i.BX)(Z.xv,{multiline:!0,children:["You don\u2019t have any packages installed. Try searching for a package to install, or"," ",(0,i.tZ)("a",{href:"https://docs.replit.com/programming-ide/installing-packages",target:"_blank",rel:"noreferrer",children:"learn more about packages here"}),"."]}):null]})},r?"packagerTitleLoading":"packagerTitleLoaded")}var If=(0,Z.Xb)({self:[Z.l0.p(8),Z.l0.borderRadius(8),Z.l0.colWithGap(16)],header:[Z.l0.flex.row,Z.l0.align.center,Z.l0.justify.spaceBetween],headerTitle:[Z.l0.rowWithGap(4),Z.l0.align.center]});function Gf(e){var t=e.title,n=e.children,r=e.onClose,o=void 0===r?function(){}:r,a=(0,l.useState)(!0),c=a[0],s=a[1];return(0,i.BX)(Z.Tg,{css:If.self,elevated:!0,children:[(0,i.BX)(Z.G7,{css:If.header,children:[(0,i.BX)(Z.G7,{css:If.headerTitle,children:[(0,i.tZ)(Z.h4,{variant:"subheadDefault",level:2,children:t}),(0,i.tZ)(Z.hU,{alt:c?"Minimize tip information":"Expand tip information",tooltipHidden:!0,onClick:function(){return s((function(e){return!e}))},children:(0,i.tZ)(rl.Z,{rotate:c?90:0})})]}),(0,i.tZ)(Z.hU,{alt:"Dismiss tip",tooltipHidden:!0,onClick:o,children:(0,i.tZ)(xe.Z,{})})]}),c?(0,i.tZ)(Z.G7,{children:n}):null]})}var Df=n(81970),Pf=n(34380),Bf=n(70840);function Uf(e){var t=e.loading,n=e.children;return(0,i.tZ)(i.HY,{children:(0,i.tZ)("ul",{css:[kf.searchResult,Sf.fadeIn],children:t?(0,i.tZ)(yf,{}):n},t?"packagerLoading":"packagerLoaded")})}var Af=Z.KD.li;function Nf(){var e=(0,Df.I)(),t=(0,l.useState)(null),n=t[0],r=t[1],o=(0,f.Z)().packager,c=(0,gi.Z)(),s=(0,a.Z)((0,A.KO)(uf),2),u=s[0],d=s[1];(0,l.useEffect)((function(){c!==u.replId&&d({replId:c,packageManagers:{}})}),[c,u.replId]),(0,l.useEffect)((function(){!function(e,t){var n=e.map((function(e){return e.id})),r=t.getPackagerIds(),i=!0,o=!1,a=void 0;try{for(var l,c=r[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;s&&-1===n.indexOf(s)&&t.clearPackager(s)}}catch(u){o=!0,a=u}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}}(e,o)}),[e,o]),(0,l.useEffect)((function(){(null===n&&e.length>0||n&&!e.find((function(e){return e.id===n.id})))&&r(e[0])}),[e,n]);var h=(0,l.useState)(""),p=h[0],v=h[1],m=function(e){var t=e.query,n=e.packagerType,r=e.config,i=(0,l.useState)([]),o=i[0],a=i[1],c=(0,l.useState)(),s=c[0],u=c[1],d=(0,l.useState)(!1),f=d[0],h=d[1],p=ff(r),v=(0,l.useState)(null),m=v[0],g=v[1],Z=(0,cf.Z)(t,400);return(0,l.useEffect)((function(){if(u(null),""===Z)return h(!1),void a([]);h(!0),(0,Ue.j)(Ue.U3.PACKAGE_MANAGER_USED,{action:"searched",query:Z,packagerType:n});var e=!1;return p?(p.search(Z).then((function(t){e||(a(t.slice(0,50)),g(p))})).catch((function(t){et.Tb(t),e||u(t)})).finally((function(){e||h(!1)})),function(){e=!0}):void 0}),[p,Z,n]),{searchResults:o,isLoading:f,error:s,searchResultsPackageManager:m}}({query:p,packagerType:"upm",config:n}),g=m.searchResults,y=m.isLoading,b=m.searchResultsPackageManager,w=""===p,x=(0,lf.Z)("packager","show_packager_about_tooltip"),C=x.shouldDisplay,k=x.register,S=x.dismiss;(0,l.useEffect)((function(){k()}),[k]);var E=(0,lf.Z)("packager","show_packager_import_tooltip"),T=E.shouldDisplay,R=E.register,_=E.dismiss;return(0,l.useEffect)((function(){R()}),[R]),(0,i.BX)(Z.G7,{css:kf.self,children:[(0,i.BX)(Z.G7,{css:kf.searchUIOuter,children:[(0,i.tZ)(Z.G7,{css:kf.searchUIInner,children:(0,i.tZ)(Z.E1,{value:p,placeholder:n?"search ".concat(n.language," packages"):void 0,onClear:function(){return v("")},onChange:function(e){return v(e.target.value)},loading:y})}),e.length>0&&(0,i.tZ)(Z.Ph,{items:e,selectedItem:n,onChange:function(e){r(e)}})]}),w?null===e||void 0===e?void 0:e.map((function(e){return(0,i.tZ)(Xf,{config:e},e.id)})):n&&(0,i.tZ)(Lf,{searchResults:g,packageManager:b,isLoading:y,config:n}),C&&w?(0,i.BX)(Gf,{title:"What are packages?",onClose:function(){return S()},children:["Packages are collections of code that can extend the functionality of your programs. For example, you could add a package to make adding image carousels easier on websites, or a package to manage currency comparisons."," ",(0,i.tZ)("a",{href:"https://docs.replit.com/programming-ide/installing-packages",target:"_blank",rel:"noreferrer",children:"Learn more about packages"})]}):null,w&&T?(0,i.tZ)(Gf,{title:"Tip\u2014Auto Import",onClose:function(){return _()},children:"If you know which packages you want to use, you can just import and use them in your files as if they were already installed, and they will be installed automatically the next time you run the Repl."}):null]})}function Lf(e){var t=e.searchResults,n=e.packageManager,r=e.isLoading,o=e.config;return(0,i.BX)(i.HY,{children:[(0,i.tZ)(_f,{loading:r,packagesCount:t.length,displayingInstalledPackages:!1,affectedFile:o.packagerFiles&&o.packagerFiles[0]}),(0,i.tZ)(Z.G7,{children:(0,i.tZ)(Uf,{loading:r,children:t.map((function(e,t){return(0,i.tZ)(Af,{children:(0,i.tZ)(Mf,{packageManager:n,pkg:e})},e.name||"Unknown"+t)}))})})]})}function Xf(e){var t=e.config,n=ff(t),r=(0,ct.Z)(null===n||void 0===n?void 0:n.installedPackages),o=(0,l.useState)(!1),a=o[0],c=o[1];return(0,l.useEffect)((function(){n&&n.initialize()}),[n]),n&&null!==r?(0,i.BX)(i.HY,{children:[(0,i.BX)(Z.G7,{css:kf.packagerSection,children:[(0,i.tZ)(Z.G7,{onClick:function(){return c((function(e){return!e}))},css:kf.packagerSectionExpandHandle,children:a?(0,i.tZ)(Pf.Z,{}):(0,i.tZ)(Bf.Z,{})}),(0,i.tZ)(_f,{packagerTitle:"".concat(t.language," Packages"),loading:!1,packagesCount:r.length,displayingInstalledPackages:!1,affectedFile:t.packagerFiles&&t.packagerFiles[0]})]}),a?null:(0,i.tZ)(Z.G7,{children:(0,i.tZ)(Uf,{loading:!1,children:r.map((function(e,t){return(0,i.tZ)(Af,{children:(0,i.tZ)(Mf,{packageManager:n,pkg:e})},e.name||"Unknown"+t)}))})})]}):null}function Mf(e){var t=e.packageManager,n=(0,ln.Z)(e,["packageManager"]),r=function(e){var t=e.packageManager,n=e.pkg,r=(0,a.Z)(l.useState(!1),2),i=r[0],o=r[1],c=(0,a.Z)(l.useState(null),2),s=c[0],u=c[1];return l.useEffect((function(){if(t&&n.name){var e=!1;return t.fetchPackageInfo(n.name).then((function(t){e||(u(t||null),o(!1))})),function(){e=!0}}u(null)}),[t,n.name]),{isLoading:i,packageInfo:s}}({packageManager:t,pkg:n.pkg}).packageInfo,o=(0,ct.Z)(null===t||void 0===t?void 0:t.isRunning)||!1,c=(0,l.useState)(!1),s=c[0],u=c[1],d=(0,it.Z)(),f=r||n.pkg,h="dependencies"in f&&f.dependencies&&f.dependencies.length>0?f.dependencies.map((function(e){return e.name})):null,p=(0,ki.Z)().showNotice,v=(null===t||void 0===t?void 0:t.isInstalled(f))||!1;return(0,i.tZ)(gf,{onActionClick:function(){t&&!o&&(u(!0),v?t.uninstall(f).then((function(){d.current&&u(!1)})):t.install(f).then((function(){d.current&&(p("Installed ".concat(f.name)),u(!1))})))},isAlreadyInstalled:v,isPackagerRunning:o,isIconLoading:s,statusMessage:v?hf.REMOVE:hf.INSTALL,itemName:f.name,itemDescription:f.description,itemVersion:f.version,itemHomepageURL:f.homepageURL,itemLicense:f.license,itemAuthor:f.author,itemDependencies:h})}var Of=n(65850),Wf=(0,Z.Xb)({self:[Z.l0.p(8),Z.l0.colWithGap(8),Hu.F3],packagerWrapper:Z.l0.mt(8)}),Ff={Content:function(){return(0,i.BX)(Z.G7,{css:Wf.self,children:[(0,i.tZ)(Z.h4,{level:2,variant:"subheadBig",children:"Packages"}),(0,i.tZ)(Z.G7,{css:Wf.packagerWrapper,children:(0,i.tZ)(Nf,{})})]})},Icon:function(e){var t=e.size;return(0,i.tZ)(Of.Z,{size:t})},getTitle:function(){return"Packages"}},jf=n(57470),zf=n(55749),Hf=n(24410),Vf=(0,Z.Xb)({button:{width:"fit-content"}});function qf(e){var t=e.code,n=e.activeFile,r=(0,Si.Z)(n),o=r?{text:"Insert",iconRight:(0,i.tZ)(Hf.Z,{}),onClick:function(){return r({code:t,insertAt:"end"})}}:{text:"Copy",iconLeft:(0,i.tZ)(qu.Z,{}),onClick:function(){return(0,Oe.Z)(t)}};return(0,i.tZ)(Z.Tg,{background:"default",children:(0,i.tZ)(Z.zx,(0,R.Z)({small:!0,outlined:!0,css:Vf.button},o))})}var $f=(0,Z.Xb)({self:Z.l0.colWithGap(4),content:[Z.l0.rowWithGap(4),Z.l0.backgroundColor.backgroundRoot,Z.l0.borderRadius(4),Z.l0.p(4),Z.l0.align.center,{width:"fit-content"}]});function Yf(e){var t=e.method,n=e.content,r=e.activeFile,o=(0,l.useState)(n),a=o[0],c=o[1];return(0,i.BX)(Z.G7,{css:$f.self,children:[(0,i.tZ)(rh,{title:t}),(0,i.tZ)(Z.G7,{css:$f.content,children:a.map((function(e,n){var r="".concat(t,"-").concat(n);return"input"===e.type?(0,i.tZ)(Qf,{i:n,value:e.value,placeholder:e.placeholder,setContent:c},r):(0,i.tZ)(eh,{value:e.value},r)}))}),(0,i.tZ)(qf,{code:ih(a),activeFile:r})]})}var Kf=(0,Z.Xb)({self:[Z.l0.width(64),Z.l0.height(24),Z.l0.zIndex(1)]});function Qf(e){var t=e.i,n=e.value,r=e.placeholder,o=e.setContent;return(0,i.tZ)(Z.II,{onChange:function(e){o((function(n){return n.map((function(n,r){return t===r?(0,_.Z)((0,R.Z)({},n),{value:e.target.value}):n}))}))},placeholder:r,value:n||"",css:Kf.self})}var Jf=(0,Z.Xb)({self:[Z.l0.borderRadius(0),Z.l0.backgroundColor.backgroundRoot],code:[Z.l0.font.code,Z.l0.color.greyStronger,Z.l0.p(4)]});function eh(e){var t=e.value;return(0,i.tZ)(Z.G7,{css:Jf.self,children:(0,i.tZ)(Z.xv,{css:Jf.code,children:t})})}var th,nh=(0,Z.Xb)({self:Z.l0.rowWithGap(4),bold:{fontWeight:Z.TV.fontWeightMedium}});function rh(e){var t=e.title,n=(0,a.Z)((0,tt.Z)((function(){var e=(0,zf.Z)(t.split(" "));return[e[0],e.slice(1).join(" ")]}),[t]),2),r=n[0],o=n[1];return(0,i.BX)(Z.G7,{css:nh.self,children:[(0,i.tZ)(Z.xv,{css:nh.bold,children:r}),(0,i.tZ)(Z.xv,{color:"dimmer",children:o})]})}function ih(e){return e.reduce((function(e,t){return e+(t.value||("input"===t.type?t.placeholder:""))}),"")}!function(e){e.IMPORT="Import the database",e.CREATE="Create a new database",e.SET="Set a key to a value",e.GET="Get a key's value",e.DELETE="Delete a key",e.LIST="List all keys",e.LIST_PREFIX="List keys with a prefix"}(th||(th={}));var oh={language:"Bash",methods:[sh(th.SET,"curl $REPLIT_DB_URL -d '{{key}} = {{value}}'"),sh(th.GET,"curl $REPLIT_DB_URL/{{key}}"),sh(th.DELETE,"curl -XDELETE $REPLIT_DB_URL/{{key}}"),sh(th.LIST,'curl "$REPLIT_DB_URL?prefix={{key}}"')]},ah={language:"Node",methods:[sh(th.IMPORT,'const Database = require("@replit/database")'),sh(th.CREATE,"const db = new Database()"),sh(th.SET,'db.set("{{key}}", "{{value}}").then(() => {})'),sh(th.GET,'db.get("{{key}}").then(value => {})'),sh(th.DELETE,'db.delete("{{key}}").then(() => {})'),sh(th.LIST,"db.list().then(keys => {})"),sh(th.LIST_PREFIX,'db.list("{{prefix}}").then(matches => {})')]},lh={language:"Go",methods:[sh(th.IMPORT,'import "github.com/replit/database-go"'),sh(th.SET,'db.Set("{{key}}", "{{value}}")'),sh(th.GET,'value, _ := database.Get("{{key}}")'),sh(th.DELETE,'database.Delete("{{key}}")'),sh(th.LIST,'keys, _ := database.ListKeys("")'),sh(th.LIST_PREFIX,'matches, _ := database.ListKeys("{{prefix}}")')]},ch={language:"Python",methods:[sh(th.IMPORT,"from replit import db"),sh(th.SET,'db["{{key}}"] = "{{value}}"'),sh(th.GET,'db["{{key}}"]'),sh(th.DELETE,'del db["{{key}}"]'),sh(th.LIST,"keys = db.keys()"),sh(th.LIST_PREFIX,'matches = db.prefix("{{prefix}}")')]};function sh(e,t){return{method:e,content:uh(t)}}function uh(e){for(var t=[],n=0;n<e.length;){var r=e.indexOf("{{",n),i=e.indexOf("}}",n);if(-1===r||-1===i){t.push({type:"code",value:e.substring(n)});break}t.push({type:"code",value:e.substring(n,r)}),t.push({type:"input",placeholder:e.substring(r+"{{".length,i)}),n=i+"}}".length}return t}var dh=(0,Z.Xb)({self:Z.l0.colWithGap(24),code:[Z.l0.font.code,Z.l0.color.greyStronger,Z.l0.backgroundColor.backgroundRoot,Z.l0.p(4),Z.l0.borderRadius(4)]});function fh(e){var t=e.activeFile,n=(0,tt.Z)((function(){return function(e){switch(e?(0,m.r6)(e):"bash"){case"js":case"ts":case"tsx":case"jsx":case"mjs":return ah;case"go":return lh;case"py":return ch;default:return oh}}(t)}),[t]);return(0,i.BX)(Z.G7,{css:dh.self,children:[(0,i.BX)(Z.xv,{color:"dimmer",multiline:!0,children:["You can use the Database from any Repl by making HTTP requests or a client library as outlined below. We\u2019ve set an environment variable called ",(0,i.tZ)("code",{css:dh.code,children:"REPLIT_DB_URL"})," in your Repl if you'd like to interact with the database directly."]}),n.methods.map((function(e){return(0,i.tZ)(Yf,{method:e.method,content:e.content,activeFile:t},"".concat(n.language).concat(e.method))}))]})}var hh=(0,Z.Xb)({children:[Z.l0.p(12),Z.l0.colWithGap(8)]});function ph(e){var t=e.title,n=e.defaultExpanded,r=e.children;return(0,i.tZ)(Z.Qd,{defaultExpanded:n,headerContent:(0,i.tZ)(Z.xv,{variant:"subheadDefault",children:t}),children:(0,i.tZ)(Z.G7,{css:hh.children,children:r})})}var vh=n(39302),mh=(0,La.F4)("from{opacity:0}to{opacity:1}"),gh=(0,Z.Xb)({self:[Z.l0.colWithGap(8),{animation:"".concat(mh," 100ms forwards ease-in-out alternate")}],selfLoadingText:[Z.l0.height(16),Z.l0.width(48),Z.l0.borderRadius(4),Z.pt.backgroundPulse()],selfLoading:[Z.l0.height(12),Z.l0.borderRadius(16),Z.pt.backgroundPulse()],text:[Z.l0.rowWithGap(4)],textSpan:[Z.l0.width("fit-content"),Z.l0.display.inlineFlex]});function Zh(e){var t=e.database,n=e.loading,r=(null===t||void 0===t?void 0:t.sizeMB)||0,o=function(e){return"".concat(e.toFixed(),"/50 MB")}(r),a=n||!t;return(0,i.tZ)(Z.G7,{css:gh.self,children:a?(0,i.BX)(i.HY,{children:[(0,i.tZ)(Z.G7,{css:gh.selfLoadingText}),(0,i.tZ)(Z.G7,{css:gh.selfLoading})]}):(0,i.BX)(i.HY,{children:[(0,i.BX)(Z.xv,{color:"dimmer",css:gh.text,children:[(0,i.tZ)(Z.KD.span,{css:gh.textSpan,children:o}),(0,i.tZ)(Z.KD.span,{css:gh.textSpan,children:"|"}),(0,i.tZ)(Z.KD.span,{css:gh.textSpan,children:yh(null===t||void 0===t?void 0:t.keysCount)})]}),(0,i.tZ)(Z.JY,{current:r,total:50,tooltip:o})]})},a?"databaseLoadingStats":"databaseLoadedStats")}function yh(e){return"".concat(e=e||0," ").concat((0,vh.Z)("key",e))}function bh(){var e=(0,$r.Z)(["\n  fragment DatabaseUsage on Database {\n    id\n    keysCount\n    sizeMB\n  }\n"]);return bh=function(){return e},e}function wh(){var e=(0,$r.Z)(["\n  query Database($replID: String!) {\n    repl(id: $replID) {\n      ... on Repl {\n        id\n        database {\n          id\n          ...DatabaseUsage\n        }\n      }\n    }\n    currentUser {\n      id\n      isLoggedIn\n    }\n  }\n  ","\n"]);return wh=function(){return e},e}var xh={},Ch=(0,Yr.Ps)(bh()),kh=(0,Yr.Ps)(wh(),Ch);function Sh(){var e,t,n,r=function(e){var t=(0,R.Z)({},xh,e);return li.a(kh,t)}({variables:{replID:(0,gi.Z)()},pollInterval:1e4}),i=r.data,o=r.error,a=r.loading;i&&("Repl"===i.repl.__typename?t=null===i||void 0===i||null===(n=i.repl)||void 0===n?void 0:n.database:e="Could not fetch Database info");return o&&("GraphQL error: You don't have access to this database"===o.message?t=null:e=o.message),{db:t,loading:a,error:e}}var Eh=n(26860),Th=(0,Z.Xb)({self:[Z.l0.colWithGap(16),Z.l0.p(8),Z.l0.backgroundColor.backgroundDefault,Hu.F3],link:[Z.l0.color.accentPrimaryStronger,Z.l0.pr(4)],sectionWrapper:[Z.l0.colWithGap(16),Z.l0.overflowY("auto"),Z.l0.width("100%"),{flex:"1"}]});function Rh(e){var t=e.openPane,n=Sh(),r=n.db,o=n.error,a=n.loading,l=(0,ta.R3)();return(0,i.BX)(Z.G7,{css:Th.self,children:[(0,i.tZ)(Z.h4,{level:2,variant:"subheadBig",children:"Database"}),(0,i.BX)(Z.G7,{css:Th.sectionWrapper,children:[(0,i.BX)(Z.G7,{children:[(0,i.BX)(Z.xv,{multiline:!0,children:[(0,i.tZ)("a",{href:Eh.TT.REPL_DATABASE,target:"_blank",rel:"noopener",onClick:function(e){t&&(e.preventDefault(),t({type:"docs",data:{url:Eh.TT.REPL_DATABASE}}))},children:"Replit Database"})," ","is a free, easy to use key-value store. No configuration is necessary, so you can start using it right away."]}),o?(0,i.tZ)(Z.xv,{multiline:!0,css:[Z.l0.color.accentNegativeStronger],children:o}):null]}),(0,i.tZ)(ph,{title:"Database Info",defaultExpanded:!0,children:(0,i.tZ)(Zh,{database:r,loading:a})}),(0,i.tZ)(ph,{title:"Using the database",defaultExpanded:!0,children:(0,i.tZ)(fh,{activeFile:l})})]})]})}var _h={Content:function(e){var t=e.options.openPane;return(0,i.tZ)(Rh,{openPane:t})},Icon:function(e){var t=e.size;return(0,i.tZ)(jf.Z,{size:t})},getTitle:function(){return"Database"}};function Ih(){var e=(0,$r.Z)(["\n  mutation CreateNeonDatabase($input: CreateNeonDatabaseInput!) {\n    createNeonDatabase(input: $input) {\n      __typename\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on CreateNeonDatabaseResult {\n        databaseId\n        databaseName\n        projectId\n        connectionString\n        isFrozen\n      }\n    }\n  }\n"]);return Ih=function(){return e},e}function Gh(){var e=(0,$r.Z)(["\n  mutation DeleteNeonDatabase($input: DeleteNeonDatabaseInput!) {\n    deleteNeonDatabase(input: $input) {\n      __typename\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on DeleteNeonDatabaseResult {\n        success\n      }\n    }\n  }\n"]);return Gh=function(){return e},e}function Dh(){var e=(0,$r.Z)(["\n  query GetNeonDatabases($input: GetNeonDatabasesInput!) {\n    getNeonDatabases(input: $input) {\n      __typename\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on GetNeonDatabasesResult {\n        databases {\n          databaseId\n          databaseName\n          projectId\n          connectionString\n          isFrozen\n        }\n      }\n    }\n  }\n"]);return Dh=function(){return e},e}function Ph(){var e=(0,$r.Z)(["\n  mutation UnfreezeNeonDatabase($input: UnfreezeNeonDatabaseInput!) {\n    unfreezeNeonDatabase(input: $input) {\n      ... on UnfreezeNeonDatabaseResult {\n        success\n      }\n    }\n  }\n"]);return Ph=function(){return e},e}var Bh={},Uh=(0,Yr.Ps)(Ih());var Ah=(0,Yr.Ps)(Gh());var Nh=(0,Yr.Ps)(Dh());var Lh=(0,Yr.Ps)(Ph());var Xh=n(70817),Mh=n(51800),Oh=n(92584),Wh=n(53345),Fh={"td,th":{border:"1px solid "+Z.TV.outlineDefault}},jh={"td,th":{paddingLeft:8,paddingTop:8,paddingBottom:8,paddingRight:8,whiteSpace:"nowrap"},"td:first-of-type,th:first-of-type":{paddingLeft:8}},zh={outline:"2px solid ".concat(Z.TV.accentPrimaryDefault),outlineOffset:"-2px"},Hh=(0,La.iv)({":focus:focus-visible":zh}),Vh=(0,La.iv)(zh),qh=(0,La.iv)([jh,Fh,Hh]),$h=(0,La.iv)([Z.l0.fontWeight.medium,jh,Fh,Hh]),Yh=(0,La.iv)({"tbody > tr:hover":{backgroundColor:Z.TV.backgroundHigher,cursor:"pointer"}});function Kh(e){var t=e.type,n=e.style,r=e.children,o=(0,Mh.LA)().rowGroupProps;return(0,i.tZ)(t,(0,_.Z)((0,R.Z)({},o),{style:n,children:r}))}function Qh(e){var t=e.item,n=e.state,r=e.children,o=(0,l.useRef)(null),a=(0,Mh.Qm)({node:t},n,o).rowProps;return(0,i.tZ)("tr",(0,_.Z)((0,R.Z)({css:$h},a),{ref:o,children:r}))}function Jh(e){var t,n=e.column,r=e.state,o=(0,l.useRef)(null),a=(0,Mh.WY)({node:n},r,o).columnHeaderProps,c=(0,Oh.Fx)(),s=c.isFocusVisible,u=c.focusProps;return(0,i.tZ)("th",(0,_.Z)((0,R.Z)({},(0,Bs.dG)(a,u)),{css:[s&&Vh,Hh],colSpan:n.colspan,style:{textAlign:(null!==(t=n.colspan)&&void 0!==t?t:1)>1?"center":"left"},ref:o,children:n.rendered}))}function ep(e){var t=e.item,n=e.children,r=e.state,o=(0,l.useRef)(null),a=(0,Mh.U)({node:t},r,o).rowProps,c=(0,Oh.Fx)(),s=c.isFocusVisible,u=c.focusProps;return(0,i.tZ)("tr",(0,_.Z)((0,R.Z)({css:[s&&Vh,qh]},(0,Bs.dG)(a,u)),{ref:o,children:n}))}function tp(e){var t=e.cell,n=e.state,r=(0,l.useRef)(null),o=(0,Mh.fs)({node:t},n,r).gridCellProps,a=(0,Oh.Fx)(),c=a.isFocusVisible,s=a.focusProps;return(0,i.tZ)("td",(0,_.Z)((0,R.Z)({},(0,Bs.dG)(o,s)),{css:[c&&Vh,Hh],ref:r,children:t.rendered}))}function np(e){var t=e.selectionMode,n=e.selectionBehavior,r=(0,Wh.oy)((0,_.Z)((0,R.Z)({},e),{showSelectionCheckboxes:"multiple"===t&&"replace"!==n})),o=(0,l.useRef)(null),a=r.collection,c=(0,Mh.x6)(e,r,o).gridProps;return(0,i.BX)("table",(0,_.Z)((0,R.Z)({},c),{ref:o,css:[(null===e||void 0===e?void 0:e.onRowAction)&&Yh],style:{borderCollapse:"collapse"},children:[(0,i.tZ)(Kh,{type:"thead",children:a.headerRows.map((function(e){return(0,i.tZ)(Qh,{item:e,state:r,children:(0,I.Z)(e.childNodes).map((function(e){return(0,i.tZ)(Jh,{column:e,state:r},e.key)}))},e.key)}))}),(0,i.tZ)(Kh,{type:"tbody",children:(0,I.Z)(a.body.childNodes).map((function(e){return(0,i.tZ)(ep,{item:e,state:r,children:(0,I.Z)(e.childNodes).map((function(e){return(0,i.tZ)(tp,{cell:e,state:r},e.key)}))},e.key)}))})]}))}var rp=function(e){var t=e.ariaTableProps,n=e.rows,r=e.columns;return(0,i.BX)(np,(0,_.Z)((0,R.Z)({},t),{children:[(0,i.tZ)(Wh.xD,{columns:r,children:function(e){return(0,i.tZ)(Wh.sg,{children:e.value})}}),(0,i.tZ)(Wh.RM,{items:n,children:function(e){return(0,i.tZ)(Wh.X2,{children:function(t){return(0,i.tZ)(Wh.bL,{children:e[t]})}})}})]}))};function ip(e){var t=e.headerColumns,n=e.bodyData,r=e.ariaLabel,o=void 0===r?"Database Table":r,a=e.scrollRef,l=e.onRowAction,c=t.map((function(e,t){return{key:"string"===typeof e?e:"".concat(t),value:e}})),s=n.map((function(e,n){for(var r={id:n},i=0;i<e.length;i++){var o=t[i];r["string"===typeof o?o:"".concat(i)]=e[i]}return r}));return(0,i.tZ)(rp,{ariaTableProps:{selectionMode:"none","aria-label":o,onRowAction:l,scrollRef:a},columns:c,rows:s})}var op=function(e,t){var n=(0,f.Z)().psql,r=(0,a.Z)(l.useState(),2),i=r[0],o=r[1],c=(0,a.Z)(l.useState(!1),2),s=c[0],u=c[1],d=l.useCallback(function(){var r=(0,de.Z)((function(){var r;return(0,fe.__generator)(this,(function(i){switch(i.label){case 0:if(!e)return[2];i.label=1;case 1:return i.trys.push([1,,3,4]),u(!0),[4,n.run({query:e,connectionString:t})];case 2:return r=i.sent(),o(r),[3,4];case 3:return u(!1),[7];case 4:return[2]}}))}));return function(){return r.apply(this,arguments)}}(),[t,n,e]);return l.useEffect((function(){d()}),[t,n,e,d]),{data:i,loading:s,refetch:d}},ap=function(e){var t=e.rows,n=e.columns;return!Array.isArray(t)||t.length<1?null:{headerColumns:null!==n&&void 0!==n?n:[],bodyData:t.map((function(e){return Object.values(e)}))}},lp=function(e){var t=e.connectionString;return op("SELECT n.nspname as \"Schema\",\n  c.relname as \"Name\",\n  CASE c.relkind WHEN 'r' THEN 'table' WHEN 'v' THEN 'view' WHEN 'm' THEN 'materialized view' WHEN 'i' THEN 'index' WHEN 'S' THEN 'sequence' WHEN 's' THEN 'special' WHEN 'f' THEN 'foreign table' WHEN 'p' THEN 'partitioned table' WHEN 'I' THEN 'partitioned index' END as \"Type\",\n  pg_catalog.pg_get_userbyid(c.relowner) as \"Owner\",\n  pg_catalog.pg_size_pretty(pg_catalog.pg_total_relation_size(c.oid)) as \"Size\",\n  pg_catalog.obj_description(c.oid, 'pg_class') as \"Description\"\nFROM pg_catalog.pg_class c\n     LEFT JOIN pg_catalog.pg_namespace n ON n.oid = c.relnamespace\nWHERE c.relkind IN ('r','p','v','m','S','f','')\n      AND n.nspname <> 'pg_catalog'\n      AND n.nspname <> 'information_schema'\n      AND n.nspname !~ '^pg_toast'\n  AND pg_catalog.pg_table_is_visible(c.oid)\nORDER BY 1,2;",t)},cp=(0,A.cn)(void 0),sp=(0,A.cn)((function(e){var t=e(cp);return null===t||void 0===t?void 0:t.rows.reduce((function(e,t){var n=t.table_name,r=t.column_name;return e[n]||(e[n]=[]),e[n].push(r),e}),{})})),up=n(71326),dp=function(e){var t=e.headerTitle,n=e.onGoBack,r=e.children;return(0,i.BX)(Z.G7,{css:[Z.l0.flex.column,Z.l0.height("100%")],children:[(0,i.BX)(Z.G7,{css:[Z.l0.flex.row,Z.l0.py(16),Z.l0.px(8),Z.l0.align.center],children:[(0,i.tZ)(Z.hU,{alt:"Go back",size:28,type:"button",onClick:n,children:(0,i.tZ)(up.Z,{})}),(0,i.tZ)(Z.xv,{css:[Z.l0.fontSize(16),Z.l0.ml(8)],children:t})]}),(0,i.tZ)(Z.G7,{css:[Z.l0.overflow("auto"),Z.l0.height("calc(100% - 60px)")],children:r})]})},fp=function(e){(0,Ue.j)(Ue.U3.DATABASE_USED,(0,R.Z)({type:"PostgreSQL",provider:"neon"},e))},hp=(0,A.cn)(["databaseManager"]),pp=(0,A.cn)(null,(function(e,t,n){var r=e(hp);t(hp,(0,I.Z)(r).concat([n])),fp({action:"pageNav",databasePage:n})})),vp=(0,A.cn)(null,(function(e,t){var n=e(hp);t(hp,n.slice(0,n.length-1))})),mp=(0,A.cn)((function(e){var t=e(hp);return t[t.length-1]})),gp=function(){return(0,A.b9)(pp)},Zp=function(){return(0,A.b9)(vp)},yp=n(5355),bp=n(41144),wp=(0,A.cn)(""),xp=(0,A.cn)(null),Cp=(0,A.cn)(null,(function(e,t,n){var r=n.query;r&&t(wp,r);var i=e(xp);i&&i.dispatch({changes:{from:0,to:i.state.doc.length,insert:r}})})),kp=n(92153),Sp=(0,_s.O4)("replDatabasesQueryHistory",[]),Ep=function(e,t){return!e.isPinned&&t.isPinned?1:e.isPinned&&!t.isPinned?-1:"number"===typeof e.pinnedTimestamp&&"number"===typeof t.pinnedTimestamp?e.pinnedTimestamp-t.pinnedTimestamp:t.timestamp-e.timestamp},Tp=function(){return(0,_s.lV)(l.useCallback((function(e,t,n){if(n){var r={id:je()(),data:n,timestamp:Date.now()},i=e(Sp),o=(0,kp.ZP)(i,(function(e){!function(e,t){var n=e.findIndex((function(e){return!e.isPinned&&e.data===t.data}));-1!==n?e.splice(n,1,t):e.push(t),e.sort(Ep);var r=e.filter((function(e){return!e.isPinned})).length;if(r>=5){var i=r-5;e.splice(e.length-i,i)}}(e,r)}));t(Sp,o)}}),[]))},Rp=n(97871),_p=function(e){var t=e.id,n=e.data,r=e.isPinned,o=function(e){return(0,_s.lV)(l.useCallback((function(t,n){var r=t(Sp).find((function(t){return t.id===e})),i=(null===r||void 0===r?void 0:r.data)||"";i&&(n(Cp,{query:i}),fp({action:"queryHistoryItemSelected"}))}),[e]))}(t),a=function(e){return(0,_s.lV)(l.useCallback((function(t,n){var r=t(Sp),i=(0,kp.ZP)(r,(function(t){var n=t.find((function(t){return t.id===e}));n&&(n.isPinned=!n.isPinned,n.isPinned?n.pinnedTimestamp=Date.now():n.pinnedTimestamp=void 0),t.sort(Ep)}));n(Sp,i),fp({action:"queryHistoryItemPinned"})}),[e]))}(t);return(0,i.BX)(Z.G7,{css:[{borderTop:"1px solid ".concat(Z.TV.outlineDefault),":hover":{background:Z.TV.backgroundHigher}},Z.l0.flex.row,Z.l0.p(8),Z.l0.color.foregroundDimmer,Z.l0.align.center,Z.l0.cursor.pointer],onClick:o,children:[(0,i.tZ)(Z.xv,{css:[Z.l0.flex.growAndShrink(1)],children:n}),(0,i.tZ)(Z.hU,{alt:"Pin query",onClick:a,children:r?(0,i.tZ)(Rp.Z,{fill:Z.TV.accentPrimaryDefault}):(0,i.tZ)(bp.Z,{})})]})},Ip=function(e){var t=e.onExpand,n=(0,A.Dv)(Sp);return(0,i.tZ)(Z.Qd,{onClick:t,headerContent:(0,i.BX)(Z.G7,{css:[Z.l0.rowWithGap(8),Z.l0.align.center,Z.l0.p(2)],children:[(0,i.tZ)(Qc.Z,{}),(0,i.tZ)(Z.xv,{css:[Z.l0.color.foregroundDimmest],children:"Query History"})]}),children:(0,i.tZ)(Z.G7,{css:[Z.l0.colWithGap(8),Z.l0.height("100%")],children:0===n.length?(0,i.tZ)(Z.G7,{css:[Z.l0.p(8)],children:(0,i.tZ)(Z.xv,{css:[Z.l0.color.foregroundDimmer],children:"No query history"})}):(0,i.tZ)(Z.G7,{children:n.map((function(e){return(0,i.tZ)(_p,(0,R.Z)({},e),e.id)}))})})})},Gp=function(e){var t=e.queryResult,n=e.scrollRef;if(null===t||void 0===t?void 0:t.error)return(0,i.tZ)(Z.G7,{css:Z.l0.px(8),children:(0,i.tZ)(Z.xv,{multiline:!0,css:[Z.l0.color.accentNegativeDefault],children:null===t||void 0===t?void 0:t.error})});if(!(null===t||void 0===t?void 0:t.rows))return null;var r=ap(t);if(!r)return(0,i.tZ)(Z.G7,{css:Z.l0.px(8),children:(0,i.tZ)(Z.xv,{multiline:!0,css:[Z.l0.color.accentPositiveDefault],children:"Query successful, no rows returned"})});var o=r.headerColumns,a=r.bodyData;return(0,i.tZ)(Z.G7,{css:Z.l0.px(8),children:(0,i.tZ)(ip,{headerColumns:o,bodyData:a,scrollRef:n})})},Dp=(0,La.iv)([Z.l0.height("100%"),Z.l0.position.relative,Z.l0.overflow("auto")]),Pp=(0,La.iv)([Z.l0.position.sticky,Z.l0.top(0),Z.l0.left(0),Z.l0.zIndex(1),Z.l0.backgroundColor.backgroundDefault]),Bp=function(e){var t=e.connectionString,n=(0,a.Z)((0,A.KO)(wp),2),r=n[0],o=n[1],c=(0,Oo.Z)({initialDoc:r}),s=c.view,u=c.ref,d=(0,a.Z)(l.useState(!1),2),h=d[0],p=d[1];l.useEffect((function(){return function(){var e;o(null!==(e=null===s||void 0===s?void 0:s.state.doc.toString())&&void 0!==e?e:"")}}),[o,null===s||void 0===s?void 0:s.state.doc]);var v=(0,A.b9)(xp);l.useEffect((function(){v(s)}),[v,s]);var m=function(e){var t=e.view,n=(0,me.Z)({view:t}),r=l.useRef(null);return l.useEffect((function(){if(t){var e=document.createElement("div");return r.current=qe.createPortal((0,i.tZ)("div",{css:[{fontFamily:Z.TV.fontFamilyCode},Z.l0.color.foregroundDimmest],children:"Type PostgreSQL queries here to use the database."}),e),t.dispatch({effects:n.reconfigure((0,ve.W$)(e))}),function(){t.dispatch({effects:n.reconfigure([])}),r.current=null}}}),[t,n]),r.current}({view:s});Xo({view:s}),function(e){var t=e.connectionString,n=op("SELECT table_name, column_name, data_type FROM information_schema.columns WHERE table_schema = 'public';",t).data,r=(0,A.b9)(cp);l.useEffect((function(){r(n)}),[n,r])}({connectionString:t});var g=(0,A.Dv)(sp);!function(e){var t=e.view,n=e.config,r=(0,me.Z)({view:t});l.useEffect((function(){if(t)return t.dispatch({effects:r.reconfigure([pe.Wl.high((0,Xh.sql)((0,R.Z)({dialect:Xh.PostgreSQL},n)))])}),function(){t.dispatch({effects:r.reconfigure([])})}}),[t,r,n])}({view:s,config:{schema:g}});var y=Wo();(0,Nr.Z)({view:s,filePath:"mark.sql",decorations:y});var b=(0,f.Z)().psql,w=(0,a.Z)(l.useState(),2),x=w[0],C=w[1],k=(0,a.Z)(l.useState(!1),2),S=k[0],E=k[1],T=Tp(),_=l.useCallback((function(){function e(){return(e=(0,de.Z)((function(){var e,n;return(0,fe.__generator)(this,(function(r){switch(r.label){case 0:if(!s)return[2];r.label=1;case 1:return r.trys.push([1,,3,4]),E(!0),e=null===s||void 0===s?void 0:s.state.doc.toString(),T(e),[4,b.run({query:e,connectionString:t})];case 2:return n=r.sent(),C(n),fp({action:"queryRan"}),[3,4];case 3:return E(!1),[7];case 4:return[2]}}))}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t,b,T,s]),I=gp(),G=l.useCallback((function(){I("databaseManager")}),[I]),D=l.useCallback((function(){I("tableSchemas")}),[I]),P=l.useRef(null);return(0,i.tZ)(dp,{headerTitle:"Database Contents",onGoBack:G,children:(0,i.BX)(Z.G7,{css:[Z.l0.colWithGap(8),Dp],innerRef:P,children:[(0,i.BX)(Z.G7,{css:[Z.l0.colWithGap(8),Z.l0.px(8),Z.l0.pb(8),h?null:Pp],children:[(0,i.BX)(Z.G7,{css:[{border:"1px solid ".concat(Z.TV.outlineDefault)},Z.l0.borderRadius(2)],children:[(0,i.tZ)(Z.G7,{css:[Z.l0.backgroundColor.backgroundDefault,Z.l0.borderRadius(8),Z.l0.overflow("auto"),Z.l0.maxHeight(300),{".cm-panel":{zIndex:1}}],innerRef:u}),m,(0,i.tZ)(Ip,{expanded:h,onExpand:function(){p((function(e){return!e}))}})]}),(0,i.tZ)(Z.zx,{text:"Run Query",iconLeft:S?(0,i.tZ)(ur.Z,{}):(0,i.tZ)(wr.Z,{}),onClick:_,disabled:S})]}),(0,i.tZ)(Gp,{queryResult:x,scrollRef:P}),(0,i.tZ)(Z.G7,{css:[Z.l0.colWithGap(8),Z.l0.px(8),Z.l0.py(8)],children:(0,i.tZ)(Z.zx,{css:Z.l0.backgroundColor.backgroundDefault,text:"Show All Contents",iconLeft:(0,i.tZ)(yp.Z,{}),onClick:D})})]})})},Up="DATABASE_URL",Ap="PGDATABASE",Np="PGHOST",Lp="PGPORT",Xp="5432",Mp="PGUSER",Op="PGPASSWORD",Wp=function(e){var t=e.envVarKey,n=e.envVarValue,r=e.isSecret,o=(0,Nd.H)()("db-env-var-".concat(t)),c=(0,a.Z)(l.useState(!1),2),s=c[0],d=c[1],f=!r||s?"text":"password";return(0,i.BX)(Z.G7,{css:[Z.l0.flex.row,Z.l0.flex.wrap,Z.l0.align.end,Z.l0.pb(8),{gap:Z.TV.space8}],children:[(0,i.BX)(Z.G7,{css:[Z.l0.colWithGap(8),{flexBasis:250},Z.l0.flex.grow(0),Z.l0.flex.shrink(1)],children:[(0,i.tZ)("label",{css:Z.l0.color.foregroundDimmer,htmlFor:o,children:t}),(0,i.tZ)(Z.II,{id:o,type:f,readOnly:!0,value:n})]}),(0,i.tZ)(Z.zx,{text:"Copy",iconLeft:(0,i.tZ)(Ti.Z,{}),onClick:function(){(0,Oe.Z)(n),fp({action:"envVarCopied",envVarKey:t,envVarType:"value"})}}),r?(0,i.tZ)(Z.zx,{text:"View",iconLeft:(0,i.tZ)(u.Z,{}),onClick:function(){return d((function(e){return!e}))}}):null]})},Fp=function(e){var t,n=e.connectionString,r=e.databaseName,i=new URL(n.replace("postgres://","https://")),a=i.host,l=i.username,c=i.password;return t={},(0,o.Z)(t,Up,n),(0,o.Z)(t,Ap,r),(0,o.Z)(t,Np,a),(0,o.Z)(t,Lp,Xp),(0,o.Z)(t,Mp,l),(0,o.Z)(t,Op,c),t},jp=function(){var e=(0,f.Z)().fs;return l.useCallback((function(t){var n=t.connectionString,r=t.databaseName,i=Fp({connectionString:n,databaseName:r});function o(){return o=(0,de.Z)((function(){var t,n,r,o,l,c,s,u,d,f,h,p,v,m;return(0,fe.__generator)(this,(function(g){switch(g.label){case 0:return[4,e.readFile(".env")];case 1:if(t=g.sent(),n="",t.error){if(t.error!==y.Df.NotFound)throw new Error("Error getting .env");n=""}else n=t.content;r=wd.Z.parse(n.toString()),o=!1,l=(0,R.Z)({},r),c=!0,s=!1,u=void 0;try{for(d=Object.entries(i)[Symbol.iterator]();!(c=(f=d.next()).done);c=!0)h=(0,a.Z)(f.value,2),p=h[0],v=h[1],l[p]!==v&&(o=!0,l[p]=v)}catch(Z){s=!0,u=Z}finally{try{c||null==d.return||d.return()}finally{if(s)throw u}}return o?(m=wd.Z.serialize(l),[4,e.writeFile(".env",hc.Z.from(m))]):[2];case 2:return g.sent(),[2]}}))})),o.apply(this,arguments)}!function(){o.apply(this,arguments)}()}),[e])},zp=function(e){var t=e.connectionString,n=e.databaseName,r=(0,tt.Z)((function(){return Fp({connectionString:t,databaseName:n})}),[t,n]),o=r.PGHOST,a=r.PGUSER,c=r.PGPASSWORD,s=jp();return l.useEffect((function(){s({connectionString:t,databaseName:n})}),[t,n,s]),(0,i.BX)(Z.G7,{css:[Z.l0.colWithGap(8)],children:[(0,i.tZ)(Wp,{envVarKey:Up,envVarValue:t,isSecret:!0}),(0,i.tZ)(Wp,{envVarKey:Ap,envVarValue:n}),(0,i.tZ)(Wp,{envVarKey:Np,envVarValue:o}),(0,i.tZ)(Wp,{envVarKey:Lp,envVarValue:Xp}),(0,i.tZ)(Wp,{envVarKey:Mp,envVarValue:a}),(0,i.tZ)(Wp,{envVarKey:Op,envVarValue:c,isSecret:!0})]})},Hp=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],Vp=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];function qp(e,t){var n,r=t||{},i=r.signed,o=void 0!==i&&i,a=r.digitsNumber,l=void 0===a?2:a,c=r.isKib,s=void 0===c||c,u=r.isKibNotation,d=void 0!==u&&u;if(n=o?e<0?"-":"+":"",0===e)return"".concat(n,"0B");var f=s?1024:1e3,h=d?Hp:Vp,p=Math.floor(Math.log(Math.abs(e))/Math.log(f));return"".concat(n).concat(parseFloat(Math.abs(e/Math.pow(f,p)).toFixed(l))).concat(h[p])}var $p=n(23794),Yp=function(e){var t=e.tableData,n=e.scrollRef,r=t.headerColumns,o=t.bodyData,a=gp(),c=l.useCallback((function(e){var t=parseInt(String(e),10);if(!isNaN(t)){var n=o[t][r.indexOf("Name")];a("table/".concat(n))}}),[a,r,o]);return(0,i.tZ)(ip,{headerColumns:r,bodyData:o,onRowAction:c,scrollRef:n})},Kp=function(e){var t=e.psqlQueryResult,n=e.scrollRef,r=t.data;if(t.loading)return(0,i.tZ)(Z.G7,{css:[Z.l0.flex.row,Z.l0.justify.center,Z.l0.p(32)],children:(0,i.tZ)(ur.Z,{})});if(null===r||void 0===r?void 0:r.error)return(0,i.tZ)(Z.G7,{css:[Z.l0.flex.row,Z.l0.justify.center,Z.l0.p(32)],children:(0,i.tZ)(Z.xv,{multiline:!0,css:[Z.l0.color.accentNegativeDefault,Z.l0.maxWidth("100%")],children:null===r||void 0===r?void 0:r.error})});var o=r?ap(r):null;return o?(0,i.tZ)(Yp,{tableData:o,scrollRef:n}):(0,i.tZ)(Z.G7,{css:[Z.l0.flex.row,Z.l0.justify.center,Z.l0.p(32)],children:(0,i.tZ)(Z.xv,{multiline:!0,css:[Z.l0.color.accentPositiveDefault,Z.l0.maxWidth("100%")],children:"No tables found"})})},Qp=function(e){var t=e.connectionString,n=Zp(),r=l.useRef(null),o=lp({connectionString:t}),a=o.refetch;return(0,i.BX)(Z.G7,{css:[Z.l0.flex.column,Z.l0.height("100%")],children:[(0,i.BX)(Z.G7,{css:[Z.l0.flex.row,Z.l0.py(16),Z.l0.px(8),Z.l0.align.center],children:[(0,i.tZ)(Z.hU,{alt:"Go back",size:28,type:"button",onClick:n,children:(0,i.tZ)(up.Z,{})}),(0,i.tZ)(Z.G7,{css:[Z.l0.flex.growAndShrink(1)],children:(0,i.tZ)(Z.xv,{css:[Z.l0.fontSize(16),Z.l0.ml(8)],children:"All tables"})}),(0,i.tZ)(Z.hU,{alt:"Refresh",size:24,type:"button",onClick:a,children:(0,i.tZ)(ke.Z,{})})]}),(0,i.tZ)(Z.G7,{css:[Z.l0.flex.growAndShrink(1),Z.l0.overflow("auto"),Z.l0.px(8)],innerRef:r,children:(0,i.tZ)(Kp,{psqlQueryResult:o,scrollRef:r})})]})},Jp="1px solid "+Z.TV.outlineDefault,ev=(0,La.iv)([Z.l0.p(8),Z.l0.backgroundColor.backgroundDefault,Z.l0.align.center,Z.l0.borderRadius(0),{borderLeft:Jp,borderRight:Jp,borderBottom:Jp},{":not([disabled])":{":focus":{boxShadow:"none",outline:"2px solid ".concat(Z.TV.accentPrimaryDefault),outlineOffset:"-2px"},":hover":{backgroundColor:Z.TV.backgroundHigher}}}]),tv=function(e){var t=e.connectionString,n=lp({connectionString:t}),r=n.data,o=n.loading,c=(0,a.Z)(l.useState(!1),2),s=c[0],u=c[1],d=l.useCallback((function(){u(!0)}),[]),f=r?ap(r):null,h=l.useRef(null);if(!f||o)return null;var p=f.bodyData.length,v=f.headerColumns,m=f.bodyData,g=p-5>0&&!s;return(0,i.tZ)(i.HY,{children:(0,i.BX)(Z.G7,{css:[Z.l0.overflow("auto"),Z.l0.display.grid],innerRef:h,children:[(0,i.tZ)(Yp,{tableData:{headerColumns:v,bodyData:s?m:m.slice(0,5)},scrollRef:h}),g?(0,i.tZ)(Z.zx,{text:"".concat(p-5," more"),css:ev,onClick:d}):null]})})},nv=n(5581),rv=10*Math.pow(1024,3),iv=nv.z4["neon-database-preview"],ov=(0,nv.qJ)(iv),av="".concat(iv.toLocaleString()," Cycles (").concat(ov,") / day"),lv="https://docs.replit.com/hosting/databases/postgresql-on-replit",cv=function(e){var t=e.dbSize,n=e.totalSize,r=t,o=n,a=qp(t),l=qp(n),c=(0,tt.Z)((function(){return(0,A.cn)(r)}),[r]),s=(0,tt.Z)((function(){return(0,A.cn)(o)}),[o]);return(0,i.BX)(i.HY,{children:[(0,i.BX)(Z.xv,{css:Z.l0.color.foregroundDimmer,children:[a,"/",l]}),(0,i.tZ)($p.hF,{totalAtom:s,currentAtom:c,limitText:"".concat(a," / ").concat(l),inactive:!1,measure:"MB"})]})},sv=function(e){var t,n,r=e.connectionString,o=op("SELECT sum(pg_database_size(datname)) FROM pg_database;",r),a=o.data,l=o.loading,c=op("SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' ORDER BY table_name;",r),s=c.data,u=c.loading,d=parseInt(null!==(n=null===(t=null===a||void 0===a?void 0:a.rows[0])||void 0===t?void 0:t.sum)&&void 0!==n?n:"0",10),f=null===s||void 0===s?void 0:s.rows.length;return(0,i.BX)(Z.G7,{css:Z.l0.rowWithGap(8),children:[u?null:(0,i.BX)(Z.xv,{children:[f," ",1===f?"table":"tables"]}),l?null:(0,i.tZ)(cv,{dbSize:d,totalSize:rv})]})},uv=function(e){var t=e.connectionString,n=e.onOpenDatabaseViewerClick;return(0,i.BX)(Z.G7,{css:[Z.l0.colWithGap(8)],children:[(0,i.tZ)(sv,{connectionString:t}),(0,i.tZ)(tv,{connectionString:t}),(0,i.tZ)(Z.zx,{text:"See Database Contents",iconLeft:(0,i.tZ)(yp.Z,{}),onClick:n})]})},dv=(n(22356),function(e){var t=e.size,n=void 0===t?16:t;return(0,i.BX)("svg",{viewBox:"0 0 128 36",preserveAspectRatio:"xMidYMin",height:n,fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,i.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 6.207A6.207 6.207 0 0 1 6.207 0h23.586A6.207 6.207 0 0 1 36 6.207v20.06c0 3.546-4.488 5.085-6.664 2.286l-6.805-8.754v10.615A5.586 5.586 0 0 1 16.945 36H6.207A6.207 6.207 0 0 1 0 29.793V6.207Zm6.207-1.241c-.686 0-1.241.555-1.241 1.24v23.587c0 .686.555 1.242 1.24 1.242h10.925c.343 0 .434-.278.434-.621V16.18c0-3.547 4.488-5.086 6.665-2.286l6.805 8.753V6.207c0-.686.064-1.241-.621-1.241H6.207Z",fill:"#12FFF7"}),(0,i.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 6.207A6.207 6.207 0 0 1 6.207 0h23.586A6.207 6.207 0 0 1 36 6.207v20.06c0 3.546-4.488 5.085-6.664 2.286l-6.805-8.754v10.615A5.586 5.586 0 0 1 16.945 36H6.207A6.207 6.207 0 0 1 0 29.793V6.207Zm6.207-1.241c-.686 0-1.241.555-1.241 1.24v23.587c0 .686.555 1.242 1.24 1.242h10.925c.343 0 .434-.278.434-.621V16.18c0-3.547 4.488-5.086 6.665-2.286l6.805 8.753V6.207c0-.686.064-1.241-.621-1.241H6.207Z",fill:"url(#a)"}),(0,i.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 6.207A6.207 6.207 0 0 1 6.207 0h23.586A6.207 6.207 0 0 1 36 6.207v20.06c0 3.546-4.488 5.085-6.664 2.286l-6.805-8.754v10.615A5.586 5.586 0 0 1 16.945 36H6.207A6.207 6.207 0 0 1 0 29.793V6.207Zm6.207-1.241c-.686 0-1.241.555-1.241 1.24v23.587c0 .686.555 1.242 1.24 1.242h10.925c.343 0 .434-.278.434-.621V16.18c0-3.547 4.488-5.086 6.665-2.286l6.805 8.753V6.207c0-.686.064-1.241-.621-1.241H6.207Z",fill:"url(#b)"}),(0,i.tZ)("path",{d:"M29.793 0A6.207 6.207 0 0 1 36 6.207v20.06c0 3.546-4.488 5.085-6.664 2.286l-6.805-8.754v10.615A5.586 5.586 0 0 1 16.945 36a.62.62 0 0 0 .62-.62v-19.2c0-3.547 4.488-5.086 6.665-2.286l6.805 8.753V1.241C31.035.556 30.479 0 29.793 0Z",fill:"#B9FFB3"}),(0,i.tZ)("path",{d:"M60.686 10.6v9.416l-9.13-9.416h-4.752V26h4.334V15.88L61.082 26h3.938V10.6h-4.334ZM73.054 22.568V19.84h9.702v-3.278h-9.702v-2.53h11.77V10.6H68.632V26h16.434v-3.432H73.054ZM96.583 26.506c6.094 0 10.054-2.992 10.054-8.206 0-5.214-3.96-8.206-10.054-8.206S86.551 13.086 86.551 18.3c0 5.214 3.938 8.206 10.032 8.206Zm0-3.652c-3.388 0-5.478-1.65-5.478-4.554 0-2.904 2.112-4.554 5.478-4.554 3.388 0 5.478 1.65 5.478 4.554 0 2.904-2.09 4.554-5.478 4.554ZM123.249 10.6v9.416l-9.13-9.416h-4.752V26h4.334V15.88L123.645 26h3.938V10.6h-4.334Z",fill:"currentColor"}),(0,i.BX)("defs",{children:[(0,i.BX)("linearGradient",{id:"a",x1:"36",y1:"36",x2:"4.345",y2:"0",gradientUnits:"userSpaceOnUse",children:[(0,i.tZ)("stop",{stopColor:"#B9FFB3"}),(0,i.tZ)("stop",{offset:"1",stopColor:"#B9FFB3",stopOpacity:"0"})]}),(0,i.BX)("linearGradient",{id:"b",x1:"36",y1:"36",x2:"14.617",y2:"27.683",gradientUnits:"userSpaceOnUse",children:[(0,i.tZ)("stop",{stopColor:"#1A1A1A",stopOpacity:".9"}),(0,i.tZ)("stop",{offset:"1",stopColor:"#1A1A1A",stopOpacity:"0"})]})]})]})}),fv=(0,La.iv)([Z.l0.color.foregroundDimmest,{textDecoration:"underline"}]),hv=function(){return(0,i.tZ)(Z.G7,{css:[Z.l0.colWithGap(8),Z.l0.py(8),Z.l0.width("100%")],children:(0,i.BX)(Z.G7,{css:[Z.l0.rowWithGap(8),Z.l0.align.center,Z.l0.justify.spaceBetween],children:[(0,i.tZ)("a",{target:"_blank",href:lv,css:fv,children:"Docs"}),(0,i.BX)(Z.G7,{css:[Z.l0.rowWithGap(8),Z.l0.align.center],children:[(0,i.tZ)(Z.xv,{css:[Z.l0.fontSize(14)],children:"Powered by"}),(0,i.tZ)(dv,{})]})]})})},pv=function(e){var t=e.psqlQueryResult,n=e.tableName,r=e.connectionString,o=e.scrollRef,a=t.data,l=t.loading,c=function(e){var t=e.tableName,n=e.connectionString,r=op(function(e){return"SELECT table_name, column_name, data_type FROM information_schema.columns WHERE table_schema = 'public' AND table_name = '".concat(e.replace(/"/g,'""'),"';")}(t),n).data;return r}({tableName:n,connectionString:r});if(l)return(0,i.tZ)(Z.G7,{css:[Z.l0.flex.row,Z.l0.justify.center,Z.l0.p(32)],children:(0,i.tZ)(ur.Z,{})});if(null===a||void 0===a?void 0:a.error)return(0,i.tZ)(Z.G7,{css:[Z.l0.flex.row,Z.l0.justify.center,Z.l0.p(32)],children:(0,i.tZ)(Z.xv,{multiline:!0,css:[Z.l0.color.accentNegativeDefault,Z.l0.maxWidth("100%")],children:null===a||void 0===a?void 0:a.error})});var s=a?ap(a):null;if(!s)return(0,i.tZ)(Z.G7,{css:[Z.l0.flex.row,Z.l0.justify.center,Z.l0.p(32)],children:(0,i.tZ)(Z.xv,{multiline:!0,css:[Z.l0.color.accentPositiveDefault,Z.l0.maxWidth("100%")],children:"No rows"})});var u=s.headerColumns,d=s.bodyData;return(0,i.tZ)(ip,{headerColumns:u.map((function(e,t){var n,r=null===c||void 0===c||null===(n=c.rows)||void 0===n?void 0:n.find((function(t){return t.column_name===e})),o=null===r||void 0===r?void 0:r.data_type,a=o?(0,i.tZ)(Z.DR,{text:o}):null;return(0,i.BX)(Z.G7,{css:[Z.l0.rowWithGap(8),Z.l0.align.center],children:[(0,i.tZ)(Z.xv,{children:e}),a]},t)})),bodyData:d,scrollRef:o})},vv=function(e){var t=e.tableName,n=e.connectionString,r=Zp(),o=l.useRef(null),a=op('SELECT * FROM "'.concat(t.replace(/"/g,'""'),'" LIMIT ').concat(500),n),c=a.refetch;return(0,i.BX)(Z.G7,{css:[Z.l0.flex.column,Z.l0.height("100%")],children:[(0,i.BX)(Z.G7,{css:[Z.l0.flex.row,Z.l0.py(16),Z.l0.px(8),Z.l0.align.center],children:[(0,i.tZ)(Z.hU,{alt:"Go back",size:28,type:"button",onClick:r,children:(0,i.tZ)(up.Z,{})}),(0,i.tZ)(Z.G7,{css:[Z.l0.flex.growAndShrink(1)],children:(0,i.tZ)(Z.xv,{css:[Z.l0.fontSize(16),Z.l0.ml(8)],children:t})}),(0,i.tZ)(Z.hU,{alt:"Refresh",size:24,type:"button",onClick:c,children:(0,i.tZ)(ke.Z,{})})]}),(0,i.tZ)(Z.G7,{css:[Z.l0.flex.growAndShrink(1),Z.l0.overflow("auto"),Z.l0.px(8)],innerRef:o,children:(0,i.tZ)(pv,{psqlQueryResult:a,tableName:t,connectionString:n,scrollRef:o})})]})},mv=function(e){var t=e.cyclesLow;return(0,i.BX)(i.HY,{children:[(0,i.tZ)(Z.xv,{multiline:!0,css:[Z.l0.fontSize(12),Z.l0.color.foregroundDimmest],children:"You\u2019re paying ".concat(av)}),t?(0,i.tZ)(Z.G7,{children:(0,i.tZ)(Z.E_,{icon:(0,i.tZ)(Mr.Z,{}),colorway:"warning",text:"If your database use continues, you will be out of\n Cycles in [X] days and access to your database will be paused. \n Buy more Cycles or add a recurring Cycles subscription to prevent that from happening."})}):null]})},gv=n(69694),Zv=n(54372),yv=n(13168),bv=n(93658),wv=n(42928),xv=n(56167);var Cv=n(54967),kv=(0,A.cn)(null),Sv=(0,A.cn)(null),Ev=function(e){var t=e.title,n=e.children,r=e.isAccordion,o=e.sectionStyles;return(0,i.tZ)(Z.G7,{css:[Z.l0.colWithGap(8),Z.l0.pt(8),{borderTopWidth:1,borderTopStyle:"solid",borderTopColor:Z.TV.outlineDefault},o],children:r?(0,i.tZ)(Z.Qd,{headerContent:(0,i.tZ)(Z.G7,{css:[Z.l0.rowWithGap(8),Z.l0.align.center],children:(0,i.tZ)(Z.xv,{variant:"subheadDefault",children:t})}),children:(0,i.tZ)(Z.G7,{css:[Z.l0.p(12),Z.l0.colWithGap(8),Z.l0.height("100%")],children:n})}):(0,i.BX)(i.HY,{children:[(0,i.tZ)(Z.xv,{css:[Z.l0.fontSize(Z.TV.fontSizeSubheadDefault),Z.l0.fontWeight.medium],children:t}),n]})})},Tv=function(e){var t,n=e.neonDatabases,r=e.onDatabaseDeleted,o=e.onDatabaseUnfreezed,c=n[0],s=(0,ki.Z)().showError,u=(0,gi.Z)(),d=function(){var e=l.useContext(xv.Z);if(!e)throw new Error("Expected Repl info to be in context");return e.slug}(),f=(0,A.Dv)(mp),h=gp(),p=l.useCallback((function(){h("queryEditor")}),[h]),v=(0,a.Z)(function(e){var t=(0,R.Z)({},Bh,e);return Kr.D(Ah,t)}(),2),m=v[0],g=v[1].loading,y=l.useCallback((function(){T(!0)}),[]),b=(0,bv.Z)({forceFetch:!1}),w=b.cycles,x=b.formattedBalanceValue,C="number"===typeof w&&w>iv,k=l.useCallback((0,de.Z)((function(){var e,t,n;return(0,fe.__generator)(this,(function(i){switch(i.label){case 0:return[4,m({variables:{input:{replId:u,databaseId:c.databaseId}}})];case 1:return e=i.sent(),t=e.data,n=e.errors,T(!1),n&&n.length>0?(s("Error when deleting Neon database: ".concat(null===n||void 0===n?void 0:n.join())),fp({action:"removed",success:!1}),[2]):"DeleteNeonDatabaseResult"!==(null===t||void 0===t?void 0:t.deleteNeonDatabase.__typename)?(s("Error: ".concat(null===t||void 0===t?void 0:t.deleteNeonDatabase.message)),fp({action:"removed",success:!1}),[2]):((null===t||void 0===t?void 0:t.deleteNeonDatabase.success)?(r(),fp({action:"removed",success:!0})):(s("Error: Delete Neon Database failed."),fp({action:"removed",success:!1})),[2])}}))})),[m,c.databaseId,r,u,s]),S=(0,a.Z)(l.useState(!1),2),E=S[0],T=S[1],_=l.useCallback((function(){T(!1)}),[]),I=(0,a.Z)(l.useState(!1),2),G=I[0],D=I[1],P=l.useCallback((function(){D(!0)}),[]),B=(0,a.Z)(function(e){var t=(0,R.Z)({},Bh,e);return Kr.D(Lh,t)}(),2),U=B[0],N=B[1].loading,L=l.useCallback((0,de.Z)((function(){var e,t,n;return(0,fe.__generator)(this,(function(r){switch(r.label){case 0:return[4,U({variables:{input:{neonProjectId:c.projectId,replId:u}}})];case 1:return e=r.sent(),t=e.data,(n=e.errors)&&n.length>0?(s("Error when unfreezing Neon database: ".concat(null===n||void 0===n?void 0:n.join())),fp({action:"unfreeze",success:!1}),[2]):"UnfreezeNeonDatabaseResult"!==(null===t||void 0===t?void 0:t.unfreezeNeonDatabase.__typename)?(s("Error: Unfreezes Neon Database failed."),fp({action:"unfreeze",success:!1}),[2]):((null===t||void 0===t?void 0:t.unfreezeNeonDatabase.success)?(o(),fp({action:"unfreeze",success:!0})):(s("Error: Unfreezes Neon Database failed."),fp({action:"unfreeze",success:!1})),[2])}}))})),[c.projectId,o,u,s,U]),X=(0,A.Dv)(Sv),M=Fp({connectionString:c.connectionString,databaseName:c.databaseName}).PGHOST.split(".")[0],O=X||"".concat(c.connectionString,"/").concat(c.databaseName,"?sslmode=require&options=project%3D").concat(M);if("queryEditor"===f)return(0,i.tZ)(Bp,{connectionString:O});if("tableSchemas"===f)return(0,i.tZ)(Qp,{connectionString:O});if(f.startsWith("table/")){var W=f.slice(f.indexOf("/")+1);return(0,i.tZ)(vv,{tableName:W,connectionString:O})}return t=c.isFrozen?(0,i.BX)(i.HY,{children:[(0,i.BX)(Z.G7,{css:[Z.l0.rowWithGap(8),Z.l0.align.center],children:[(0,i.tZ)(Z.G7,{css:[Z.l0.width(8),Z.l0.height(8),Z.l0.backgroundColor.foregroundDimmer,Z.l0.borderRadius("full")]}),(0,i.tZ)(Z.xv,{css:[Z.l0.color.foregroundDimmest],children:"Database paused"})]}),(0,i.BX)(Z.xv,{multiline:!0,css:[Z.l0.fontSize(12),Z.l0.color.foregroundDimmest],children:["Databases cost ",av]}),(0,i.BX)(Z.G7,{css:[Z.l0.colWithGap(8),Z.l0.align.center],children:[(0,i.tZ)(ef.Z,{size:32,fill:Z.TV.foregroundDimmest,css:Z.l0.mt(32)}),(0,i.BX)(Z.xv,{variant:"subheadDefault",css:[Z.l0.my(16)],children:["Your Database is paused. You have ",x," cycles."]}),(0,i.BX)(Z.xv,{multiline:!0,children:["Access to your databases will be paused until you"," ",C?"use cycles to resume database":"refill your Cycles balance","."]}),C?(0,i.tZ)(Z.zx,{css:Z.l0.pt(8),iconLeft:(0,i.tZ)(wv.Z,{}),onClick:L,disabled:N,text:"Unpause Database",colorway:"primary"}):null,(0,i.tZ)(Z.zx,{css:Z.l0.pt(8),iconLeft:(0,i.tZ)(gv.Z,{}),onClick:P,text:C?"Buy more cycles":"Buy Cycles"})]}),(0,i.tZ)(yv.Z,{noPadding:!0,isOpen:G,maxWidth:Zv.W,onRequestClose:function(){return D(!1)},fitContent:!0,replTitle:d,uponPurchaseGoTo:"workspace",context:"workspace_postgresql_pane",initialTab:"cycles"})]}):(0,i.BX)(i.HY,{children:[(0,i.BX)(Z.G7,{css:[Z.l0.rowWithGap(8),Z.l0.align.center],children:[(0,i.tZ)(Z.G7,{css:[Z.l0.width(8),Z.l0.height(8),Z.l0.backgroundColor.accentPositiveStronger,Z.l0.borderRadius("full"),{filter:"drop-shadow(0 0 6px ".concat(Z.TV.accentPositiveStronger,")")}]}),(0,i.tZ)(Z.xv,{css:[Z.l0.color.accentPositiveStronger],children:"Database connected"})]}),(0,i.tZ)(mv,{}),(0,i.tZ)(Ev,{title:"Database Info",children:(0,i.tZ)(uv,{connectionString:O,onOpenDatabaseViewerClick:p})}),(0,i.tZ)(Ev,{title:"Using the database",isAccordion:!0,children:(0,i.tZ)(Dt.ZP,{css:[Cv.Z,Z.l0.maxWidth("100%")],children:"\nPostgreSQL is a powerful open source relational database system that is widely used in web applications and other software development projects. You can easily create a production-ready PostgreSQL database directly within Replit. For more information on PostgreSQL, visit the [official documentation](https://www.postgresql.org/docs/). Repls use PostgreSQL version 15.\n\nHere is some information to help you get started:\n\n1. Replit databases are backed by [Neon](https://neon.tech/). The [Neon documentation](https://neon.tech/docs/connect/connect-from-any-app#connection-examples) provides guides on how to connect various frameworks, such as Django, to your PostgreSQL database.\n\n1. Environment Variables: We provided environment variables `DATABASE_URL`, `PGDATABASE`, `PGHOST`, `PGHOST`, `PGPORT`, `PGUSER`, `PGPASSWORD`. Provide these values to your framework of choice to connect to your database.\n\n1. Connection pooling: If you need to enable connection pooling for any reason, contact us at support@repl.it.\n\n1. Compute lifecycle: Neon databases go to sleep after 5 minutes of inactivity. You may experience disconnects or reconnects depending on your client.\n"})}),(0,i.tZ)(Ev,{title:"Environment variables",isAccordion:!0,children:(0,i.tZ)(zp,{connectionString:O,databaseName:c.databaseName})})]}),(0,i.BX)(Z.G7,{css:[Z.l0.colWithGap(0),Z.l0.height("100%"),Z.l0.p(8)],children:[(0,i.tZ)(Z.G7,{css:[Z.l0.colWithGap(16),Z.l0.flex.grow(1),Z.l0.flex.shrink(0)],children:t}),(0,i.tZ)(Z.G7,{css:[Z.l0.pt(16)],children:E||g?(0,i.BX)(Z.Tg,{css:[Z.l0.p(8),Z.l0.colWithGap(8)],elevated:!0,children:[(0,i.tZ)(Z.xv,{multiline:!0,children:"Removing this database will remove access to the data for this Repl, and remove the daily Cycles subscription of ".concat(av,".")}),(0,i.tZ)(Z.E_,{icon:(0,i.tZ)(Mr.Z,{}),colorway:"warning",text:"This action cannot be undone."}),(0,i.tZ)(Z.zx,{text:"Yes, Remove Database",colorway:"negative",disabled:g,iconLeft:(0,i.tZ)(pf.Z,{}),onClick:k}),(0,i.tZ)(Z.zx,{text:"Cancel",disabled:g,onClick:_})]}):(0,i.tZ)(Z.zx,{css:[Z.l0.py(8)],text:"Remove Database",disabled:g,iconLeft:(0,i.tZ)(pf.Z,{}),onClick:y})}),(0,i.tZ)(hv,{})]})},Rv=n(14047),_v=n(96810),Iv="Buy Cycles & Create a DB",Gv="Use Cycles to create a DB",Dv='Press "'.concat(Iv,'" to initiate a daily Cycles subscription and activate a Neon Database. You will be redirected to our payment processor.\n'),Pv='Press "'.concat(Gv,'" to initiate a daily Cycles subscription and activate a Neon Database.'),Bv=function(e){var t=e.onDatabaseCreated,n=(0,gi.Z)(),r=(0,ki.Z)().showError,o=(0,a.Z)(function(e){var t=(0,R.Z)({},Bh,e);return Kr.D(Uh,t)}(),2),c=o[0],s=o[1].loading,u=(0,bv.Z)({forceFetch:!0}),d=u.cycles,f=u.loading,h=null!=d&&d>=iv,p=f?"Loading Cycles Balance":h?Gv:Iv,v=h?Pv:Dv,m=l.useCallback((0,de.Z)((function(){var e,i,o,a,l,s,u,d,f;return(0,fe.__generator)(this,(function(h){switch(h.label){case 0:return[4,c({variables:{input:{replId:n}}})];case 1:return e=h.sent(),i=e.data,(o=e.errors)&&o.length>0?(r("Error when creating Neon database: ".concat(null===o||void 0===o?void 0:o.join())),fp({action:"created",success:!1}),[2]):"CreateNeonDatabaseResult"!==(null===i||void 0===i?void 0:i.createNeonDatabase.__typename)?(r("Error: ".concat(null===i||void 0===i?void 0:i.createNeonDatabase.message)),fp({action:"created",success:!1}),[2]):(a=i.createNeonDatabase,l=a.databaseId,s=a.databaseName,u=a.connectionString,d=a.projectId,f=a.isFrozen,t({databaseId:l,databaseName:s,connectionString:u,projectId:d,isFrozen:f}),fp({action:"created",success:!0}),[2])}}))})),[c,n,r,t]),g=(0,a.Z)(l.useState(!1),2),y=g[0],b=g[1],w=l.useCallback((0,de.Z)((function(){return(0,fe.__generator)(this,(function(e){return b(!0),[2]}))})),[]),x=l.useCallback((0,de.Z)((function(){return(0,fe.__generator)(this,(function(e){return b(!1),[2]}))})),[]),C=l.useCallback((0,de.Z)((function(){return(0,fe.__generator)(this,(function(e){switch(e.label){case 0:return[4,m()];case 1:return e.sent(),b(!1),[2]}}))})),[m]);return(0,i.BX)(Z.G7,{css:[Z.l0.colWithGap(0),Z.l0.height("100%"),Z.l0.align.center,Z.l0.p(8)],children:[(0,i.BX)(Z.G7,{css:[Z.l0.colWithGap(16),Z.l0.flex.grow(1),Z.l0.flex.shrink(0),Z.l0.maxWidth(600)],children:[(0,i.BX)(Z.G7,{css:[Z.l0.colWithGap(8),Z.l0.align.center],children:[(0,i.tZ)(Z.G7,{css:[Z.l0.p(16)],children:(0,i.tZ)(Rv.Z,{src:"/public/images/db_illustration.png",width:"144px",height:"144px",alt:"FPO visual"})}),(0,i.tZ)(Z.xv,{css:[Z.l0.fontSize(16),Z.l0.fontWeight.bold],children:"Fully-managed PostgreSQL database"}),(0,i.tZ)(Z.xv,{css:[Z.l0.fontSize(14)],children:"10GB of fast read/write storage"}),(0,i.BX)(Z.G7,{css:[Z.l0.rowWithGap(8),Z.l0.align.center],children:[(0,i.tZ)(Z.xv,{css:[Z.l0.fontSize(14)],children:av}),(0,i.tZ)(Z.hU,{alt:v,size:24,children:(0,i.tZ)(Ce.Z,{})})]})]}),(0,i.BX)(Z.Tg,{css:[Z.l0.colWithGap(8),Z.l0.mb(8)],background:"default",children:[(0,i.tZ)(Z.zx,{text:p,colorway:"primary",iconLeft:(0,i.tZ)(jf.Z,{}),disabled:f||s,onClick:w}),(0,i.tZ)(Z.ZP,{outlined:!0,href:lv,target:"_blank",text:"Learn More",iconRight:(0,i.tZ)(_v.Z,{})})]}),(0,i.tZ)("hr",{css:[Z.l0.my(16),{borderColor:Z.TV.outlineDefault}]}),(0,i.tZ)(Z.xv,{multiline:!0,css:[Z.l0.fontSize(12),Z.l0.color.foregroundDimmest],children:v}),(0,i.tZ)(Ta.Z,{isOpen:y,onRequestClose:x,onRequestPowerUp:C,uponPurchaseGoTo:"workspace",context:"workspace_postgresql_pane",powerUp:"neon-database-preview"})]}),(0,i.tZ)(hv,{})]})},Uv=(0,A.cn)([]),Av=function(){var e=(0,gi.Z)(),t=(0,ki.Z)().showError,n=(0,f.Z)().psql,r=function(e){var t=(0,R.Z)({},Bh,e);return li.a(Nh,t)}({variables:{input:{replId:e}},fetchPolicy:"no-cache"}),o=r.data,c=r.loading,s=r.refetch,u=(0,a.Z)((0,A.KO)(Uv),2),d=u[0],h=u[1],p=jp();l.useEffect((function(){"GetNeonDatabasesResult"===(null===o||void 0===o?void 0:o.getNeonDatabases.__typename)&&h(o.getNeonDatabases.databases),"UnauthorizedError"!==(null===o||void 0===o?void 0:o.getNeonDatabases.__typename)&&"UserError"!==(null===o||void 0===o?void 0:o.getNeonDatabases.__typename)||t("Error: ".concat(null===o||void 0===o?void 0:o.getNeonDatabases.message))}),[null===o||void 0===o?void 0:o.getNeonDatabases,h,t]);var v=l.useCallback(function(){var e=(0,de.Z)((function(e){var r,i,o;return(0,fe.__generator)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,n.ensureNixPsqlPackageInstalled(!0)];case 1:return a.sent(),h([e]),r=e.connectionString,i=e.databaseName,p({connectionString:r,databaseName:i}),[3,3];case 2:return o=a.sent(),t("Error: ".concat(o.message)),[3,3];case 3:return[2]}}))}));return function(t){return e.apply(this,arguments)}}(),[n,p,h,t]),m=l.useCallback((function(){h([])}),[h]),g=l.useCallback((function(){s()}),[s]),y=(0,A.Dv)(kv);return y?(0,i.tZ)(Tv,{neonDatabases:[y],onDatabaseDeleted:m,onDatabaseUnfreezed:g}):c?(0,i.tZ)(Z.G7,{css:[Z.l0.flex.row,Z.l0.justify.center,Z.l0.p(32)],children:(0,i.tZ)(ur.Z,{})}):d.length>0?(0,i.tZ)(Tv,{neonDatabases:d,onDatabaseDeleted:m,onDatabaseUnfreezed:g}):(0,i.tZ)(Bv,{onDatabaseCreated:v})},Nv={Content:function(){return(0,i.tZ)(Av,{})},Icon:function(e){var t=e.size;return(0,i.tZ)(ou.PostgresUi,{size:t})},getTitle:function(){return"PostgreSQL"}},Lv=n(39465),Xv=n(89368),Mv=n(91642),Ov={Content:function(){return(0,i.tZ)(Wv,{})},Icon:function(e){var t=e.size;return(0,i.tZ)(Xv.Z,{size:t})},getTitle:function(){return"Output"}};function Wv(){var e=(0,f.Z)(),t=e.fs,n=e.container;return(0,i.tZ)(Z.G7,{css:[Z.l0.flex.growAndShrink(1)],children:(0,i.tZ)(Mv.Z,{fs:t,container:n})})}var Fv=n(56553),jv=n(61838),zv={Content:function(e){var t=e.options;return(0,i.tZ)(Hv,{autoFocus:!t.isHidden})},Icon:function(e){var t=e.size;return(0,i.tZ)(jv.Z,{size:t})},getTitle:function(){return"Shell"}};function Hv(e){var t=e.autoFocus,n=(0,f.Z)().container,r=(0,a.Z)((0,Fv.St)({container:n,autoFocus:t}),2),o=r[0],l=r[1];return(0,Hu.L5)((function(){if(o)return{focus:function(){return o.focus()}}}),[o]),(0,i.tZ)(Fv.N2,{shell:o,shellRef:l})}function Vv(){var e=(0,$r.Z)(["\n  query WorkspaceDrawCurrentUser {\n    currentUser {\n      id\n      username\n    }\n  }\n"]);return Vv=function(){return e},e}function qv(){var e=(0,$r.Z)(["\n  mutation sawDrawCtaToursSeen($name: String!) {\n    toursSeen(name: $name) {\n      name\n      success\n    }\n  }\n"]);return qv=function(){return e},e}var $v={},Yv=(0,Yr.Ps)(Vv());qv();var Kv=function(e,t,n){var r;if(!e)return[];var i=t(e.getSceneElementsIncludingDeleted()),o=e.getAppState();return(r=n.reduce((function(e,t){var n,r,a;return t.id===(null===(n=o.editingElement)||void 0===n?void 0:n.id)||t.id===(null===(r=o.resizingElement)||void 0===r?void 0:r.id)||t.id===(null===(a=o.draggingElement)||void 0===a?void 0:a.id)||(i[t.id]&&i[t.id].version>t.version?(e.push(i[t.id]),delete i[t.id]):i[t.id]&&i[t.id].version===t.version&&i[t.id].versionNonce!==t.versionNonce?(i[t.id].versionNonce<t.versionNonce?e.push(i[t.id]):e.push(t),delete i[t.id]):(e.push(t),delete i[t.id])),e}),[])).concat.apply(r,(0,I.Z)(Object.values(i)))},Qv=function(){var e,t,n=new Promise((function(n,r){e=n,t=r}));return n.resolve=e,n.reject=t,n},Jv=function(e){return e.reduce((function(e,t){return e[t.id]=t,e}),{})};function em(e){var t,r=e.fs,o=e.presence,c=e.broadcast,s=e.filePath,u=(0,l.useState)(void 0),d=u[0],f=u[1],h=(0,l.useRef)((function(e){return(0,I.Z)(e)})),p=(0,l.useRef)((function(e){return-1})),v=(0,l.useRef)({readyPromise:Qv()}),m=(0,l.useRef)({promise:null});(0,l.useEffect)((function(){Promise.all([n.e(6450),n.e(7290)]).then(n.t.bind(n,37290,23)).then((function(e){h.current=function(t){return t.filter((function(t){return t.isDeleted||!e.isInvisiblySmallElement(t)}))},p.current=e.getSceneVersion,f(e.Excalidraw)}))}),[]);var g=function(){return v.current},Z=function(e){var t=(0,R.Z)({},$v,e);return li.a(Yv,t)}({ssr:!1}),y=Z.data,b=Z.loading,w=(null===y||void 0===y||null===(t=y.currentUser)||void 0===t?void 0:t.username)||"",x=(0,wl.Fg)().isDarkColorScheme,C=(0,la.Z)({presence:o}),k=(0,ma.Z)(),S=null===k||void 0===k?void 0:k.color,E=(0,l.useState)(new Map),T=E[0],G=E[1],D=(0,l.useState)(-1),P=D[0],B=D[1];(0,l.useEffect)((function(){function e(){return e=(0,de.Z)((function(){var e,t;return(0,fe.__generator)(this,(function(n){switch(n.label){case 0:return y&&y.currentUser?[4,v.current.readyPromise]:[2];case 1:return n.sent(),e=g().getAppState().collaborators,t=new Map,C.forEach((function(n){var r;if(n.username!==(null===y||void 0===y||null===(r=y.currentUser)||void 0===r?void 0:r.username)){var i=e.get(n.username)||{};t.set(n.username,(0,_.Z)((0,R.Z)({},i),{username:n.username,color:{background:n.color,foreground:n.color}}))}})),g().updateScene({collaborators:t}),[2]}}))})),e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[y,C]);var U=function(){var e=(0,de.Z)((function(e,t){var n,r,i,o,a,l;return(0,fe.__generator)(this,(function(u){t||(e=e.filter((function(e){return!T.has(e.id)||e.version>T.get(e.id)}))),n=!0,r=!1,i=void 0;try{for(o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0)l=a.value,T.set(l.id,l.version),G(new Map(T))}catch(d){r=!0,i=d}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return c.broadcastMessage({text:JSON.stringify({elements:e,path:s})}),[2]}))}));return function(t,n){return e.apply(this,arguments)}}();(0,l.useEffect)((function(){if(c){var e=c.onBroadcastReceived((function(e){var t=e.username,n=e.text,r=JSON.parse(n);if(r.path===s)if(r.collaborator&&v.current){var i=g().getAppState().collaborators;i.set(t,(0,_.Z)((0,R.Z)({},i.get(t),r.collaborator),{username:t})),g().updateScene({collaborators:i})}else if(r.elements){var o=Kv(g(),Jv,r.elements);B(p.current(o)),g().updateScene({elements:o})}}));return function(){e()}}}),[c,s]),(0,l.useEffect)((function(){function e(){return e=(0,de.Z)((function(){return(0,fe.__generator)(this,(function(e){return s&&r?(m.current.promise=new Promise(function(){var e=(0,de.Z)((function(e){var t,n,i,o,l;return(0,fe.__generator)(this,(function(c){switch(c.label){case 0:return[4,Promise.all([r.readFile(s),v.current.readyPromise])];case 1:return t=a.Z.apply(void 0,[c.sent(),1]),"content"in(n=t[0])&&(i=n.content.toString(),o=JSON.parse(i||"{}"),l=g().getAppState(),o.appState=(0,R.Z)({},l),o.scrollToContent=!0,e(o)),[2]}}))}));return function(t){return e.apply(this,arguments)}}()),[2]):[2]}))})),e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[s,r]);var A=(0,l.useCallback)(V()(function(){var e=(0,de.Z)((function(e,t){var n;return(0,fe.__generator)(this,(function(i){switch(i.label){case 0:return n=e.filter((function(e){return!e.isDeleted})),s?[4,r.writeFile(s,hc.Z.from(JSON.stringify({elements:n,files:t})))]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}}))}));return function(t,n){return e.apply(this,arguments)}}(),350),[s]);return(0,i.tZ)(O.G,{css:{position:"relative",height:"100%",width:"100%",flex:1,boxShadow:S?"0 3px 0 3px ".concat(S):"none",backgroundColor:W.TV.backgroundDefault,"& .excalidraw [title~=Library]":{display:"none"}},children:d&&!b?(0,i.tZ)(d,{ref:v,UIOptions:{canvasActions:{loadScene:!1}},isCollaborating:!0,theme:x?"dark":"light",initialData:m.current.promise,onPointerUpdate:function(e){var t=e.pointer;if(g().getAppState().collaborators.size>0){var n=g().getAppState().selectedElementIds||{};c.broadcastMessage({text:JSON.stringify({collaborator:{pointer:t,selectedElementIds:n},path:s})})}},onChange:function(e,t,n){g().getAppState().collaborators.size>0?function(e){p.current(e)>P&&(P>-1&&U(h.current(e),!1),B(p.current(e)))}(e):B(p.current(e)),p.current(e)>P&&A(e,n)},user:{name:w}}):null})}function tm(e){var t=e.fs,n=e.presence,r=e.broadcast,o=e.filePath;return(0,i.tZ)(em,{fs:t,presence:n,broadcast:r,filePath:o},o)}var nm=n(3505),rm={Content:function(e){var t=e.pane,n=e.options.replacePane;return(0,i.tZ)(im,{path:t.data.path,replacePane:n})},Icon:function(e){var t=e.size;return(0,i.tZ)(nm.Z,{size:t})},getTitle:function(e){return(0,m.UO)(e.data.path)}};function im(e){var t=e.path,n=e.replacePane,r=(0,f.Z)(),o=r.fs,a=r.broadcast,l=r.presence,c=ad(t);return(0,Hu.L5)((function(){if(c)return{commands:c}}),[c]),(0,i.BX)(i.HY,{children:[(0,i.tZ)(rd,{path:t,replacePane:n}),(0,i.tZ)(td,{children:(0,i.tZ)(tm,{fs:o,broadcast:a,presence:l,filePath:t})})]})}var om=n(85349),am={Content:function(e){var t=e.pane,n=e.options;return(0,i.tZ)(lm,{path:t.data.path,replacePane:n.replacePane})},Icon:function(e){var t=e.pane,n=e.size;return(0,i.tZ)(D.Z,{path:t.data.path,size:n})},getTitle:function(e){return(0,m.UO)(e.data.path)}};function lm(e){var t=e.path,n=e.replacePane,r=(0,f.Z)().fs,o=ad(t);return(0,Hu.L5)((function(){if(o)return{commands:o}}),[o]),(0,i.BX)(i.HY,{children:[(0,i.tZ)(rd,{path:t,replacePane:n}),(0,i.tZ)(td,{centered:!0,children:(0,i.tZ)(om.Z,{filePath:t,fs:r})})]})}var cm=n(58722);var sm=function(e,t,n,r){return function(i){return function(o){return function(a){o(a);var l=i.getState();if(l){var c=l.plugins,s=Object.keys(c),u=!0,d=!1,f=void 0;try{for(var h,p=function(){var o=h.value;if(a.pud&&a.pud!==o)return"continue";var c=l.plugins[o];if(c.broken)return"continue";var s=c.type,u=n[s];if(u)try{var d=u(t,o,a);if(d){var f=e(o).dispatch(d);f&&"object"===typeof f&&"function"===typeof f.catch&&f.catch((function(e){i.dispatch({type:"PLUGIN_BROKE",pud:o,message:e.toString()}),r({error:e,pluginType:s,source:"receiver",pud:o})}))}}catch(p){i.dispatch({type:"PLUGIN_BROKE",pud:o,message:p.toString()}),r({error:p,pluginType:s,source:"receiver",pud:o})}},v=s[Symbol.iterator]();!(u=(h=v.next()).done);u=!0)p()}catch(m){d=!0,f=m}finally{try{u||null==v.return||v.return()}finally{if(d)throw f}}}}}}},um=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(0===t.length)return e;var n=(0,zf.Z)(t),r=n[0],i=n.slice(1);return um(e[r],i)},dm=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0;if(0===t.length)return n;var r=(0,zf.Z)(t),i=r[0],a=r.slice(1);return Array.isArray(e)?(e[i]=dm(e[i],a,n),e):(0,_.Z)((0,R.Z)({},e),(0,o.Z)({},i,dm(e[i],a,n)))};var fm=function(e,t,n){var r=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;for(var a in r)if(!i.pud||i.pud===a){var l=r[a];if(!l.broken){var c=t[l.type];if(c)if("PLUGIN_BROKE"!==i.type){var s=void 0;try{s=c(l.state,(0,_.Z)((0,R.Z)({},i),{wid:e}))}catch(u){r=(0,_.Z)((0,R.Z)({},r),(0,o.Z)({},a,(0,_.Z)((0,R.Z)({},l),{broken:!0,errorMessage:u.toString()}))),n({error:u,pluginType:l.type,source:"reducer",pud:a});continue}s!==l.state&&(r=(0,_.Z)((0,R.Z)({},r),(0,o.Z)({},a,(0,_.Z)((0,R.Z)({},l),{state:s}))))}else r=(0,_.Z)((0,R.Z)({},r),(0,o.Z)({},a,(0,_.Z)((0,R.Z)({},l),{broken:!0,errorMessage:i.message})))}}return r},i=function(e,t){switch(t.type){case"UPDATE_LAYOUT":return(0,R.Z)({},e,dm(e,t.path.concat(t.property||[]),t.to));case"SET_ACTIVE_TAB":return(0,R.Z)({},e,dm(e,t.path.concat("active"),t.tabIndex));case"SET_SPLIT_POSITION":return(0,R.Z)({},e,dm(e,t.path.concat("position"),t.position));case"NEW_TAB":if("tabs"!==um(e,t.path.concat("type"))){var r=new Error("trying to add tab to non tab component");return n({error:r,pluginType:"layout",pud:null,source:"reducer"}),e}var i=(0,R.Z)({},e,dm(e,t.path.concat("tabs"),(0,I.Z)(um(e,t.path.concat("tabs"))).concat([t.layout])));if(!t.setActiveTab)return i;var a=um(i,t.path.concat("tabs")).findIndex((function(e){return e.pud===t.layout.pud}));return(0,R.Z)({},i,dm(i,t.path.concat("active"),a));case"CLOSE_TAB":var l=um(e,t.path.concat("tabs")),c=t.tabIndex||l.findIndex((function(e){return e.pud===t.tabPud}));if(!l[c]){var s=new Error("trying to remove nonexistent tab");return n({error:s,pluginType:"layout",pud:null,source:"reducer"}),e}var u=um(e,t.path.concat("active")),d=u===c?Math.max(u-1,0):u,f=(0,R.Z)({},e,dm(e,t.path.concat("active"),d));return(0,R.Z)({},f,dm(f,t.path.concat("tabs"),(0,I.Z)(l.slice(0,c).concat(l.slice(c+1)))));case"LOAD_PLUGIN":return(0,_.Z)((0,R.Z)({},e),{pluginTitles:(0,_.Z)((0,R.Z)({},e.pluginTitles),(0,o.Z)({},t.pluginPud,t.title))});default:return e}},a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{plugins:{},layout:{}},n=arguments.length>1?arguments[1]:void 0,a=r(e.plugins,n);a!==e.plugins&&(e=(0,_.Z)((0,R.Z)({},e),{plugins:a}));var l=i(e.layout,n);switch(l!==e.layout&&(e=(0,_.Z)((0,R.Z)({},e),{layout:l})),n.type){case"OPEN_FILE":return(0,_.Z)((0,R.Z)({},e),{activeFile:n.path});case"MOVE_FILE":return e.activeFile===n.path?(0,_.Z)((0,R.Z)({},e),{activeFile:n.to}):e;case"LOAD_PLUGIN":var c=t[n.pluginType];c||(c=function(e,t){});var s=n.initialState||{},u=c(void 0,{type:"@@INIT",initialState:s});return(0,_.Z)((0,R.Z)({},e),{plugins:(0,_.Z)((0,R.Z)({},e.plugins),(0,o.Z)({},n.pluginPud,{type:n.pluginType,state:u,isClosable:n.isClosable,isDraggable:n.isDraggable}))});case"UNLOAD_PLUGIN":return(0,_.Z)((0,R.Z)({},e),{plugins:Object.keys(e.plugins).reduce((function(t,r){return r!==n.pud?(0,_.Z)((0,R.Z)({},t),(0,o.Z)({},r,e.plugins[r])):t}),{})});default:return e}};return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_WORKSPACE":return t.state;case"CREATE_WORKSPACE":return{layout:t.layout,plugins:r(void 0,t),activeFile:t.activeFile};default:return a(e,t)}}},hm=n(70902),pm=n(93566);function vm(e,t){if("split"===e.type){var n=vm(e.left,t);if(n)return["left"].concat(n);var r=vm(e.right,t);if(r)return["right"].concat(r)}else if("tabs"===e.type)for(var i=0;i<e.tabs.length;i++){var o=vm(e.tabs[i],t);if(o)return["tabs",i].concat(o)}else if("pane"===e.type&&e.pud===t)return[];return null}function mm(e,t){for(var n=0;n<e.floating.length;n++)if(e.floating[n]===t)return["floating",n];var r=vm(e.tiling,t);return r?["tiling"].concat(r):null}function gm(e,t){var n,r=mm(e,t);if(!r)return{path:["tiling"],to:e.tiling};if("floating"===r[0]){var i=e.floating.indexOf(t);return{path:["floating"],to:e.floating.slice(0,i).concat(e.floating.slice(i+1))}}if("split"!==Zm(e,r.slice(0,-1)).type)throw new Error("remove only supports splits right now");return n="left"===r[r.length-1]?"right":"left",{path:r.slice(0,-1).map((function(e){return e.toString()})),to:Zm(e,r.slice(0,-1).concat(n))}}var Zm=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(0===t.length)return e;var n=(0,zf.Z)(t),r=n[0],i=n.slice(1);return Zm(e[r],i)};function ym(e){return"tabs"===e.slice(0,-1).pop()}var bm=function(e){var t={strokeMiterlimit:10,fill:"none",stroke:e.color,strokeWidth:1};return(0,i.tZ)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",children:(0,i.BX)("g",{children:[(0,i.tZ)("line",{style:t,x1:"3",y1:"3",x2:"13",y2:"13"}),(0,i.tZ)("line",{style:t,x1:"13",y1:"3",x2:"3",y2:"13"})]})})};var wm=function(e){var t=e.onClick,n=e.onMouseDown,r=e.Icon,o=e.color,a=e.style;return(0,i.tZ)("button",{onClick:t,onMouseDown:n,style:(0,R.Z)({color:"var(--foreground-default)",backgroundColor:"transparent",border:"none",cursor:"pointer",margin:"0",outline:"none",padding:"0"},a),children:(0,i.tZ)(r,{color:o})})},xm=function(e){var t=e.color;return(0,i.tZ)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 8.467 10.583",children:(0,i.tZ)("path",{d:"M4.233.684L2.988 1.93l.374.374.607-.607V3.97H1.697l.607-.607-.374-.374L.684 4.233 1.93 5.48l.374-.374-.607-.607H3.97V6.77l-.607-.607-.374.374 1.245 1.245L5.48 6.537l-.374-.374-.607.607V4.498H6.77l-.607.607.374.374 1.245-1.246-1.245-1.245-.374.374.607.607H4.498V1.697l.607.607.374-.374z",fill:t,"white-space":"normal",overflow:"visible"})})},Cm={height:"12px",width:"12px",margin:"0 4px"},km=function(e){var t=e.isTabbed,n=e.isClosable,r=e.isDraggable,o=e.HeaderPlugin,a=e.onClose,c=e.onDrag;return(0,i.BX)(l.Fragment,{children:[o,(0,i.BX)("div",{style:{alignItems:"center",display:"flex",height:"100%",marginLeft:"auto"},children:[r&&!t?(0,i.tZ)(wm,{Icon:xm,onMouseDown:c,style:Cm}):null,n&&!t?(0,i.tZ)(wm,{Icon:bm,onClick:a,style:Cm}):null]})]})};var Sm=1e5,Em=32,Tm={width:"100%",height:"100%"},Rm=function(e){return e.getBoundingClientRect()},_m=function(e,t){var n=t.px,r=t.pc;return{px:e.px+(n||0),pc:e.pc+(r||0)}},Im=function(e,t){return{px:e.px*t,pc:e.pc*t}},Gm={px:0,pc:0},Dm=function(e){return{px:e,pc:0}},Pm=function(e){return{px:0,pc:e}},Bm=function(e){var t=e.px,n=e.pc;return 0===t&&0===n},Um=function(e,t,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{x:Gm,y:Gm,w:Pm(100),h:Pm(100),p:[]};if("tabs"===r.type){var a=r.active||0;n.push((0,_.Z)((0,R.Z)({},o),{h:Dm(Em),tabs:r.tabs.map((function(e){return e.pud||e.type})),active:a}));for(var l=0;l<r.tabs.length;l++)Um(e,t,n,(0,R.Z)({},r.tabs[l]),i,(0,_.Z)((0,R.Z)({},o),{p:(0,I.Z)(o.p).concat(["tabs",l.toString()]),y:_m(o.y,Dm(Em)),h:l===a?_m(o.h,Dm(-32)):Gm,w:l===a?o.w:Gm}))}if("split"===r.type){var c=void 0===r.position?50:r.position,s=!1;if("undefined"!==typeof r.fixed?s=r.fixed:("undefined"!==typeof r.leftSize||"undefined"!==typeof r.rightSize)&&(s=!0),"undefined"!==typeof r.leftSize&&"undefined"!==typeof r.rightSize)throw new Error("Cannot have both leftSize and rightSize specified");var u=null;if(0===c?u="left":100===c&&(u="right"),r.stacked){var d=!Bm(o.h)&&!s,f=Im(o.h,c/100);r.rightSize?f=_m(o.h,Dm(-r.rightSize)):r.leftSize?f=Dm(r.leftSize):"left"===u||Bm(o.h)?f=Gm:"right"===u&&(f=_m(f,Dm(-8))),Um(e,t,n,r.left,i,(0,_.Z)((0,R.Z)({},o),{p:(0,I.Z)(o.p).concat(["left"]),h:f}));var h=_m(o.y,Im(o.h,c/100));r.rightSize?h=_m(o.y,f):r.leftSize?h=_m(o.y,Dm(r.leftSize)):"left"===u?h=o.y:"right"===u&&d&&(h=_m(h,Dm(-8)));var p=Im(o.h,(100-c)/100);r.rightSize?p=Dm(r.rightSize):r.leftSize?p=_m(o.h,Dm(-r.leftSize)):("right"===u||Bm(o.h))&&(p=Gm),Um(e,t,n,r.right,i,(0,_.Z)((0,R.Z)({},o),{p:(0,I.Z)(o.p).concat(["right"]),y:d?_m(h,Dm(8)):h,h:d?_m(p,Dm(-8)):p})),d&&t.push((0,_.Z)((0,R.Z)({},o),{y:h,snapped:u,h:Dm(8),stacked:r.stacked}))}else{var v=!Bm(o.w)&&!s,m=Im(o.w,c/100);r.rightSize?m=_m(o.w,Dm(-r.rightSize)):r.leftSize?m=Dm(r.leftSize):"left"===u||Bm(o.w)?m=Gm:"right"===u&&(m=_m(m,Dm(-8))),Um(e,t,n,r.left,i,(0,_.Z)((0,R.Z)({},o),{p:(0,I.Z)(o.p).concat(["left"]),w:m}));var g=_m(o.x,Im(o.w,c/100));"left"===u?g=o.x:r.rightSize?g=_m(o.x,m):r.leftSize?g=_m(o.x,Dm(r.leftSize)):"right"===u&&(g=_m(g,Dm(-8)));var Z=Im(o.w,(100-c)/100);r.rightSize?Z=Dm(r.rightSize):r.leftSize?Z=_m(o.w,Dm(-r.leftSize)):("right"===u||Bm(o.w))&&(Z=Gm),Um(e,t,n,r.right,i,(0,_.Z)((0,R.Z)({},o),{p:(0,I.Z)(o.p).concat(["right"]),x:v?_m(g,Dm(8)):g,w:v?_m(Z,Dm(-8)):Z})),v&&t.push((0,_.Z)((0,R.Z)({},o),{x:g,snapped:u,w:Dm(8),stacked:r.stacked}))}}if("pane"===r.type){var y=r.header,b=r.pud,w=i[b]||{isDraggable:!1,isClosable:!1},x=ym(o.p),C=y||!x&&(w.isClosable||w.isDraggable),k=C?y&&y.height||32:0;e.push({header:C&&{pud:y&&y.pud,p:(0,_.Z)((0,R.Z)({},o),{h:Dm(k)})},pud:b,p:(0,_.Z)((0,R.Z)({},o),{y:_m(o.y,Dm(k)),h:_m(o.h,Dm(-k))}),isDraggable:w.isDraggable,isClosable:w.isClosable})}},Am=function(e){var t,n,r,l=e.stacked,c=e.onMouseDown,s=e.snapped,u=e.style,d=(0,a.Z)(Fm(),2),f=d[0],h=d[1],p=f?"var(--outline-default)":"var(--outline-dimmest)";s?(n="left"===s?l?"translate(0px, -2px) rotate(135deg)":"translate(-2px, 0px) rotate(45deg)":l?"translate(0px, 2px) rotate(-45deg)":"translate(2px, 0px) rotate(-135deg)",t={width:6,height:6,borderRight:"solid 1px ".concat(p),borderTop:"solid 1px ".concat(p),transition:"0.1s background-color",transform:n}):(r={backgroundColor:p,borderRadius:"var(--border-radius-4)"},(0,o.Z)(r,l?"height":"width",2),(0,o.Z)(r,l?"width":"height",25),(0,o.Z)(r,"transition","0.1s background-color"),t=r);return(0,i.tZ)("div",(0,_.Z)((0,R.Z)({},h),{onMouseDown:c,onTouchStart:c,style:(0,R.Z)({position:"absolute",display:"flex",justifyContent:"center",alignItems:"center",flex:"1 0 auto",overflow:"hidden",borderRadius:"var(--border-radius-4)",background:"var(--background-root)",cursor:l?"row-resize":"col-resize",zIndex:1},u),children:(0,i.tZ)("div",{style:t})}))},Nm=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0;if(0===t.length)return n;var r=(0,zf.Z)(t),i=r[0],a=r.slice(1);return Array.isArray(e)?(e[i]=Nm(e[i],a,n),e):(0,_.Z)((0,R.Z)({},e),(0,o.Z)({},i,Nm(e[i],a,n)))},Lm=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(0===t.length)return e;var n=(0,zf.Z)(t),r=n[0],i=n.slice(1);return Lm(e[r],i)},Xm=function(e){(0,He.Z)(n,e);var t=(0,Ve.Z)(n);function n(){var e;return(0,ze.Z)(this,n),e=t.apply(this,arguments),(0,o.Z)((0,hm.Z)(e),"state",{protectEvents:!1,newLayout:null,debug:!1,dragging:null,resizing:null,layout:e.props.store.getState().layout,plugins:e.props.store.getState().plugins}),(0,o.Z)((0,hm.Z)(e),"getPluginComponent",(function(t,n){var r=e.state.plugins[n],o=e.props,a=o.pluginComponents,l=o.wid,c=null;return c=r?r.broken?(0,i.tZ)(Om,{handleError:function(t){return e.handleError({error:t,pluginType:r.type,source:"component",pud:n})},message:r.errorMessage||"Plugin broken with no error :/"}):(c=a[r.type])?(0,i.tZ)(c,{wid:l,pud:n,dimensions:e.getPluginDims(n,{w:t.w,h:t.h}),style:Tm}):(0,i.tZ)(Om,{handleError:function(t){return e.handleError({error:t,pluginType:r.type,source:"component",pud:n})},message:"No plugin component by the name ".concat(n)}):(0,i.tZ)(Om,{handleError:function(t){return e.handleError({error:t,pluginType:"none",source:"component",pud:n})},message:"No known plugin by the name ".concat(n)})})),(0,o.Z)((0,hm.Z)(e),"onResizerDown",(function(t,n,r){var i=t.target;e.setState({protectEvents:!0,resizing:{stacked:r}}),t.preventDefault(),t.stopPropagation();var o=0,a=function(t,n){if("pane"===t.type){var i=e.nodes[n.join(".")].ref;if(!i)return;o+=r?Rm(i).height:Rm(i).width}else if("split"===t.type)t.stacked===r?(a(t.left,(0,I.Z)(n).concat(["left"])),a(t.right,(0,I.Z)(n).concat(["right"]))):a(t.left,(0,I.Z)(n).concat(["left"]));else if("tabs"===t.type){var l=t.active||0;a(t.tabs[l],(0,I.Z)(n).concat(["tabs",l.toString()]))}};a(Lm(e.state.layout,["tiling"].concat((0,I.Z)(n))),n),o+=8;var l=r?Rm(i).top:Rm(i).left,c=Lm(e.state.layout,["tiling"].concat((0,I.Z)(n),["position"]));"number"!==typeof c&&(c=50);var s=function(t){t.preventDefault(),t.stopPropagation();var i,a=t.touches?t.touches[0]:t,s=(r?a.pageY:a.pageX)-l,u=o*(c/100)+s;i=u>o-32?100:u<32?0:u/o*100,e.setState({newLayout:Nm(e.state.layout,["tiling"].concat((0,I.Z)(n),["position"]),i)})},u=function(){document.removeEventListener("touchmove",s),document.removeEventListener("mousemove",s),document.removeEventListener("touchend",u),document.removeEventListener("mouseup",u),e.setState({protectEvents:!1,resizing:null}),null!==e.state.newLayout&&(e.props.store.dispatch({type:"SET_SPLIT_POSITION",position:Lm(e.state.newLayout,["tiling"].concat((0,I.Z)(n),["position"])),path:["tiling"].concat((0,I.Z)(n))}),e.setState({newLayout:null}))};document.addEventListener("touchmove",s),document.addEventListener("mousemove",s),document.addEventListener("touchend",u),document.addEventListener("mouseup",u)})),(0,o.Z)((0,hm.Z)(e),"onDrag",(function(t,n){t.stopPropagation(),t.preventDefault();var r=t.pageX,i=t.pageY,o=null,a=[];for(var l in e.nodes){var c=e.nodes[l];if(c.ref){var s=Rm(c.ref),u=s.top,d=s.left,f=s.width,h=s.height,p={p:c.p,x:d,y:u,w:f,h:h,pud:c.pud};c.pud===n?o=p:a.push(p)}}e.setState({protectEvents:!0});var v=function(t){t.preventDefault(),t.stopPropagation();var l=t.pageX,c=t.pageY,s={target:null,side:"bottom",left:l,top:c},u=!0,d=!1,f=void 0;try{for(var h,p=a[Symbol.iterator]();!(u=(h=p.next()).done);u=!0){var v=h.value;if((e.state.plugins[v.pud]||{}).isDraggable&&(l>v.x&&l<v.x+v.w&&c>v.y&&c<v.y+v.h)){var m=l-v.x,g=v.x+v.w-l,Z=c-v.y,y=v.y+v.h-c,b=Math.min(m,g,Z,y);s.target=v.pud,b===m?s.side="left":b===g?s.side="right":b===Z&&(s.side="top");break}}}catch(C){d=!0,f=C}finally{try{u||null==p.return||p.return()}finally{if(d)throw f}}var w=l-r,x=c-i;s.left=o.x+w,s.top=o.y+x,e.setState({dragging:(0,R.Z)({pud:n,width:o.w,height:o.h},s)})},m=function(){e.state.dragging&&e.state.dragging.target&&e.props.store.dispatch(Mm({pud:n,side:e.state.dragging.side,target:e.state.dragging.target})),e.setState({protectEvents:!1,dragging:null}),document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",m)};document.addEventListener("mousemove",v),document.addEventListener("mouseup",m)})),(0,o.Z)((0,hm.Z)(e),"nodes",{}),(0,o.Z)((0,hm.Z)(e),"dimMap",{}),(0,o.Z)((0,hm.Z)(e),"getPluginDims",(function(t,n){var r=e.dimMap[t];return r&&r.h.pc===n.h.pc&&r.h.px===n.h.px&&r.w.pc===n.h.pc&&r.w.px===n.w.px?r:(e.dimMap[t]=n,n)})),e}return(0,sn.Z)(n,[{key:"cancelContextMenuIntercept",value:function(e){e.shiftKey&&e.altKey&&e.preventDefault()}},{key:"componentDidMount",value:function(){this.isWeMounted=!0,this.subscribe(),document.addEventListener("contextmenu",this.cancelContextMenuIntercept)}},{key:"componentWillUnmount",value:function(){this.unsubscribe&&this.unsubscribe(),document.removeEventListener("contextmenu",this.cancelContextMenuIntercept),this.isWeMounted=!1}},{key:"subscribe",value:function(){var e=this,t=this.props.store;this.unsubscribe=t.subscribe((function(){var n=t.getState(),r=n.layout,i=n.plugins;e.isWeMounted&&e.setState((function(e){for(var t in e.plugins){if(!i[t])return{layout:r,plugins:i};if(i[t].broken!==e.plugins[t].broken)return{layout:r,plugins:i}}return e.layout===r?null:{layout:r,plugins:i}}))}))}},{key:"shouldComponentUpdate",value:function(e,t){if(this.state!==t)return!0;for(var n in this.props)if(this.props[n]!==e[n])return!0;return!1}},{key:"onMaybeDrag",value:function(e,t){var n=this.state.plugins[t]&&this.state.plugins[t].isDraggable;(e.altKey||e.shiftKey)&&n&&this.onDrag(e,t)}},{key:"closeTabbedPlugin",value:function(e){var t=e.path,n=e.tabIndex,r=e.activeTabIndex;return function(e,i){var o=i().layout,a=Zm(o,t).tabs,l=a[n].pud;if(e({type:"CLOSE_TAB",path:t,tabIndex:n}),a.length-1===0)e((0,R.Z)({type:"UPDATE_LAYOUT"},gm({layout:o,nodePath:t})));else if(n<=r){e({type:"SET_ACTIVE_TAB",tabIndex:Math.max(r-1,0),path:t})}e({type:"PLUGIN_CLOSED",closedPud:l})}}},{key:"closePlugin",value:function(e){var t=e.pud;return function(e,n){var r=n().layout;e((0,R.Z)({type:"UPDATE_LAYOUT"},gm({layout:r,pud:t}))),e({type:"PLUGIN_CLOSED",closedPud:t})}}},{key:"getPaneStyles",value:function(e,t){var n=Bm(t.w)||Bm(t.h),r=t.p.includes("tabs");return e?{opacity:.75,overflow:"hidden",visibility:n?"hidden":void 0,height:this.state.dragging.height,position:"absolute",left:0,top:0,transform:"translate(".concat(this.state.dragging.left,"px, ").concat(this.state.dragging.top-(t.h.px>0?t.h.px:0),"px)"),width:this.state.dragging.width,zIndex:99999,transition:"opacity 0.2s, max-width 0.2s, max-height 0.2s",maxWidth:"100vw",maxHeight:"100vh"}:{position:"absolute",visibility:n&&!r?"hidden":void 0,display:n&&r?"none":void 0,height:"calc(".concat(t.h.pc,"% + ").concat(t.h.px,"px)"),width:"calc(".concat(t.w.pc,"% + ").concat(t.w.px,"px)"),left:"calc(".concat(t.x.pc,"% + ").concat(t.x.px,"px)"),top:"calc(".concat(t.y.pc,"% + ").concat(t.y.px,"px)"),opacity:"1",transition:"opacity 0.2s, max-width 0.2s, max-height 0.2s",maxWidth:"100vw",maxHeight:"100vh"}}},{key:"render",value:function(){var e=this,t=this.state.newLayout||this.state.layout,n=t.tiling,r=t.floating,o=this.state.plugins,a=[],c=[],s=[];Um(a,c,s,n,o);var u="default";return this.state.resizing?u=this.state.resizing.stacked?"row-resize":"col-resize":this.state.dragging&&(u="grabbing"),(0,i.BX)("div",{style:{height:"100%",width:"100%",position:"absolute"},children:[a.map((function(t){var n=t.pud,r=t.p,o=t.header,a=t.isClosable,c=t.isDraggable,s=e.state.plugins[n]||{},u=e.state.plugins[o&&o.pud]||{},d=o&&o.p.h.px,f=o&&o.pud&&(0,i.tZ)(Om,{handleError:function(t){return e.props.handleError({error:t,pluginType:u.type,source:"component",pud:n})},message:u.broken?u.errorMessage:void 0,children:(0,i.tZ)(pm.zt,{store:e.props.classicStoreFor(n),children:e.getPluginComponent(o.p,o.pud)})}),h=e.state.dragging&&e.state.dragging.pud===n;return(0,i.BX)(l.Fragment,{children:[o?(0,i.tZ)("div",{className:"WHO AM I??",style:(0,_.Z)((0,R.Z)({},e.getPaneStyles(h,o.p)),{backgroundColor:"var(--background-default)",color:"var(--foreground-default)",height:"".concat(d,"px"),alignItems:"center",display:"flex",justifyContent:"spaceBetween"}),children:(0,i.tZ)(km,{HeaderPlugin:f,isClosable:a,isDraggable:c,isTabbed:ym(r.p),onClose:function(){e.props.store.dispatch(e.closePlugin({pud:n}))},onDrag:function(t){return e.onDrag(t,n)}})}):null,(0,i.BX)("div",{ref:function(t){return e.nodes[r.p.join(".")]={ref:t,p:r,pud:n}},style:(0,_.Z)((0,R.Z)({},e.getPaneStyles(h,r)),{borderRadius:"var(--border-radius-4)",boxShadow:h?"var(--shadow-2)":"none"}),onMouseDown:function(t){return e.onMaybeDrag(t,n)},children:[e.state.debug?(0,i.BX)("div",{style:{backgroundColor:"hsl(".concat(n.split("").map((function(e){return e.charCodeAt(0)})).reduce((function(e,t){return e+t})),", 50%, 50%)"),width:"100%",height:"100%",border:"inset 5px"},children:[n,(0,i.BX)("pre",{children:["x: ","calc(".concat(r.x.pc,"% + ").concat(r.x.px,"px)"),(0,i.tZ)("br",{}),"y: ","calc(".concat(r.y.pc,"% + ").concat(r.y.px,"px)"),(0,i.tZ)("br",{}),"w: ","calc(".concat(r.w.pc,"% + ").concat(r.w.px,"px)"),(0,i.tZ)("br",{}),"h: ","calc(".concat(r.h.pc,"% + ").concat(r.h.px,"px)"),(0,i.tZ)("br",{}),"p: ",r.p.join(" ")]})]}):(0,i.tZ)(Om,{handleError:function(t){return e.props.handleError({error:t,pluginType:s.type,source:"component",pud:n})},message:s.broken?s.errorMessage:void 0,children:(0,i.tZ)(pm.zt,{store:e.props.classicStoreFor(n),children:e.getPluginComponent(r,n)})}),e.state.dragging&&e.state.dragging.target===n?(0,i.tZ)("div",{style:{position:"absolute",top:0,left:0,bottom:0,right:0,background:"rgba(127, 127, 127, 0.6)",transition:"transform 0.2s",transformOrigin:"top left",transform:"translate(".concat("right"===e.state.dragging.side?"50%":0,", ").concat("bottom"===e.state.dragging.side?"50%":0,") ").concat("left"===e.state.dragging.side||"right"===e.state.dragging.side?"scaleX(.5)":"scaleY(.5)")}}):null]})]},n)})),this.state.protectEvents?(0,i.tZ)("div",{style:{zIndex:Sm,position:"absolute",top:0,bottom:0,left:0,right:0,cursor:u}}):null,c.map((function(t,n){var r=t.x,o=t.y,a=t.w,l=t.h,c=t.p,s=t.snapped,u=t.stacked;return(0,i.tZ)(Am,{onMouseDown:function(t){return e.onResizerDown(t,c,u)},snapped:s,stacked:u,style:{left:"calc(".concat(r.pc,"% + ").concat(r.px,"px)"),top:"calc(".concat(o.pc,"% + ").concat(o.px,"px)"),width:"calc(".concat(a.pc,"% + ").concat(a.px,"px)"),height:"calc(".concat(l.pc,"% + ").concat(l.px,"px)")}},n)})),s.map((function(t,n){var r=t.x,o=t.y,a=t.w,l=t.h,c=t.p,s=t.tabs,u=t.active;return(0,i.tZ)(Wm,{tabsMetadata:s.map((function(t){if("split"===t){var r=Lm(e.state.layout,["tiling"].concat((0,I.Z)(c),["tabs"]))[n];t=r.left.pud||r.right.pud}return{title:e.state.layout.pluginTitles[t]||"untitled",isClosable:e.state.plugins[t]&&e.state.plugins[t].isClosable}})),active:u,setActive:function(t){return e.props.store.dispatch((function(e){var n=["tiling"].concat((0,I.Z)(c));e({type:"SET_ACTIVE_TAB",tabIndex:t,path:n})}))},close:function(t){var n=["tiling"].concat((0,I.Z)(c));e.props.store.dispatch(e.closeTabbedPlugin({path:n,tabIndex:t,activeTabIndex:u}))},style:{position:"absolute",left:"calc(".concat(r.pc,"% + ").concat(r.px,"px)"),top:"calc(".concat(o.pc,"% + ").concat(o.px,"px)"),width:"calc(".concat(a.pc,"% + ").concat(a.px,"px)"),height:"calc(".concat(l.pc,"% + ").concat(l.px,"px)")}},n)})),r.map((function(t){if(!e.state.plugins[t])return(0,i.tZ)(Om,{handleError:function(n){return e.props.handleError({error:n,pluginType:e.state.plugins[t].type,source:"component",pud:t})},message:"No plugin by the name ".concat(t)},t);var n=e.props.pluginComponents[e.state.plugins[t].type];return n?(0,i.tZ)(Om,{handleError:function(n){return e.props.handleError({error:n,pluginType:e.state.plugins[t].type,source:"component",pud:t})},children:(0,i.tZ)(pm.zt,{store:e.props.classicStoreFor(t),children:(0,i.tZ)(n,{wid:e.props.wid,pud:t},t)})},t):(0,i.tZ)(Om,{handleError:function(n){return e.props.handleError({error:n,pluginType:e.state.plugins[t].type,source:"component",pud:t})},message:"No component found for plugin by the name ".concat(t)},t)}))]})}}]),n}(l.Component);function Mm(e){var t=e.pud,n=e.side,r=e.target;return function(e,i){var o=i().layout,a=mm(o,t),l=Zm(o,a);e((0,R.Z)({type:"UPDATE_LAYOUT"},gm({layout:o,pud:t})));var c=mm(o=i().layout,r);if(c){ym(c)&&(c=function(e){return e.slice(0,-1)}(c));var s="leftOf";"right"===n?s="rightOf":"top"===n?s="above":"bottom"===n&&(s="below"),e((0,R.Z)({type:"UPDATE_LAYOUT"},function(e,t,n,r,i){if("inside"===n){if(1!==r.length||"floating"!==r[0])throw new Error("position 'inside' should only be used for the path ['floating']");return i&&i.once&&e.floating.includes(t)?{path:["floating"],to:e.floating}:{path:["floating"],to:e.floating.concat(t)}}var o={type:"split"};if("undefined"!==typeof i?"undefined"!==typeof i.position?o=(0,_.Z)((0,R.Z)({},o),{fixed:!!i.fixed,position:i.position||50}):"undefined"!==typeof i.leftSize?o=(0,_.Z)((0,R.Z)({},o),{leftSize:i.leftSize}):"undefined"!==typeof i.rightSize&&(o=(0,_.Z)((0,R.Z)({},o),{rightSize:i.rightSize})):o=(0,_.Z)((0,R.Z)({},o),{fixed:!1,position:50}),"leftOf"===n)o=(0,_.Z)((0,R.Z)({},o),{stacked:!1,right:Zm(e,r),left:{type:"pane",pud:t}});else if("rightOf"===n)o=(0,_.Z)((0,R.Z)({},o),{stacked:!1,right:{type:"pane",pud:t},left:Zm(e,r)});else if("above"===n)o=(0,_.Z)((0,R.Z)({},o),{stacked:!0,left:{type:"pane",pud:t},right:Zm(e,r)});else{if("below"!==n)throw new Error("unsupported new plugin type");o=(0,_.Z)((0,R.Z)({},o),{stacked:!0,right:{type:"pane",pud:t},left:Zm(e,r)})}return{path:r.map((function(e){return e.toString()})),to:o}}(o,l.pud,s,c,{position:50})))}}}var Om=function(e){(0,He.Z)(n,e);var t=(0,Ve.Z)(n);function n(){var e;return(0,ze.Z)(this,n),e=t.apply(this,arguments),(0,o.Z)((0,hm.Z)(e),"state",{hasError:!!e.props.message,error:new Error(e.props.message)}),e}return(0,sn.Z)(n,[{key:"componentDidCatch",value:function(e,t){this.setState({hasError:!0,error:e,info:t}),this.props.handleError(e)}},{key:"render",value:function(){return this.state.hasError?(0,i.BX)("div",{style:{background:"red",color:"white",width:"100%",height:"100%",padding:"0",margin:"0",overflow:"hidden"},children:[(0,i.tZ)("h1",{children:"This Plugin Crashed!"}),this.state.info?(0,i.tZ)("pre",{children:this.state.info.componentStack||JSON.stringify(this.state.info)}):null,this.state.error?(0,i.tZ)("pre",{children:this.state.error.toString()}):null]}):this.props.children||null}}]),n}(l.Component);function Wm(e){var t=e.active,n=void 0===t?0:t,r=e.setActive,o=void 0===r?function(){}:r,a=e.close,l=void 0===a?function(){}:a,c=e.tabsMetadata,s=e.style;return(0,i.tZ)("div",{style:s,children:(0,i.tZ)("div",{style:{height:Em,fontFamily:"'IBM Plex Sans', sansSerif",backgroundColor:"var(--background-root)",display:"flex",alignItems:"flex-end",position:"relative",zIndex:2},children:c.map((function(e,t){return(0,i.tZ)(zm,{title:e.title,isClosable:e.isClosable,onClose:function(){return l(t)},onClick:function(){return o(t)},isActive:t===n},t)}))})})}function Fm(){var e=(0,a.Z)(l.useState(!1),2),t=e[0],n=e[1];return[t,{onMouseEnter:function(){n(!0)},onMouseLeave:function(){n(!1)}}]}function jm(e){var t=e.isHovering,n=e.isActive;return(0,R.Z)({height:"100%",boxSizing:"border-box",display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",padding:"var(--space-8)",backgroundColor:"var(--background-root)",color:"var(--foreground-dimmer)",fontSize:"var(--font-size-default)",fontFamily:"var(--font-family-default)",borderTopRightRadius:"var(--border-radius-4)",borderTopLeftRadius:"var(--border-radius-4)",cursor:"pointer",transition:"0.2s background-color"},t?{backgroundColor:"var(--background-root)",color:"var(--foreground-default)"}:{},n?{backgroundColor:"var(--background-default)",color:"var(--foreground-default)"}:{})}function zm(e){var t,n=e.isActive,r=e.onClick,o=e.title,l=e.isClosable,c=e.onClose,s=(0,a.Z)(Fm(),2),u=s[0],d=s[1];return(0,i.tZ)("div",(0,_.Z)((0,R.Z)({},d),{style:jm({isHovering:u,isActive:n}),onClick:r,children:(0,i.BX)("div",{style:{alignItems:"center",display:"flex",justifyContent:"space-between"},children:[(t=o,t?t[0].toUpperCase()+t.slice(1):t),l?(0,i.tZ)(wm,{onClick:function(e){e.stopPropagation(),c()},Icon:bm,style:{height:"8px",width:"8px",padding:0,marginLeft:"7px"}}):null]})}))}var Hm=Xm,Vm=n(49500),qm=function(e){return function(t){return function(n){return"function"===typeof n?n(e.dispatch,e.getState):t(n)}}},$m=["activeFile"],Ym=function(){function e(){var t=this;(0,ze.Z)(this,e),(0,o.Z)(this,"marshal",(function(){var e=t.store.getState();return JSON.stringify(e)})),(0,o.Z)(this,"unmarshal",(function(e){var n=JSON.parse(e);t.store.dispatch({type:"SET_WORKSPACE",state:n})})),(0,o.Z)(this,"bootstrap",(function(e){t.store.dispatch(function(e){var t=e.wid,n=e.config;return function(e){for(var r in e({wid:t,type:"CREATE_WORKSPACE",language:n.language,layout:n.layout,activeFile:n.activeFile}),n.plugins)e(Qm({wid:t,pluginPud:r,pluginType:n.plugins[r].type,title:n.plugins[r].title,initialState:n.plugins[r].state,isClosable:n.plugins[r].isClosable,isDraggable:n.plugins[r].isDraggable}))}}({config:e}))})),(0,o.Z)(this,"register",(function(e,n){t.reducers[e]=n.reducer,t.receivers[e]=n.receiver,t.components[e]=n.Component})),(0,o.Z)(this,"yikesInjectStore",(function(e){t.yikesExtraStore=e})),(0,o.Z)(this,"injectServices",(function(e){t.services=e})),(0,o.Z)(this,"handleError",(function(e){var n=e.error,r=e.pluginType,i=e.source,o=e.pud;if(0===t.errorHandlers.length)return Vm.error("Plugin with type ",r," errored in ",i," error is: "),void Vm.error(n);t.errorHandlers.forEach((function(e){return e({error:n,pluginType:r,source:i,pud:o})}))})),(0,o.Z)(this,"registerErrorHandler",(function(e){return t.errorHandlers.push(e),function(){t.errorHandlers=t.errorHandlers.filter((function(t){return t!==e}))}})),window.performance.clearMarks("create-workspace"),window.performance.mark("create-workspace"),this.wid=""+Math.random(),this.reducers={},this.receivers={},this.components={},this.pluginStores={},this.yikesExtraStore={getState:function(){return{}},subscribe:function(){return function(){}},dispatch:function(){}},this.errorHandlers=[];var n=[];this.classicStoreFor=function(e){var i={};if(t.pluginStores[e])return t.pluginStores[e];var a=t,s={getState:function(){return{get user(){return i.user=!0,a.yikesExtraStore.getState().user},get banners(){return i.banners=!0,a.yikesExtraStore.getState().banners},get replEnvironment(){return i.replEnvironment=!0,a.yikesExtraStore.getState().replEnvironment},get repls(){throw new Error("Please use repl shared reducer")},get replsByUrl(){throw new Error("Please use repl shared reducer")},get replsByUser(){throw new Error("Please use repl shared reducer")},get files(){throw new Error("Please use files shared reducer")},get messages(){return i.messages=!0,a.yikesExtraStore.getState().messages},get plans(){return i.plans=!0,a.yikesExtraStore.getState().plans},workspace:(0,o.Z)({},t.wid,t.store.getState()),get services(){return a.services}}},subscribe:function(n){var r={},o={},a=$m.reduce((function(e,n){return e[n]=t.store.getState()[n],e}),{});return t.store.subscribe((function(){var l=t.store.getState().plugins[e];if(l!==r)return r=l,void n();var c=!1,s=t.yikesExtraStore.getState();for(var u in i)s[u]!==o[u]&&(o[u]=s[u],c=!0);var d=t.store.getState();for(var f in a)d[f]!==a[f]&&(a[f]=d[f],c=!0);c&&n()}))},dispatch:function(i){if(i.type){var o={};i.path&&(o={path:i.path}),et.n_({category:"redux",message:"workspace action",data:(0,R.Z)({type:i?i.type:null},o)})}if(i.wid||"function"===typeof i){var a=qm(t.classicStoreFor(e))(r(c)(l))(i),s=!0,u=!1,d=void 0;try{for(var f,h=n[Symbol.iterator]();!(s=(f=h.next()).done);s=!0){f.value.cb()}}catch(p){u=!0,d=p}finally{try{s||null==h.return||h.return()}finally{if(u)throw d}}return a}return t.yikesExtraStore.dispatch(i)}};return t.pluginStores[e]=s,s};var r=sm(this.classicStoreFor,this.wid,this.receivers,this.handleError),i=fm(this.wid,this.reducers,this.handleError),a=i(void 0,{type:"@@INIT"}),l=function(e){a=i(a,e)},c={getState:function(){return a},subscribe:function(e){var t=function(){n=n.filter((function(e){return e.unsub!==t}))};return n.push({cb:e,unsub:t}),t},dispatch:function(e){if(e.type){var t={};e.path&&(t={path:e.path}),et.n_({category:"redux",message:"workspace action",data:(0,R.Z)({type:e?e.type:null},t)})}var i=qm(c)(r(c)(l))(e),o=!0,a=!1,s=void 0;try{for(var u,d=n[Symbol.iterator]();!(o=(u=d.next()).done);o=!0){u.value.cb()}}catch(f){a=!0,s=f}finally{try{o||null==d.return||d.return()}finally{if(a)throw s}}return i}};window.store=c,this.store=c}return(0,sn.Z)(e,[{key:"component",value:function(){var e=this;return function(){return(0,i.tZ)(Km,{store:e.store,classicStoreFor:e.classicStoreFor,wid:e.wid,pluginComponents:e.components,handleError:e.handleError})}}}]),e}(),Km=function(e){(0,He.Z)(n,e);var t=(0,Ve.Z)(n);function n(){return(0,ze.Z)(this,n),t.apply(this,arguments)}return(0,sn.Z)(n,[{key:"componentDidMount",value:function(){this.props.store.dispatch({type:"WORKSPACE_MOUNTED"})}},{key:"componentWillUnmount",value:function(){this.props.store.dispatch({type:"WORKSPACE_WILL_UNMOUNT"})}},{key:"render",value:function(){return(0,i.tZ)("div",{style:{height:"100%",position:"relative",display:"flex"},children:(0,i.tZ)(Hm,{wid:this.props.wid,store:this.props.store,classicStoreFor:this.props.classicStoreFor,pluginComponents:this.props.pluginComponents,handleError:this.props.handleError})})}}]),n}(l.Component);function Qm(e){var t=e.wid,n=e.pluginPud,r=e.pluginType,i=e.title,o=e.initialState,a=e.isClosable,l=void 0!==a&&a,c=e.isDraggable;return{type:"LOAD_PLUGIN",wid:t,pluginPud:n,pluginType:r,title:i,initialState:o,isClosable:l,isDraggable:void 0!==c&&c}}function Jm(){var e=(0,$r.Z)(["\n  fragment GitCurrentUser on CurrentUser {\n    id\n    fullName\n    username\n    gitHubInfo {\n      accessToken\n      installations {\n        id\n        type\n        name\n        avatarUrl\n      }\n      userInfo {\n        name\n        email\n        avatarUrl\n      }\n    }\n  }\n"]);return Jm=function(){return e},e}function eg(){var e=(0,$r.Z)(["\n  query GitHubRepoCreationModal($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        title\n        isPrivate\n        isRenamed\n        description\n      }\n    }\n  }\n"]);return eg=function(){return e},e}function tg(){var e=(0,$r.Z)(["\n  query GitCurrentUser {\n    currentUser {\n      id\n      ...GitCurrentUser\n    }\n  }\n  ","\n"]);return tg=function(){return e},e}var ng={},rg=(0,Yr.Ps)(Jm()),ig=(0,Yr.Ps)(eg());var og=(0,Yr.Ps)(tg(),rg);var ag=n(72704);function lg(e,t,n){var r=e.workspace[t].plugins[n];if("git"!==r.type)throw new Error("expected type to be git");return r.state}function cg(e,t,n){return[(0,pm.v9)((function(n){return lg(n,e,t)}),n),function(){throw new Error("Not implemented")}]}var sg=n(24896),ug=n(38749),dg=n(83451),fg=n(45005),hg=n.n(fg),pg=n(54614),vg="https://api.github.com",mg=function(e){(0,He.Z)(n,e);var t=(0,Ve.Z)(n);function n(){var e;return(0,ze.Z)(this,n),(e=t.call(this)).message="GitHub Auth Error",e}return n}((0,dg.Z)(Error)),gg=function(e){(0,He.Z)(n,e);var t=(0,Ve.Z)(n);function n(){var e;return(0,ze.Z)(this,n),(e=t.call(this)).message="GitHub Repo Already Exists",Error.captureStackTrace&&Error.captureStackTrace((0,hm.Z)(e),n),e.name="GitHubRepoAlreadyExistsError",e}return n}((0,dg.Z)(Error));function Zg(e,t){return yg.apply(this,arguments)}function yg(){return(yg=(0,de.Z)((function(e,t){var n,r,i,o,l;return(0,fe.__generator)(this,(function(c){switch(c.label){case 0:return n=(0,a.Z)((0,pg.JE)(t),2),r=n[0],i=n[1],o={cache:"no-store"},e&&(o.headers={Authorization:"Bearer ".concat(e)}),[4,hg()("".concat(vg,"/repos/").concat(r,"/").concat(i),o)];case 1:return[4,xg(c.sent())];case 2:return l=c.sent(),[2,(0,R.Z)({},l)]}}))}))).apply(this,arguments)}function bg(e){return wg.apply(this,arguments)}function wg(){return(wg=(0,de.Z)((function(e){var t,n,r,i,o;return(0,fe.__generator)(this,(function(a){switch(a.label){case 0:if(t=e.token,n=e.owner,r=e.ownerType,i=e.repoData,!t)throw new Error("Unable to create repository");return"User"!==r?[3,2]:[4,hg()("".concat(vg,"/user/repos"),{method:"POST",headers:{Authorization:"Bearer ".concat(t)},body:JSON.stringify(i)})];case 1:return o=a.sent(),[3,4];case 2:return[4,hg()("".concat(vg,"/orgs/").concat(n,"/repos"),{method:"POST",headers:{Authorization:"Bearer ".concat(t),Accept:"application/vnd.github.nebula-preview+json"},body:JSON.stringify(i)})];case 3:o=a.sent(),a.label=4;case 4:return[2,xg(o)]}}))}))).apply(this,arguments)}function xg(e){return Cg.apply(this,arguments)}function Cg(){return(Cg=(0,de.Z)((function(e){var t,n,r;return(0,fe.__generator)(this,(function(i){switch(i.label){case 0:return e.ok?[2,e.json()]:[4,e.json()];case 1:switch(t=i.sent(),n=new Error("Bad GitHub Response"),e.status){case 401:case 404:n=new mg;break;case 422:(null===t||void 0===t||null===(r=t.errors)||void 0===r?void 0:r.length)>0&&t.errors[0].message.startsWith("name already exists")&&(n=new gg)}throw n}}))}))).apply(this,arguments)}var kg=new(function(){function e(){(0,ze.Z)(this,e),this.map=new WeakMap}return(0,sn.Z)(e,[{key:"getHandle",value:function(e){if(!e||"object"!==typeof e&&"function"!==typeof e)throw new Error("Only objects");var t={type:"handle",identity:e.constructor?Object.prototype.toString.call(e.constructor):Object.prototype.toString.call(e)};return this.map.set(t,e),t}},{key:"get",value:function(e){return this.map.get(e)}},{key:"safeGet",value:function(e){if(!e)throw new Error("Expected object handle to be truthy");var t=this.map.get(e);if(!t)throw new Error("Expected object handle to return object");return t}}]),e}()),Sg=n(50751);function Eg(){return Tg.apply(this,arguments)}function Tg(){return(Tg=(0,de.Z)((function(){var e;return(0,fe.__generator)(this,(function(t){switch(t.label){case 0:if(!Zi.l)throw new Error("Expected apollo");return[4,Zi.l.query({query:og})];case 1:if(!(null===(e=t.sent().data)||void 0===e?void 0:e.currentUser))throw new Error("Expected current user");return[2,e.currentUser]}}))}))).apply(this,arguments)}function Rg(e){var t=e.cmd,n=e.args,r=void 0===n?[]:n,i=e.wid,o=e.pud,a=t.format,l=t.parse;return function(){var e=(0,de.Z)((function(e,n){var c,s,u,d,f,h;return(0,fe.__generator)(this,(function(p){if(c=lg(n(),i,o),s=c.gitState,u=c.execer,d=c.isExecInProgress,f=c.execQueue,!u)throw new Error("Expected execer to be registered");if(!d){if(e({type:"SEND_GIT_EXEC_COMMAND",wid:i,pud:o}),!(h=kg.get(u)))throw new Error("Expected exec handle to contain exec service");h.request({args:a.apply(void 0,[s].concat((0,I.Z)(r)))})}return 0===f.length||d?[2,new Promise((function(n,a){e({type:"QUEUE_GIT_EXEC",cmd:t,args:r,parser:void 0!==l?l:function(e){return e},callback:n,wid:i,pud:o})}))]:[2]}))}));return function(t,n){return e.apply(this,arguments)}}()}function _g(e){var t=e.history,n=void 0!==t&&t,r=e.write,i=void 0!==r&&r,o=e.persist,a=void 0!==o&&o,l=e.persistMirror,c=void 0!==l&&l,s=e.prefer,u=void 0===s?null:s,d=e.wid,f=e.pud;return function(){var e=(0,de.Z)((function(e,t){var r,o,l,s,h,p,v,m,g,Z,y,b,w,x,C;function k(t,n){return e(Rg({cmd:t,wid:d,pud:f,args:n}))}return(0,fe.__generator)(this,(function(S){switch(S.label){case 0:return[4,k(sg.bb)];case 1:return S.sent(),r=lg(t(),d,f),o=r.gitState,l=o.isInitialized,s=o.remote,l?[4,k(sg.GE)]:[2];case 2:return S.sent(),[4,k(sg.LO)];case 3:return S.sent(),i&&s?null!==u?[3,5]:[4,k(sg.kT)]:[3,16];case 4:S.sent(),S.label=5;case 5:return lg(t(),d,f).gitState.hasConflictsWithFetchedRemote||null!==u?"remote"!==u?[3,8]:[4,k(sg.cF)]:[3,12];case 6:return S.sent(),[4,k(sg.VF)];case 7:return S.sent(),[3,11];case 8:return"repl"!==u?[3,11]:[4,k(sg.Ud)];case 9:return S.sent(),[4,k(sg.VF)];case 10:return S.sent(),[3,11];case 11:return[3,15];case 12:return[4,k(sg.jW)];case 13:return S.sent(),[4,k(sg.VF)];case 14:S.sent(),S.label=15;case 15:return[3,18];case 16:return n&&s?[4,k(sg.jW)]:[3,18];case 17:S.sent(),S.label=18;case 18:return i||n||a?(h=t().services,p=h.fs,v=h.container,e({type:"SET_GIT_LOADING_STATE",wid:d,isLoading:!0}),[4,p.persist()]):[3,24];case 19:return S.sent().success?[3,21]:[4,p.persist()];case 20:S.sent(),S.label=21;case 21:return c?[4,(0,Sg.r)(v)]:[3,23];case 22:S.sent(),S.label=23;case 23:e({type:"SET_GIT_LOADING_STATE",wid:d,isLoading:!1}),S.label=24;case 24:return m=lg(t(),d,f),g=m.gitState,Z=g.remote,y=!1,Z&&(b=new Promise((function(e){setTimeout((function(){y=!0,e()}),3e4)})),w=function(){var e=(0,de.Z)((function(e){var n,r;return(0,fe.__generator)(this,(function(i){switch(i.label){case 0:return n=e.deepen,y?[2,Promise.reject()]:[4,k(sg.he,[n])];case 1:return i.sent(),[4,k(sg.cM)];case 2:return i.sent(),[4,k(sg.zq)];case 3:return i.sent(),r=lg(t(),d,f),r.gitState.hasMergeBaseWithFetchedRemote?[3,5]:[4,w({deepen:!0})];case 4:i.sent(),i.label=5;case 5:return[2]}}))}));return function(t){return e.apply(this,arguments)}}(),Promise.race([w({deepen:!1}),b]).then((function(){var n=lg(t(),d,f).gitState,r=n.hasMergeBaseWithFetchedRemote,i=n.badState,o=n.remote;r||e({type:"UPDATE_GIT_STATE",updates:{badState:i===ug.$U.None&&o?ug.$U.NoMergeBase:i},wid:d,pud:f})}))),k(sg.Pz),k(sg.cM),[4,k(sg.i7)];case 25:return S.sent(),[4,k(sg.Hl)];case 26:return S.sent(),x=lg(t(),d,f),C=x.gitState.branch,k(sg.k6,[C]),[2]}}))}));return function(t,n){return e.apply(this,arguments)}}()}function Ig(e){var t=e.wid,n=e.pud,r=e.remote;return function(){var e=(0,de.Z)((function(e,i){var o,a,l,c,s,u,d,f,h;function p(r,i){return e(Rg({cmd:r,args:i,wid:t,pud:n}))}return(0,fe.__generator)(this,(function(v){switch(v.label){case 0:return[4,e({type:"START_GIT_CLONE",wid:t})];case 1:return v.sent(),o=!!r.match(/^https?:\/\/github\.com/i),a=!!r.match(/^https?:\/\/api\.glitch\.com/i),[4,Eg()];case 2:if(l=v.sent(),o)try{(null===(c=l.gitHubInfo)||void 0===c?void 0:c.accessToken)&&(f=l.gitHubInfo,e({type:"UPDATE_GIT_STATE",updates:{remoteToken:f.accessToken,gitHubName:null===(s=f.userInfo)||void 0===s?void 0:s.name,gitHubEmail:null===(u=f.userInfo)||void 0===u?void 0:u.email,gitHubAvatarUrl:null===(d=f.userInfo)||void 0===d?void 0:d.avatarUrl,installations:f.installations},wid:t,pud:n}))}catch(m){}return[4,p(sg.D6,[l])];case 3:return v.sent(),[4,p(sg.M7,[r])];case 4:return v.sent(),[4,p(sg.LO)];case 5:return v.sent(),[4,e({type:"START_CLONE_PROGRESS",wid:t,pud:n})];case 6:return v.sent(),[4,p(a?sg.TE:sg.he)];case 7:return v.sent(),[4,p(sg.Di)];case 8:return v.sent(),[4,p(sg.xY)];case 9:return v.sent(),[4,e({type:"END_CLONE_PROGRESS",wid:t,pud:n})];case 10:return v.sent(),a?[3,12]:[4,e(_g({wid:t,pud:n,history:!0}))];case 11:return v.sent(),[3,15];case 12:return[4,p(sg.i7)];case 13:return v.sent(),[4,new Promise((function(e){return setTimeout(e,1e3)}))];case 14:v.sent(),v.label=15;case 15:return h=function(){var r=lg(i(),t,n),o=r.execQueue,a=r.isExecInProgress;0!==o.length||a?setTimeout(h,1e3):e({type:"END_GIT_CLONE",wid:t})},h(),[2]}}))}));return function(t,n){return e.apply(this,arguments)}}()}function Gg(e,t){return function(){var n=(0,de.Z)((function(n){var r;function i(r,i){return n(Rg({cmd:r,args:i,wid:e,pud:t}))}return(0,fe.__generator)(this,(function(o){switch(o.label){case 0:return[4,Eg()];case 1:return r=o.sent(),[4,i(sg.Hl)];case 2:return o.sent(),[4,i(sg.th,["Initial commit",r])];case 3:return o.sent(),[4,n(_g({wid:e,pud:t,write:!0}))];case 4:return o.sent(),[2]}}))}));return function(e){return n.apply(this,arguments)}}()}function Dg(e,t){return function(){var n=(0,de.Z)((function(n){var r;function i(r,i){return n(Rg({cmd:r,args:i,wid:e,pud:t}))}return(0,fe.__generator)(this,(function(o){switch(o.label){case 0:return[4,Eg()];case 1:return r=o.sent(),[4,i(sg.GE)];case 2:return o.sent(),[4,i(sg.th,["Initial commit",r,!0])];case 3:return o.sent(),[4,i(sg.Hl)];case 4:return o.sent(),[4,n(_g({wid:e,pud:t,write:!0}))];case 5:return o.sent(),[2]}}))}));return function(e){return n.apply(this,arguments)}}()}function Pg(e){var t=e.wid,n=e.pud;return function(){var e=(0,de.Z)((function(e,r){var i,o,a,l,c,s,u,d,f;return(0,fe.__generator)(this,(function(h){switch(h.label){case 0:return[4,e(Rg({cmd:sg.LO,wid:t,pud:n}))];case 1:if(h.sent(),i=lg(r(),t,n),o=i.gitState,a=o.remote,l=o.remoteToken,c=!1,!a||!l)return[3,6];h.label=2;case 2:return h.trys.push([2,5,,6]),[4,Zg(l,a)];case 3:return s=h.sent(),u=s.permissions,d=s.id,f=s.owner,c=u&&u.push,[4,e({type:"UPDATE_GIT_STATE",pud:n,wid:t,updates:{repoId:d,ownerId:f.id}})];case 4:return h.sent(),[3,6];case 5:return h.sent(),[3,6];case 6:return e({type:"GIT_REMOTE_CHECKED",wid:t,canPush:c,remote:a}),[2]}}))}));return function(t,n){return e.apply(this,arguments)}}()}var Bg=n(15114),Ug=n(89702),Ag=n(76554);function Ng(e,t,n){switch(n.type){case"WORKSPACE_MOUNTED":return function(){var n=(0,de.Z)((function(n,r){var i;function o(e){return a.apply(this,arguments)}function a(){return a=(0,de.Z)((function(o){var a,l,c,s;return(0,fe.__generator)(this,(function(u){switch(u.label){case 0:return o!==Ag.em.CONNECTED?[2]:(a=lg(r(),e,t),l=a.gitState,(c=(0,Bg.Z)({container:i})).onOutput((function(n){lg(r(),e,t).shouldDisplayCloneLogs})),c.onStateChanged((function(i){var o=i.state,a=i.outputBuffer,l=lg(r(),e,t).execQueue;o===Ug.api.State.Stopped&&0!==l.length&&n({type:"EXIT_GIT_EXEC_COMMAND",output:a,wid:e})})),n({type:"REGISTER_EXECER_SERVICE_HANDLE",execer:kg.getHandle(c),wid:e,pud:t}),l.remoteToken?[3,2]:[4,n(Pg({wid:e,pud:t}))]);case 1:u.sent(),u.label=2;case 2:return(s=l.remote)?[4,n(Rg({cmd:sg.bb,wid:e,pud:t}))]:[2];case 3:return u.sent(),lg(r(),e,t).gitState.isInitialized||((0,Ue.j)(Ue.U3.VERSION_CONTROL_FEATURE_USED,{action:"cloned"}),n(Ig({remote:s,wid:e,pud:t}))),[2]}}))})),a.apply(this,arguments)}return(0,fe.__generator)(this,(function(e){return(i=r().services.container).getConnectionState()===Ag.em.CONNECTED?o(Ag.em.CONNECTED):i.onConnectionStateChanged(o),[2]}))}));return function(e,t){return n.apply(this,arguments)}}();case"FILE_CLEAN":return function(n,r){var i=lg(r(),e,t),o=i.gitState,a=i.hasOpened;o.isInitialized&&a&&n(Rg({cmd:sg.i7,wid:e,pud:t}))};case"EXIT_GIT_EXEC_COMMAND":return function(){var r=(0,de.Z)((function(r,i){var o,a,l,c,s,u;return(0,fe.__generator)(this,(function(d){switch(d.label){case 0:return o=lg(i(),e,t),a=o.execQueue[0],l=kg.safeGet(a.parser),c=kg.safeGet(a.callback),[4,r({type:"DEQUEUE_GIT_EXEC",wid:e,pud:t})];case 1:return d.sent(),[4,r({type:"UPDATE_GIT_STATE",updates:(0,R.Z)({},l(o.gitState,n.output)),wid:e,pud:t})];case 2:return d.sent(),c(),(s=lg(i(),e,t)).execQueue.length>0&&(u=s.execQueue[0],r(Rg({cmd:u.cmd,args:u.args,wid:e,pud:t}))),[2]}}))}));return function(e,t){return r.apply(this,arguments)}}();case"START_GIT_CLONE":return function(){var t=(0,de.Z)((function(t){return(0,fe.__generator)(this,(function(n){return t({type:"LOCK_WORKSPACE",showSpinner:!0,reason:"Cloning",wid:e}),[2]}))}));return function(e){return t.apply(this,arguments)}}();case"END_GIT_CLONE":return function(){var n=(0,de.Z)((function(n){return(0,fe.__generator)(this,(function(r){switch(r.label){case 0:return n({type:"UNLOCK_WORKSPACE",wid:e}),[4,n(Pg({wid:e,pud:t}))];case 1:return r.sent(),[2]}}))}));return function(e){return n.apply(this,arguments)}}();case"GITHUB_REPOSITORY_CREATED":case"CHECK_GIT_REMOTE":return function(){var n=(0,de.Z)((function(n){return(0,fe.__generator)(this,(function(r){switch(r.label){case 0:return[4,n(Pg({wid:e,pud:t}))];case 1:return r.sent(),[2]}}))}));return function(e){return n.apply(this,arguments)}}();default:return null}}var Lg,Xg=function(e,t){switch(t.type){case"@@INIT":return{gitState:{isInitialized:!1,hasConflictsWithFetchedRemote:!1,hasMergeBaseWithFetchedRemote:!0,authError:ug.l4.NONE,badState:ug.$U.None,remote:t.initialState.gitRemoteUrl||"",repoId:null,branch:"",defaultBranch:"main",branches:[],installations:[],changedFiles:[],commits:[],commitsAhead:null,commitsBehind:null,remoteToken:null,gitHubName:null,ownerId:null,gitHubAvatarUrl:null,gitHubEmail:null},hasOpened:!1,isSidebarVisible:!1,isCloneInProgress:!1,shouldDisplayCloneLogs:!1,isExecInProgress:!1,isLoading:!0,execQueue:[],execer:null};case"REGISTER_EXECER_SERVICE_HANDLE":return(0,_.Z)((0,R.Z)({},e),{execer:t.execer});case"SEND_GIT_EXEC_COMMAND":return(0,_.Z)((0,R.Z)({},e),{isExecInProgress:!0,isLoading:!0});case"EXIT_GIT_EXEC_COMMAND":return(0,_.Z)((0,R.Z)({},e),{isExecInProgress:!1});case"QUEUE_GIT_EXEC":var n=kg.getHandle(t.parser),r=kg.getHandle(t.callback);return(0,_.Z)((0,R.Z)({},e),{execQueue:e.execQueue.concat({cmd:t.cmd,args:t.args,parser:n,callback:r})});case"DEQUEUE_GIT_EXEC":return(0,_.Z)((0,R.Z)({},e),{execQueue:e.execQueue.slice(1)});case"START_GIT_CLONE":return(0,_.Z)((0,R.Z)({},e),{isCloneInProgress:!0});case"START_CLONE_PROGRESS":return(0,_.Z)((0,R.Z)({},e),{shouldDisplayCloneLogs:!0});case"END_CLONE_PROGRESS":return(0,_.Z)((0,R.Z)({},e),{shouldDisplayCloneLogs:!1});case"END_GIT_CLONE":return(0,_.Z)((0,R.Z)({},e),{isCloneInProgress:!1});case"SET_GIT_LOADING_STATE":return(0,_.Z)((0,R.Z)({},e),{isLoading:t.isLoading});case"UPDATE_GIT_STATE":return(0,_.Z)((0,R.Z)({},e),{gitState:(0,R.Z)({},e.gitState,t.updates),isLoading:(t.updates.badState!==ug.$U.None||t.updates.authError!==ug.l4.NONE)&&(e.execQueue.length>0||e.isCloneInProgress)});case"SET_GIT_SIDEBAR_VISIBILITY":return(0,_.Z)((0,R.Z)({},e),{isSidebarVisible:t.isSidebarVisible,hasOpened:!0});default:return e}},Mg=n(27834),Og=n(28927),Wg=function(e,t){var n=(0,pg.mJ)(t),r="";switch(e){case ug.l4.PUSH:r="push to ".concat(n);break;case ug.l4.FETCH:r="fetch from ".concat(n);break;case ug.l4.CLONE:r="clone from ".concat(n);break;case ug.l4.GITHUB_CREATE:case ug.l4.GITHUB_GET_INFO:default:r="create new repositories"}return"Please grant Replit permission to access GitHub on your behalf. As well, confirm that "+(e===ug.l4.FETCH?"".concat(n," exists and you have permission to fetch from it."):"you have permission to ".concat(r,"."))},Fg=function(e){var t=e.repoId,n=e.ownerId,r=e.wid,o=e.pud,c=e.authError,s=e.onAuth,u=(0,pm.I0)(),d=(0,pm.v9)((function(e){return lg(e,r,o)})).gitState,f="Connect to GitHub";d.remote&&(f="Unable to connect to this repository");var h=(0,Mg.v)({suggestedRepoId:t,ownerId:n,onAuth:(0,de.Z)((function(){return(0,fe.__generator)(this,(function(e){return m(!1),s(),u({type:"UPDATE_GIT_STATE",updates:{authError:ug.l4.NONE,badState:ug.$U.None},wid:r,pud:o}),[2]}))}))}),p=(0,a.Z)(l.useState(!0),2),v=p[0],m=p[1];return(0,i.tZ)(Z.u_,{onRequestClose:function(){m(!1),c!==ug.l4.FETCH?u({type:"UPDATE_GIT_STATE",updates:{authError:ug.l4.NONE},wid:r,pud:o}):u({type:"UPDATE_GIT_STATE",updates:{badState:ug.$U.AuthFetchError},wid:r,pud:o})},isOpen:v,children:(0,i.BX)(Z.G7,{css:[Z.l0.colWithGap(24)],children:[(0,i.tZ)(Z.h4,{level:1,variant:"headerDefault",children:f}),(0,i.BX)(Z.G7,{css:[Z.l0.colWithGap(8)],children:[(0,i.tZ)(Z.xv,{multiline:!0,children:Wg(c,d.remote)}),(0,i.BX)(Z.xv,{multiline:!0,children:["See"," ",(0,i.tZ)("a",{href:"https://docs.replit.com/programming-ide/using-git-on-replit/github-auth-errors",target:"_blank",rel:"noreferrer",children:"our docs"})," ","for more help with GitHub authentication errors."]})]}),(0,i.tZ)(Z.G7,{css:[Z.l0.rowWithGap(12),Z.l0.justify.end],children:(0,i.tZ)(Z.zx,{colorway:"primary",onClick:h,text:"Connect Replit to your GitHub Account",iconLeft:(0,i.tZ)(Og.Z,{})})})]})})},jg=n(3655),zg=n(88641),Hg=function(e){return e.trim().split(" ").join("-")},Vg=function(e){var t=e.isOpen,n=e.isCreatingBranch,r=e.onClose,o=e.currentBranch,a=e.branches,l=e.successHandler;if(!t)return null;var c=(0,yr.Y)("",(function(e){return e?a.includes(Hg(e))?{message:"* this branch name already exists"}:void 0:{message:"* branch names cannot be blank"}})),s=function(){var e=(0,de.Z)((function(e){return(0,fe.__generator)(this,(function(t){return e.preventDefault(),c.validate()||l(Hg(c.value)),[2]}))}));return function(t){return e.apply(this,arguments)}}();return(0,i.tZ)(zg.Z,{onRequestClose:r,isOpen:!0,children:(0,i.BX)("div",{className:"jsx-4a406bdd6aef82a6 container",children:[(0,i.BX)("form",{onSubmit:s,autoComplete:"off",className:"jsx-4a406bdd6aef82a6",children:[(0,i.tZ)("h1",{className:"jsx-4a406bdd6aef82a6",children:"Create a new branch"}),(0,i.tZ)("h2",{className:"jsx-4a406bdd6aef82a6",children:n?"Creating your new branch":"This branch will be created from ".concat(o)}),(0,i.tZ)("div",{className:"jsx-4a406bdd6aef82a6 creation-error",children:c.error?c.error.message:null}),(0,i.tZ)("div",{className:"jsx-4a406bdd6aef82a6 section",children:(0,i.tZ)(Zr.ZP,{value:c.value,type:"text",autoFocus:!0,name:"branch-name",autoComplete:"off",onChange:function(e){c.setValue(e.currentTarget.value)},placeholder:"name your branch (required)",onFocus:function(e){return e.target.select()}})}),(0,i.tZ)(sr.Z,{type:"submit","data-testid":"git-confirm-github-repo",color:"primary",filled:!0,children:n?(0,i.BX)("span",{className:"jsx-4a406bdd6aef82a6",children:["creating",(0,i.tZ)(jg.Z,{style:{fontSize:"20px",padding:"1px"}})]}):"create"})]}),(0,i.tZ)(L(),{id:"4a406bdd6aef82a6",children:".container.jsx-4a406bdd6aef82a6{font-size:1rem;width:510px;padding:60px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:start;-webkit-align-items:flex-start;-moz-box-align:start;-ms-flex-align:start;align-items:flex-start;height:100%;color:var(--foreground-default)}.container.jsx-4a406bdd6aef82a6 form.jsx-4a406bdd6aef82a6{width:90%}.container.jsx-4a406bdd6aef82a6 h1.jsx-4a406bdd6aef82a6{font-size:23px;margin-bottom:10px;font-weight:normal}.container.jsx-4a406bdd6aef82a6 h2.jsx-4a406bdd6aef82a6{color:var(--foreground-dimmer);font-size:16px;margin-bottom:15px;font-weight:normal}.creation-error.jsx-4a406bdd6aef82a6{min-height:16px;margin:10px;color:var(--accent-negative-default)}.section.jsx-4a406bdd6aef82a6{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;padding-bottom:25px;width:100%}"})]})})},qg=function(e){var t=e.checkoutBranch,n=e.gitState,r=e.isLoading,o=(0,l.useState)(!1),a=o[0],c=o[1];(0,l.useEffect)((function(){!r&&a&&c(!1)}),[r,c]);var s,u,d=(s=n.branches,u=n.defaultBranch,0===s.length?[]:s.sort((function(e){return e===u?-1:0})).map((function(e){return{title:e}})));return(0,i.BX)(Z.G7,{css:[Z.l0.rowWithGap(8),Z.l0.align.center],children:[(0,i.tZ)(Z.G7,{css:[Z.l0.flex.growAndShrink(1)],children:(0,i.tZ)(Z.Ph,{items:d,selectedItem:d.find((function(e){return e.title===n.branch})),onChange:function(e){e.title!==n.branch&&t(e.title)}})}),(0,i.tZ)(Z.hU,{onClick:function(){c(!0)},alt:"Create new branch",css:[Z.l0.width(32),Z.l0.height(32),Z.gU.filled],children:(0,i.tZ)(gv.Z,{})}),(0,i.tZ)(Vg,{branches:n.branches,currentBranch:n.branch,isCreatingBranch:a&&r,isOpen:a,onClose:function(){return c(!1)},successHandler:function(e){t(e)}})]})},$g=n(22708),Yg=n(99209),Kg=n(88012),Qg=function(e){var t=(0,f.Z)().container,n=(0,Kg.J)(e.remote),r=n?"".concat(n.username,"/").concat(n.repository):e.remote,o=(0,ag.I)();return(0,i.BX)(O.G,{css:[W.l0.colWithGap(16)],children:[(0,i.BX)(Ye.h4,{variant:"headerDefault",level:2,children:["Remove ",r," as a remote?"]}),(0,i.BX)(Ye.xv,{multiline:!0,children:["Are you sure you want to remove ",r,"?"]}),(0,i.BX)(Ye.xv,{multiline:!0,children:["This can be undone by re-connecting to the repository in the Git sidebar or running ",(0,i.BX)(Yg.Z,{children:["git remote add origin ",e.remote]})," ","in the Shell."]}),(0,i.BX)(O.G,{css:[W.l0.rowWithGap(12),W.l0.justify.end],children:[(0,i.tZ)(Z.zx,{text:"Cancel",onClick:e.hideModal}),(0,i.tZ)(Z.zx,{iconLeft:(0,i.tZ)(pf.Z,{}),onClick:function(){var n;(n=t).exec.apply(n,(0,I.Z)(sg.rO.format(ug.Xe))),o(_g({wid:e.wid,pud:e.pud})),e.hideModal()},text:"Yes, remove ".concat(r),colorway:"negative"})]})]})},Jg=n(67702);function eZ(e){var t=e.count,n=e.message;return(0,i.BX)(Ye.xv,{children:[(0,i.tZ)(Ye.xv,{css:W.l0.fontWeight.bold,children:t})," ",(0,i.tZ)(Ye.xv,{color:"dimmer",children:n})]})}!function(e){e.RemoveRemote="RemoveRemote",e.ConnectExistingRemote="ConnectExistingRemote"}(Lg||(Lg={}));var tZ=function(e){var t=e.branch,n=e.commitsBehind;return e.isLoading?(0,i.tZ)(Ye.xv,{children:" checking latest changes... "}):t?null===n?null:n&&1===n?(0,i.tZ)(eZ,{count:1,message:"commit behind ".concat(t)}):n&&n>1?(0,i.tZ)(eZ,{count:n,message:"commits behind ".concat(t)}):(0,i.BX)(Ye.xv,{children:["up to date with ",t]}):(0,i.tZ)(Ye.xv,{children:"could not find a default branch - try adding some commits!"})},nZ=function(e){var t=e.gitState,n=e.isLoading,r=e.pull,o=e.setExistingRepoConnectionIsOpen,c=e.setGitHubCreationModalOpen,s=e.wid,u=e.pud,d=""!==t.remote,f=(0,a.Z)(l.useState(null),2),h=f[0],p=f[1];return(0,i.BX)(O.G,{css:[W.l0.colWithGap(16)],children:[d?(0,i.BX)(O.G,{css:[W.l0.rowWithGap(8),W.l0.justify.spaceBetween,W.l0.align.center,W.l0.width("100%")],children:[(0,i.BX)(O.G,{css:[W.l0.rowWithGap(8),W.l0.align.center,W.l0.flex.growAndShrink(1)],title:"Repository origin: ".concat(t.remote),children:[(0,i.tZ)(Og.Z,{size:16}),(0,i.tZ)(O.G,{tag:"a",css:[W.l0.truncate,W.l0.flex.growAndShrink(1)],href:t.remote,target:"_blank",rel:"noreferrer noopener",children:(0,pg.mJ)(t.remote)})]}),(0,i.tZ)(Ze.h,{alt:"Remove remote",colorway:"negative",onClick:function(){return p(Lg.RemoveRemote)},children:(0,i.tZ)(pf.Z,{})})]}):(0,i.BX)(O.G,{css:[W.l0.rowWithGap(8),W.l0.align.center,W.l0.maxWidth("100%"),W.l0.width("100%")],children:[(0,i.tZ)(br.zx,{stretch:!0,onClick:function(){c(!0)},iconLeft:(0,i.tZ)(Og.Z,{}),text:t.remoteToken?"New repo":"Connect to GitHub",css:[W.l0.flex.grow(1)]}),t.remoteToken?(0,i.tZ)(br.zx,{stretch:!0,text:"Existing repo",onClick:function(){return o(!0)},iconLeft:(0,i.tZ)(Jg.Z,{}),css:[W.l0.flex.grow(1)]}):null]}),d?(0,i.BX)(O.G,{css:[W.l0.flex.row,W.l0.flex.wrap,W.l0.justify.spaceBetween],children:[(0,i.tZ)(tZ,{branch:t.branch,commitsBehind:t.commitsBehind,isLoading:n}),t.commitsBehind&&t.commitsBehind>0?(0,i.tZ)(br.zx,{colorway:"warning",onClick:r,text:"Pull",iconRight:(0,i.tZ)(up.Z,{})}):null]}):null,(0,i.tZ)($g.u,{isOpen:h===Lg.RemoveRemote,onRequestClose:function(){return p(null)},maxWidth:512,children:(0,i.tZ)(Qg,{remote:t.remote,hideModal:function(){return p(null)},wid:s,pud:u})})]})},rZ=n(5255),iZ=n(68571),oZ=n(10105),aZ=n(94717);function lZ(e){var t=e.gitCommit,n=e.gitPush,r=e.gitAddAll,o=e.hasRemote,a=e.hasChangedFiles,l=e.hasStagedFiles,c=e.commitDisabled,s=[];return l||s.push("commit"),o||s.push("push"),(0,i.BX)(O.G,{css:[W.l0.rowWithGap(4),W.l0.position.relative],children:[(0,i.tZ)("div",{css:[W.l0.flex.growAndShrink(1)],children:(0,i.tZ)(aZ.u,{tooltip:"A commit summary is required to make a commit",placement:"right",isDisabled:!c,css:[W.l0.flex.growAndShrink(1)],children:(0,i.tZ)(br.zx,{colorway:"primary",css:[W.l0.flex.growAndShrink(1),{":disabled":{cursor:"not-allowed"}}],disabled:!a||c,iconRight:(0,i.tZ)(Hf.Z,{}),onClick:function(){c||(r(),t(),n())},text:"Commit All"+(o?" & Push":"")})})}),(0,i.BX)(oZ.ZE,{onAction:function(e){switch(e){case"commit":t();break;case"push":n()}},disabledKeys:s,children:[(0,i.tZ)(oZ.ck,{children:(0,i.BX)(aZ.u,{tooltip:"You must stage some files using the plus icon beside a file before you can commit",placement:"right",isDisabled:l,children:[(0,i.tZ)(Ye.xv,{variant:"subheadDefault",css:l?[]:[W.l0.color.foregroundDimmest],children:"Commit"}),(0,i.tZ)(Ye.xv,{variant:"text",css:l?[]:[W.l0.color.foregroundDimmest],children:"Locally save your staged changes"})]})},"commit"),(0,i.tZ)(oZ.ck,{children:(0,i.BX)(aZ.u,{tooltip:"Push is only available if you have a GitHub repository connected",placement:"right",isDisabled:o,children:[(0,i.tZ)(Ye.xv,{variant:"subheadDefault",css:o?[]:[W.l0.color.foregroundDimmest],children:"Push"}),(0,i.tZ)(Ye.xv,{variant:"text",css:o?[]:[W.l0.color.foregroundDimmest],children:"Update remote repo with newest commits"})]})},"push")]})]})}var cZ=function(e){switch(e.change){case ug.pD.UNTRACKED:return"new";case ug.pD.MODIFIED:return"modified";case ug.pD.MOVED:return"renamed";case ug.pD.DELETED:return"deleted";default:return""}},sZ=function(e){switch(e){case ug.pD.UNTRACKED:return[Z.l0.backgroundColor.accentPositiveDimmest,Z.l0.border({color:Z.TV.accentPositiveDefault}),Z.l0.color.accentPositiveDefault];case ug.pD.MODIFIED:return[Z.l0.backgroundColor.orangeDimmest,Z.l0.border({color:Z.TV.orangeDefault}),Z.l0.color.orangeDefault];case ug.pD.MOVED:return[Z.l0.backgroundColor.accentPrimaryDimmest,Z.l0.border({color:Z.TV.accentPrimaryDefault}),Z.l0.color.accentPrimaryDefault];case ug.pD.DELETED:return[Z.l0.backgroundColor.accentNegativeDimmest,Z.l0.border({color:Z.TV.accentNegativeStronger}),Z.l0.color.accentNegativeStronger]}return[]},uZ=function(e){var t,n,r=e.file,o=e.active,a=e.handleChangedFileClick,l=e.isStaged,c=e.gitRestore,s=e.gitAdd,u=!1;if(r.targetPath.endsWith("/")){u=!0;var d=r.targetPath.substr(0,r.targetPath.length-1).split("/");t=d[d.length-1]+"/",n=d.slice(0,d.length-1).join("/")}else{var f=r.targetPath.split("/");t=f[f.length-1],n=f.slice(0,f.length-1).join("/")}var h=cZ(r),p=h.charAt(0).toUpperCase(),v=r.change!==ug.pD.DELETED,m=(0,Ps.XI)({}),g=m.hoverProps,y=m.isHovered;return(0,i.BX)("div",(0,_.Z)((0,R.Z)({},g),{onClick:function(){!u&&v&&a(r.targetPath)},css:[Z.l0.p(4),Z.l0.height("100%"),Z.l0.width("100%"),Z.l0.flex.row,Z.l0.align.center,Z.l0.justify.spaceBetween,Z.l0.rowWithGap(4),Z.l0.borderRadius(8),Z.l0.noSelect,Z.l0.border({color:Z.TV.backgroundHighest}),{marginBottom:Z.TV.space4,cursor:v?"pointer":"not-allowed"},o?[Z.l0.backgroundColor.accentPrimaryDefault,Z.l0.border({color:"transparent"}),Z.l0.color.white]:[Z.l0.border({color:Z.TV.backgroundHighest}),{"&:hover":{backgroundColor:Z.TV.accentPrimaryDimmer}}]],children:[(0,i.BX)("div",{css:[Z.l0.flex.row,Z.l0.align.center,Z.l0.rowWithGap(4),Z.l0.overflow("hidden")],children:[(0,i.tZ)(Z.hU,{css:[{"&:hover":[Z.l0.color.black]}],alt:l?"Unstage":"Stage",onClick:(0,de.Z)((function(){return(0,fe.__generator)(this,(function(e){return l?c(r.targetPath,!0):s(r.targetPath),[2]}))})),children:l?(0,i.tZ)(rZ.Z,{}):(0,i.tZ)(gv.Z,{})}),l?null:(0,i.tZ)(Z.hU,{css:[{"&:hover":[Z.l0.color.black]}],alt:"Restore",onClick:(0,de.Z)((function(){return(0,fe.__generator)(this,(function(e){return c(r.targetPath,!1),[2]}))})),children:(0,i.tZ)(iZ.Z,{})}),(0,i.tZ)("div",{title:t,css:[Z.l0.display.block,Z.l0.flex.shrink(0),Z.l0.maxWidth("60%"),Z.l0.truncate,v&&{"&:hover":{textDecoration:"underline"}}],children:t}),(0,i.tZ)("div",{title:n,css:[Z.l0.display.block,Z.l0.flex.shrink(0),Z.l0.maxWidth("60%"),Z.l0.truncate,{opacity:.7},v&&{"&:hover":{textDecoration:"underline"}}],children:n})]}),(0,i.tZ)("div",{css:[Z.l0.display.block,Z.l0.flex.shrink(0),Z.l0.ml(8),{whiteSpace:"nowrap"}],children:(0,i.tZ)("div",{css:[Z.l0.flex.row,Z.l0.align.center,Z.l0.justify.center,Z.l0.backgroundColor.backgroundHighest,Z.l0.borderRadius(8),Z.l0.color.black,Z.l0.minWidth("24px"),Z.l0.px(4),Z.l0.py(2),sZ(r.change)],children:(0,i.BX)("div",{children:[p,(0,i.tZ)("span",{css:[y?Z.l0.display.inlineBlock:Z.l0.display.none],children:h.substring(1)})]})})})]}))},dZ=function(e){var t=e.changedFiles,n="changed files or folders";if(1===t.length){var r=cZ(t[0])||"changed";n="".concat(r," file or folder")}return(0,i.tZ)(eZ,{count:t.length,message:n})},fZ=function(e){var t=e.stagedFiles,n="staged files or folders";return 1===t.length&&(n="staged file or folder"),(0,i.tZ)(eZ,{count:t.length,message:n})},hZ=function(e){var t=e.branch,n=e.commitsAhead,r="commit ahead of";return n&&n>1&&(r="commits ahead of"),(0,i.tZ)(eZ,{count:n,message:"".concat(r," ").concat(t)})},pZ=function(e){var t=e.disabled,n=e.onClick;return(0,i.tZ)(Z.zx,{colorway:"primary",disabled:t,onClick:n,text:"Push",iconRight:(0,i.tZ)(Hf.Z,{})})},vZ=function(e){var t=e.branch,n=e.changedFiles,r=e.commits,o=e.commitsAhead,a=e.commitsBehind,c=e.isLoading,s=e.remote,u=e.gitCommit,d=e.gitPush,h=e.gitAddAll,p=e.gitRestore,v=e.gitAdd,m=function(){var e=b.trim();""!==e&&(u(e),w(""))},g=function(e){S.openFile(e)},y=(0,l.useState)(""),b=y[0],w=y[1],x=(0,l.useState)(!1),C=x[0],k=x[1],S=(0,f.Z)().session,E=n.filter((function(e){return e.isStaged})),T=n.filter((function(e){return!e.isStaged})),R=E.slice(0,C?E.length:3),_=T.slice(0,C?T.length:Math.max(3-R.length,0)),I=(0,Il.Z)().ref,G=n.length>0,D=null!==o,P=null!==a,B=!!o&&o>0,U=!!a&&a>0;return c&&!G?(0,i.tZ)(Z.G7,{css:[Z.l0.center,Z.l0.p(16)],children:(0,i.tZ)(ur.Z,{})}):G||B||U||!D||!P?(0,i.BX)(Z.G7,{css:[Z.l0.colWithGap(16)],children:[B&&D?(0,i.tZ)(hZ,{branch:t,commitsAhead:o}):null,G||!B&&D?null:(0,i.tZ)(Z.G7,{css:[Z.l0.mb(16),Z.l0.position.relative],children:(0,i.tZ)(Z.u,{placement:"right",tooltip:"You do not have a remote repository to push to. Connect a remote github repository to push.",isDisabled:Boolean(s),children:(0,i.tZ)(pZ,{disabled:!s,onClick:d})})}),G?(0,i.BX)(Z.G7,{css:[Z.l0.colWithGap(8)],children:[(0,i.tZ)(Z.B,{css:{resize:"vertical"},ref:I,required:!0,name:"commitAuthorInput",disabled:0===n.length,placeholder:r.length>0?"What did you change?":"What did you add?",value:b,onChange:function(e){w(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&(e.metaKey||e.ctrlKey)&&m()}}),(0,i.tZ)(lZ,{gitAddAll:h,gitCommit:m,gitPush:d,hasRemote:Boolean(s),hasChangedFiles:n.length>0,hasStagedFiles:E.length>0,commitDisabled:0===b.trim().length})]}):null,E.length?(0,i.BX)(Z.G7,{css:Z.l0.colWithGap(8),children:[(0,i.tZ)(fZ,{stagedFiles:E}),(0,i.tZ)(Z.G7,{children:R.map((function(e){return(0,i.tZ)(uZ,{file:e,handleChangedFileClick:g,active:!1,isStaged:e.isStaged,gitRestore:p,gitAdd:v},e.targetPath)}))})]}):null,T.length?(0,i.BX)(Z.G7,{css:Z.l0.colWithGap(8),children:[(0,i.tZ)(dZ,{changedFiles:T}),(0,i.tZ)(Z.G7,{children:_.map((function(e){return(0,i.tZ)(uZ,{file:e,handleChangedFileClick:g,active:!1,isStaged:e.isStaged,gitRestore:p,gitAdd:v},e.targetPath)}))})]}):null,n.length>3&&(0,i.tZ)(Z.zx,{css:[Z.l0.backgroundColor.backgroundDefault,Z.l0.color.foregroundDefault,Z.l0.cursor.pointer,{textDecoration:"underline"},Z.l0.width("100%")],onClick:function(){return k((function(e){return!e}))},text:C?"show fewer":"show all"})]}):(0,i.tZ)(Z.xv,{color:"dimmer",children:"Your file changes will appear here."})},mZ=n(17202),gZ=n(44192),ZZ={root:(0,La.iv)([Z.l0.py(8),Z.l0.pl(24),Z.l0.position.relative]),line:(0,La.iv)([Z.l0.position.absolute,Z.l0.top(22),Z.l0.left(8),Z.l0.height("100%"),Z.l0.width(1),Z.l0.backgroundColor.outlineDimmest]),dot:(0,La.iv)([Z.l0.position.absolute,Z.l0.top(0),Z.l0.left(0),Z.l0.height(12),Z.l0.width(12),Z.l0.borderRadius("full"),{transform:"translateX(-50%)",border:"1px solid",borderColor:Z.TV.outlineDimmest}])},yZ=function(e){var t=e.children,n=e.renderDot,r=void 0===n||n;return(0,i.BX)(Z.G7,{tag:"li",css:ZZ.root,children:[(0,i.tZ)(Z.G7,{css:ZZ.line,children:r?(0,i.tZ)(Z.Tg,{css:ZZ.dot}):null}),(0,i.tZ)(Z.G7,{children:t})]})},bZ={root:(0,La.iv)([Z.l0.borderRadius(8),Z.l0.colWithGap(8),Z.l0.p(8),{border:"1px solid",borderColor:Z.TV.outlineDimmer}]),author:(0,La.iv)([Z.l0.colWithGap(4)]),commitHash:(0,La.iv)([Z.l0.rowWithGap(8),Z.l0.align.center,{"& a":Z.l0.color.foregroundDimmer,"& a:hover":Z.l0.color.foregroundDefault}])},wZ=function(e){var t=e.commit,n=e.handleRevertToCommit,r=e.displayTimeSinceUnix,o=e.gitHubLink;return(0,i.tZ)(yZ,{children:(0,i.BX)(Z.G7,{css:bZ.root,children:[(0,i.tZ)(xZ,{message:t.message}),(0,i.BX)(Z.G7,{css:bZ.author,children:[(0,i.BX)(Z.xv,{children:[t.authorName," \u2022"," ",(0,mZ.Z)(t.authorDate,r,{addSuffix:!0})]}),(0,i.tZ)(Z.xv,{variant:"small",color:"dimmer",title:t.authorEmail,children:t.authorEmail})]}),(0,i.BX)(Z.G7,{css:bZ.commitHash,title:t.hash,children:[(0,i.tZ)(Z.xv,{css:Z.l0.font.code,variant:"small",children:t.hash.substring(0,9)}),null!==o?(0,i.tZ)(Z.u,{tooltip:"See on GitHub",children:(0,i.tZ)(Z.G7,{tag:"a",href:o,target:"_blank",rel:"noopener noreferer",children:(0,i.tZ)(Og.Z,{})})}):null]}),(0,i.tZ)(Z.G7,{css:Z.l0.flex.row,children:(0,i.tZ)(br.zx,{outlined:!0,colorway:"warning",small:!0,onClick:function(){return n(t)},text:"Revert to here"})})]})})},xZ=function(e){var t=e.message,n=(0,zf.Z)(t.split("\n").filter((function(e){return Boolean(e.trim())})).map((function(e){return e.replace(/:[\w\-+]+:/g,(function(e){return gZ.$M[e.slice(1,-1)]||e}))}))),r=n[0],o=n.slice(1),a=o.length?o.join("\n"):null,c=(0,l.useState)(!1),s=c[0],u=c[1];return(0,i.BX)(Z.G7,{children:[(0,i.tZ)(Z.xv,{multiline:!0,children:r}),s?(0,i.tZ)(Z.xv,{color:"dimmer",multiline:!0,children:a}):null,s?(0,i.tZ)("a",{href:"#",className:"more-link",onClick:function(){return u(!1)},children:"see less"},"more"):null,!s&&a?(0,i.tZ)("a",{href:"#",className:"more-link",onClick:function(){return u(!0)},children:"see more"},"more"):null]})},CZ=function(e){var t=e.gitState,n=e.handleRevertToCommit,r=e.fetchMoreCommits,o=t.commits[t.commits.length-1],a=Boolean(o&&""!==o.parentHash),c=(0,l.useState)(Date.now()),s=c[0],u=c[1];(0,l.useEffect)((function(){u(Date.now())}),[t.commits]);var d=t.commitsAhead||0;return 0===t.commits.length?null:(0,i.BX)(Z.G7,{css:Z.l0.colWithGap(8),children:[(0,i.tZ)(Z.h4,{level:2,variant:"subheadDefault",children:"Previous Commits"}),(0,i.BX)(Z.G7,{children:[(0,i.tZ)(Z.G7,{tag:"ul",children:t.commits.map((function(e,r){return(0,i.tZ)(wZ,{handleRevertToCommit:n,commit:e,displayTimeSinceUnix:s,gitHubLink:""!==t.remote&&r>=d?(0,pg.cW)(t.remote,e.hash):null},e.hash)}))}),a?(0,i.tZ)(yZ,{renderDot:!1,children:(0,i.tZ)(br.zx,{onClick:r,text:"Load more commits"})}):null]})]})},kZ=n(16505);function SZ(e){var t=e.wid,n=e.pud,r=e.gitState,o=(0,ag.I)(),c=function(){o({type:"UPDATE_GIT_STATE",wid:t,pud:n,updates:{hasConflictsWithFetchedRemote:!1}})},s=(0,a.Z)(l.useState(null),2),u=s[0],d=s[1],f=(0,a.Z)(l.useState(!0),2),h=f[0],p=f[1],v="Confirm",m=["conflictChoices"];return"repl"===u?(m.push("chosen-repl"),v="Confirm keep Replit"):"remote"===u&&(m.push("chosen-remote"),v="Confirm overwrite from GitHub"),h||m.push("invalid"),(0,i.BX)(zg.Z,{isOpen:!0,onRequestClose:c,children:[(0,i.tZ)(L(),{id:"5da074ca0af64a21",children:".conflictChoices.jsx-5da074ca0af64a21{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.conflictPreference.jsx-5da074ca0af64a21{width:48%;border:1px solid var(--foreground-default);cursor:pointer;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;overflow:hidden;-webkit-transition:-webkit-transform.2s;-moz-transition:-moz-transform.2s;-o-transition:-o-transform.2s;transition:-webkit-transform.2s;transition:-moz-transform.2s;transition:-o-transform.2s;transition:transform.2s}.conflictPreference.jsx-5da074ca0af64a21:hover{-webkit-transform:translate(0,-3px);-moz-transform:translate(0,-3px);-ms-transform:translate(0,-3px);-o-transform:translate(0,-3px);transform:translate(0,-3px)}.conflictPreference.jsx-5da074ca0af64a21 .header.jsx-5da074ca0af64a21{padding:8px 12px;font-weight:bold;background:var(--background-root)}.conflictPreference.jsx-5da074ca0af64a21 .body.jsx-5da074ca0af64a21{padding:8px 12px;line-height:1.4em}.chosen-repl.jsx-5da074ca0af64a21 .replPreference.jsx-5da074ca0af64a21 .header.jsx-5da074ca0af64a21,.chosen-remote.jsx-5da074ca0af64a21 .remotePreference.jsx-5da074ca0af64a21 .header.jsx-5da074ca0af64a21{color:var(--background-default);background:var(--foreground-default)}.chosen-repl.jsx-5da074ca0af64a21 .remotePreference.jsx-5da074ca0af64a21,.chosen-remote.jsx-5da074ca0af64a21 .replPreference.jsx-5da074ca0af64a21{border-color:var(--foreground-dimmer)}"}),(0,i.BX)(O.G,{css:[W.l0.maxWidth(600),W.l0.px(16),W.l0.py(24),W.l0.color.foregroundDefault,W.l0.backgroundColor.backgroundDefault],children:[(0,i.tZ)(Ye.xv,{css:[W.l0.mb(16)],variant:"headerDefault",children:"Conflicting Changes"}),(0,i.BX)(Ye.xv,{css:[W.l0.mb(24)],multiline:!0,children:["There are changes from the remote (",(0,i.tZ)("a",{href:r.remote,target:"_blank",rel:"nofererer noopener",className:"jsx-5da074ca0af64a21",children:r.remote}),") that have been made since your changes on Replit that conflict with each other. Which version would you like to keep?"]}),(0,i.BX)("div",{className:"jsx-5da074ca0af64a21 "+(m.join(" ")||""),children:[(0,i.BX)("div",{onClick:function(){return d("remote")},className:"jsx-5da074ca0af64a21 remotePreference conflictPreference",children:[(0,i.tZ)("div",{className:"jsx-5da074ca0af64a21 header",children:"Keep version on GitHub"}),(0,i.tZ)("div",{className:"jsx-5da074ca0af64a21 body",children:"Permanently delete any changes in your Repl that are not on GitHub."})]}),(0,i.BX)("div",{onClick:function(){return d("repl")},className:"jsx-5da074ca0af64a21 replPreference conflictPreference",children:[(0,i.tZ)("div",{className:"jsx-5da074ca0af64a21 header",children:"Keep version on Replit"}),(0,i.tZ)("div",{className:"jsx-5da074ca0af64a21 body",children:"Permanently delete any changes in your GitHub repository that are not on Replit"})]})]}),(0,i.BX)(O.G,{css:[W.l0.mt(24),W.l0.flex.row,W.l0.justify.end],children:[(0,i.tZ)(sr.Z,{css:[W.l0.ml(8)],onClick:c,children:"Cancel"}),(0,i.tZ)(aZ.u,{tooltip:"You must choose a preference to continue",placement:"right",isDisabled:Boolean(u),children:(0,i.tZ)(sr.Z,{color:"negative",css:[W.l0.ml(8)],disabled:!u,onClick:function(){null!==u?(o(_g({write:!0,prefer:u,wid:t,pud:n})),c()):p(!1)},children:v})})]})]})]})}function EZ(e){var t=e.actionDescription,n=e.onConfirm,r=e.onCancel,o={marginLeft:8};return(0,i.BX)("div",{className:"jsx-a6b618bf6ea164ac gitRevertConfirmModal",children:[(0,i.tZ)(L(),{id:"a6b618bf6ea164ac",children:".gitRevertConfirmModal.jsx-a6b618bf6ea164ac{max-width:600px;padding:20px 24px;background:var(--background-default);color:var(--foreground-default)}h2.jsx-a6b618bf6ea164ac{margin-bottom:16px}p.jsx-a6b618bf6ea164ac{margin-bottom:24px;line-height:1.4em}.buttonGroup.jsx-a6b618bf6ea164ac{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:end;-webkit-justify-content:flex-end;-moz-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}"}),(0,i.tZ)("h2",{className:"jsx-a6b618bf6ea164ac",children:"Overwrite existing changes?"}),(0,i.BX)("p",{className:"jsx-a6b618bf6ea164ac",children:["You have some changes that are not committed yet. ",t," ","will overwrite any un-committed changes. Overwrite and continue?"]}),(0,i.BX)("div",{className:"jsx-a6b618bf6ea164ac buttonGroup",children:[(0,i.tZ)(sr.Z,{style:o,onClick:r,autoFocus:!0,children:"Cancel"}),(0,i.tZ)(sr.Z,{color:"negative",style:o,onClick:n,children:"Overwrite and continue"})]})]})}var TZ=function(e){var t=e.wid,n=e.pud,r=e.isLoading,o=e.currentUser,c=e.refetchUser,s=e.setGitHubCreationModalOpen,u=e.setExistingRepoConnectionModalOpen,d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.history,i=void 0!==r&&r,o=e.write,a=void 0!==o&&o,l=e.persist,c=void 0!==l&&l,s=e.persistMirror,u=void 0!==s&&s;h(_g({history:i,write:a,persist:c,persistMirror:u,wid:t,pud:n}))},f=function(e,r){return h(Rg({cmd:e,args:r,wid:t,pud:n}))},h=(0,ag.I)(),p=(0,a.Z)(cg(t,n),1)[0].gitState,v=p.hasConflictsWithFetchedRemote&&(0,i.tZ)(SZ,{wid:t,pud:n,gitState:p}),m=(0,a.Z)(l.useState(null),2),g=m[0],Z=m[1],y=null!==g&&(0,i.tZ)(zg.Z,{isOpen:!0,onRequestClose:function(){return Z(null)},children:(0,i.tZ)(EZ,{actionDescription:"Reverting to this previous version",onConfirm:(0,de.Z)((function(){return(0,fe.__generator)(this,(function(e){return Z(null),f(sg.y6),f(sg.CU,[g.hash]),d({persist:!0}),[2]}))})),onCancel:function(){return Z(null)}})}),b=(0,a.Z)(l.useState(null),2),w=b[0],x=b[1],C=null!==w&&(0,i.tZ)(zg.Z,{isOpen:!0,onRequestClose:function(){return x(null)},children:(0,i.tZ)(EZ,{actionDescription:"Checking out branch ".concat(w),onConfirm:(0,de.Z)((function(){return(0,fe.__generator)(this,(function(e){switch(e.label){case 0:return x(null),f(sg.y6),[4,f(sg.JE,[w])];case 1:return e.sent(),d({persist:!0}),[2]}}))})),onCancel:function(){return x(null)}})});function k(){return(k=(0,de.Z)((function(e){return(0,fe.__generator)(this,(function(t){return(0,Ue.j)(Ue.U3.VERSION_CONTROL_FEATURE_USED,{action:"reverted"}),p.changedFiles.length>0?(Z(e),[2]):(f(sg.CU,[e.hash]),d({persist:!0}),[2])}))}))).apply(this,arguments)}function S(){return(S=(0,de.Z)((function(e){return(0,fe.__generator)(this,(function(t){switch(t.label){case 0:return e===p.branch?[2]:((0,Ue.j)(Ue.U3.VERSION_CONTROL_FEATURE_USED,{action:"checkedOut"}),p.changedFiles.length>0&&p.branches.includes(e)?(x(e),[2]):[4,f(sg.JE,[e])]);case 1:return t.sent(),d({persist:!0}),[2]}}))}))).apply(this,arguments)}var E="html"===(0,kZ.Z)();return(0,i.BX)(O.G,{css:W.l0.colWithGap(32),children:[(0,i.BX)(O.G,{css:W.l0.colWithGap(8),children:[(0,i.tZ)(nZ,{gitState:p,isLoading:r,pull:function(){(0,Ue.j)(Ue.U3.VERSION_CONTROL_FEATURE_USED,{action:"pulled"}),d({history:!0,persistMirror:E})},setGitHubCreationModalOpen:function(){p.remoteToken&&p.installations.length>0?s(!0):h({type:"UPDATE_GIT_STATE",wid:t,pud:n,updates:{authError:ug.l4.GITHUB_GET_INFO}})},wid:t,pud:n,setExistingRepoConnectionIsOpen:u}),(0,i.tZ)(qg,{isLoading:r,gitState:p,checkoutBranch:function(e){return S.apply(this,arguments)}})]}),(0,i.tZ)(vZ,{branch:p.branch,changedFiles:p.changedFiles,commits:p.commits,isLoading:r,commitsAhead:p.commitsAhead,commitsBehind:p.commitsBehind,remote:p.remote,gitAddAll:function(){f(sg.Hl)},gitCommit:function(){var e=(0,de.Z)((function(e){return(0,fe.__generator)(this,(function(t){switch(t.label){case 0:return(0,Ue.j)(Ue.U3.VERSION_CONTROL_FEATURE_USED,{action:"committed"}),[4,f(sg.th,[e,o])];case 1:return t.sent(),d({persist:!0}),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),gitPush:function(){d({write:!0})},gitRestore:function(){var e=(0,de.Z)((function(e,t){return(0,fe.__generator)(this,(function(n){switch(n.label){case 0:return[4,f(sg.sh,[e,t])];case 1:return n.sent(),[4,f(sg.i7)];case 2:return n.sent(),[2]}}))}));return function(t,n){return e.apply(this,arguments)}}(),gitAdd:function(){var e=(0,de.Z)((function(e){return(0,fe.__generator)(this,(function(t){switch(t.label){case 0:return[4,f(sg.N2,[e])];case 1:return[2,t.sent()]}}))}));return function(t){return e.apply(this,arguments)}}()}),(0,i.tZ)(CZ,{gitState:p,handleRevertToCommit:function(e){return k.apply(this,arguments)},fetchMoreCommits:function(){p.remote&&f(sg.he,[!0]),f(sg.cM,[!0])}}),y,C,v,p.authError===ug.l4.NONE||p.authError===ug.l4.FETCH&&!p.remote?null:(0,i.tZ)(Fg,{wid:t,pud:n,repoId:p.repoId,ownerId:p.ownerId,authError:p.authError,onAuth:c})]})},RZ=n(22616),_Z=n(60595),IZ=function(e){var t=e.onInit,n=e.onConnect,r=e.isLoggedIn,o=(0,G.T3)(),a=(0,RZ.i)(),l=o&&a.width&&a.height&&a.width>a.height;return(0,i.BX)(Z.G7,{css:[Z.l0.colWithGap(32),Z.l0.justify.spaceBetween,Z.l0.align.center,Z.l0.justify.center,Z.l0.maxWidth(600),Z.l0.pt(16),{margin:"0 auto"}],children:[(0,i.BX)(Z.G7,{css:[Z.l0.colWithGap(16)],children:[(0,i.tZ)(Z.G7,{css:[Z.l0.flex.column,Z.l0.align.center],children:(0,i.BX)(Z.xv,{multiline:!0,children:["Track and rollback changes to your Repl."," ",(0,i.tZ)("a",{href:"https://docs.replit.com/programming-ide/git-with-replit",target:"_blank",rel:"noopener noreferrer",onClick:function(e){e.preventDefault(),window.open(e.target.href,"_blank")},children:"Learn more here."})]})}),(0,i.tZ)(Z.G7,{children:r?(0,i.BX)(Z.G7,{css:[Z.l0.colWithGap(8),{width:"100%",maxWidth:200,margin:"auto"}],children:[(0,i.tZ)(Z.zx,{colorway:"primary",onClick:t,text:"Create a Git repo",iconLeft:(0,i.tZ)(gv.Z,{})}),(0,i.tZ)(Z.zx,{onClick:n,text:"Existing Git repo?",outlined:!0})]}):(0,i.BX)(Z.G7,{children:[(0,i.tZ)("a",{href:"/signup",children:"Create an account"})," to use version control with Replit!"]})})]}),l?(0,i.tZ)(_Z.Z,{path:"/public/animations/flyinggit.json"}):(0,i.tZ)("img",{src:"/public/images/gitart.png",alt:"Robot lifting C+ box with git octocat using winch",css:{maxWidth:200}})]})},GZ=n(93493),DZ=n.n(GZ),PZ=n(40025),BZ=function(e){var t=e.wid,n=e.pud,r=e.badState,o=e.remote,a=(0,f.Z)().container,l=(0,pm.I0)(),c=function(){switch(r){case ug.$U.NoMergeBase:return(0,i.BX)(Ye.xv,{multiline:!0,children:["We couldn\u2019t find commits in common with that GitHub repository. Try"," ",(0,i.tZ)("a",{href:"/github/"+o,target:"_blank",rel:"noreferrer noopener",children:"importing the repo"})," ","into a new Repl instead, or connecting the remote via the Git sidebar again."]});case ug.$U.AuthFetchError:return(0,i.BX)(Ye.xv,{multiline:!0,children:["We couldn\u2019t find that repository on GitHub. Try connecting your GitHub account in your"," ",(0,i.tZ)("a",{href:"/account",target:"_blank",rel:"noreferrer noopener",children:"Account Settings"}),"."]});case ug.$U.IndexFilesCorrupted:return(0,i.tZ)(Ye.xv,{multiline:!0,children:"Your Git index files were corrupted. Try resetting your index file to restore your repository."});default:return(0,i.tZ)(Ye.xv,{multiline:!0,children:"We ran into an error trying to sync your repository."})}},s=function(){l({type:"UPDATE_GIT_STATE",wid:t,pud:n,updates:{remote:"",commitsAhead:0,commitsBehind:0,repoId:null,ownerId:null,badState:ug.$U.None,authError:ug.l4.NONE}})};return(0,i.BX)(O.G,{css:[W.l0.p(8),W.l0.colWithGap(8)],children:[(0,i.tZ)(Ye.xv,{variant:"subheadDefault",multiline:!0,children:"There\u2019s something wrong with this repository..."}),(0,i.tZ)(c,{}),r!==ug.$U.IndexFilesCorrupted?(0,i.BX)(i.HY,{children:[(0,i.tZ)(Ye.xv,{multiline:!0,children:"You can also try disconnecting this repository from GitHub and trying again."}),(0,i.tZ)(Z.zx,{colorway:"negative",text:"Disconnect repo",iconLeft:(0,i.tZ)(PZ.Z,{}),css:[W.l0.mt(12),W.l0.mb(16)],onClick:function(){var e;(e=a).exec.apply(e,(0,I.Z)(sg.rO.format(ug.Xe))),s()}})]}):(0,i.tZ)(Z.zx,{colorway:"negative",text:"Reset index",iconLeft:(0,i.tZ)(iZ.Z,{}),css:[W.l0.mt(12),W.l0.mb(16)],onClick:function(){a.exec("bash","-c","rm .git/index; git reset HEAD ."),s()}}),(0,i.tZ)(DZ(),{src:"/images/gitart.png",alt:"GitHub integration decoration art.",layout:"responsive",width:1694,height:3543,css:[W.l0.maxWidth(200)]})]})},UZ=n(96209),AZ=Z.KD.a;function NZ(e){var t=e.replIsPrivate,n=e.replDescription,r=e.replIsRenamed,o=e.replTitle,c=e.wid,s=e.pud,u=e.authToken,d=e.onConnect,f=e.onClose,h=e.successHandler,p=(0,Nd.H)(),v=(0,pm.v9)((function(e){return lg(e,c,s)})).gitState,m=(0,a.Z)(l.useState(!1),2),g=m[0],y=m[1],b=(0,a.Z)(l.useState(t),2),w=b[0],x=b[1],C=(0,a.Z)(l.useState(null),2),k=C[0],S=C[1],E=(0,ag.I)(),T=(0,yr.Y)(r?o:"",(function(e){return e&&e.length>100?{message:"* GitHub repository names cannot exceed 100 characters"}:e?void 0:{message:"* Repository name is required"}})),R=v.installations,_=R.find((function(e){return"User"===e.type}))||R[0],I=R.map((function(e){return{value:e.name,title:e.name,icon:(0,i.tZ)(Z.G7,{css:[Z.l0.mr(8)],children:(0,i.tZ)(DZ(),{src:e.avatarUrl,alt:"".concat(e.name,"'s profile photo"),layout:"fixed",width:16,height:16,css:[Z.l0.borderRadius(8)]})})}})),G=(0,a.Z)(l.useState({value:_.name,label:_.name,avatar:_.avatarUrl,type:_.type}),2),D=G[0],P=G[1],B=(0,yr.Y)((n||"").replace(/(\r\n|\n|\r)/gm," "),(function(e){if(e&&e.length>140)return{message:"* GitHub descriptions cannot exceed 140 characters"}})),U=!(!T.error&&!B.error),A=function(){var e=(0,de.Z)((function(e){var t,n,r,i,o;return(0,fe.__generator)(this,(function(a){switch(a.label){case 0:if(S(null),e.preventDefault(),y(!0),t=T.validate(),n=B.validate(),t||n)return y(!1),[2];r={name:T.value,description:B.value,private:w},v.commits.length||E(Dg(c,s)),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,bg({token:u,repoData:r,owner:D.value,ownerType:D.type})];case 2:return i=a.sent(),h(i.html_url),[3,4];case 3:return o=a.sent(),(0,fn.Z)(o,mg)?E({type:"UPDATE_GIT_STATE",wid:c,pud:s,updates:{authError:ug.l4.GITHUB_CREATE}}):(0,fn.Z)(o,gg)?S("Another GitHub repository with the same name already exists"):(et.$e((function(e){e.setTag("source","git"),et.Tb(o)})),S("Unable to create a GitHub repository")),[3,4];case 4:return y(!1),[2]}}))}));return function(t){return e.apply(this,arguments)}}();return(0,i.tZ)(Z.u_,{onRequestClose:f,isOpen:!0,children:(0,i.tZ)("form",{onSubmit:A,style:{opacity:g?.6:1},autoComplete:"off",children:(0,i.BX)(Z.G7,{css:[Z.l0.colWithGap(24)],children:[(0,i.tZ)(Z.h4,{variant:"headerDefault",level:1,children:"Create a new GitHub repository"}),(0,i.tZ)(Z.xv,{children:(0,i.tZ)(AZ,{onClick:function(){f(),d()},children:"Connect an existing repository instead."})}),(0,i.tZ)(Z.xv,{multiline:!0,css:{marginTop:-12},children:"You can always edit this information on GitHub."}),(0,i.BX)(Z.G7,{css:[Z.l0.rowWithGap(8),Z.l0.align.center],children:[(0,i.BX)(Z.G7,{css:[Z.l0.colWithGap(4)],children:[(0,i.tZ)("label",{htmlFor:p("owner"),children:(0,i.tZ)(Z.xv,{color:"dimmer",variant:"small",children:"Owner"})}),(0,i.tZ)(Z.Ph,{items:I,initialSelectedItem:I.length?I[0]:void 0,placeholder:"Select a user",disabled:R.length<=1||g,onChange:function(e){P(e)},css:[Z.l0.height(48),Z.l0.flex.grow(1),{flexBasis:"50%"},Z.l0.minWidth(80)],id:p("owner")})]}),(0,i.tZ)("span",{className:"slash",css:[Z.l0.fontSize(20),Z.l0.mt(16)],children:"/"}),(0,i.BX)(Z.G7,{css:[Z.l0.colWithGap(4),{flexShrink:1}],children:[(0,i.tZ)("label",{htmlFor:p("name"),children:(0,i.tZ)(Z.xv,{color:"dimmer",variant:"small",children:"Title"})}),(0,i.tZ)(Z.G7,{css:[Z.l0.height(35)],children:(0,i.tZ)(Z.II,{name:"title",placeholder:"Name your repo",disabled:g,value:T.value,onChange:function(e){T.setValue(e.currentTarget.value),S(null)},onFocus:function(e){return e.target.select()},onBlur:T.handleBlur,css:[{flexBasis:"50%"},Z.l0.minWidth(80)],id:p("name")})}),T.error?(0,i.tZ)(Z.xv,{variant:"small",css:[Z.l0.color.accentNegativeStronger],multiline:!0,children:T.error.message}):null]})]}),(0,i.BX)(Z.G7,{css:[Z.l0.colWithGap(8)],children:[(0,i.BX)(Z.G7,{css:[Z.l0.colWithGap(4)],children:[(0,i.tZ)("label",{htmlFor:p("description"),children:(0,i.tZ)(Z.xv,{color:"dimmer",variant:"small",children:"Repo description (optional)"})}),(0,i.tZ)(Z.B,{name:"description",value:B.value,disabled:g,placeholder:B.value||"What does this repo do?",onChange:function(e){B.setValue(e.target.value),S(null)},onBlur:B.handleBlur,css:[Z.l0.minHeight(64),Z.l0.maxHeight(96),{resize:"vertical"}],id:p("description")})]}),B.error?(0,i.tZ)(Z.xv,{variant:"small",css:[Z.l0.color.accentNegativeStronger],children:B.error.message}):null]}),(0,i.BX)(Z.G7,{css:[Z.l0.colWithGap(8)],children:[(0,i.BX)(Z.G7,{css:[Z.l0.colWithGap(4)],children:[(0,i.tZ)("label",{htmlFor:p("github-privacy"),children:(0,i.tZ)(Z.xv,{color:"dimmer",variant:"small",children:"GitHub privacy"})}),(0,i.BX)(Z.hE,{name:p("github-privacy"),value:(!w).toString(),onChange:function(e){return x(e)},row:!0,stretch:!0,primary:!0,disabled:g,children:[(0,i.tZ)(Z.rK,{id:p("github-repo-creation-modal-true"),value:!1,text:"Public",icon:(0,i.tZ)(UZ.Z,{})}),(0,i.tZ)(Z.rK,{id:p("github-repo-creation-modal-false"),value:!0,text:"Private",icon:(0,i.tZ)(ef.Z,{})})]})]}),(0,i.tZ)(Z.xv,{css:[Z.l0.color.foregroundDimmer],children:(w?"You choose who can see this repo":"Anyone can see this repo")+", and you choose who can commit."})]}),(0,i.BX)(Z.G7,{css:[Z.l0.rowWithGap(12),Z.l0.justify.end],children:[(0,i.tZ)(Z.zx,{disabled:g,"data-testid":"git-confirm-github-repo",text:"Cancel",onClick:f}),(0,i.tZ)(Z.zx,{colorway:"primary",disabled:g||U,type:"submit","data-testid":"git-confirm-github-repo",text:g?"Creating repository...":"Create repository",iconLeft:(0,i.tZ)(gv.Z,{})})]}),k?(0,i.BX)(Z.xv,{multiline:!0,css:[Z.l0.color.accentNegativeStronger],children:[k,(0,i.tZ)("br",{}),"Let us know if there is an issue by opening up the sidebar and submitting a ticket via the get help button."]}):null]})})})}var LZ=function(e){var t=e.authToken,n=e.onClose,r=e.onConnect,o=e.pud,a=e.successHandler,l=e.wid,c=function(e){var t=(0,R.Z)({},ng,e);return li.a(ig,t)}({variables:{replId:(0,gi.Z)()}}),s=c.data;if(c.loading)return null;if("Repl"!==(null===s||void 0===s?void 0:s.repl.__typename))return(0,i.tZ)(Z.u_,{onRequestClose:n,isOpen:!0,children:(0,i.BX)(Z.G7,{css:[Z.l0.colWithGap(24)],children:[(0,i.tZ)(Z.h4,{variant:"headerDefault",level:1,children:"Something went wrong."}),(0,i.tZ)(Z.xv,{children:"Please try again later."})]})});var u=s.repl;return(0,i.tZ)(NZ,{replDescription:u.description,replIsPrivate:u.isPrivate,replIsRenamed:u.isRenamed,replTitle:u.title,pud:o,wid:l,authToken:t,onConnect:r,onClose:n,successHandler:a})},XZ=n(26285),MZ=n(33209),OZ=n(72529),WZ=O.K.a,FZ=function(e){var t=(0,f.Z)().container,n=(0,MZ.Z)(t),r=(0,ag.I)(),o=(0,a.Z)(l.useState(null),2),c=o[0],s=o[1],u=(0,a.Z)(l.useState(!1),2),d=u[0],h=u[1],p=function(){var t=(0,de.Z)((function(){var t;return(0,fe.__generator)(this,(function(n){return c?(h(!0),e.gitState.commits.length||r(Dg(e.wid,e.pud)),t="https://github.com/".concat(c.nameWithOwner),r(Rg({cmd:sg.M7,args:[t],wid:e.wid,pud:e.pud})),r(_g({wid:e.wid,pud:e.pud})),e.hideModal(),[2]):[2]}))}));return function(){return t.apply(this,arguments)}}(),v=function(){var t=(0,de.Z)((function(){var t,i,o,a,l;return(0,fe.__generator)(this,(function(s){switch(s.label){case 0:return c?(h(!0),t="https://github.com/".concat(c.nameWithOwner),[4,Eg()]):[2];case 1:return i=s.sent(),e.gitState.isInitialized?[3,3]:[4,n({args:sg.D6.format(e.gitState,i)})];case 2:s.sent(),s.label=3;case 3:return e.gitState.commits.length?[3,8]:[4,n({args:sg.M7.format(e.gitState,t)})];case 4:return s.sent(),[4,n({args:sg.GE.format(e.gitState)})];case 5:return s.sent(),[4,n({args:sg.th.format(e.gitState,"Initial commit",i,!0)})];case 6:return s.sent(),[4,n({args:sg.Hl.format(e.gitState)})];case 7:s.sent(),s.label=8;case 8:return[4,n({args:sg.hU.format(e.gitState)})];case 9:return s.sent(),[4,n({args:sg.M7.format(e.gitState,t)})];case 10:return s.sent(),[4,n({args:sg.he.format((0,_.Z)((0,R.Z)({},e.gitState),{remote:t}),!1)})];case 11:return s.sent(),[4,n({args:sg.Di.format((0,_.Z)((0,R.Z)({},e.gitState),{remote:t}))})];case 12:return o=s.sent(),sg.Di.parse?(a=sg.Di.parse(e.gitState,null===o.error?o.output:"HEAD branch: main"),l=a.defaultBranch,[4,n({args:sg.Z$.format(e.gitState,i,l)})]):[2];case 13:return s.sent(),[4,n({args:sg.eg.format(e.gitState)})];case 14:return s.sent(),r(_g({wid:e.wid,pud:e.pud})),e.hideModal(),[2]}}))}));return function(){return t.apply(this,arguments)}}();return(0,i.BX)(O.G,{css:[W.l0.colWithGap(16)],children:[(0,i.tZ)(Ye.h4,{variant:"headerDefault",level:2,children:"Connect an existing repository"}),(0,i.tZ)(Ye.xv,{children:(0,i.tZ)(WZ,{onClick:function(){e.setGitHubCreationModalOpen(!0),e.hideModal()},children:"Create a new GitHub repository instead."})}),(0,i.tZ)("label",{htmlFor:"git-sidebar-existing-repo-connection",css:{marginBottom:8},children:"Choose a repository to import."}),(0,i.tZ)(XZ.Z,{id:"git-sidebar-existing-repo-connection",onRepoSelect:s,onInputValueChange:function(){},isPrivate:!1}),e.gitState.remoteToken?null:(0,i.BX)(Ye.xv,{multiline:!0,css:[W.l0.color.accentNegativeStronger,{marginTop:-12}],children:[(0,i.tZ)(Mr.Z,{})," Please connect your GitHub account to connect existing repositories."]}),(0,i.BX)(Ye.xv,{multiline:!0,css:{marginTop:-8},children:["This will set ",c?c.nameWithOwner:"this repository"," as the remote",e.fromEmptyState?" and pull in changes.":". Optionally, you can also pull in any changes from the repository, which will reflect this Repl's changes in the case of conflicts."]}),(0,i.BX)(Ye.xv,{multiline:!0,children:["This can be undone by removing the repository in the Git sidebar or running ",(0,i.tZ)(Yg.Z,{children:"git remote remove origin"})," in the Shell."]}),(0,i.BX)(O.G,{css:[W.l0.rowWithGap(12),W.l0.justify.end,{flexWrap:"wrap",marginTop:"-8px"}],children:[(0,i.tZ)(Z.zx,{text:"Cancel",onClick:e.hideModal,css:[W.l0.mt(8)],disabled:d}),e.fromEmptyState?null:(0,i.tZ)(Z.zx,{iconLeft:(0,i.tZ)(Jg.Z,{}),onClick:p,text:d?"Connecting...":"Connect"+(c?" "+c.nameWithOwner:""),colorway:"primary",outlined:!0,css:[W.l0.mt(8)],disabled:d||!c}),(0,i.tZ)(Z.zx,{iconLeft:(0,i.tZ)(OZ.Z,{}),onClick:v,text:d?"Connecting...":"Pull changes"+(c?" from "+c.nameWithOwner:""),colorway:"primary",css:[W.l0.mt(8)],disabled:d||!c})]})]})},jZ=(0,zo.Z)(function(){var e=(0,de.Z)((function(e){return(0,fe.__generator)(this,(function(t){return e(),[2]}))}));return function(t){return e.apply(this,arguments)}}(),{wait:1e3});function zZ(e){var t=e.wid,n=e.pud,r=(0,ag.I)(),o=(0,G.Vg)((0,P.useRouter)()),c=(0,f.Z)(),s=c.container,u=c.fs,d=(0,a.Z)(cg(t,n),1)[0],h=d.gitState,p=d.isLoading,v=d.isCloneInProgress,m=function(e){var t=(0,R.Z)({},ng,e);return li.a(og,t)}(),g=m.data,b=m.loading,w=m.refetch;l.useEffect((function(){var e,i,o,a,l;if("GitHubInfo"===(null===g||void 0===g||null===(e=g.currentUser)||void 0===e||null===(i=e.gitHubInfo)||void 0===i?void 0:i.__typename)){var c=g.currentUser.gitHubInfo;c.accessToken&&r({type:"UPDATE_GIT_STATE",updates:{remoteToken:c.accessToken,gitHubName:null===(o=c.userInfo)||void 0===o?void 0:o.name,gitHubEmail:null===(a=c.userInfo)||void 0===a?void 0:a.email,gitHubAvatarUrl:null===(l=c.userInfo)||void 0===l?void 0:l.avatarUrl,installations:c.installations},wid:t,pud:n})}}),[g]);var x=(0,a.Z)(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=(0,l.useState)(t),r=n[0],i=n[1],o=(0,l.useRef)();return(0,l.useEffect)((function(){return o.current&&clearTimeout(o.current),o.current=setTimeout((function(){i(e)}),250),function(){o.current&&clearTimeout(o.current)}}),[e]),[r||e,i]}(p||b,!0),2),C=x[0],k=x[1];(0,l.useEffect)((function(){return v||b||(k(!0),r(_g({history:!1,write:!1,persist:!1,wid:t,pud:n}))),r({type:"SET_GIT_SIDEBAR_VISIBILITY",isSidebarVisible:!0,wid:t}),function(){r({type:"SET_GIT_SIDEBAR_VISIBILITY",isSidebarVisible:!1,wid:t})}}),[b,s]),u.onStatusChange((function(e){e===y.kO.Clean&&jZ((function(){r(_g({history:!1,write:!1,persist:!1,wid:t,pud:n}))}))}));var S=(0,a.Z)(l.useState(!1),2),E=S[0],T=S[1],_=(0,a.Z)(l.useState(!1),2),I=_[0],D=_[1],B=null;return b||C&&!h.isInitialized?B=(0,i.tZ)(Z.G7,{css:[Z.l0.center,Z.l0.flex.growAndShrink(1)],children:(0,i.tZ)(ur.Z,{size:24})}):h.remote||h.isInitialized?h.badState!==ug.$U.None?B=(0,i.tZ)(BZ,{wid:t,pud:n,badState:h.badState,remote:h.remote}):(null===g||void 0===g?void 0:g.currentUser)&&(B=(0,i.tZ)(TZ,{wid:t,pud:n,isLoading:C,currentUser:g.currentUser,refetchUser:w,setExistingRepoConnectionModalOpen:D,setGitHubCreationModalOpen:T})):B=(0,i.tZ)(IZ,{isLoggedIn:Boolean(null===g||void 0===g?void 0:g.currentUser),onInit:function(){r(function(e,t){return function(){var n=(0,de.Z)((function(n){var r;return(0,fe.__generator)(this,(function(i){switch(i.label){case 0:return(0,Ue.j)(Ue.U3.VERSION_CONTROL_FEATURE_USED,{action:"initialized"}),[4,Eg()];case 1:return r=i.sent(),[4,(o=sg.D6,a=[r],n(Rg({cmd:o,args:a,wid:e,pud:t})))];case 2:return i.sent(),[4,n(Gg(e,t))];case 3:return i.sent(),[2]}var o,a}))}));return function(e){return n.apply(this,arguments)}}()}(t,n))},onConnect:function(){return D(!0)}}),(0,i.BX)(Z.G7,{css:Z.l0.height("100%"),children:[(0,i.tZ)(Z.G7,{css:[Z.l0.p(8)],children:(0,i.tZ)(xd.Z,{truncate:!0,level:4,children:"Git"})}),(0,i.tZ)(Z.G7,{css:[Z.l0.flex.growAndShrink(1),Z.l0.px(8),Z.l0.overflowY("auto"),C&&h.badState===ug.$U.None&&{pointerEvents:"none",opacity:.5}],children:B}),o?null:(0,i.tZ)(HZ,{}),(0,i.tZ)($g.u,{isOpen:I,onRequestClose:function(){return D(!1)},maxWidth:600,children:(0,i.tZ)(FZ,{gitState:h,hideModal:function(){return D(!1)},setGitHubCreationModalOpen:T,fromEmptyState:!h.remote&&!h.isInitialized,wid:t,pud:n})}),E?(0,i.tZ)(LZ,{authToken:h.remoteToken,onClose:function(){return T(!1)},onConnect:function(){return D(!0)},successHandler:function(e){r(function(e){var t=e.remote,n=e.wid,r=e.pud;return function(){var e=(0,de.Z)((function(e){function i(t,i){return e(Rg({cmd:t,args:i,wid:n,pud:r}))}return(0,fe.__generator)(this,(function(o){switch(o.label){case 0:return[4,i(sg.M7,[t])];case 1:return o.sent(),[4,i(sg.LO)];case 2:return o.sent(),[4,i(sg.VF)];case 3:return o.sent(),[4,e({type:"GITHUB_REPOSITORY_CREATED",wid:n,pud:r})];case 4:return o.sent(),[4,e(_g({wid:n,pud:r,persist:!0}))];case 5:return o.sent(),[2]}}))}));return function(t){return e.apply(this,arguments)}}()}({wid:t,pud:n,remote:e})),T(!1)},wid:t,pud:n}):null]})}function HZ(){return(0,i.tZ)(Z.G7,{css:Z.l0.p(8),children:(0,i.tZ)("a",{className:"feedbackLink",href:"https://replit.com/talk/announcements/Feedback-for-git-support-the-new-GitHub-integration/21631",target:"_blank",rel:"noopener",children:"Send feedback"})})}var VZ=(0,A.cn)(null);function qZ(){var e=(0,f.Z)(),t=e.container,n=e.fs,o=(0,a.Z)((0,A.KO)(VZ),2),c=o[0],s=o[1],u=(0,x.Z)(c),d=(0,pm.oR)();return l.useEffect((function(){if(!u.current){var e=new Ym;return e.yikesInjectStore(d),e.injectServices({container:t,fs:n}),e.register("git",r),e.bootstrap({plugins:{git:{type:"git"}},layout:{tiling:{type:"pane",pud:"git"},floating:[]}}),e.store.dispatch({type:"WORKSPACE_MOUNTED"}),s({Component:e.component()}),function(){s(null)}}}),[u,t,n,s,d]),(null===c||void 0===c?void 0:c.Component)?(0,i.tZ)(Z.Tg,{background:"default",css:[Z.l0.flex.growAndShrink(1),Hu.F3],id:"workspace-root",children:(0,i.tZ)(c.Component,{})}):null}var $Z=n(44311),YZ=n(30738),KZ=n(77125),QZ=n(3341),JZ=n.n(QZ);function ey(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=(0,l.useState)(null),a=o[0],c=o[1],s=(0,x.Z)(a),u=null===(n=null!==(t=i.keepStaleResult)&&void 0!==t?t:i.refresh)||void 0===n||n,d=(0,l.useCallback)((function(e){JZ()(e,s.current)||c(e)}),[s]),h=(0,tt.Z)((function(){return e}),(0,I.Z)(r)),p=(0,f.Z)().git,v=(0,l.useRef)(null),m=(0,l.useCallback)((function(){v.current?v.current():u||d(null);var e=!1;h(p).then((function(t){e||(d(t),v.current=null)})).catch((function(){if(!e){var t={error:KZ.aq.UNKNOWN};d(t),v.current=null}})),v.current=function(){e=!0,v.current=null,u||d(null)}}),[d,h,p,u]);return(0,l.useEffect)((function(){return m()}),[m]),(0,l.useEffect)((function(){var e;if(null===(e=i.refresh)||void 0===e||e)return p.onRefresh(m)}),[p,m,i.refresh]),a}var ty=n(61262),ny=(0,La.iv)(Z.l0.p(4),Z.l0.colWithGap(8),Z.l0.borderRadius(0,0,8,8)),ry=(0,La.iv)(Z.l0.rowWithGap(8),Z.l0.align.center,Z.l0.justify.end);function iy(e){var t=e.description,n=e.remedies,r=e.error;return(0,i.BX)(Z.Tg,{css:ny,elevated:!0,children:[(0,i.tZ)(Z.xv,{multiline:!0,children:t}),(0,i.BX)(Z.G7,{css:ry,children:[n,(0,i.tZ)(Z.zx,{text:"Dismiss",iconLeft:(0,i.tZ)(xe.Z,{}),onClick:r.dismiss})]})]})}function oy(e){switch(e.type){case KZ.aq.UNKNOWN_NOT_GIT:return"Unknown Error";case KZ.aq.UNKNOWN:return"Unknown Git Error";case KZ.aq.NOT_INITIALIZED:case KZ.aq.UNAUTHENTICATED:case KZ.aq.INDEX_FILE_CORRUPT:case KZ.aq.UNKNOWN_REMOTE:case KZ.aq.INDEX_LOCKED:case KZ.aq.NO_COMMITS:case KZ.aq.PATH_MATCHED_NO_FILES:case KZ.aq.USER_NOT_CONFIGURED:case KZ.aq.INVALID_REFERENCE:case KZ.aq.BRANCH_ALREADY_EXISTS:case KZ.aq.MERGE_CONFLICT:case KZ.aq.HEAD_DETACHED:case KZ.aq.DIRTY_WORKTREE:case KZ.aq.PUSH_REJECTED:case KZ.aq.REMOTE_ALREADY_EXISTS:case KZ.aq.ALREADY_INITIALIZED:return"Git Error";default:return"Unknown Error"}}function ay(e){var t,n,r=e.error;switch(r.type){case KZ.aq.UNKNOWN_NOT_GIT:t="Unknown error from the Git service. This is probably a bug in the app.",n=null;break;case KZ.aq.UNKNOWN:t="There was an unrecognized fatal error with Git. This is probably a bug in the app.",n=null;break;case KZ.aq.NOT_INITIALIZED:t="There isn't a Git repository in the Repl's root directory.",n=null;break;case KZ.aq.UNAUTHENTICATED:t="Failed to authenticate with the remote.",n=null;break;case KZ.aq.INDEX_FILE_CORRUPT:t="The Git index file is corrupt. This can happen if the index file is manually edited, or if the Git repository is corrupted.",n=null;break;case KZ.aq.UNKNOWN_REMOTE:t="The remote specified isn't configured.",n=null;break;case KZ.aq.INDEX_LOCKED:t="Git tried to perform an action but the index lockfile still exists. This means Git either crashed previously or is still running an action.",n=null;break;case KZ.aq.NO_COMMITS:t="There are no commits in the repository.",n=null;break;case KZ.aq.PATH_MATCHED_NO_FILES:t="The path specified didn't match any files.",n=null;break;case KZ.aq.USER_NOT_CONFIGURED:t="There isn't any user information configured for Git.",n=null;break;case KZ.aq.INVALID_REFERENCE:t="An unknown/invalid reference was specified. This is usually a branch, but it could be something else, such as a tag.",n=null;break;case KZ.aq.BRANCH_ALREADY_EXISTS:t="The branch specified already exists.",n=null;break;case KZ.aq.MERGE_CONFLICT:t="There was an unexpected merge conflict.",n=null;break;case KZ.aq.UPSTREAM_NOT_SET:t="The upstream branch isn't set.",n=null;break;case KZ.aq.HEAD_DETACHED:t="The HEAD is detached. You have a commit checked out, not a branch.",n=null;break;case KZ.aq.DIRTY_WORKTREE:t="There are uncommitted changes.",n=null;break;case KZ.aq.PUSH_REJECTED:t="The push was rejected by the remote. This is usually because the remote has commits that aren't in the local repository.",n=null;break;case KZ.aq.REMOTE_ALREADY_EXISTS:t="The remote specified already exists.",n=null;break;case KZ.aq.ALREADY_INITIALIZED:t="There is already a Git repository in the Repl's root directory.",n=null;break;default:t="We ran into an unknown error that we don't have a description for. This is probably a bug with the app.",n=null}return(0,i.tZ)(iy,{description:t,remedies:n,error:r})}var ly=(0,La.iv)({pointerEvents:"all"},Z.l0.p(1),Z.l0.backgroundColor.accentNegativeDimmer,Z.l0.borderRadius(8),Z.l0.shadow(3)),cy=(0,La.iv)(Z.l0.py(4),Z.l0.px(8),Z.l0.display.flex,Z.l0.flex.row,Z.l0.align.center,Z.l0.justify.spaceBetween,Z.l0.color.accentNegativeStrongest),sy=(0,La.iv)(Z.l0.rowWithGap(4),Z.l0.align.center),uy=(0,La.iv)({opacity:.75},Z.l0.font.code),dy=(0,La.iv)(Z.l0.pt(4),Z.l0.pb(8),Z.l0.px(8),Z.l0.colWithGap(8),Z.l0.backgroundColor.backgroundHigher,Z.l0.borderRadius(0,0,8,8));function fy(e){var t=e.error;return(0,i.BX)(Z.G7,{css:ly,children:[(0,i.BX)(Z.G7,{css:cy,children:[(0,i.BX)(Z.G7,{css:sy,children:[(0,i.tZ)(Mr.Z,{}),(0,i.tZ)(Z.xv,{variant:"subheadDefault",children:oy(t)})]}),(0,i.tZ)(Z.xv,{css:uy,children:t.type})]}),(0,i.tZ)(Z.G7,{css:dy,children:(0,i.tZ)(ay,{error:t})})]})}var hy=Symbol("GitPaneErrorAtomScope"),py=(0,A.cn)([]),vy=(0,A.cn)((function(e){return e(py)}),(function(e,t,n){var r=e(py),i=Math.random().toString(36).substring(7),o={id:i,type:n,dismiss:function(){var n=e(py).filter((function(e){return e.id!==i}));t(py,n)}};t(py,[o].concat((0,I.Z)(r)))}));function my(){return(0,A.b9)(vy,hy)}var gy=(0,La.iv)({pointerEvents:"none"},{transition:"background-color 100ms"},Z.l0.position.absolute,Z.l0.top(0),Z.l0.bottom(0),Z.l0.left(0),Z.l0.right(0),Z.l0.p(8),Z.l0.colWithGap(16),Z.l0.zIndex(10));function Zy(){var e=(0,A.Dv)(vy,hy);return(0,i.tZ)(Z.G7,{style:{backgroundColor:e.length>0?"rgba(0, 0, 0, 0.25)":"transparent"},css:gy,children:e.map((function(e){return(0,i.tZ)(fy,{error:e},e.id)}))})}var yy=n(92589),by=n(47358),wy=n(95360);function xy(e,t){(0,Ue.j)(Dl.U3.GIT_FEATURE_USED,(0,R.Z)({action:e,source:"git-pane"},t))}function Cy(){var e=(0,l.useState)(!1),t=e[0],n=e[1],r=(0,f.Z)().git,o=function(){var e=(0,l.useState)(!1),t=e[0],n=e[1],r=(0,f.Z)().git;return(0,l.useEffect)((function(){return r.onBusyChange(n)}),[r]),t}(),a=my(),c=ey(function(){var e=(0,de.Z)((function(e){var t;return(0,fe.__generator)(this,(function(n){switch(n.label){case 0:return[4,e.getRemotes()];case 1:return(t=n.sent()).error?(a(t.error),[2,t]):[2,{hasRemotes:t.remotes.size>0,error:null}]}}))}));return function(t){return e.apply(this,arguments)}}(),[a]);if(null===c||void 0===c?void 0:c.error)return null;var s=!!c&&c.hasRemotes,u=o||t||null===c;function d(){return(d=(0,de.Z)((function(){var e;return(0,fe.__generator)(this,(function(t){switch(t.label){case 0:return r.isBusy()||u?[2]:(n(!0),s?[4,r.fetch()]:[3,2]);case 1:(e=t.sent()).error?a(e.error):xy("remote-fetched"),t.label=2;case 2:return r.forceRefresh(),setTimeout((function(){return n(!1)}),500),[2]}}))}))).apply(this,arguments)}var h=s?"Refresh and Fetch":"Refresh";return(0,i.tZ)(Z.hU,{alt:h,size:24,onClick:function(){return d.apply(this,arguments)},disabled:u,children:u?(0,i.tZ)(ur.Z,{}):(0,i.tZ)(ke.Z,{})})}var ky=n(64035),Sy=n(80256),Ey=n(6827),Ty=(0,La.iv)(Z.l0.color.orangeStronger,Z.l0.fontWeight.medium);function Ry(e){var t=e.text,n=e.className;return(0,i.tZ)("span",{className:n,css:Ty,children:t})}var _y=(0,La.iv)(Z.l0.color.purpleStronger,Z.l0.fontWeight.medium);function Iy(e){var t=e.text,n=e.className;return(0,i.tZ)("span",{className:n,css:_y,children:t})}var Gy=(0,La.iv)(Z.l0.fontWeight.medium);function Dy(e){var t,n=e.id,r=e.hash,o=void 0===r||r,a=e.className;return t=o?"string"===typeof n&&n.startsWith("#")?n:"#".concat(n):"string"===typeof n&&n.startsWith("#")?n.slice(1):"".concat(n),(0,i.tZ)("span",{className:a,css:Gy,children:t})}var Py=(0,La.iv)(Z.l0.fontWeight.medium);function By(e){var t=e.hash,n=e.length,r=void 0===n?8:n,o=e.className;return(0,i.tZ)("span",{className:o,css:Py,children:t.slice(0,r+1)})}function Uy(e){var t=e.subject,n=e.quoted,r=void 0!==n&&n,o=e.className;return(0,i.tZ)("span",{className:o,children:r?'"'.concat(t,'"'):t})}var Ay=(0,La.iv)({whiteSpace:"pre-wrap"},{fontSize:Z.TV.fontSizeSmall},Z.l0.font.code);function Ny(e){var t=e.body,n=e.className;return(0,i.tZ)("pre",{className:n,css:Ay,children:t})}var Ly=(0,Z.Xb)({headingWrapper:[Z.l0.display.inlineFlex,Z.l0.rowWithGap(4),Z.l0.align.center,Z.l0.flex.shrink(1),Z.l0.overflow("hidden")],headingRemote:[{verticalAlign:"text-bottom"},Z.l0.mr(4),Z.l0.color.foregroundDimmest],headingCurrent:[Z.l0.px(4)],text:[Z.l0.fontWeight.medium],remote:[{verticalAlign:"text-bottom"},{fontSize:Z.TV.fontSizeSmall},Z.l0.mr(4),Z.l0.color.foregroundDimmest],current:[Z.l0.position.relative,Z.l0.top("-1px"),Z.l0.display.inlineFlex,Z.l0.pl(2),Z.l0.pr(8)],icon:[{verticalAlign:"baseline !important"},Z.l0.mr(4)]});function Xy(e){var t=e.name,n=e.remote,r=e.current,o=void 0!==r&&r,a=e.heading,l=void 0!==a&&a,c=e.icon,s=void 0!==c&&c,u=e.onClick,d=e.className;return l?(0,i.BX)("div",{css:Ly.headingWrapper,children:[!s||o?null:(0,i.tZ)(ky.Z,{size:16}),o?(0,i.tZ)("span",{css:Ly.headingCurrent,children:(0,i.tZ)(Ey.Z,{display:"tooltip",content:"This is your current branch.",status:Ey.O.SUCCESS})}):null,(0,i.BX)(Z.xv,{variant:"subheadDefault",children:[n?(0,i.BX)(i.HY,{children:[(0,i.tZ)("span",{css:Ly.headingRemote,children:n}),(0,i.tZ)("span",{css:Ly.headingRemote,children:"/"})]}):null,u?(0,i.tZ)(Vy,{label:"View branch",onClick:u,children:t}):(0,i.tZ)("span",{children:t})]})]}):(0,i.BX)("span",{className:d,css:Ly.text,children:[!s||o?null:(0,i.tZ)(ky.Z,{css:Ly.icon,size:12}),o?(0,i.tZ)("span",{css:Ly.current,children:(0,i.tZ)(Ey.Z,{display:"tooltip",content:"This is your current branch.",status:Ey.O.SUCCESS})}):null,n?(0,i.tZ)("span",{css:Ly.remote,children:n}):null,u?(0,i.tZ)(Vy,{label:"View branch",onClick:u,children:t}):(0,i.tZ)("span",{children:t})]})}var My=(0,La.iv)(Z.l0.color.foregroundDimmest),Oy=(0,La.iv)({"& > span":{display:"inline-block"}});function Wy(e){var t=e.path,n=e.prefix,r=e.clickable,o=void 0!==r&&r,a=e.className,l=(0,Sy.F)(),c=(0,m.UO)(t);return o?(0,i.tZ)("span",{css:Oy,children:(0,i.tZ)(Z.u,{maxWidth:"auto",tooltip:(0,i.tZ)(jy,{path:t}),children:(0,i.BX)(Vy,{label:"Open ".concat(c),onClick:function(){return l(t,{})},className:a,children:[n?(0,i.tZ)("span",{css:My,children:n}):null,(0,i.tZ)("span",{children:c})]})})}):(0,i.tZ)("span",{className:a,children:c})}var Fy=(0,Z.Xb)({tooltip:[Z.l0.display.inlineFlex,Z.l0.rowWithGap(4),Z.l0.align.center],path:[{fontSize:Z.TV.fontSizeSmall},Z.l0.font.code]});function jy(e){var t=e.path;return(0,i.BX)("span",{css:Fy.tooltip,children:[(0,i.tZ)("span",{children:"Open"}),(0,i.tZ)("span",{css:Fy.path,children:t})]})}var zy,Hy=(0,La.iv)({cursor:"pointer","&:hover":{textDecoration:"underline"}});function Vy(e){var t=e.label,n=e.onClick,r=e.className,o=e.children;return(0,i.tZ)("span",{className:r,css:Hy,role:"button",tabIndex:-1,"aria-label":t,onClick:n,onKeyDown:function(e){"Enter"!==e.key&&" "!==e.key||null===n||void 0===n||n()},children:o})}!function(e){e.DASHBOARD="DASHBOARD",e.BRANCH="BRANCH",e.CURRENT_BRANCH="CURRENT_BRANCH",e.SETTINGS="SETTINGS"}(zy||(zy={}));var qy=(0,Z.Xb)({container:[Z.l0.height(32),Z.l0.px(8),Z.l0.py(4),Z.l0.rowWithGap(8),Z.l0.backgroundColor.backgroundDefault,Z.l0.align.center,Z.l0.justify.spaceBetween,Z.l0.zIndex(1),{borderBottom:"1px solid ".concat(Z.TV.outlineDimmer)}],left:[Z.l0.rowWithGap(4),Z.l0.align.center,Z.l0.flex.growAndShrink(1)],right:[Z.l0.rowWithGap(8),Z.l0.align.center]});function $y(e){var t=e.mode,n=e.branch,r=e.switchMode,o=e.onBack,a=e.onSearchOpen,c=e.onSearchClose,s=e.onSearchChange,u=(0,l.useState)(!1),d=u[0],f=u[1],h=function(){return r({mode:zy.SETTINGS})},p=t===zy.DASHBOARD||t===zy.BRANCH||t===zy.CURRENT_BRANCH,v=(0,l.useCallback)((function(){if(!p)throw new Error("Cannot open search in this mode");xy("search-started",{mode:t===zy.DASHBOARD?"branches":"commits"}),f(!0),null===a||void 0===a||a()}),[p,t,a]),m=(0,l.useCallback)((function(){f(!1),null===c||void 0===c||c()}),[c]),g=null,y=null;if(d)g=(0,i.tZ)(tb,{mode:t,onSearchChange:s,closeSearch:m}),y=(0,i.tZ)(eb,{closeSearch:m});else switch(t){case zy.DASHBOARD:g=(0,i.BX)(i.HY,{children:[(0,i.tZ)(by.Z,{size:16}),(0,i.tZ)(Z.xv,{variant:"subheadDefault",children:"Repository"})]}),y=(0,i.BX)(i.HY,{children:[(0,i.tZ)(Jy,{openSettings:h}),(0,i.tZ)(Qy,{openSearch:v}),(0,i.tZ)(Cy,{})]});break;case zy.BRANCH:case zy.CURRENT_BRANCH:if(null===n)throw new Error("Tried to show branch in header, but branch is null");g=(0,i.BX)(i.HY,{children:[(0,i.tZ)(Ky,{switchMode:r}),(0,i.tZ)(Xy,{name:n.name,remote:n.type===YZ.HO.REMOTE?n.remote:null,current:t===zy.CURRENT_BRANCH,heading:!0})]}),y=(0,i.BX)(i.HY,{children:[(0,i.tZ)(Jy,{openSettings:h}),(0,i.tZ)(Qy,{openSearch:v}),(0,i.tZ)(Cy,{})]});break;case zy.SETTINGS:g=(0,i.BX)(i.HY,{children:[(0,i.tZ)(Yy,{onBack:o,alt:"Back"}),(0,i.tZ)(Z.xv,{variant:"subheadDefault",children:"Settings"})]})}return(0,i.BX)(Z.G7,{css:qy.container,children:[(0,i.tZ)(Z.G7,{css:qy.left,children:g}),(0,i.tZ)(Z.G7,{css:qy.right,children:y})]})}function Yy(e){var t=e.onBack,n=e.alt;return(0,i.tZ)(Z.hU,{alt:n,size:28,onClick:t,children:(0,i.tZ)(yy.Z,{})})}function Ky(e){var t=e.switchMode;return(0,i.tZ)(Yy,{onBack:function(){return t({mode:zy.DASHBOARD})},alt:"Back to dashboard"})}function Qy(e){var t=e.openSearch;return(0,i.tZ)(Z.hU,{alt:"Search (coming soon!)",size:24,onClick:t,disabled:!0,children:(0,i.tZ)(wy.Z,{})})}function Jy(e){var t=e.openSettings;return(0,i.tZ)(Z.hU,{alt:"Settings",size:24,onClick:t,children:(0,i.tZ)(of.Z,{})})}function eb(e){var t=e.closeSearch;return(0,i.tZ)(Z.zx,{css:[Z.l0.p(4),{background:"none"}],text:"Cancel",onClick:t})}function tb(e){var t=e.mode,n=e.onSearchChange,r=e.closeSearch,o=t===zy.DASHBOARD?"Search for branches...":"Search for commits...";return(0,i.BX)("div",{css:[Z.l0.position.relative,Z.l0.flex.grow(1)],children:[(0,i.tZ)(wy.Z,{css:[Z.l0.position.absolute,Z.l0.left(8),Z.l0.top(8)],color:Z.TV.foregroundDimmest}),(0,i.tZ)(Z.II,{css:[Z.l0.width("100%"),Z.l0.pl(32),Z.l0.py(4),Z.l0.borderRadius(4),{border:"none"}],autoFocus:!0,placeholder:o,onBlur:function(e){e.target.value.trim()||r()},onChange:function(e){return t=e.target.value,void(null===n||void 0===n||n(t));var t},onKeyDown:function(e){"Escape"===e.key&&r()}})]})}function nb(){return(0,i.BX)(Z.G7,{children:[(0,i.tZ)(Z.xv,{children:"Unsupported state: you are applying a mailbox patch."}),(0,i.tZ)(Z.xv,{children:"Please finish the patch manually."})]})}function rb(){return(0,i.BX)(Z.G7,{children:[(0,i.tZ)(Z.xv,{children:"Unsupported state: you are in the middle of a bisect."}),(0,i.tZ)(Z.xv,{children:"Please finish the bisect manually."})]})}var ib=/\s\(#(\d+)\)$/,ob=/^Revert "(.+)"/,ab=/^This reverts commit ([a-f0-9]+)(?:, reversing changes made to ([a-f0-9]+))?\./;function lb(e){var t=ob.exec(e.subject),n=ab.exec(e.body);if(t&&n){var r,i=n[1],o=t[1],a=ib.exec(o);return a&&(r=parseInt(a[1],10)),{hash:i,subject:o,pr:r}}return null}var cb=/\B#\d+\b/g,sb=/^Merged? pull request (#\d+\b)/,ub=/^Merge branch '(.+)'/,db=/into (.+)$/;var fb=20,hb=(0,La.iv)({minHeight:fb,minWidth:fb,display:"flex",alignItems:"center",justifyContent:"center"});function pb(e){var t=function(e){switch(e){case"none":default:return null;case"commit":return(0,i.tZ)(mb,{});case"revert":return(0,i.tZ)(Zb,{});case"merge":return(0,i.tZ)(kb,{});case"boundary":return(0,i.tZ)(Eb,{});case"collapsed":return(0,i.tZ)(Ib,{})}}(e.type);return t?(0,i.tZ)("div",{css:hb,children:t}):null}var vb=(0,La.iv)({height:4,width:4,backgroundColor:Z.TV.foregroundDefault,borderRadius:"50%"});function mb(){return(0,i.tZ)("div",{css:vb})}var gb=(0,La.iv)({display:"flex",height:fb,width:fb,backgroundColor:Z.TV.orangeDimmest,borderRadius:"50%",alignItems:"center",justifyContent:"center"});function Zb(){return(0,i.tZ)("div",{css:gb,children:(0,i.tZ)(iZ.Z,{size:12,color:Z.TV.orangeStrongest})})}var yb=(0,La.iv)({display:"flex",height:fb,width:fb,backgroundColor:Z.TV.purpleDimmest,borderRadius:"50%",alignItems:"center",justifyContent:"center"}),bb=(0,La.iv)({position:"relative",height:9,width:13}),wb={position:"absolute",top:0,height:9,width:9,border:"1px solid ".concat(Z.TV.purpleStrongest),borderRadius:"50%"},xb=(0,La.iv)((0,_.Z)((0,R.Z)({},wb),{left:0})),Cb=(0,La.iv)((0,_.Z)((0,R.Z)({},wb),{right:0}));function kb(){return(0,i.tZ)("div",{css:yb,children:(0,i.BX)("div",{css:bb,children:[(0,i.tZ)("div",{css:xb}),(0,i.tZ)("div",{css:Cb})]})})}var Sb=(0,La.iv)({height:6,width:6,backgroundColor:Z.TV.backgroundDefault,border:"1px solid ".concat(Z.TV.backgroundHighest),borderRadius:"50%"});function Eb(){return(0,i.tZ)("div",{css:Sb})}var Tb=(0,La.iv)({display:"flex",height:fb,width:fb,backgroundColor:Z.TV.backgroundHighest,borderRadius:"50%",alignItems:"center",justifyContent:"center"}),Rb=(0,La.iv)({display:"flex",alignItems:"center",justifyContent:"center","div + div":{marginLeft:1}}),_b=(0,La.iv)({width:3,height:3,backgroundColor:Z.TV.foregroundDimmer,borderRadius:"50%"});function Ib(){return(0,i.tZ)("div",{css:Tb,children:(0,i.BX)("div",{css:Rb,children:[(0,i.tZ)("div",{css:_b}),(0,i.tZ)("div",{css:_b}),(0,i.tZ)("div",{css:_b})]})})}function Gb(e){var t=e.boundaryTop,n=void 0!==t&&t,r=e.boundaryBottom,o=void 0!==r&&r,a=e.joint,l=void 0===a?"top":a,c=e.hideTop,s=void 0!==c&&c,u=e.hideBottom,d=void 0!==u&&u;if(s&&d)return null;if(n===o&&!s&&!d)return(0,i.tZ)(Ab,{top:0,bottom:0,dashed:n&&o});var f=s?null:(0,i.tZ)(Db,{start:"top",joint:l,dashed:n}),h=d?null:(0,i.tZ)(Db,{start:"bottom",joint:l,dashed:o});return(0,i.BX)(i.HY,{children:[f,h]})}function Db(e){var t,n,r=e.start,a=e.joint,l=e.dashed,c=void 0!==l&&l,s="center"===a?(t={},(0,o.Z)(t,r,0),(0,o.Z)(t,"height","50%"),t):(n={},(0,o.Z)(n,r,0),(0,o.Z)(n,r===a?"height":a,8),n);return(0,i.tZ)(Ab,(0,_.Z)((0,R.Z)({},s),{dashed:c}))}var Pb=(0,La.iv)({position:"absolute",left:0,width:18}),Bb=(0,La.iv)({borderRight:"1px solid ".concat(Z.TV.outlineDimmest)}),Ub=(0,La.iv)({borderRight:"1px dashed ".concat(Z.TV.outlineDimmest)});function Ab(e){var t=e.top,n=e.bottom,r=e.height,o=e.dashed,a=void 0!==o&&o;return(0,i.tZ)("div",{css:[Pb,a?Ub:Bb,{top:t,bottom:n,height:r}]})}var Nb=(0,La.iv)({position:"absolute",top:4,right:8,zIndex:1}),Lb=(0,La.iv)({position:"relative",paddingTop:8,paddingBottom:8,paddingRight:8},Z.l0.colWithGap(4)),Xb=(0,La.iv)({display:"block",marginLeft:36,height:fb}),Mb=(0,La.iv)({marginLeft:36}),Ob=(0,La.iv)({marginLeft:36,marginRight:8,overflowX:"hidden"},Z.l0.mb(8),Z.l0.p(8),Z.l0.borderRadius(8)),Wb=(0,La.iv)(Z.l0.position.relative);function Fb(e){var t=e.boundaryTop,n=void 0!==t&&t,r=e.boundaryBottom,o=void 0!==r&&r,a=e.hideConnectorTop,c=void 0!==a&&a,s=e.hideConnectorBottom,u=void 0!==s&&s,d=e.joint,f=void 0===d?"top":d,h=e.marker,p=e.header,v=e.unfoldedContent,m=e.children,g=e.className,y=(0,l.useState)(!0),b=y[0],w=y[1];return(0,i.BX)(Z.G7,{className:g,css:Z.l0.position.relative,children:[(0,i.tZ)(Gb,{boundaryTop:n,boundaryBottom:o,joint:f,hideTop:c,hideBottom:u}),h?(0,i.tZ)(Hb,{joint:f,children:h}):null,v?(0,i.tZ)("div",{css:Nb,children:(0,i.tZ)(Vb,{folded:b,toggle:function(){return w(!b)}})}):null,(0,i.BX)(Z.G7,{css:Lb,children:[p?(0,i.tZ)(Z.G7,{css:Xb,children:p}):null,m?(0,i.tZ)(Z.G7,{css:Mb,children:m}):null]}),!v||b?null:(0,i.BX)(Z.G7,{css:Wb,children:[u?null:(0,i.tZ)(Ab,{top:0,bottom:0,dashed:o}),(0,i.tZ)(Z.Tg,{css:Ob,elevated:!0,children:v})]})]})}var jb=(0,La.iv)({position:"absolute",left:18,transform:"translateX(-50%)"}),zb={top:(0,La.iv)({top:8}),bottom:(0,La.iv)({bottom:8}),center:(0,La.iv)({top:"50%",transform:"translateX(-50%) translateY(-50%)"})};function Hb(e){var t=e.joint,n=void 0===t?"top":t,r=e.children;return(0,i.tZ)("div",{css:[jb,zb[n]],children:r})}function Vb(e){var t=e.folded,n=e.toggle;return(0,i.tZ)(Z.hU,{alt:t?"View details":"Hide details",onClick:n,children:t?(0,i.tZ)(Bf.Z,{}):(0,i.tZ)(Pf.Z,{})})}var qb=(0,La.iv)(Z.l0.rowWithGap(8),Z.l0.align.center,Z.l0.justify.spaceBetween,Z.l0.height("100%")),$b=(0,La.iv)(Z.l0.rowWithGap(4),Z.l0.center),Yb=(0,La.iv)(Z.l0.flex.shrink(0));function Kb(e){var t=e.text,n=(0,ln.Z)(e,["text"]);return(0,i.tZ)(Fb,(0,R.Z)({marker:(0,i.tZ)(pb,{type:"boundary"}),joint:"center",header:(0,i.BX)(Z.G7,{css:qb,children:[(0,i.tZ)(Z.RX,{}),(0,i.BX)(Z.G7,{css:$b,children:[(0,i.tZ)(Cl.Z,{size:12,color:Z.TV.foregroundDimmest}),(0,i.tZ)(Z.xv,{css:Yb,variant:"small",color:"dimmest",children:t})]}),(0,i.tZ)(Z.RX,{})]})},n))}var Qb=n(65600);function Jb(e){var t=e.name,n=e.avatar,r=void 0===n?null:n,o=e.allowPlaceholderAvatar,a=void 0!==o&&o,l=e.color,c=void 0===l?"default":l,s=e.small,u=void 0!==s&&s,d=e.flip,f=void 0!==d&&d;return(0,i.BX)(Z.G7,{css:[Z.l0.rowWithGap(4),Z.l0.align.baseline,f?Z.l0.flex.rowReverse:Z.l0.flex.row,Z.l0.flex.shrink(1)],children:[(0,i.tZ)(ew,{name:t,avatar:r,enablePlaceholder:a,small:u}),(0,i.tZ)(Z.xv,{css:[Z.l0.fontWeight.medium],color:c,variant:u?"small":"text",children:t})]})}function ew(e){var t=e.name,n=e.avatar,r=void 0===n?null:n,o=e.enablePlaceholder,a=void 0!==o&&o,l=e.small,c=void 0!==l&&l;return null===r?a?(0,i.tZ)(Qb.Z,{css:{alignSelf:"center"},size:c?12:16}):null:(0,i.tZ)(Z.qE,{css:{alignSelf:"center"},username:t,src:r,size:c?12:16})}function tw(e){var t=e.commit,n=(0,ln.Z)(e,["commit"]);return(0,i.tZ)(Fb,(0,_.Z)((0,R.Z)({marker:(0,i.tZ)(pb,{type:"commit"}),header:(0,i.tZ)(Z.xv,{css:Z.l0.fontWeight.medium,children:(0,i.tZ)(Uy,{subject:t.subject})}),unfoldedContent:t.body?(0,i.tZ)(Z.xv,{multiline:!0,children:(0,i.tZ)(Ny,{body:t.body})}):null},n),{children:(0,i.BX)(Z.G7,{css:[Z.l0.rowWithGap(8),Z.l0.align.baseline],children:[(0,i.tZ)(Jb,{name:t.author.name,email:t.author.email,color:"dimmer",allowPlaceholderAvatar:!0,small:!0}),(0,i.tZ)(Z.EK,{date:t.author.date,textColor:"dimmest",textVariant:"small"})]})}))}var nw=n(19736);function rw(e){var t,n=e.commit,r=e.info,o=(0,ln.Z)(e,["commit","info"]);return"branch"!==r.type&&(t="pull-request"===r.type&&r.subject?r.subject:n.subject),(0,i.tZ)(Fb,(0,_.Z)((0,R.Z)({marker:(0,i.tZ)(pb,{type:"merge"}),header:(0,i.BX)(Z.xv,{css:[Z.l0.rowWithGap(4),Z.l0.align.baseline],children:[(0,i.tZ)(Iy,{text:"merged"}),(0,i.tZ)(iw,{info:r,hash:n.hash,subject:n.subject})]}),unfoldedContent:!n.body||"pull-request"===r.type&&r.subject?null:(0,i.tZ)(Z.xv,{multiline:!0,children:(0,i.tZ)(Ny,{body:n.body})})},o),{children:(0,i.BX)(Z.G7,{css:[Z.l0.colWithGap(8)],children:[t?(0,i.tZ)(Z.xv,{color:"dimmer",variant:"small",children:(0,i.tZ)(Uy,{subject:t})}):null,(0,i.BX)(Z.G7,{css:[Z.l0.rowWithGap(8),Z.l0.align.baseline,Z.l0.flex.shrink(1)],children:[(0,i.tZ)(Jb,{name:n.author.name,email:n.author.email,color:"dimmer",allowPlaceholderAvatar:!0,small:!0}),(0,i.tZ)(Z.EK,{date:n.author.date,textColor:"dimmest",textVariant:"small"})]})]})}))}function iw(e){var t=e.info,n=e.hash,r=e.subject,o=(0,i.tZ)("span",{css:Z.l0.fontWeight.medium,children:r});switch(t.type){case"pull-request":return(0,i.BX)(i.HY,{children:[(0,i.tZ)("span",{children:"pull request"}),(0,i.tZ)(Dy,{id:t.id}),t.reverts&&t.reverts.pr?(0,i.BX)(i.HY,{children:[(0,i.tZ)("span",{children:"-"}),(0,i.tZ)(Ry,{text:"reverts"}),(0,i.tZ)(Dy,{id:t.reverts.pr})]}):null]});case"branch":return t.target?(0,i.BX)(i.HY,{children:[(0,i.tZ)(Xy,{name:t.source}),(0,i.tZ)("span",{children:"into"}),(0,i.tZ)(Xy,{name:t.target})]}):(0,i.BX)(i.HY,{children:[(0,i.tZ)("span",{children:"branch"}),(0,i.tZ)(Xy,{name:t.source})]});case"simple":return(0,i.BX)(i.HY,{children:[(0,i.tZ)(By,{hash:t.a}),(0,i.tZ)(nw.Z,{css:{alignSelf:"center"},size:12}),(0,i.tZ)(By,{hash:t.b})]});case"octopus":return(0,i.BX)(i.HY,{children:[(0,i.tZ)("span",{children:"commit"}),(0,i.tZ)(By,{hash:n}),(0,i.BX)("span",{children:["(",t.parents.length," parents)"]})]});default:return o}}function ow(e){var t=e.commit,n=e.info,r=(0,ln.Z)(e,["commit","info"]);return(0,i.tZ)(Fb,(0,_.Z)((0,R.Z)({marker:(0,i.tZ)(pb,{type:"revert"}),header:(0,i.BX)(Z.xv,{css:[Z.l0.rowWithGap(4),Z.l0.align.baseline],children:[(0,i.tZ)(Ry,{text:"reverted"}),(0,i.tZ)(By,{hash:n.hash}),(0,i.tZ)(Uy,{subject:n.subject,quoted:!0})]})},r),{children:(0,i.BX)(Z.G7,{css:[Z.l0.rowWithGap(8),Z.l0.align.baseline],children:[(0,i.tZ)(Jb,{name:t.author.name,email:t.author.email,color:"dimmer",allowPlaceholderAvatar:!0,small:!0}),(0,i.tZ)(Z.EK,{date:t.author.date,textColor:"dimmest",textVariant:"small"})]})}))}function aw(e){var t=e.button,n=(0,ln.Z)(e,["button"]);return(0,i.tZ)(Fb,(0,_.Z)((0,R.Z)({marker:(0,i.tZ)(pb,{type:"boundary"}),joint:"center"},n),{children:(0,i.tZ)(Z.G7,{children:t})}))}function lw(e){var t=e.items;return(0,i.tZ)(Z.G7,{children:t.map((function(e,n){return function(e,t){var n=e[t],r=0===t,o=t===e.length-1;if("boundary"===n.type)return(0,i.tZ)(Kb,{text:n.text,hideConnectorTop:r,hideConnectorBottom:o,boundaryTop:!0,boundaryBottom:!0},n.text);if("button"===n.type)return(0,i.tZ)(aw,{button:n.button,hideConnectorTop:r,hideConnectorBottom:o,boundaryTop:!0,boundaryBottom:!0},n.key);var a=e[t-1]?e[t-1].type:null,l=e[t+1]?e[t+1].type:null,c="commit"!==a,s="commit"!==l;return(0,i.tZ)(cw,{commit:n.commit,hideConnectorTop:r,hideConnectorBottom:o,boundaryTop:c,boundaryBottom:s},n.commit.hash)}(t,n)}))})}function cw(e){var t=e.commit,n=(0,ln.Z)(e,["commit"]),r=function(e){if("GitHub"===e.committer.name&&"noreply@github.com"===e.committer.email){var t=e.subject.match(cb);if(t){var n,r=parseInt(t[t.length-1].slice(1),10);if(r)return ib.test(e.subject)&&(n=e.subject.replace(ib,"").trim()),!n&&sb.test(e.subject)&&e.body&&-1===e.body.indexOf("\n")&&(n=e.body),{type:"pull-request",id:r,subject:n,reverts:lb(e)}}}if(sb.test(e.subject)){var i,o=sb.exec(e.subject);if(o)return e.body&&-1===e.body.indexOf("\n")&&(i=e.body),{type:"pull-request",id:parseInt(o[1].slice(1),10),subject:i,reverts:lb(e)}}if(ub.test(e.subject)){var a=ub.exec(e.subject);if(a){var l=db.exec(e.subject);return{type:"branch",source:a[1],target:l?l[1]:null}}}return e.parents&&e.parents.length>2?{type:"octopus",parents:e.parents}:e.parents&&e.parents.length>1?{type:"simple",a:e.parents[0],b:e.parents[1]}:null}(t);if(r)return(0,i.tZ)(rw,(0,R.Z)({info:r,commit:t},n));var o=lb(t);return o?(0,i.tZ)(ow,(0,R.Z)({info:o,commit:t},n)):(0,i.tZ)(tw,(0,R.Z)({commit:t},n))}var sw=(0,La.F4)({from:{opacity:0},to:{opacity:1}}),uw=(0,La.iv)({animation:"".concat(sw," 0.125s 0.25s linear backwards")},Z.l0.flex.grow(1),Z.l0.display.flex,Z.l0.center);function dw(){return(0,i.tZ)(Z.G7,{css:uw,children:(0,i.tZ)(ur.Z,{size:48})})}var fw=n(11520);function hw(e){var t,n,r,o,a,c,s=e.status,u=(0,l.useState)(!1),d=u[0],h=u[1],p=my(),v=(0,f.Z)().git,m=s.branch,g=null!==(o=null===(t=s.upstream)||void 0===t?void 0:t.branch)&&void 0!==o?o:null,y=null!==(a=null===(n=s.upstream)||void 0===n?void 0:n.behind)&&void 0!==a?a:0,b=null!==(c=null===(r=s.upstream)||void 0===r?void 0:r.ahead)&&void 0!==c?c:0,w=s.changes.length>0,x=ey(function(){var e=(0,de.Z)((function(e){var t;return(0,fe.__generator)(this,(function(n){switch(n.label){case 0:return m&&g&&y&&!w?[4,e.canMergeBranches(m,g)]:[2,{canPull:!1,error:null}];case 1:return(t=n.sent()).error?(p(t.error),[2,t]):[2,{canPull:t.canMerge,error:null}]}}))}));return function(t){return e.apply(this,arguments)}}(),[p,m,g,y,w],{keepStaleResult:!1});if(null===x||void 0===x?void 0:x.error)return null;var C,k,S=null===x,E=null!==(C=null===x||void 0===x?void 0:x.canPull)&&void 0!==C&&C;function T(){return(T=(0,de.Z)((function(){var e;return(0,fe.__generator)(this,(function(t){switch(t.label){case 0:return d?[2]:(h(!0),[4,v.pull({mode:fw.T.REBASE})]);case 1:return e=t.sent(),v.forceRefresh(),e.error?(p(e.error),h(!1)):xy("upstream-pulled"),[2]}}))}))).apply(this,arguments)}return d?k="Pulling...":m?w?k="Cannot pull with uncommitted changes":0===y?k="Nothing to pull":S?k="Checking for merge conflicts\u2026":E?(k="Pull ".concat(y," ").concat((0,vh.Z)("commit",y)),b>0&&(k+=" with rebase")):k="Cannot pull due to merge conflict":k="Cannot pull - the HEAD is detached",(0,i.tZ)(Z.zx,{text:k,iconLeft:S||d?(0,i.tZ)(ur.Z,{}):(0,i.tZ)(vf.Z,{}),onClick:function(){return T.apply(this,arguments)},loading:S||d,disabled:!E})}var pw=n(9302);function vw(e){var t,n,r,o,a,c=e.status,s=(0,l.useState)(!1),u=s[0],d=s[1],h=my(),p=(0,f.Z)().git,v=null===c.branch,m=null!==(r=null===(t=c.upstream)||void 0===t?void 0:t.behind)&&void 0!==r?r:0,g=null!==(o=null===(n=c.upstream)||void 0===n?void 0:n.ahead)&&void 0!==o?o:0,y=v||m>0||0===g;function b(){return(b=(0,de.Z)((function(){var e;return(0,fe.__generator)(this,(function(t){switch(t.label){case 0:return y||u?[2]:(d(!0),[4,p.push()]);case 1:return e=t.sent(),p.forceRefresh(),e.error?(h(e.error),d(!1)):xy("upstream-pushed"),[2]}}))}))).apply(this,arguments)}return a=u?"Pushing...":v?"Cannot push - the HEAD is detached":0===g?"Nothing to push":m>0?"Cannot push due to unpulled changes":"Push ".concat(g," ").concat((0,vh.Z)("commit",g)),(0,i.tZ)(Z.zx,{text:a,iconLeft:u?(0,i.tZ)(ur.Z,{}):(0,i.tZ)(pw.Z,{}),onClick:function(){return b.apply(this,arguments)},disabled:y,loading:u})}function mw(e){var t=e.branch,n=(0,l.useState)(!1),r=n[0],o=n[1],a=my(),c=(0,f.Z)().git;function s(){return(s=(0,de.Z)((function(){var e,n;return(0,fe.__generator)(this,(function(i){switch(i.label){case 0:return r?[2]:(o(!0),e=t.type===YZ.HO.REMOTE?"refs/remotes/".concat(t.remote,"/").concat(t.name):"refs/heads/".concat(t.name),[4,c.switchBranch(e)]);case 1:return(n=i.sent()).error?(a(n.error),o(!1)):(c.forceRefresh(),xy("branch-switched")),[2]}}))}))).apply(this,arguments)}(0,l.useEffect)((function(){return o(!1)}),[t]);var u=r?"Switching to branch...":"Switch to Branch";return(0,i.tZ)(Z.zx,{text:u,colorway:"primary",onClick:function(){return s.apply(this,arguments)},iconLeft:r?(0,i.tZ)(ur.Z,{}):(0,i.tZ)(ky.Z,{}),loading:r})}var gw=n(58043);function Zw(e){var t=e.branch,n=(0,l.useState)(!1),r=n[0],o=n[1],a=my(),c=(0,f.Z)().git,s=ey(function(){var e=(0,de.Z)((function(e){var t,n,r;return(0,fe.__generator)(this,(function(i){switch(i.label){case 0:return[4,e.getRemotes()];case 1:return(t=i.sent()).error?(a(t.error),[2,t]):(n=t.remotes,r="",(null===n||void 0===n?void 0:n.size)&&(r=n.has("origin")?"origin":n.keys().next().value),[2,{remote:r,error:null}])}}))}));return function(t){return e.apply(this,arguments)}}(),[a],{keepStaleResult:!1});if(null===s||void 0===s?void 0:s.error)return null;var u,d=s?s.remote:null,h=null===d,p=t.type!==YZ.HO.LOCAL||!d;function v(){return(v=(0,de.Z)((function(){return(0,fe.__generator)(this,(function(e){switch(e.label){case 0:return!d||r?[2]:(o(!0),[4,c.push({publish:{remote:d}})]);case 1:return e.sent().error?o(!1):(c.forceRefresh(),xy("branch-published-to-remote")),[2]}}))}))).apply(this,arguments)}return u=r?"Publishing...":t.type!==YZ.HO.LOCAL?"Branch has already been published":h?"Checking if branch can be published...":d?"Publish branch as '".concat(d,"/").concat(t.name,"'"):"No remotes to publish to",(0,i.tZ)(Z.zx,{text:u,iconLeft:h||r?(0,i.tZ)(ur.Z,{}):(0,i.tZ)(gw.Z,{}),onClick:function(){return v.apply(this,arguments)},loading:h||r,disabled:p})}var yw=n(39708);function bw(e){for(var t=e.split("/").slice(0,-1),n=[],r=0;r<t.length;r++){var i=t.slice(r).join("/")+"/";0!==r&&(i="\u2026/"+i),n.push(i)}return n.reverse()}var ww=(0,Z.Xb)({actionsIndex:[Z.l0.height(20),Z.l0.align.center,Z.l0.borderRadius(4)],actionsWorktree:[Z.l0.height(20),Z.l0.flex.row,Z.l0.align.center,Z.l0.borderRadius(4)],unstage:[Z.l0.height(20),Z.l0.width(20),Z.l0.borderRadius(2)],stage:[Z.l0.px(12),Z.l0.height(20),Z.l0.width(20),Z.l0.borderRadius(2)],reset:[Z.l0.pl(16),Z.l0.pr(12),Z.l0.height(20),Z.l0.width(20),Z.l0.borderRadius(2)],resetIcon:{transform:"scale(0.85)"},divider:[Z.l0.height("75%"),Z.l0.width(1),Z.l0.backgroundColor.outlineStronger]});function xw(e){var t=e.file,n=e.list,r=e.stageFiles,o=e.disabled,a=void 0!==o&&o,c=(0,l.useState)(!1),s=c[0],u=c[1],d=(0,l.useState)(!1),f=d[0],h=d[1];function p(){return(p=(0,de.Z)((function(){return(0,fe.__generator)(this,(function(e){switch(e.label){case 0:return a?[2]:(u(!0),[4,r({reset:[t.path]})]);case 1:return e.sent(),u(!1),[2]}}))}))).apply(this,arguments)}function v(){return(v=(0,de.Z)((function(){return(0,fe.__generator)(this,(function(e){switch(e.label){case 0:return a?[2]:(u(!0),[4,r({add:[t.path]})]);case 1:return e.sent(),u(!1),[2]}}))}))).apply(this,arguments)}function m(){return(m=(0,de.Z)((function(){return(0,fe.__generator)(this,(function(e){return a||(h(!0),h(!1)),[2]}))}))).apply(this,arguments)}return a=a||f||s,"index"===n?(0,i.tZ)(Z.Tg,{elevated:!0,css:ww.actionsIndex,children:(0,i.tZ)(Z.hU,{css:ww.unstage,alt:"Unstage changes",size:18,tooltipDelay:"long",onClick:function(){return p.apply(this,arguments)},disabled:a,children:s?(0,i.tZ)(ur.Z,{}):(0,i.tZ)(rZ.Z,{})})}):(0,i.BX)(Z.Tg,{elevated:!0,css:ww.actionsWorktree,children:[(0,i.tZ)(Z.hU,{css:ww.reset,alt:"Reset changes (coming soon)",size:18,tooltipDelay:"long",onClick:function(){return m.apply(this,arguments)},disabled:!0,children:f?(0,i.tZ)(ur.Z,{}):(0,i.tZ)(iZ.Z,{css:ww.resetIcon})}),(0,i.tZ)("div",{css:ww.divider}),(0,i.tZ)(Z.hU,{css:ww.stage,alt:"Stage changes",size:18,tooltipDelay:"long",onClick:function(){return v.apply(this,arguments)},disabled:a,children:s?(0,i.tZ)(ur.Z,{}):(0,i.tZ)(gv.Z,{})})]})}var Cw=(0,Z.Xb)({path:[Z.l0.rowWithGap(8),Z.l0.flex.grow(1)],source:[Z.l0.color.foregroundDimmest],sourceArrow:[Z.l0.mx(8)]});function kw(e){var t=e.path,n=e.type,r=e.prefix,o=e.source;return(0,i.BX)(Z.G7,{css:Cw.path,children:[(0,i.tZ)(D.Z,{path:t}),(0,i.BX)(Z.xv,{children:[(0,i.tZ)(Wy,{path:t,prefix:r,clickable:n!==yw.h.DELETED}),o?(0,i.BX)("span",{css:Cw.source,children:[(0,i.tZ)("span",{css:Cw.sourceArrow,children:"\u2190"}),(0,i.tZ)(Wy,{path:o})]}):null]})]})}var Sw=(0,La.iv)({width:52,height:20,fontSize:10},Z.l0.display.flex,Z.l0.center,Z.l0.borderRadius(4));function Ew(e){var t,n,r;switch(e.type){case yw.h.ADDED:case yw.h.UNTRACKED:t="Added",n=Z.TV.greenDimmest,r=Z.TV.greenStrongest;break;case yw.h.MODIFIED:t="Modified",n=Z.TV.yellowDimmest,r=Z.TV.yellowStrongest;break;case yw.h.DELETED:t="Deleted",n=Z.TV.redDimmest,r=Z.TV.redStrongest;break;case yw.h.RENAMED:t="Renamed",n=Z.TV.tealDimmest,r=Z.TV.tealStrongest;break;case yw.h.COPIED:t="Copy",n=Z.TV.limeDimmest,r=Z.TV.limeStrongest;break;default:return null}return(0,i.tZ)(Z.G7,{style:{backgroundColor:n,color:r},css:Sw,children:(0,i.tZ)("span",{children:t})})}var Tw=(0,La.iv)(Z.l0.rowWithGap(4));function Rw(e){var t,n=e.file,r=e.list,o=e.stageFiles,a=e.pathMap,l=e.disabled,c=void 0!==l&&l,s=null===a||void 0===a?void 0:a.get(n.path),u=null===(t=n.source)||void 0===t?void 0:t.path,d="index"===r?n.type.index:n.type.worktree;return(0,i.BX)(Z.G7,{css:Tw,children:[(0,i.tZ)(kw,{path:n.path,type:d,prefix:s,source:u}),(0,i.tZ)(Ew,{type:d}),(0,i.tZ)(xw,{file:n,list:r,stageFiles:o,disabled:c})]})}var _w=(0,Z.Xb)({actions:[Z.l0.rowWithGap(2),Z.l0.backgroundColor.backgroundHighest,Z.l0.borderRadius(8)],buttonReset:[Z.l0.borderRadius(8,0,0,8)],buttonStage:[Z.l0.borderRadius(0,8,8,0)],divider:[Z.l0.my(8),Z.l0.width(1),Z.l0.backgroundColor.outlineStronger]});function Iw(e){var t=e.type,n=e.stageFiles,r=e.disabled,o=void 0!==r&&r,a=(0,l.useState)(!1),c=a[0],s=a[1],u=(0,l.useState)(!1),d=u[0],f=u[1];function h(){return p.apply(this,arguments)}function p(){return(p=(0,de.Z)((function(){return(0,fe.__generator)(this,(function(e){switch(e.label){case 0:return o?[2]:(s(!0),[4,n({all:"index"!==t})]);case 1:return e.sent(),s(!1),[2]}}))}))).apply(this,arguments)}function v(){return(v=(0,de.Z)((function(){return(0,fe.__generator)(this,(function(e){return o||(f(!0),f(!1)),[2]}))}))).apply(this,arguments)}return o=o||d||c,"index"===t?(0,i.tZ)(Z.zx,{text:"Unstage All",iconLeft:c?(0,i.tZ)(ur.Z,{}):(0,i.tZ)(rZ.Z,{}),onClick:h,disabled:o,loading:c,small:!0}):(0,i.BX)(Z.G7,{css:_w.actions,children:[(0,i.tZ)(Z.zx,{css:_w.buttonReset,text:"Reset All",iconLeft:d?(0,i.tZ)(ur.Z,{}):(0,i.tZ)(iZ.Z,{}),onClick:function(){return v.apply(this,arguments)},loading:d,disabled:!0,small:!0}),(0,i.tZ)("div",{css:_w.divider}),(0,i.tZ)(Z.zx,{css:_w.buttonStage,text:"Stage All",iconLeft:c?(0,i.tZ)(ur.Z,{}):(0,i.tZ)(gv.Z,{}),onClick:h,disabled:o,loading:c,small:!0})]})}var Gw=(0,Z.Xb)({list:[Z.l0.pt(4),Z.l0.pb(8),Z.l0.px(8),Z.l0.colWithGap(4)],listFolded:[Z.l0.py(4),Z.l0.px(8)],header:[Z.l0.py(4),Z.l0.rowWithGap(4),Z.l0.align.center],headerText:[Z.l0.flex.grow(1)]});function Dw(e){var t=e.files,n=e.type,r=e.stageFiles,o=e.pathMap,a=e.foldable,c=void 0!==a&&a,s=e.disabled,u=void 0!==s&&s,d=(0,l.useState)(!1),f=d[0],h=d[1];return c&&f?(0,i.tZ)(Z.G7,{css:Gw.listFolded,children:(0,i.BX)(Z.G7,{css:Gw.header,children:[(0,i.tZ)(Pw,{files:t,type:n,setFolded:h,foldable:!0,folded:!0}),(0,i.tZ)(Iw,{type:n,stageFiles:r,disabled:u})]})}):(0,i.BX)(Z.G7,{css:Gw.list,children:[(0,i.BX)(Z.G7,{css:Gw.header,children:[(0,i.tZ)(Pw,{files:t,type:n,setFolded:h,foldable:c}),(0,i.tZ)(Iw,{type:n,stageFiles:r,disabled:u})]}),t.map((function(e){return(0,i.tZ)(Rw,{file:e,list:n,stageFiles:r,pathMap:o,disabled:u},e.path)}))]})}function Pw(e){var t=e.files,n=e.type,r=e.setFolded,o=e.foldable,a=void 0!==o&&o,l=e.folded,c=void 0!==l&&l,s="index"===n?"staged":"changed",u=(0,vh.Z)("file",t.length),d="".concat(t.length," ").concat(s," ").concat(u);return a&&c?(0,i.BX)(i.HY,{children:[(0,i.tZ)(Z.hU,{alt:"Show list",onClick:function(){return r(!1)},children:(0,i.tZ)(Bf.Z,{})}),(0,i.tZ)(Z.xv,{css:Gw.headerText,children:d})]}):(0,i.BX)(i.HY,{children:[a?(0,i.tZ)(Z.hU,{alt:"Hide list",onClick:function(){return r(!0)},children:(0,i.tZ)(Pf.Z,{color:Z.TV.foregroundDimmest})}):null,(0,i.tZ)(Z.xv,{css:Gw.headerText,color:"dimmest",children:d})]})}var Bw=[{"& > span:first-child":[Z.l0.flex.grow(1),Z.l0.textAlign.left]},{"& > span":[Z.l0.flex.shrink(1)]}],Uw=(0,Z.Xb)({buttonFolded:[Bw,Z.l0.fontWeight.medium],buttonUnfolded:[Bw,Z.l0.fontWeight.medium,Z.l0.border({color:Z.TV.outlineDimmer,direction:"bottom"}),Z.l0.borderRadius(8,8,0,0)],container:[Z.l0.flex.grow(1),Z.l0.borderRadius(8)],lists:[Z.l0.borderRadius(0,0,8,8)],divider:[Z.l0.height(1),Z.l0.minHeight(1),Z.l0.width("100%"),Z.l0.backgroundColor.outlineDimmer],autoStageMessage:[Z.l0.pt(4),Z.l0.pb(8),Z.l0.px(4),Z.l0.center],noChangesMessage:[Z.l0.py(16),Z.l0.px(4),Z.l0.center],buttonText:[Z.l0.flex.grow(1)],details:[Z.l0.rowWithGap(4),Z.l0.fontWeight.normal,Z.l0.color.foregroundDimmest]});function Aw(e){var t=e.status,n=e.stageFiles,r=e.disabled,o=void 0!==r&&r,c=(0,l.useState)(!1),s=c[0],u=c[1],d=(0,l.useState)(!1),f=d[0],h=d[1],p=(0,l.useMemo)((function(){return function(e){if(0===e.length)return new Map;if(1===e.length)return new Map([[e[0],null]]);var t=new Map,n=!0,r=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var c=o.value,s=(0,m.UO)(c),u=t.get(s);u||(u=[],t.set(s,u)),u.push(c)}}catch(y){r=!0,i=y}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}var d=new Map,f=!0,h=!1,p=void 0;try{for(var v,g=function(){var e=function(e){var t=[],i=new Map,o=!0,l=!1,c=void 0;try{for(var s,u=n[Symbol.iterator]();!(o=(s=u.next()).done);o=!0){var f=(0,a.Z)(s.value,2),h=f[0],p=f[1];if(!r.has(h)){var v=p[e];v||(v=p[p.length-1]),t.push(v),i.set(v,h)}}}catch(y){l=!0,c=y}finally{try{o||null==u.return||u.return()}finally{if(l)throw c}}if(0===t.length)return"break";var m=!0,g=!1,Z=void 0;try{for(var b,w=function(){var e=b.value,n=i.get(e);if(void 0===n)throw new Error("Unpopulated segment map");1===t.filter((function(t){return t===e})).length&&(r.add(n),d.set(n,e))},x=t[Symbol.iterator]();!(m=(b=x.next()).done);m=!0)w()}catch(y){g=!0,Z=y}finally{try{m||null==x.return||x.return()}finally{if(g)throw Z}}},t=(0,a.Z)(v.value,2)[1];if(1===t.length)return d.set(t[0],null),"continue";var n=new Map,r=new Set,i=0,o=!0,l=!1,c=void 0;try{for(var s,u=t[Symbol.iterator]();!(o=(s=u.next()).done);o=!0){var f=s.value;if(-1!==f.indexOf("/")){var h=bw(f);n.set(f,h),h.length>i&&(i=h.length)}else d.set(f,null),r.add(f)}}catch(y){l=!0,c=y}finally{try{o||null==u.return||u.return()}finally{if(l)throw c}}for(var p=0;p<=i&&"break"!==e(p);p++);if(r.size!==t.length){var m=!0,g=!1,Z=void 0;try{for(var b,w=t[Symbol.iterator]();!(m=(b=w.next()).done);m=!0){var x=b.value;if(!r.has(x)){var C=x.split("/").slice(0,-1).join("/");d.set(x,C)}}}catch(y){g=!0,Z=y}finally{try{m||null==w.return||w.return()}finally{if(g)throw Z}}}},Z=t[Symbol.iterator]();!(f=(v=Z.next()).done);f=!0)g()}catch(y){h=!0,p=y}finally{try{f||null==Z.return||Z.return()}finally{if(h)throw p}}return d}(t.changes.map((function(e){return e.path})))}),[t]),v=(0,l.useMemo)((function(){var e=[],n=[],r=!0,i=!1,o=void 0;try{for(var a,l=t.changes[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;c.staged&&e.push(c),c.type.worktree!==yw.h.UNMODIFIED&&n.push(c)}}catch(s){i=!0,o=s}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return[e,n]}),[t.changes]),g=v[0],y=v[1],b=g.length>0&&y.length>0;if(s)return(0,i.tZ)(Nw,{setFolded:u,changeCount:y.length,stagedCount:g.length,disabled:o,folded:!0});if(0===g.length&&0===y.length)return(0,i.BX)(Z.G7,{style:{opacity:o?.725:void 0},css:Uw.container,children:[(0,i.tZ)(Nw,{setFolded:u,changeCount:y.length,stagedCount:g.length,disabled:o}),(0,i.tZ)(Z.Tg,{css:Uw.lists,elevated:!0,children:(0,i.tZ)(Z.G7,{css:Uw.noChangesMessage,children:(0,i.tZ)(Z.xv,{color:"dimmest",children:"No changed or staged files."})})})]});function w(e){return x.apply(this,arguments)}function x(){return(x=(0,de.Z)((function(e){return(0,fe.__generator)(this,(function(t){switch(t.label){case 0:return"all"in e?(h(!0),[4,n(e)]):[3,2];case 1:return t.sent(),h(!1),[3,4];case 2:return[4,n(e)];case 3:t.sent(),t.label=4;case 4:return[2]}}))}))).apply(this,arguments)}return(0,i.BX)(Z.G7,{style:{opacity:o?.725:void 0},css:Uw.container,children:[(0,i.tZ)(Nw,{setFolded:u,changeCount:y.length,stagedCount:g.length,disabled:o}),(0,i.BX)(Z.Tg,{css:Uw.lists,elevated:!0,children:[0===g.length?null:(0,i.tZ)(Dw,{type:"index",files:g,stageFiles:w,pathMap:p,foldable:b,disabled:o||f}),b?(0,i.tZ)("div",{css:Uw.divider}):null,0===y.length?null:(0,i.BX)(i.HY,{children:[(0,i.tZ)(Dw,{type:"worktree",files:y,stageFiles:w,pathMap:p,foldable:b,disabled:o||f}),b?null:(0,i.tZ)(Z.G7,{css:Uw.autoStageMessage,children:(0,i.tZ)(Z.xv,{variant:"small",color:"dimmest",children:"Committing will automatically stage your changes."})})]})]})]})}function Nw(e){var t=e.folded,n=void 0!==t&&t,r=e.setFolded,o=e.changeCount,a=e.stagedCount,l=e.disabled,c=void 0!==l&&l;return(0,i.tZ)(Z.zx,{css:n?Uw.buttonFolded:Uw.buttonUnfolded,text:"Staging Area",secondaryText:(0,i.tZ)(Lw,{folded:n,changeCount:o,stagedCount:a}),onClick:function(){return r(!n)},iconRight:n?(0,i.tZ)(Bf.Z,{}):(0,i.tZ)(Pf.Z,{}),disabled:c})}function Lw(e){var t=e.folded,n=e.changeCount,r=e.stagedCount;if(!t)return null;var o=n>0,a=r>0;return o||a?(0,i.BX)("span",{css:Uw.details,children:[o?(0,i.BX)("span",{children:[n," ",(0,vh.Z)("change",n)]}):null,o&&a?(0,i.tZ)("span",{children:"/"}):null,a?(0,i.BX)("span",{children:[r," staged"]}):null]}):(0,i.tZ)("span",{css:Uw.details,children:(0,i.tZ)("span",{children:"no changes"})})}var Xw=(0,La.iv)(Z.l0.p(8),Z.l0.colWithGap(12),Z.l0.borderRadius(0,0,8,8)),Mw=(0,La.iv)({borderBottom:"1px solid ".concat(Z.TV.outlineDimmer)},Z.l0.fontWeight.medium,Z.l0.borderRadius(8,8,0,0),Z.l0.justify.spaceBetween),Ow=(0,La.iv)(Z.l0.display.inlineFlex,Z.l0.rowWithGap(4));function Ww(e){var t=e.message,n=e.disabled,r=void 0!==n&&n,o=e.onMessageChange,a=e.onCommitShortcut,c=function(e,t){e=e.replaceAll("\n"," "),o(e+(t?"\n\n"+t:""))},s=(0,l.useState)(!0),u=s[0],d=s[1],f=(0,l.useState)(!1),h=f[0],p=f[1],v=(0,l.useRef)(null),m=(0,l.useRef)(null),g=(0,zf.Z)(t.split("\n\n")),y=g[0],b=void 0===y?"":y,w=g.slice(1).join("\n\n");return(0,i.BX)(Z.G7,{children:[(0,i.tZ)(Z.zx,{css:Mw,text:(0,i.BX)("span",{css:Ow,children:[(0,i.tZ)("span",{children:"Commit Message"}),u?(0,i.tZ)(ex,{}):null]}),onClick:function(){return d((function(e){return!e}))},iconRight:u?(0,i.tZ)(Bf.Z,{}):(0,i.tZ)(Pf.Z,{})}),(0,i.BX)(Z.Tg,{css:Xw,elevated:!0,children:[(0,i.tZ)(Yw,{ref:v,value:b,compact:u,disabled:r,onChange:function(e){c(e,w)},onNewline:function(){if(u)d(!1),p(!0);else{if(!m.current)return;m.current.focus(),m.current.setSelectionRange(0,0)}},onCommitShortcut:a}),u&&!w?null:(0,i.tZ)(Qw,{ref:m,value:w,compact:u,disabled:r,onChange:function(e){var t;(c(b,e),u&&!e)?null===(t=v.current)||void 0===t||t.focus():u&&d(!1)},onBackspaceWhenEmpty:function(){v.current&&v.current.focus()},onCommitShortcut:a,onFocus:function(){h&&p(!1)},autoFocus:h})]})]})}var Fw=(0,La.iv)(Z.l0.colWithGap(8)),jw=(0,La.iv)(Z.l0.colWithGap(8)),zw=(0,La.iv)({height:32,width:"100%",resize:"none",border:"none"}),Hw=(0,La.iv)({width:"100%",resize:"none",border:"none"}),Vw=(0,La.iv)(zw,{opacity:.5}),qw=(0,La.iv)(Hw,{opacity:.5});function $w(e,t){var n=e.value,r=e.compact,o=void 0!==r&&r,a=e.disabled,l=void 0!==a&&a,c=e.onChange,s=e.onNewline,u=e.onCommitShortcut,d=u?"Summary of your commit (Ctrl+Enter to commit)":"Summary of your commit";return(0,i.BX)(Z.G7,{css:Fw,children:[o?null:(0,i.tZ)(Z.xv,{variant:"small",color:"dimmer",children:(0,i.BX)("span",{css:Ow,children:[(0,i.tZ)("span",{children:"Summary"}),(0,i.tZ)(ex,{})]})}),(0,i.tZ)(Z.B,{ref:t,css:l?Vw:zw,placeholder:d,value:n,disabled:l,onChange:function(e){return null===c||void 0===c?void 0:c(e.currentTarget.value)},onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),e.ctrlKey?null===u||void 0===u||u():null===s||void 0===s||s())}})]})}var Yw=(0,l.forwardRef)($w);function Kw(e,t){var n=e.value,r=e.compact,o=void 0!==r&&r,a=e.disabled,l=void 0!==a&&a,c=e.autoFocus,s=void 0!==c&&c,u=e.onChange,d=e.onBackspaceWhenEmpty,f=e.onCommitShortcut,h=e.onFocus,p=(0,Il.Z)().ref,v=f?"Description of your commit (Ctrl+Enter to commit)":"Description of your commit";return(0,i.BX)(Z.G7,{css:jw,children:[o?null:(0,i.tZ)(Z.xv,{variant:"small",color:"dimmer",children:"Description"}),(0,i.tZ)(Z.B,{ref:o?t:(0,Wl.l)(t,p),css:l?qw:Hw,placeholder:v,value:n,disabled:l,onChange:function(e){return null===u||void 0===u?void 0:u(e.currentTarget.value)},onKeyDown:function(e){"Enter"===e.key&&e.ctrlKey?(e.preventDefault(),e.stopPropagation(),null===f||void 0===f||f()):"Backspace"===e.key&&""===n&&(e.preventDefault(),e.stopPropagation(),null===d||void 0===d||d())},onFocus:h,autoFocus:s})]})}var Qw=(0,l.forwardRef)(Kw),Jw=(0,La.iv)(Z.l0.color.accentNegativeStronger);function ex(){return(0,i.tZ)(Z.u,{tooltip:"This field is required.",placement:"top",children:(0,i.tZ)("span",{css:Jw,children:"*"})})}var tx=(0,La.iv)(Z.l0.colWithGap(8));function nx(e){var t=e.status,n=(0,l.useState)(t),r=n[0],o=n[1],a=(0,l.useState)(""),c=a[0],s=a[1],u=(0,l.useState)(0),d=u[0],h=u[1],p=(0,l.useState)(!1),v=p[0],m=p[1],g=my();(0,l.useEffect)((function(){return o(t)}),[t]);var y=(0,f.Z)().git;if(!r||!r.changes.length)return(0,i.tZ)(Z.G7,{css:tx,children:(0,i.tZ)(Z.xv,{color:"dimmest",children:"There are no changes to commit."})});var b=r.changes.length,w=r.changes.filter((function(e){return e.staged})).length;function x(){return(x=(0,de.Z)((function(e){var t,n;return(0,fe.__generator)(this,(function(r){switch(r.label){case 0:return v?[2]:(h((function(e){return e+1})),[4,y.stageFiles(e)]);case 1:return(t=r.sent()).error?[3,3]:[4,y.status()];case 2:return(n=r.sent()).error?g(n.error):o(n),y.forceRefresh(),[3,4];case 3:g(t.error),r.label=4;case 4:return h((function(e){return e-1})),[2]}}))}))).apply(this,arguments)}function C(){return k.apply(this,arguments)}function k(){return(k=(0,de.Z)((function(){var e,t;return(0,fe.__generator)(this,(function(n){switch(n.label){case 0:return v||0===b||d>0?[2]:(m(!0),0!==w?[3,2]:[4,y.stageFiles({all:!0})]);case 1:n.sent(),n.label=2;case 2:return[4,y.commit({message:c})];case 3:return(e=n.sent()).error?(g(e.error),m(!1),[3,6]):[3,4];case 4:return xy("commit-created",{hasDescription:-1!==c.trim().indexOf("\n\n")}),[4,y.status()];case 5:(t=n.sent()).error?g(t.error):y.forceRefresh(),(t.error||0!==t.changes.length)&&(s(""),m(!1),t.error?g(t.error):o(t)),n.label=6;case 6:return[2]}}))}))).apply(this,arguments)}var S="Nothing to commit";if(v)S="Committing...";else if(w>0){var E=(0,vh.Z)("change",w);S="Commit ".concat(w," staged ").concat(E)}else b>0&&0===w&&(S="Stage and commit all changes");var T=!c||0===b||d>0||v;return(0,i.BX)(Z.G7,{css:tx,children:[(0,i.tZ)(Ww,{message:c,disabled:v,onMessageChange:s,onCommitShortcut:C}),(0,i.tZ)(Aw,{status:r,stageFiles:function(e){return x.apply(this,arguments)},disabled:v}),(0,i.tZ)(Z.zx,{text:S,onClick:C,disabled:T,loading:v,colorway:"primary",iconLeft:(0,i.tZ)(wr.Z,{}),stretch:!0})]})}var rx=(0,La.iv)(Z.l0.py(8),Z.l0.px(4),Z.l0.colWithGap(8)),ix=(0,La.iv)(Z.l0.colWithGap(8)),ox=(0,La.iv)(Z.l0.pt(8),Z.l0.pb(16),Z.l0.px(8),Z.l0.colWithGap(8),Z.l0.border({color:Z.TV.outlineDimmest,direction:"bottom"}));function ax(e){var t,n,r=e.status,o=e.branch,c=e.current,s=void 0!==c&&c,u=function(e,t,n){var r=my(),i=ey(function(){var r=(0,de.Z)((function(r){var i,o,l,c,s,u,d,f,h;return(0,fe.__generator)(this,(function(p){switch(p.label){case 0:return e?!e.tracking||0===t&&0===n?(i=e.type===YZ.HO.REMOTE?"".concat(e.remote,"/").concat(e.name):e.name,[4,r.log({max:100,revRange:i})]):[3,2]:[2,{error:null}];case 1:return(o=p.sent()).error?[2,o]:[2,{log:o.commits,error:null}];case 2:return l="".concat(e.remote,"/").concat(e.name),[4,Promise.all([r.log({max:100,revRange:e.name}),r.log({max:100,revRange:"".concat(e.name,"..").concat(l)}),r.log({max:100,revRange:"".concat(l,"..").concat(e.name)})])];case 3:return c=p.sent(),s=(0,a.Z)(c,3),u=s[0],d=s[1],f=s[2],(h=u.error||d.error||f.error)?[2,{error:h}]:[2,{log:u.commits,onlyRemote:d.commits,onlyLocal:f.commits,error:null}]}}))}));return function(e){return r.apply(this,arguments)}}(),[e,t,n]);return(0,l.useMemo)((function(){if(!i)return null;if(i.error)return r(i.error),{error:i.error};var e=i.log,t=i.onlyRemote,n=i.onlyLocal;if(!t&&!n)return{log:e,error:null};if(e){var o=new Set;if(t){var a=!0,l=!1,c=void 0;try{for(var s,u=t[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var d=s.value;o.add(d.hash)}}catch(Z){l=!0,c=Z}finally{try{a||null==u.return||u.return()}finally{if(l)throw c}}}if(n){var f=!0,h=!1,p=void 0;try{for(var v,m=n[Symbol.iterator]();!(f=(v=m.next()).done);f=!0){var g=v.value;o.add(g.hash)}}catch(Z){h=!0,p=Z}finally{try{f||null==m.return||m.return()}finally{if(h)throw p}}}e=e.filter((function(e){return!o.has(e.hash)}))}return{log:e,onlyRemote:t,onlyLocal:n,error:null}}),[r,i])}(o,s?null===r||void 0===r||null===(t=r.upstream)||void 0===t?void 0:t.behind:void 0,s?null===r||void 0===r||null===(n=r.upstream)||void 0===n?void 0:n.ahead:void 0),d=(0,l.useMemo)((function(){if(!u||u.error)return[];var e,t,n,o=[],a=u.log,l=void 0===a?[]:a,c=u.onlyRemote,d=void 0===c?[]:c,f=u.onlyLocal,h=void 0===f?[]:f,p=l.length>0,v=d.length>0,m=h.length>0;v&&(o.push({type:"boundary",text:"Not pulled from remote"}),s&&r&&o.push({type:"button",key:"pull-button",button:(0,i.tZ)(hw,{status:r})}),(e=o).push.apply(e,(0,I.Z)(dx(d))));m&&(o.push({type:"boundary",text:"Not pushed to remote"}),s&&r&&o.push({type:"button",key:"push-button",button:(0,i.tZ)(vw,{status:r})}),(t=o).push.apply(t,(0,I.Z)(dx(h))));p&&((v||m)&&o.push({type:"boundary",text:"Up to date with remote"}),(n=o).push.apply(n,(0,I.Z)(dx(l))));return o}),[u,r,s]);return o?u?u.error?(0,i.tZ)("div",{children:u.error}):(0,i.BX)(Z.G7,{css:rx,children:[(0,i.BX)(Z.G7,{css:ix,children:[(0,i.tZ)(lx,{branch:o,current:s}),(0,i.tZ)(cx,{branch:o}),(0,i.tZ)(ux,{status:r,current:s})]}),(0,i.tZ)(lw,{items:d})]}):(0,i.tZ)(dw,{}):(0,i.tZ)("div",{children:"No branch"})}function lx(e){var t=e.branch,n=e.current;return!t||n?null:(0,i.tZ)(Z.G7,{css:ox,children:(0,i.tZ)(mw,{branch:t})})}function cx(e){var t=e.branch;return t&&t.type===YZ.HO.LOCAL?(0,i.BX)(Z.G7,{css:ox,children:[(0,i.tZ)(Z.xv,{variant:"subheadDefault",children:"Remote Updates"}),(0,i.tZ)(Zw,{branch:t})]}):null}var sx=(0,La.iv)(Z.l0.rowWithGap(8),Z.l0.align.center);function ux(e){var t=e.status,n=e.current;return t&&n?(0,i.BX)(Z.G7,{css:ox,children:[(0,i.BX)(Z.G7,{css:sx,children:[(0,i.tZ)(Z.DR,{css:Z.l0.fontWeight.bold,colorway:t.changes.length<=0?"grey":"primary",text:t.changes.length.toString()}),(0,i.tZ)(Z.xv,{variant:"subheadDefault",children:"Review Changes"})]}),(0,i.tZ)(nx,{status:t})]}):null}function dx(e){return e.map((function(e){return{type:"commit",commit:e}}))}function fx(){return(0,i.BX)(Z.G7,{children:[(0,i.tZ)(Z.xv,{children:"Unsupported state: you are in the middle of a cherry-pick."}),(0,i.tZ)(Z.xv,{children:"Please finish the cherry-pick manually."})]})}var hx=(0,La.iv)(Z.gU.nofill,Z.l0.py(12),Z.l0.px(8),Z.l0.colWithGap(2),Z.l0.justify.center,Z.l0.borderRadius(8),Z.l0.flex.shrink(1));function px(e){var t=e.branch,n=e.current,r=void 0!==n&&n,o=e.onPreview;return(0,i.BX)(Z.G7,{css:hx,tabIndex:0,role:"button","aria-label":"Preview branch ".concat(t.name),onClick:o,onKeyDown:function(e){"Enter"!==e.key&&" "!==e.key||null===o||void 0===o||o()},children:[(0,i.tZ)(Z.xv,{children:(0,i.tZ)(Xy,{name:t.name,remote:t.type===YZ.HO.REMOTE?t.remote:null,current:r,onClick:o,icon:!0})}),(0,i.tZ)(mx,{branch:t})]})}var vx=(0,La.iv)(Z.l0.rowWithGap(8),Z.l0.align.baseline,Z.l0.flex.shrink(1));function mx(e){var t=e.branch;return(0,i.BX)(Z.G7,{css:vx,children:[(0,i.tZ)(Jb,{name:t.commit.author.name,email:t.commit.author.email,color:"dimmest",allowPlaceholderAvatar:!0,small:!0}),(0,i.tZ)(Z.EK,{date:t.commit.author.date,textColor:"dimmest",textVariant:"small"})]})}var gx=(0,La.iv)({verticalAlign:"middle"},Z.l0.justify.spaceBetween),Zx=(0,La.iv)(Z.l0.display.flex),yx=(0,La.iv)(Z.l0.p(4),Z.l0.flex.row,Z.l0.align.center,Z.l0.justify.spaceBetween),bx=(0,La.iv)(Z.l0.p(4),Z.l0.flex.row,Z.l0.align.center,Z.l0.justify.spaceBetween,Z.gU.nofill),wx=(0,La.iv)(Z.l0.borderRadius(8));function xx(e){var t=e.name,n=e.branches,r=e.current,o=void 0===r?null:r,a=e.switchMode,c=e.foldable,s=void 0!==c&&c,u=e.folded,d=void 0!==u&&u,f=(0,l.useState)(!!s&&d),h=f[0],p=f[1],v=(0,l.useMemo)((function(){return n.map((function(e){return(0,i.tZ)(px,{branch:e,current:(0,YZ.p3)(e,o),onPreview:function(){return a({mode:zy.BRANCH,branch:e})}},e.name)}))}),[n,o,a]);return h?(0,i.tZ)(Z.zx,{css:gx,text:(0,i.tZ)(Z.xv,{variant:"subheadDefault",children:t}),iconRight:(0,i.tZ)(Bf.Z,{}),onClick:function(){return p(!1)}}):(0,i.BX)(Z.G7,{css:Zx,children:[(0,i.BX)(Z.G7,{alt:s&&!h?"Hide List":void 0,css:s?bx:yx,onClick:function(){s&&p(!0)},children:[(0,i.tZ)(Z.xv,{variant:"subheadDefault",children:t}),s?(0,i.tZ)(Pf.Z,{}):null]}),(0,i.tZ)(Z.Tg,{css:wx,elevated:!0,children:v})]})}var Cx=n(20611),kx=(0,La.iv)(Z.l0.p(8),Z.l0.colWithGap(8),Z.l0.borderRadius(8)),Sx=(0,La.iv)(Z.l0.rowWithGap(4)),Ex=(0,La.iv)(Z.l0.flex.grow(1));function Tx(){var e=function(){r(!0),c("")},t=(0,l.useState)(!0),n=t[0],r=t[1],o=(0,l.useState)(""),a=o[0],c=o[1],s=(0,l.useState)(!1),u=s[0],d=s[1],h=my(),p=(0,f.Z)().git;function v(){return m.apply(this,arguments)}function m(){return(m=(0,de.Z)((function(){var e;return(0,fe.__generator)(this,(function(t){switch(t.label){case 0:return n||!a||u?[2]:(d(!0),[4,p.createBranch({name:a,checkout:!0})]);case 1:return(e=t.sent()).error?(h(e.error),d(!1)):(p.forceRefresh(),d(!1),c(""),r(!0),xy("branch-created")),[2]}}))}))).apply(this,arguments)}if(n)return(0,i.tZ)(Z.zx,{text:"Create Branch",iconLeft:(0,i.tZ)(gv.Z,{}),onClick:function(){return r(!1)}});var g=!a||!(0,Cx.Dc)(a);return(0,i.BX)(Z.Tg,{css:kx,elevated:!0,children:[(0,i.tZ)(_x,{value:a,onChange:c,onSubmit:v,onCancel:e,disabled:u}),(0,i.BX)(Z.G7,{css:Sx,children:[(0,i.tZ)(Z.zx,{css:Ex,text:"Cancel",onClick:e,disabled:u}),(0,i.tZ)(Z.zx,{css:Ex,text:"Create Branch",colorway:"primary",iconLeft:(0,i.tZ)(gv.Z,{}),onClick:v,loading:u,disabled:g})]})]})}var Rx=(0,La.iv)({opacity:.75});function _x(e){var t=e.value,n=e.disabled,r=e.onChange,o=e.onSubmit,a=e.onCancel;return(0,i.tZ)(Z.II,{value:t,css:n?Rx:void 0,disabled:n,placeholder:"Enter a name for your new branch",onChange:function(e){return t=e.currentTarget.value,void((0,Cx.dC)(t)&&(null===r||void 0===r||r(t)));var t},onKeyDown:function(e){return t=e.key,n=function(){return e.preventDefault()},void("Enter"===t?(null===o||void 0===o||o(),n()):"Escape"===t&&(null===a||void 0===a||a(),n()));var t,n},onBlur:function(){""===t&&(null===a||void 0===a||a())},autoFocus:!0})}function Ix(e){var t=e.currentBranch,n=e.switchMode,r=my(),o=ey(function(){var e=(0,de.Z)((function(e){var t,n,i,o;return(0,fe.__generator)(this,(function(a){switch(a.label){case 0:return[4,e.listBranches()];case 1:return(t=a.sent()).error?(r(t.error),[2,t]):(n=Date.now()-5184e6,i=t.branches.filter((function(e){return e.commit.author.date>n})),o=t.branches.filter((function(e){return e.commit.author.date<=n})),[2,{active:i,stale:o,error:null}])}}))}));return function(t){return e.apply(this,arguments)}}(),[r]);if(!o)return(0,i.tZ)(dw,{});if(o.error)return(0,i.tZ)("div",{children:o.error});var a=o.active,l=o.stale;return(0,i.tZ)(Z.G7,{css:[Z.l0.colWithGap(8)],children:(0,i.BX)(Z.G7,{css:[Z.l0.pb(8),Z.l0.px(8),Z.l0.colWithGap(16)],children:[t?(0,i.BX)(Z.G7,{css:Z.l0.colWithGap(8),children:[(0,i.tZ)(xx,{branches:[t],current:t,name:"Current",switchMode:n}),(0,i.tZ)(Tx,{})]}):null,0===a.length?null:(0,i.tZ)(xx,{branches:a,current:t,name:"Active",switchMode:n,foldable:!0}),0===l.length?null:(0,i.tZ)(xx,{branches:l,current:t,name:"Stale",switchMode:n,foldable:!0,folded:!0})]})})}function Gx(){return(0,i.BX)(Z.G7,{children:[(0,i.tZ)(Z.xv,{children:"Unsupported state: your HEAD is currently detached."}),(0,i.tZ)(Z.xv,{children:"Please checkout a branch."})]})}function Dx(){return(0,i.BX)(Z.G7,{children:[(0,i.tZ)(Z.xv,{children:"Unsupported state: you are in the middle of a merge."}),(0,i.tZ)(Z.xv,{children:"Please finish the merge manually."})]})}function Px(){var e=(0,l.useState)(!1),t=e[0],n=e[1],r=my(),o=(0,f.Z)().git;function a(){return(a=(0,de.Z)((function(){var e;return(0,fe.__generator)(this,(function(i){switch(i.label){case 0:return t?[2]:(n(!0),[4,o.init()]);case 1:return(e=i.sent()).error?(n(!1),r(e.error)):(o.forceRefresh(),xy("repository-initialized")),[2]}}))}))).apply(this,arguments)}var c=t?"Initializing...":"Initialize Git Repository";return(0,i.tZ)(Z.zx,{text:c,iconLeft:t?(0,i.tZ)(ur.Z,{}):(0,i.tZ)(cm.Z,{}),colorway:"primary",loading:t,onClick:function(){return a.apply(this,arguments)}})}var Bx=(0,La.iv)(Z.l0.height("100%"),Z.l0.p(16),Z.l0.colWithGap(16),Z.l0.center),Ux=(0,La.iv)(Z.l0.colWithGap(16),Z.l0.center,Z.l0.flex.shrink(1));function Ax(){return(0,i.BX)(Z.G7,{css:Bx,children:[(0,i.BX)(Z.G7,{css:Ux,children:[(0,i.tZ)(Rv.Z,{alt:"A potted plant morphing into a branching graph like structure",src:"/public/images/git/git_uninitialized_art.svg",height:300,width:280,objectFit:"contain"}),(0,i.tZ)(Z.xv,{variant:"subheadDefault",children:"Version control for your Repl."})]}),(0,i.tZ)(Px,{})]})}function Nx(){return(0,i.BX)(Z.G7,{children:[(0,i.tZ)(Z.xv,{children:"Unsupported state: you are in the middle of a rebase."}),(0,i.tZ)(Z.xv,{children:"Please finish the rebase manually."})]})}function Lx(){return(0,i.BX)(Z.G7,{children:[(0,i.tZ)(Z.xv,{children:"Unsupported state: you are in the middle of a revert."}),(0,i.tZ)(Z.xv,{children:"Please finish the revert manually."})]})}var Xx=n(34757),Mx={provider:KZ.rG.GITHUB,username:"GitHub Account",email:"Your GitHub Account is not connected.",selected:!1,imageUrl:"",connected:!1},Ox=(0,La.iv)(Z.l0.rowWithGap(8),Z.l0.align.center);function Wx(e){return(0,i.BX)(Z.G7,{css:Ox,children:[(0,i.tZ)(Bl.Z,{url:e.imageUrl}),(0,i.tZ)(Z.xv,{variant:"subheadDefault",children:e.username})]})}var Fx=(0,Z.Xb)({container:[Z.gU.nofill,Z.l0.backgroundColor.backgroundHigher,Z.l0.flex.row,Z.l0.justify.spaceBetween,Z.l0.px(12),Z.l0.py(8)],topProfile:[Z.l0.borderRadius(8,8,0,0)],bottomProfile:[Z.l0.borderRadius(0,0,8,8)],information:[Z.l0.colWithGap(4)],informationRow:[Z.l0.rowWithGap(4),Z.l0.align.center],email:[Z.l0.maxWidth(230)],connectToGithubContainer:[Z.l0.colWithGap(4),Z.l0.px(12),Z.l0.py(8),Z.l0.backgroundColor.backgroundHigher],divider:[Z.l0.backgroundColor.outlineDefault]});function jx(e){return(0,i.BX)(Z.G7,{children:[(0,i.tZ)(zx,{onSelectProvider:e.onSelectProvider,info:e.defaultUserInfo}),(0,i.tZ)(Z.RX,{css:Fx.divider}),e.gitHubUserInfo.connected?(0,i.tZ)(qx,{info:e.gitHubUserInfo,onUpdateGitHubConnection:function(){return e.onUpdateConnection(KZ.rG.GITHUB)},onSelectProvider:e.onSelectProvider}):(0,i.tZ)(Kx,{onConnectToGitHub:function(){return e.onUpdateConnection(KZ.rG.GITHUB)}})]})}function zx(e){var t=e.info,n=t.username,r=t.email,o=t.imageUrl,a=t.selected,l=t.provider;return(0,i.BX)(Z.G7,{onClick:function(){return e.onSelectProvider(KZ.rG.REPLIT_DEFAULT)},css:[Fx.container,Fx.topProfile],children:[(0,i.BX)(Z.G7,{css:Fx.information,children:[(0,i.BX)(Z.G7,{css:Fx.informationRow,children:[(0,i.tZ)(Wx,{imageUrl:o,username:n}),(0,i.tZ)(Hx,{}),(0,i.tZ)(Z.xv,{color:"dimmest",children:"Default Profile"})]}),(0,i.tZ)(Z.xv,{color:"dimmest",css:Fx.email,children:r})]}),(0,i.tZ)(Z.Y8,{onChange:function(){return e.onSelectProvider(KZ.rG.REPLIT_DEFAULT)},id:l,checked:a,value:"default"})]})}function Hx(){return(0,i.tZ)(Z.xv,{color:"dimmest",children:"\u2022"})}function Vx(e){return(0,i.tZ)(Z.zx,{small:!0,text:"GitHub",onClick:e.onClick,iconRight:(0,i.tZ)(_v.Z,{})})}function qx(e){var t=e.info,n=t.imageUrl,r=t.username,o=t.email,a=t.provider,l=t.selected;return(0,i.BX)(Z.G7,{onClick:function(){return e.onSelectProvider(KZ.rG.GITHUB)},css:[Fx.container,Fx.bottomProfile],children:[(0,i.BX)(Z.G7,{css:Fx.information,children:[(0,i.BX)(Z.G7,{css:Fx.informationRow,children:[(0,i.tZ)(Wx,{imageUrl:n,username:r}),(0,i.tZ)(Hx,{}),(0,i.tZ)(Vx,{onClick:e.onUpdateGitHubConnection})]}),(0,i.tZ)(Z.xv,{color:"dimmest",css:Fx.email,children:o})]}),(0,i.tZ)(Z.Y8,{onChange:function(){return e.onSelectProvider(KZ.rG.GITHUB)},id:a,checked:l,value:"default"})]})}var $x=(0,La.iv)(Z.l0.rowWithGap(4),Z.l0.align.center),Yx=(0,La.iv)(Z.l0.pb(4));function Kx(e){var t=Mx.imageUrl,n=Mx.username;return(0,i.BX)(Z.G7,{css:[Fx.connectToGithubContainer,Fx.bottomProfile],children:[(0,i.tZ)(Z.G7,{css:$x,children:(0,i.tZ)(Wx,{imageUrl:t,username:n})}),(0,i.tZ)(Z.xv,{color:"dimmest",css:Yx,children:"Your GitHub account is not connected."}),(0,i.tZ)(Z.zx,{onClick:e.onConnectToGitHub,colorway:"primary",text:"Connect to GitHub",iconLeft:(0,i.tZ)(Og.Z,{})})]})}function Qx(){var e=(0,$r.Z)(['\n  fragment WorkspaceGit2User on CurrentUser {\n    image\n    username\n    email\n    gitHubInfo {\n      accessToken\n      installations {\n        id\n        type\n        avatarUrl\n        name\n      }\n      userInfo {\n        name\n        email\n        avatarUrl\n      }\n    }\n    repositories(count: 1, after: "0") {\n      ... on RepositoryConnection {\n        items {\n          id\n        }\n      }\n    }\n  }\n']);return Qx=function(){return e},e}function Jx(){var e=(0,$r.Z)(["\n  query WorkspaceGit2GitHubUsers {\n    currentUser {\n      id\n      ...WorkspaceGit2User\n    }\n  }\n  ","\n"]);return Jx=function(){return e},e}var eC={},tC=(0,Yr.Ps)(Qx()),nC=(0,Yr.Ps)(Jx(),tC);var rC="/images/evalbot/evalbot_24",iC=(0,La.iv)(Z.l0.flex.column);function oC(){var e,t,n,r,o,a,c=(0,f.Z)().git,s=c.getCurrentProfile(),u=c.getProfile(KZ.rG.REPLIT_DEFAULT),d=function(e){var t=(0,R.Z)({},eC,e);return li.a(nC,t)}(),h=d.data,p=d.refetch,v=(0,Mg.v)({onAuth:function(){xy("github-user-connected"),p()}}),m=(0,l.useState)(null!==(a=null===s||void 0===s?void 0:s.provider)&&void 0!==a?a:KZ.rG.REPLIT_DEFAULT),g=m[0],y=m[1],b=g===KZ.rG.REPLIT_DEFAULT,w="CurrentUser"===(null===h||void 0===h||null===(e=h.currentUser)||void 0===e?void 0:e.__typename)?null===h||void 0===h?void 0:h.currentUser:void 0;if(!w||!u)return null;var x,C,k,S="GitHubUserInfo"===(null===(t=w.gitHubInfo)||void 0===t||null===(n=t.userInfo)||void 0===n?void 0:n.__typename)?null===(r=w.gitHubInfo)||void 0===r?void 0:r.userInfo:void 0,E={provider:KZ.rG.REPLIT_DEFAULT,username:u.username,email:u.email,selected:b,imageUrl:null!==(x=w.image)&&void 0!==x?x:rC},T="RepositoryConnection"===(null===w||void 0===w||null===(o=w.repositories)||void 0===o?void 0:o.__typename),_=void 0;S&&S.email&&S.name&&(_={provider:KZ.rG.GITHUB,username:S.name,email:S.email,selected:g===KZ.rG.GITHUB,imageUrl:null!==(C=null===S||void 0===S?void 0:S.avatarUrl)&&void 0!==C?C:rC,connected:T},c.addProfile({provider:KZ.rG.GITHUB,username:S.name,email:S.email,avatar:null!==(k=null===S||void 0===S?void 0:S.avatarUrl)&&void 0!==k?k:null}));return(0,i.tZ)(Z.G7,{css:iC,children:(0,i.tZ)(jx,{defaultUserInfo:E,gitHubUserInfo:null!==_&&void 0!==_?_:Mx,onSelectProvider:function(e){c.setCurrentProfile(e),y(e),e===KZ.rG.REPLIT_DEFAULT?xy("profile-changed",{profile:"replit"}):e===KZ.rG.GITHUB&&xy("profile-changed",{profile:"github"})},onUpdateConnection:function(e){return function(e){e===KZ.rG.GITHUB&&v()}(e)}})})}function aC(){var e=(0,$r.Z)(["\n  query GithubRemoteConfigRepl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        description\n        isPrivate\n        slug\n        url\n      }\n    }\n  }\n"]);return aC=function(){return e},e}function lC(){var e=(0,$r.Z)(['\n  query GithubRemoteConfigUser {\n    currentUser {\n      ... on CurrentUser {\n        id\n        gitHubInfo {\n          accessToken\n        }\n        repositories(count: 1, after: "0") {\n          ... on RepositoryConnection {\n            items {\n              id\n            }\n          }\n        }\n      }\n    }\n  }\n']);return lC=function(){return e},e}function cC(){var e=(0,$r.Z)(["\n  mutation GithubRemoteConfigCreateGithubRepo($input: CreateGithubRepoInput!) {\n    createGithubRepo(input: $input) {\n      ... on CreateGithubRepoResult {\n        remoteUrl\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return cC=function(){return e},e}var sC={},uC=(0,Yr.Ps)(aC());var dC=(0,Yr.Ps)(lC());var fC=(0,Yr.Ps)(cC());var hC=(0,La.iv)(Z.l0.color.accentNegativeStronger,Z.l0.pl(4));function pC(e){var t,n,r=e.remoteName,o=e.updateRemote,c=(0,f.Z)().git,s=(0,Nd.H)(),u=(0,gi.Z)(),d=(0,l.useRef)(null),h=(0,l.useRef)(null),p=(0,l.useState)(),v=p[0],m=p[1],g=function(e){var t=(0,R.Z)({},sC,e);return li.a(uC,t)}({variables:{replId:u}}).data,y="Repl"===(null===g||void 0===g?void 0:g.repl.__typename)?g.repl:{slug:void 0,description:void 0,isPrivate:void 0,url:void 0},b=y.slug,w=y.description,x=y.isPrivate,C=y.url,k=function(e){var t=(0,R.Z)({},sC,e);return li.a(dC,t)}(),S=k.data,E=k.refetch,T=(0,a.Z)(function(e){var t=(0,R.Z)({},sC,e);return Kr.D(fC,t)}(),2),_=T[0],I=T[1].loading,G=(0,Mg.v)({onAuth:function(){E(),xy("github-user-connected")}}),D="RepositoryConnection"===(null===S||void 0===S||null===(t=S.currentUser)||void 0===t||null===(n=t.repositories)||void 0===n?void 0:n.__typename),P=(0,l.useState)(null===x||void 0===x||x),B=P[0],U=P[1],A=(0,l.useState)(b),N=A[0],L=A[1],X=(0,l.useState)(),M=X[0],O=X[1],W=(0,l.useState)(null!==w&&void 0!==w?w:C&&"Repository for https://replit.com".concat(C)),F=W[0],j=W[1],z=(0,l.useState)(),H=z[0],V=z[1],q=function(){var e=(0,de.Z)((function(e){var t,n,i;return(0,fe.__generator)(this,(function(a){switch(a.label){case 0:return[4,c.getRemotes()];case 1:return(t=a.sent()).error?(m("Error finding current remotes, ".concat(t.error)),[2]):t.remotes.has(r)?[4,c.setRemoteURL({remote:r,url:e})]:[3,3];case 2:return(n=a.sent()).error?(m("Error (".concat(n.error,") setting ").concat(r," to use ").concat(e," as a remote.")),[2]):(o(e),xy("remote-edited"),[2]);case 3:return[4,c.addRemote({name:r,url:e})];case 4:return(i=a.sent()).error?(m("Error (".concat(i.error,") adding ").concat(r," ").concat(e," as a remote.")),[2]):(o(e),xy("remote-added"),[2])}}))}));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=(0,de.Z)((function(){var e,t,n,r;return(0,fe.__generator)(this,(function(i){switch(i.label){case 0:return O(void 0),V(void 0),m(void 0),N?(0,Cx.GE)(N)?[4,_({variables:{input:{name:N,description:null!==w&&void 0!==w?w:null,homepage:"replit.com".concat(C),isPrivate:B,ownerType:qr.xJ.User}}})]:(O("Invalid remote name."),[2]):[2];case 1:return r=i.sent(),"UnauthorizedError"===(null===(e=r.data)||void 0===e?void 0:e.createGithubRepo.__typename)||"UserError"===(null===(t=r.data)||void 0===t?void 0:t.createGithubRepo.__typename)?(m(r.data.createGithubRepo.message),[2]):("CreateGithubRepoResult"===(null===(n=r.data)||void 0===n?void 0:n.createGithubRepo.__typename)&&(q(r.data.createGithubRepo.remoteUrl),xy("github-repository-published")),[2])}}))}));return function(){return e.apply(this,arguments)}}();return D?(0,i.BX)(Z.G7,{children:[(0,i.tZ)(Z.xv,{color:"dimmest",children:"Repository name"}),(0,i.tZ)(Z.II,{ref:d,label:"Repository name",name:"Repository name",placeholder:"Enter repository name",value:N,onChange:function(e){O(void 0),L(e.target.value)},"aria-label":"Enter a name for the GitHub repository to be created for this Repl.",onKeyDown:function(e){var t;"Enter"===e.key&&(e.preventDefault(),null===(t=h.current)||void 0===t||t.focus())}}),(0,i.tZ)(Z.xv,{css:hC,children:M}),(0,i.tZ)(Xx.Z,{height:1}),(0,i.tZ)(Z.xv,{color:"dimmest",children:"Repository description"}),(0,i.tZ)(Z.B,{ref:h,maxLength:350,label:"Repository description",name:"Repository description",placeholder:"Enter repository description",value:null!==F&&void 0!==F?F:void 0,onChange:function(e){V(void 0),j(e.target.value)},"aria-label":"Enter a description for the GitHub repository to be created for this Repl."}),(0,i.tZ)(Z.xv,{css:hC,children:H}),(0,i.tZ)(Xx.Z,{height:1}),(0,i.tZ)(Z.xv,{color:"dimmest",children:"Privacy"}),(0,i.BX)(Z.hE,{tag:"fieldset",id:s("privacy"),name:s("privacy"),value:B,onChange:function(e){return U(e)},row:!0,css:[Z.l0.width("100%")],children:[(0,i.tZ)(Z.rK,{id:s("false"),value:!1,text:"Public",icon:(0,i.tZ)(UZ.Z,{})}),(0,i.tZ)(Z.rK,{id:s("true"),value:!0,text:"Private",icon:(0,i.tZ)(ef.Z,{})})]}),(0,i.tZ)(Xx.Z,{height:2}),(0,i.tZ)(Z.zx,{text:I?"Creating Repository on GitHub\u2026":"Create Repository on GitHub",colorway:"primary",iconLeft:(0,i.tZ)(Og.Z,{}),onClick:$,loading:I}),v?(0,i.tZ)(Z.xv,{css:hC,maxLines:2,children:v}):null]}):(0,i.tZ)(Z.G7,{children:(0,i.tZ)(Z.zx,{colorway:"primary",iconLeft:(0,i.tZ)(Og.Z,{}),text:"Connect to GitHub",onClick:G})})}var vC=(0,La.iv)(Z.l0.rowWithGap(4)),mC=(0,La.iv)(Z.l0.flex.growAndShrink(1)),gC=(0,La.iv)(Z.l0.color.accentNegativeStronger,Z.l0.pl(4));function ZC(e){var t=e.initialRemoteUrl,n=e.remoteName,r=e.updateRemote,o=(0,f.Z)().git,a=(0,l.useState)(),c=a[0],s=a[1];(0,l.useEffect)((function(){s(void 0)}),[t]);var u=(0,l.useState)(),d=u[0],h=u[1],p=(0,l.useState)(!1),v=p[0],m=p[1],g=function(){var e=(0,de.Z)((function(){var e,t,i,a;return(0,fe.__generator)(this,(function(l){switch(l.label){case 0:if(l.trys.push([0,5,6,7]),!c)return[2];if(m(!0),!(0,Cx.LY)(c))throw Error("Invalid remote url.");return[4,o.getRemotes()];case 1:if((e=l.sent()).error)throw Error("Error finding current remotes, ".concat(e.error));return e.remotes.has(n)?[4,o.setRemoteURL({remote:n,url:c})]:[3,3];case 2:if((t=l.sent()).error)throw Error("Error (".concat(t.error,") setting ").concat(n," to use ").concat(c," as a remote."));return xy("remote-edited"),r(c),[2];case 3:return[4,o.addRemote({name:n,url:c})];case 4:if((i=l.sent()).error)throw Error("Error (".concat(i.error,") adding ").concat(n," ").concat(c," as a remote."));return xy("remote-added"),[3,7];case 5:return a=l.sent(),h(a.message),[3,7];case 6:return m(!1),[7];case 7:return[2]}}))}));return function(){return e.apply(this,arguments)}}();return(0,i.BX)(Z.G7,{children:[(0,i.tZ)(Z.II,{label:"Remote URL",name:"Remote URL",placeholder:"Enter Remote URL",value:null!==c&&void 0!==c?c:t,autoComplete:"off",autoCorrect:"off",onChange:function(e){h(void 0),s(e.target.value)},inputMode:"url","aria-label":"Set remote URL to ".concat(c),onKeyDown:function(e){"Enter"===e.key&&g()}}),d?(0,i.tZ)(Z.xv,{variant:"small",css:gC,children:d}):null,c&&c!==t?(0,i.BX)(i.HY,{children:[(0,i.tZ)(Xx.Z,{height:1}),(0,i.BX)(Z.G7,{css:vC,children:[(0,i.tZ)(Z.zx,{css:mC,text:"Cancel",iconLeft:(0,i.tZ)(xe.Z,{}),onClick:function(){return s(void 0)}}),(0,i.tZ)(Z.zx,{css:mC,text:v?"Saving\u2026":"Save",loading:v,colorway:"primary",iconLeft:(0,i.tZ)(wr.Z,{}),onClick:g})]})]}):null]})}var yC=(0,La.iv)(Z.l0.border({width:1,color:Z.TV.outlineDimmer}),Z.l0.borderRadius(8)),bC=(0,La.iv)(Z.gU.filled,Z.l0.flex.row,Z.l0.justify.spaceBetween,Z.l0.align.center,Z.l0.px(8),Z.l0.py(4),Z.l0.borderRadius(8,8,0,0)),wC=(0,La.iv)(Z.l0.borderRadius(8,8,0,0)),xC=(0,La.iv)(Z.l0.borderRadius(8)),CC=(0,La.iv)(Z.l0.p(8)),kC=(0,La.iv)(Z.l0.flex.growAndShrink(1));function SC(e){var t=e.title,n=e.expanded,r=e.content,o=e.onClick;return(0,i.BX)(Z.G7,{css:yC,children:[(0,i.BX)(Z.G7,{css:[bC,n?wC:xC],onClick:o,children:[(0,i.tZ)(Z.G7,{css:kC,children:(0,i.tZ)(Z.xv,{variant:"subheadDefault",children:t})}),n?(0,i.tZ)(Pf.Z,{size:20}):(0,i.tZ)(Bf.Z,{size:20})]}),n?(0,i.tZ)(Z.G7,{css:CC,children:r}):null]})}var EC,TC="origin";function RC(){var e=ey(function(){var e=(0,de.Z)((function(e){var t,n,r,i,o;return(0,fe.__generator)(this,(function(l){switch(l.label){case 0:return[4,e.getRemotes()];case 1:return(t=l.sent()).error?[2,{url:void 0,name:TC,error:t.error}]:(r=(0,a.Z)(null!==(n=t.remotes.values())&&void 0!==n?n:void 0,1),(i=r[0])?[2,{url:i.push||i.fetch,name:null!==(o=i.name)&&void 0!==o?o:TC,error:null}]:[2,{url:void 0,name:TC,error:null}])}}))}));return function(t){return e.apply(this,arguments)}}());return null==e?(0,i.BX)(Z.G7,{css:Z.l0.center,children:[(0,i.tZ)(Z.xv,{color:"dimmest",children:"Loading remote information."}),(0,i.tZ)(dw,{})]}):(null===e||void 0===e?void 0:e.error)?null:(0,i.tZ)(_C,{initialRemoteUrl:null===e||void 0===e?void 0:e.url,remoteName:null===e||void 0===e?void 0:e.name})}function _C(e){var t=e.initialRemoteUrl,n=e.remoteName,r=(0,l.useState)(t),o=r[0],a=r[1],c=(0,l.useState)(),s=c[0],u=c[1],d=function(e){a(e)};return(0,i.BX)(Z.G7,{children:[(0,i.tZ)(Z.xv,{variant:"subheadDefault",children:"Remote"}),(0,i.tZ)(Xx.Z,{height:1}),(0,i.tZ)(ZC,{remoteName:n,initialRemoteUrl:o,updateRemote:d}),(0,i.tZ)(Xx.Z,{height:2}),(0,i.tZ)(SC,{title:"GitHub",expanded:s===EC.GitHub,onClick:function(){return u((function(e){return e===EC.GitHub?void 0:EC.GitHub}))},content:(0,i.tZ)(pC,{remoteName:n,updateRemote:d})})]})}!function(e){e[e.GitHub=0]="GitHub"}(EC||(EC={}));var IC=(0,La.iv)(Z.l0.px(16));function GC(){return(0,i.BX)(Z.G7,{css:IC,children:[(0,i.tZ)(Xx.Z,{height:2}),(0,i.tZ)(RC,{}),(0,i.tZ)(Xx.Z,{height:2}),(0,i.tZ)(DC,{})]})}function DC(){return(0,i.BX)(Z.G7,{children:[(0,i.tZ)(Z.xv,{variant:"subheadDefault",children:"Commit author"}),(0,i.tZ)(Xx.Z,{height:1}),(0,i.tZ)(oC,{})]})}var PC=(0,La.iv)(Z.l0.colWithGap(16),Z.l0.p(8),Z.l0.pt(16)),BC=(0,La.iv)(Z.l0.colWithGap(16)),UC=(0,La.iv)(Z.l0.rowWithGap(8));function AC(){var e=(0,l.useState)(!1),t=e[0],n=e[1],r=(0,l.useState)("Initial Commit"),o=r[0],a=r[1],c=(0,l.useState)(!0),s=c[0],u=c[1],d=my(),h=(0,f.Z)().git,p=(0,Nd.D)();function v(){return(v=(0,de.Z)((function(){var e,r,i;return(0,fe.__generator)(this,(function(a){switch(a.label){case 0:return t?[2]:(n(!0),s?[4,h.stageFiles({all:!0})]:[3,2]);case 1:return r=a.sent(),[3,4];case 2:return[4,h.stageFiles({all:!1})];case 3:r=a.sent(),a.label=4;case 4:return(e=r).error?(d(e.error),n(!1),[3,7]):[3,5];case 5:return[4,h.commit({message:o})];case 6:(i=a.sent()).error?(d(i.error),n(!1)):h.forceRefresh(),a.label=7;case 7:return[2]}}))}))).apply(this,arguments)}return(0,i.BX)(Z.G7,{children:[(0,i.tZ)(LC,{}),(0,i.BX)(Z.G7,{css:PC,children:[(0,i.tZ)(Z.E_,{colorway:"orange",icon:(0,i.tZ)(Mr.Z,{}),text:"Your current branch doesn't have any commits. You need to make an initial commit before continuing."}),(0,i.BX)(Z.G7,{css:BC,children:[(0,i.tZ)(Ww,{message:o,onMessageChange:a,disabled:t}),(0,i.BX)(Z.G7,{css:UC,tag:"label",children:[(0,i.tZ)(Z.XZ,{id:p,checked:s,onChange:function(e){return u(e.target.checked)}}),(0,i.tZ)(Z.xv,{children:"Include all files in commit"})]}),(0,i.tZ)(Z.zx,{text:t?"Committing...":"Create initial commit",iconLeft:t?(0,i.tZ)(ur.Z,{}):(0,i.tZ)(wr.Z,{}),colorway:"primary",disabled:!o,loading:t,onClick:function(){return v.apply(this,arguments)}})]})]})]})}var NC=(0,La.iv)(Z.l0.px(8),Z.l0.py(4),Z.l0.rowWithGap(8),Z.l0.backgroundColor.backgroundDefault,Z.l0.align.center,{borderBottom:"1px solid ".concat(Z.TV.outlineDimmer)});function LC(){var e=my(),t=ey(function(){var t=(0,de.Z)((function(t){var n;return(0,fe.__generator)(this,(function(r){switch(r.label){case 0:return[4,t.status()];case 1:return(n=r.sent()).error&&e(n.error),[2,n]}}))}));return function(e){return t.apply(this,arguments)}}(),[e]);return(null===t||void 0===t?void 0:t.error)?null:(0,i.BX)(Z.G7,{css:NC,children:[(0,i.tZ)(Z.hU,{alt:"Back to dashboard",size:18,disabled:!0,children:(0,i.tZ)(yy.Z,{})}),(null===t||void 0===t?void 0:t.branch)?(0,i.tZ)(Xy,{name:t.branch,current:!0,heading:!0}):null]})}function XC(e){var t=e.error;return(0,i.BX)(Z.G7,{children:[(0,i.tZ)(Z.xv,{children:"Failed to start the Git2 pane."}),(0,i.BX)(Z.xv,{children:["Error: ",t]})]})}var MC=(0,La.iv)(Z.l0.position.relative,Z.l0.display.flex,Z.l0.height("100%")),OC=(0,La.iv)(Z.l0.flex.growAndShrink(1),Z.l0.overflow("auto"));function WC(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isActive,n=void 0!==t&&t,r=(0,l.useRef)(),o=(0,l.useState)(zy.CURRENT_BRANCH),a=o[0],c=o[1],s=(0,l.useState)(null),u=s[0],d=s[1];HC(n);var f=ey(function(){var e=(0,de.Z)((function(e){var t,n,r,i,o,a,l;return(0,fe.__generator)(this,(function(c){switch(c.label){case 0:return[4,e.getRepositoryState()];case 1:return(t=c.sent()).error?[2,t]:(n=t.state,r=t.type,i=null,o=null,r===$Z.y5.INITIALIZING?[3,4]:[4,e.status()]);case 2:return(a=c.sent()).error?[2,a]:(i=a).branch?[4,e.getBranch(i.branch)]:[3,4];case 3:if((l=c.sent()).error)return[2,l];o=l.branch,c.label=4;case 4:return[2,{state:n,type:r,status:i,currentBranch:o,error:null}]}}))}));return function(t){return e.apply(this,arguments)}}()),h=!f||f.error?null:f.currentBranch,p=(0,l.useCallback)((function(e){switch(c(e),e){case zy.DASHBOARD:xy("pane-mode-changed",{mode:"dashboard"});break;case zy.BRANCH:xy("pane-mode-changed",{mode:"branch"});break;case zy.CURRENT_BRANCH:xy("pane-mode-changed",{mode:"current-branch"});break;case zy.SETTINGS:xy("pane-mode-changed",{mode:"settings"})}}),[]),v=(0,l.useCallback)((function(){r.current?(p(r.current),r.current=void 0):p(zy.DASHBOARD)}),[p]),m=(0,l.useCallback)((function(e){var t=function(e){r.current=a,p(e)};switch(e.mode){case zy.DASHBOARD:t(zy.DASHBOARD);break;case zy.BRANCH:if((0,YZ.p3)(e.branch,h)){t(zy.CURRENT_BRANCH);break}d(e.branch),t(zy.BRANCH);break;case zy.CURRENT_BRANCH:t(zy.CURRENT_BRANCH);break;case zy.SETTINGS:t(zy.SETTINGS)}}),[p,a,h]);if(a===zy.BRANCH&&(0,YZ.p3)(u,h)&&p(zy.CURRENT_BRANCH),!f||f.error)return(0,i.tZ)(FC,{children:(null===f||void 0===f?void 0:f.error)?(0,i.tZ)(XC,{error:f.error}):(0,i.tZ)(dw,{})});var g=f.status,Z=f.state,y=f.type;switch(y){case $Z.y5.INITIALIZING:case $Z.y5.INTERMEDIATE:case $Z.y5.DETACHED_HEAD:return(0,i.tZ)(FC,{children:(0,i.tZ)(jC,{state:Z})});case $Z.y5.NORMAL:return a===zy.BRANCH&&!u||a===zy.CURRENT_BRANCH&&!h?(0,i.tZ)(FC,{header:(0,i.tZ)($y,{mode:zy.DASHBOARD,branch:null,switchMode:m,onBack:v}),children:(0,i.tZ)(Ix,{currentBranch:null,switchMode:m})}):(0,i.tZ)(FC,{header:(0,i.tZ)($y,{mode:a,branch:a===zy.CURRENT_BRANCH?h:u,switchMode:m,onBack:v}),children:(0,i.tZ)(zC,{mode:a,status:g,previewBranch:u,currentBranch:h,switchMode:m})})}}function FC(e){var t=e.header,n=e.children;return(0,i.tZ)(A.zt,{scope:hy,children:(0,i.BX)(Z.G7,{css:MC,children:[(0,i.tZ)(Zy,{}),t,(0,i.tZ)(Z.G7,{css:OC,children:n})]})})}function jC(e){switch(e.state){case $Z.yG.NOT_INITIALIZED:return(0,i.tZ)(Ax,{});case $Z.yG.ON_UNBORN_BRANCH:return(0,i.tZ)(AC,{});case $Z.yG.MERGING:return(0,i.tZ)(Dx,{});case $Z.yG.REBASING:return(0,i.tZ)(Nx,{});case $Z.yG.REVERTING:return(0,i.tZ)(Lx,{});case $Z.yG.CHERRY_PICKING:return(0,i.tZ)(fx,{});case $Z.yG.APPLYING_MAILBOX:return(0,i.tZ)(nb,{});case $Z.yG.BISECTING:return(0,i.tZ)(rb,{});case $Z.yG.DETACHED_HEAD:return(0,i.tZ)(Gx,{});default:return null}}function zC(e){var t=e.mode,n=e.status,r=e.previewBranch,o=e.currentBranch,a=e.switchMode;switch(t){case zy.DASHBOARD:return(0,i.tZ)(Ix,{currentBranch:o,switchMode:a});case zy.BRANCH:return(0,i.tZ)(ax,{status:n,branch:r});case zy.CURRENT_BRANCH:return(0,i.tZ)(ax,{status:n,branch:o,current:!0});case zy.SETTINGS:return(0,i.tZ)(GC,{});default:(0,ty.Z)(t)}}function HC(e){var t=(0,f.Z)().git;(0,l.useEffect)((function(){e&&t.forceRefresh()}),[e,t])}var VC={Content:function(e){var t=e.options.isActive;return(0,Ut.P)({controlName:"flag-git-gud"})?(0,i.tZ)(qC,{isActive:t}):(0,i.tZ)(qZ,{})},Icon:function(e){var t=e.size;return(0,i.tZ)(cm.Z,{size:t})},getTitle:function(){return"Git"}};function qC(e){var t=e.isActive,n=(0,a.Z)(l.useState(!0),2),r=n[0],o=n[1];return l.useEffect((function(){return xy("pane-opened")}),[]),(0,i.BX)(i.HY,{children:[r?(0,i.tZ)(WC,{isActive:t}):(0,i.tZ)(qZ,{}),(0,i.tZ)(Z.zx,{css:{position:"absolute",bottom:"16px",right:"16px",opacity:"0.5"},text:r?"Swap to Git1":"Swap to Git2",onClick:function(){r?(o(!1),xy("pane-switched-to-old-ui")):o(!0)}})]})}var $C=n(58901);function YC(e){var t=e.reversed,n=void 0!==t&&t,r=e.hideName,o=void 0!==r&&r,c=e.color,s=void 0===c?"default":c,u=(0,a.Z)(rs(),1)[0],d=(0,l.useMemo)((function(){return[n?Z.l0.rowReverseWithGap(4):Z.l0.rowWithGap(4),Z.l0.align.center]}),[n]);if(!u)return null;if(0===u.count)return(0,i.BX)(Z.G7,{css:d,children:[(0,i.tZ)($C.Z,{size:24}),(0,i.tZ)(Z.xv,{color:s,children:"Server Authored"})]});var f=u.changes[u.version];if(!u.users)return(0,i.BX)(Z.G7,{css:d,children:[(0,i.tZ)(Z.qE,{size:24,src:"/public/images/ghost.svg",username:"Unknown"}),o?null:(0,i.tZ)(Z.xv,{color:s,children:"Unknown"})]});var h=u.users[f.userId];return h?(0,i.BX)(Z.G7,{css:d,children:[(0,i.tZ)(Z.qE,{size:24,src:h.image,username:h.username}),o?null:(0,i.tZ)(Z.xv,{color:s,children:h.username})]}):f.timestamp>16546464e5?(0,i.BX)(Z.G7,{css:d,children:[(0,i.tZ)($C.Z,{size:24}),o?null:(0,i.tZ)(Z.xv,{color:s,children:"Server Authored"})]}):(0,i.BX)(Z.G7,{css:d,children:[(0,i.tZ)(Z.qE,{size:24,src:"/public/images/ghost.svg",username:"Unknown"}),o?null:(0,i.tZ)(Z.xv,{color:s,children:"Unknown"})]})}var KC=n(71476),QC=function(e){(0,He.Z)(n,e);var t=(0,Ve.Z)(n);function n(e){var r;return(0,ze.Z)(this,n),(r=t.call(this,e)).name="UserError",r}return n}((0,dg.Z)(Error));function JC(e,t,n){return new Promise((function(r,i){try{var o=e.watchTextFile(t,{onReady:function(){var e=(0,de.Z)((function(e){var t,a;return(0,fe.__generator)(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,n(e)];case 1:return t=l.sent(),r(t),[3,3];case 2:return a=l.sent(),i(a),[3,3];case 3:return o(),[2]}}))}));return function(t){return e.apply(this,arguments)}}()})}catch(a){i(a)}}))}var ek,tk=n(63750).I;function nk(e,t){return rk.apply(this,arguments)}function rk(){return rk=(0,de.Z)((function(e,t){var n,r,i,o,a,l,c,s,u,d,f,h,p,v,m,g,Z,y;return(0,fe.__generator)(this,(function(b){switch(b.label){case 0:n=new Set,r=!0,i=!1,o=void 0;try{for(a=t[Symbol.iterator]();!(r=(l=a.next()).done);r=!0)(c=l.value).userId&&n.add(c.userId)}catch(w){i=!0,o=w}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return 0===n.size?[2,{}]:n.size>=tk?[2,ek.TooManyUsersRequestedError]:[4,e.query({query:KC.bD,variables:{ids:Array.from(n)}})];case 1:if(s=b.sent(),u=s.data,d=s.error)throw d;f=u.currentUser?[u.currentUser].concat((0,I.Z)(u.usersByIds)):u.usersByIds,h={},p=!0,v=!1,m=void 0;try{for(g=f[Symbol.iterator]();!(p=(Z=g.next()).done);p=!0)y=Z.value,h[y.id]={id:y.id,username:y.username,image:y.image}}catch(w){v=!0,m=w}finally{try{p||null==g.return||g.return()}finally{if(v)throw m}}return[2,h]}}))})),rk.apply(this,arguments)}function ik(){return ik=(0,de.Z)((function(e,t,n){var r,i,o;return(0,fe.__generator)(this,(function(a){switch(a.label){case 0:return[4,JC(e,n,function(){var e=(0,de.Z)((function(e){var t,n;return(0,fe.__generator)(this,(function(r){return t=e.fetchChanges,0===(n=e.version)?[2,{isDisposed:!1,result:[]}]:[2,t(1,n,"")]}))}));return function(t){return e.apply(this,arguments)}}())];case 1:return(r=a.sent()).isDisposed?[2,{data:null,handledError:"File deleted or removed."}]:(i=r.result,[4,nk(t,i)]);case 2:return(o=a.sent())===ek.TooManyUsersRequestedError?[2,{data:{changes:i,users:null},handledError:null}]:[2,{data:{changes:i,users:o},handledError:null}]}}))})),ik.apply(this,arguments)}function ok(e,t,n){return JC(e,t,function(){var t=(0,de.Z)((function(t){var r,i,o,a,l,c,s,u,d;return(0,fe.__generator)(this,(function(f){switch(f.label){case 0:if(r=t.fetchChanges,i=t.writeChange,o=t.version,n>o)throw new Error("Cannot restore to a version that does not exist");if(n===o)return[2];a=null,f.label=1;case 1:return f.trys.push([1,3,,4]),[4,r(1,o,"")];case 2:if((l=f.sent()).isDisposed)throw new QC("File deleted or removed.");return a=l.result,[3,4];case 3:throw f.sent(),new QC("Something went wrong while restoring the file. It is possible that a bad connection is to blame. Please try again.");case 4:c=(0,zf.Z)(a.slice(n,a.length).reverse()),s=c[0],u=c.slice(1),d=u.reduce((function(e,t){return e.compose(t.invertedChanges)}),s.invertedChanges);try{i(d)}catch(h){throw et.Tb(h),new QC("Something went wrong while restoring the file. Maybe the file changed while you were restoring it? Please try again.")}return[4,e.flush()];case 5:return f.sent(),[2]}}))}));return function(e){return t.apply(this,arguments)}}())}!function(e){e.TooManyUsersRequestedError="too_many_users"}(ek||(ek={}));var ak=(0,La.iv)({display:"grid",gridTemplateColumns:"auto 1fr",rowGap:"0.5rem",columnGap:"1rem","> dt":{display:"flex",alignItems:"center",fontWeight:"bold"}});function lk(){var e=(0,ki.Z)().showError,t=(0,l.useState)(!1),n=t[0],r=t[1],o=(0,l.useState)(!1),c=o[0],s=o[1],u=(0,l.useContext)(is).closeHistory,d=(0,f.Z)().fs,h=(0,a.Z)(rs(),1)[0],p=as(),v="Restore",m=!0;function g(){return(g=(0,de.Z)((function(){var t,n,i;return(0,fe.__generator)(this,(function(o){switch(o.label){case 0:if(!h||!d||c)return[2];o.label=1;case 1:return o.trys.push([1,3,4,5]),s(!0),ls("versionRestored"),t=h.filePath,n=h.version,[4,ok(d,t,n+1)];case 2:return o.sent(),null===u||void 0===u||u(),[3,5];case 3:return i=o.sent(),(0,fn.Z)(i,QC)?(e(i.message),[2]):(p(i,"restore"),[3,5]);case 4:return r(!1),s(!1),[7];case 5:return[2]}}))}))).apply(this,arguments)}return h?0===h.count?(v="No history",m=!0):c||n?(v="Restoring...",m=!0):h.playing?(v="Playing...",m=!0):h.version===h.count-1?(v="Viewing latest",m=!0):(v="Restore to here",m=!1):(v="Loading...",m=!0),(0,i.BX)(i.HY,{children:[(0,i.tZ)(Z.zx,{text:v,disabled:m,onClick:function(){return r(!0)},colorway:"primary",iconLeft:(0,i.tZ)(Qc.Z,{})}),h&&0!==h.count&&(0,i.tZ)(Z.u_,{isOpen:n,onRequestClose:function(){c||r(!1)},children:(0,i.BX)(Z.G7,{css:Z.l0.colWithGap(24),children:[(0,i.tZ)(Z.h4,{variant:"headerDefault",level:2,children:"Restore file version"}),(0,i.tZ)(Z.Tg,{elevated:!0,css:[Z.l0.px(16),Z.l0.py(12),Z.l0.borderRadius(8)],children:(0,i.BX)("dl",{css:ak,children:[(0,i.tZ)("dt",{children:"File"}),(0,i.tZ)("dd",{children:h.filePath}),(0,i.tZ)("dt",{children:"Version"}),(0,i.BX)("dd",{children:[h.version+1,(0,i.BX)("span",{css:[Z.l0.color.foregroundDimmest],children:[(0,i.tZ)("span",{css:Z.l0.mx(8),children:"/"}),h.count]})]}),(0,i.tZ)("dt",{children:"Date"}),(0,i.tZ)("dd",{children:(0,i.tZ)(Z.EK,{date:h.changes[h.version].timestamp,dateFormat:"absolute"})}),(0,i.tZ)("dt",{children:"Author"}),(0,i.tZ)("dd",{children:(0,i.tZ)(YC,{})})]})}),(0,i.tZ)(Z.E_,{icon:(0,i.tZ)(ou.Info,{}),colorway:"positive",text:"Restoring is non-destructive. The restored content will become a new version at the end of history. You can always go back to the version you just had."}),(0,i.BX)(Z.G7,{css:[Z.l0.rowWithGap(8),Z.l0.justify.end],children:[(0,i.tZ)(Z.zx,{text:"Cancel",disabled:c,onClick:function(){return r(!1)}}),(0,i.tZ)(Z.zx,{text:c?"Restoring Version...":"Restore Version",disabled:c,colorway:"primary",onClick:function(){return g.apply(this,arguments)},iconLeft:(0,i.tZ)(Qc.Z,{})})]})]})})]})}var ck=n(45455);function sk(e,t){var n=(0,a.Z)(rs(),1)[0],r=(0,l.useRef)(null);(0,l.useImperativeHandle)(t,(function(){return r.current})),n&&r.current&&(r.current.setAttribute("aria-valuemin","1"),r.current.setAttribute("aria-valuemax",String(n.count)),r.current.setAttribute("aria-valuenow",String(n.version+1)));var o=(0,l.useMemo)((function(){return(0,i.tZ)("div",{ref:r,role:"slider",tabIndex:0,css:{position:"absolute",top:"0",left:"calc((100% - 16px) * var(--scrubber-progress, 0))",width:"16px",height:"16px",backgroundColor:Z.TV.accentPrimaryDefault,borderRadius:"100%",outline:"none",cursor:"pointer",transition:"left var(--scrubber-transition-time, 100ms) ease-out",willChange:"left, transition",":focus":{boxShadow:"0 0 0 1px ".concat(Z.TV.foregroundDefault," inset")}}})}),[]);return n&&n.count>1?o:null}var uk=(0,l.forwardRef)(sk);function dk(e,t){var n=(0,a.Z)(rs(),1)[0],r=(0,l.useMemo)((function(){return(0,i.BX)(i.HY,{children:[(0,i.tZ)("div",{ref:t,"aria-hidden":!0,css:{position:"relative",top:"0",width:"100%",height:"16px",margin:"0",cursor:"pointer"}}),(0,i.tZ)("div",{"aria-hidden":!0,css:{position:"absolute",top:"6px",left:"0",width:"100%",height:"4px",margin:"0",overflow:"hidden",pointerEvents:"none",backgroundColor:Z.TV.backgroundHighest,borderRadius:"2px"},children:(0,i.tZ)("div",{"aria-hidden":!0,css:{position:"absolute",top:"0",left:"0",width:"100%",height:"4px",margin:"0",pointerEvents:"none",backgroundColor:Z.TV.accentPrimaryDefault,transformOrigin:"left",transform:"scaleX(var(--scrubber-progress, 0))",transition:"transform var(--scrubber-transition-time, 100ms) ease-out",willChange:"transform, transition"}})})]})}),[t]),o=(0,l.useMemo)((function(){return(0,i.tZ)("div",{ref:t,"aria-hidden":!0,css:{width:"100%",height:"16px",pointerEvents:"none"},children:(0,i.tZ)("div",{css:{position:"absolute",width:"100%",height:"4px",top:"6px",left:"0",backgroundColor:Z.TV.backgroundHighest,borderRadius:"2px"}})})}),[t]);return n&&n.count>1?r:o}var fk,hk=(0,l.forwardRef)(dk),pk=["ArrowLeft","ArrowRight","Home","End"];function vk(){var e=(0,a.Z)(rs(),2),t=e[0],n=e[1],r=(0,l.useState)(!1),o=r[0],c=r[1],s=(0,l.useRef)(null),u=(0,l.useRef)(null),d=(0,l.useRef)(null),f=function(e){(0,ck.A)(s,"--scrubber-transition-time",e)},h=function(e){(0,ck.A)(s,"--scrubber-progress",e.toString())};if(t&&!o){var p=t.version/(t.count-1);h(p),t.playing?f("50ms"):f("100ms")}return(0,l.useEffect)((function(){if(t&&u.current&&d.current&&!o){var e=u.current,r=d.current,i=function(i){if(0===i.button){c(!0),r.focus();var o=e.getBoundingClientRect(),a=r.getBoundingClientRect(),l=o.width,s=a.width,u=i.target===e?s/2:i.clientX-a.left,d=null,p=function(e){var r=e-o.left-u,i=Math.max(0,Math.min(1,r/(l-s)));i!==d&&(d=i,h(i),n({version:Math.round(i*(t.count-1)),playing:!1}))};p(i.clientX);var v=function(e){f("0ms"),p(e.clientX),e.preventDefault(),e.stopPropagation()},m=function(){window.removeEventListener("pointermove",v),window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",m),f("100ms"),c(!1)};window.addEventListener("pointermove",v),window.addEventListener("pointerup",m),window.addEventListener("pointercancel",m),i.preventDefault(),i.stopPropagation()}};return e.addEventListener("pointerdown",i),r.addEventListener("pointerdown",i),function(){e.removeEventListener("pointerdown",i),r.removeEventListener("pointerdown",i)}}}),[t,n,o]),(0,l.useEffect)((function(){if(t&&d.current&&!o){var e=d.current,r=function(e){if(t&&pk.includes(e.key)){var r=e.shiftKey?10:1,i=t.version,o=t.count-1,a=Math.max(0,i-r),l=Math.min(o,i+r),c=null;switch(e.key){case"ArrowLeft":c=a;break;case"ArrowRight":c=l;break;case"Home":c=0;break;case"End":c=o}null!==c&&(n({version:c,playing:!1}),e.preventDefault(),e.stopPropagation())}};return e.addEventListener("keydown",r),function(){e.removeEventListener("keydown",r)}}}),[t,n,o]),(0,l.useMemo)((function(){return(0,i.BX)(Z.G7,{innerRef:s,css:{position:"relative",height:"16px",width:"100%",touchAction:"none","--scrubber-progress":1,"--scrubber-transition-time":"100ms",":hover, :focus-within":{filter:"brightness(1.1)"},":hover:focus-within":{filter:"brightness(1.2)"}},children:[(0,i.tZ)(hk,{ref:u}),(0,i.tZ)(uk,{ref:d})]})}),[])}function mk(e){var t=(0,l.useState)({data:null,loading:!0,error:null,handledError:null}),n=t[0],r=t[1],i=(0,f.Z)().fs,o=(0,Zl.x)();return(0,l.useEffect)((function(){if(e){r({data:null,loading:!0,error:null,handledError:null});var t=!1;return function(e,t,n){return ik.apply(this,arguments)}(i,o,e).then((function(e){var n=e.data,i=e.handledError;t||r(i?{data:null,loading:!1,error:null,handledError:i}:{data:n,loading:!1,error:null,handledError:null})})).catch((function(e){t||((0,fn.Z)(e,Error)||(e=new Error(e)),r({data:null,loading:!1,error:e,handledError:null}))})),function(){t=!0}}r({data:null,loading:!1,error:null,handledError:null})}),[e,i,o]),n}function gk(){var e=(0,l.useContext)(is).closeHistory;if(!e)throw new Error("history pane context not found");return(0,i.tZ)(Z.zx,{text:"Cancel",onClick:function(){ls("historyExplicitlyClosed"),e()}})}!function(e){e.None="0ms",e.Normal="100ms",e.Fast="50ms"}(fk||(fk={}));var Zk=n(38094),yk=(0,La.iv)({filter:"grayscale(100%) opacity(0.5)",pointerEvents:"none"});function bk(){var e,t="/replEnvironmentMobile"===(0,P.useRouter)().pathname,n=(0,a.Z)(rs(),2),r=n[0],o=n[1],l=(0,Nd.H)(),c=!r||0===r.count;return(0,i.BX)(Z.G7,{css:[Z.l0.rowWithGap(8),Z.l0.align.center,c?yk:null],children:[(0,i.tZ)(Zk.Z,{id:l("diffButton"),isOn:null!==(e=null===r||void 0===r?void 0:r.comparing)&&void 0!==e&&e,onChange:function(e){if(!c){var t=e.target.checked;o({comparing:t})}}}),(0,i.tZ)("label",{css:[{cursor:"pointer",userSelect:"none"},Z.l0.flex.column,Z.l0.align.center],htmlFor:l("diffButton"),children:(0,i.tZ)(Z.xv,{children:t?"Compare":"Compare Latest"})})]})}function wk(){var e=(0,a.Z)(rs(),1)[0],t=0,n=0;e&&0!==e.count&&(t=e.version+1,n=e.count);var r=e?"default":"dimmer";return(0,i.BX)(Z.G7,{css:[Z.l0.rowWithGap(4),Z.l0.justify.spaceBetween],children:[(0,i.tZ)(Z.xv,{css:{minWidth:"2ch",textAlign:"right"},color:r,children:t}),(0,i.tZ)(Z.xv,{css:{width:"1ch",textAlign:"center"},color:"dimmer",children:"/"}),(0,i.tZ)(Z.xv,{css:{minWidth:"2ch",textAlign:"left"},color:"dimmer",children:n})]})}function xk(e){if(e<0)throw new Error('Require at least zero ops to compute pace, got "'+e+'"');return 1/Math.log(e+2)*100}function Ck(){var e,t,n,r,o=(0,a.Z)(rs(),2),c=o[0],s=o[1],u=(null!==(t=null===c||void 0===c||null===(e=c.changes)||void 0===e?void 0:e.length)&&void 0!==t?t:1)-1,d=null!==(n=null===c||void 0===c?void 0:c.version)&&void 0!==n?n:0,f=null!==(r=null===c||void 0===c?void 0:c.playing)&&void 0!==r&&r,h=!c||0===c.count,p=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:xk,i=(0,l.useState)(!1),o=i[0],a=i[1],c=(0,l.useCallback)((function(){t(1)}),[t]),s=(0,l.useCallback)((function(){e+1>n?a(!1):t(e+1)}),[t,e,n]),u=function(){a(!0)},d=function(){a(!1)};return(0,l.useEffect)((function(){if(o){var e=setTimeout((function(){s()}),r(n));return function(){return clearTimeout(e)}}}),[o,s,r,n]),{isPlaying:o,start:u,stop:d,reset:c}}(d,(function(e){return s({version:e})}),u),v=p.isPlaying,m=p.start,g=p.stop;(0,l.useEffect)((function(){v&&!f?g():!v&&f&&m()}),[f,v,m,g]);var y="Loading...";return c&&(v?y="Pause":c.version===c.count-1?y="Play file history from beginning":0===c.version?y="Play file history":c.version>0&&(y="Play file history from here")),(0,i.tZ)(Z.hU,{alt:y,size:24,disabled:h,onClick:function(){s(d===u?{version:0,playing:!0}:{playing:!f})},children:v?(0,i.tZ)(ou.Pause,{}):(0,i.tZ)(ou.PlayFilled,{})})}function kk(){return(0,i.BX)(Z.G7,{css:[Z.l0.rowWithGap(4),Z.l0.align.center],children:[(0,i.tZ)(Ck,{}),(0,i.tZ)(Sk,{}),(0,i.tZ)(wk,{}),(0,i.tZ)(Ek,{})]})}function Sk(){var e=(0,a.Z)(rs(),2),t=e[0],n=e[1],r=!t||0===t.version||0===t.count;return(0,i.tZ)(Z.hU,{alt:"Move backwards one version",size:24,disabled:r,onClick:function(){t&&t.version>0&&n({version:t.version-1})},children:(0,i.tZ)(yy.Z,{})})}function Ek(){var e=(0,a.Z)(rs(),2),t=e[0],n=e[1],r=!t||t.version===t.count-1||0===t.count;return(0,i.tZ)(Z.hU,{alt:"Move forwards one version",size:24,disabled:r,onClick:function(){t&&t.version<t.count-1&&n({version:t.version+1})},children:(0,i.tZ)(rl.Z,{})})}function Tk(){var e=(0,a.Z)(rs(),1)[0];if(!e||0===e.count)return null;var t=e.changes[e.version].timestamp;return(0,i.tZ)(Z.EK,{textColor:"dimmer",dateFormat:"switch",date:t})}function Rk(e){var t=e.filePath,n="/replEnvironmentMobile"===(0,P.useRouter)().pathname,r=n?Z.l0.borderRadius(0):Z.l0.borderRadius(0,0,8,8),o=(0,a.Z)(rs(),2),c=o[0],s=o[1],u=as(),d=mk(t),f=d.data,h=d.loading,p=d.error;return(0,l.useEffect)((function(){if(p)u(p,"history2-index",{filePath:t});else if(f&&!h)return s({filePath:t,changes:f.changes,users:f.users}),ls("historyLoaded"),function(){s(null)}}),[t,f,h,p,s,u]),(0,i.BX)(Z.G7,{css:[Z.l0.colWithGap(8),Z.l0.p(8),Z.l0.zIndex(3),Z.l0.overflow("hidden"),r,Z.l0.backgroundColor.backgroundDefault,{borderTop:"2px solid ".concat(Z.TV.backgroundHigher),boxShadow:"rgba(2, 2, 3, 0.125) 0px -16px 32px 0px"}],children:[(0,i.BX)(Z.Tg,{css:[Z.l0.position.relative,Z.l0.colWithGap(4),Z.l0.px(12),Z.l0.pt(8),Z.l0.pb(8),Z.l0.align.center,Z.l0.borderRadius(8),Z.l0.overflow("hidden")],elevated:!0,children:[(0,i.tZ)(vk,{}),(0,i.BX)(Z.G7,{css:[Z.l0.display.flex,Z.l0.flex.row,Z.l0.align.center,Z.l0.justify.spaceBetween,Z.l0.width("100%")],children:[(0,i.tZ)(kk,{}),c&&c.count>0?(0,i.BX)(Z.G7,{css:[Z.l0.rowWithGap(4),Z.l0.align.center],children:[(0,i.tZ)(Tk,{}),h||n?null:(0,i.tZ)(Z.xv,{color:"dimmer",children:"\u2022"}),(0,i.tZ)(YC,{color:"dimmer",hideName:n,reversed:!0})]}):null]})]}),(0,i.BX)(Z.G7,{css:[Z.l0.display.flex,Z.l0.flex.row],children:[(0,i.tZ)(_k,{justify:"flex-start",children:(0,i.tZ)(bk,{})}),(0,i.BX)(_k,{justify:"flex-end",children:[(0,i.tZ)(gk,{}),(0,i.tZ)(lk,{})]})]})]})}function _k(e){var t=e.children,n=e.justify;return(0,i.tZ)("div",{css:{display:"flex",flexGrow:1,flexBasis:0,alignItems:"center",justifyContent:n,columnGap:Z.TV.space8,minWidth:0},children:t})}var Ik=n(27378),Gk=n(80469),Dk=Gt();function Pk(e){if((0,fn.Z)(e,pe.YW)){var t=e.state.field(Dk.state,!1);return{compareTo:t,changed:e.startState.field(Dk.state,!1)!==t}}return{compareTo:e.field(Dk.state,!1),changed:!1}}function Bk(e,t){e.state.field(Dk.state,!1)!==t&&e.dispatch({effects:Dk.effect.of(t)})}var Uk,Ak,Nk=pe.QQ.define({create:function(){return null},update:function(e,t){var n=Pk(t),r=n.compareTo,i=n.changed;if(!r)return null;if(!t.docChanged&&!i)return e;var o=t.state.doc.toString();return new Gk.PO(o,r)}}),Lk=null!==(Uk=globalThis.requestIdleCallback)&&void 0!==Uk?Uk:globalThis.requestAnimationFrame,Xk=null!==(Ak=globalThis.cancelIdleCallback)&&void 0!==Ak?Ak:globalThis.cancelAnimationFrame,Mk=ve.p.line({class:"cm-diff-deleted"}),Ok=function(e){(0,He.Z)(n,e);var t=(0,Ve.Z)(n);function n(e,r){var i;return(0,ze.Z)(this,n),(i=t.call(this)).insertion=e,i.highlight=r,i}var r=n.prototype;return r.destroy=function(){this.pendingHighlight&&Xk(this.pendingHighlight)},r.toDOM=function(){var e=document.createElement("div");return e.className="cm-diff-inserted cm-line",this.updateDOM(e),e},r.eq=function(e){return!e.pendingHighlight&&this.insertion===e.insertion},r.updateDOM=function(e){var t=this;return this.pendingHighlight&&(Xk(this.pendingHighlight),this.pendingHighlight=null),this.insertion.length?e.textContent=this.insertion:e.innerHTML="&nbsp;",this.highlight&&this.insertion.length&&(this.pendingHighlight=Lk((function(){if(t.highlight){t.pendingHighlight=null;try{var n=t.highlight();e.innerHTML="",e.append(n)}catch(r){}}}))),!0},n}(ve.l9),Wk=pe.QQ.define({create:function(){return ve.p.none},update:function(e,t){var n=t.state.field(Nk,!1);if(!n)return ve.p.none;var r=Pk(t).changed;if(!t.docChanged&&!r)return e.map(t.changes);var i=[],o=function(e,t){i.push({from:e,to:e,value:t})},a=n.startInsertions();if(a){var l=!0,c=!1,s=void 0;try{for(var u,d=function(){var e=u.value,n=new Ok(e.content,(function(){return Fk(t.state,e.content)}));o(0,ve.p.widget({widget:n,side:-1,block:!0}))},f=a[Symbol.iterator]();!(l=(u=f.next()).done);l=!0)d()}catch(y){c=!0,s=y}finally{try{l||null==f.return||f.return()}finally{if(c)throw s}}}var h=!0,p=!1,v=void 0;try{for(var m,g=function(){var e=m.value;if(e.isDeleted&&o(e.from,Mk),e.insertions){var n=!0,r=!1,i=void 0;try{for(var a,l=function(){var n=a.value,r=new Ok(n.content,(function(){return Fk(t.state,n.content)}));o(e.to,ve.p.widget({widget:r,side:1,block:!0}))},c=e.insertions[Symbol.iterator]();!(n=(a=c.next()).done);n=!0)l()}catch(y){r=!0,i=y}finally{try{n||null==c.return||c.return()}finally{if(r)throw i}}}},Z=n.lines()[Symbol.iterator]();!(h=(m=Z.next()).done);h=!0)g()}catch(y){p=!0,v=y}finally{try{h||null==Z.return||Z.return()}finally{if(p)throw v}}return ve.p.set(i,!0)},provide:function(e){return ve.tk.decorations.from(e)}});function Fk(e,t){var n,r=document.createDocumentFragment(),i=null===(n=e.facet(cn.dK))||void 0===n?void 0:n.parser;if(!i){var o=document.createElement("span");return o.textContent=t,r.append(o),r}var a=i.parse(t),l={style:function(t){return(0,cn.QN)(e,t)}},c=0;if((0,Ik.bW)(a,l,(function(e,n,i){if(e>c){var o=document.createElement("span");o.textContent=t.slice(c,e),r.append(o)}var a=document.createElement("span");a.className=i,a.textContent=t.slice(e,n),r.append(a),c=n})),c<t.length){var s=document.createElement("span");s.textContent=t.slice(c),r.append(s)}return r}var jk,zk=function(e){(0,He.Z)(n,e);var t=(0,Ve.Z)(n);function n(e){var r;return(0,ze.Z)(this,n),(r=t.call(this)).line=e,r}var r=n.prototype;return r.eq=function(e){return this.line===e.line},r.toDOM=function(){var e=document.createElement("div");return e.className="cm-diff-gutter-element-fallback",e.innerText=this.line.toString(),e},n}(ve.SJ),Hk=function(e){(0,He.Z)(n,e);var t=(0,Ve.Z)(n);function n(e,r){var i;return(0,ze.Z)(this,n),(i=t.call(this)).elementClass="cm-diff-gutter-block",i.lines=e,r&&(i.preceding=r),i}var r=n.prototype;return r.eq=function(e){var t,n,r,i;if((null===(t=this.lines)||void 0===t?void 0:t.length)!==(null===e||void 0===e||null===(n=e.lines)||void 0===n?void 0:n.length))return!1;if((null===(r=this.preceding)||void 0===r?void 0:r.length)!==(null===e||void 0===e||null===(i=e.preceding)||void 0===i?void 0:i.length))return!1;if(this.preceding&&e.preceding)for(var o=0;o<this.preceding.length;o++){var a=this.preceding[o],l=e.preceding[o];if(a.height!==l.height||a.left!==l.left||a.right!==l.right)return!1}if(this.lines&&e.lines)for(var c=0;c<this.lines.length;c++){var s=this.lines[c],u=e.lines[c];if(s.height!==u.height||s.left!==u.left||s.right!==u.right)return!1}return!0},r.toDOM=function(){var e,t=this,n=document.createElement("div");if(this.preceding){var r=this.preceding.slice().reverse(),i=0,o=!0,a=!1,l=void 0;try{for(var c,s=r[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=c.value;i+=u.height;var d=this.piece(u);d.style.position="absolute",d.style.top="-".concat(i,"px"),n.prepend(d)}}catch(h){a=!0,l=h}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}}var f=this.lines.map((function(e){return t.piece(e)}));return(e=n).append.apply(e,(0,I.Z)(f)),n},r.piece=function(e){var t=e.height,n=e.left,r=e.right,i=document.createElement("span");i.className="cm-diff-gutter-part",null!==n&&(i.innerText=n.toString());var o=document.createElement("span");o.className="cm-diff-gutter-part",null!==r&&(o.innerText=r.toString());var a=document.createElement("div");return a.className="cm-diff-gutter-element",a.style.height="".concat(t,"px"),a.append(i,o),null!==n&&null!==r||(null===r&&a.classList.add("cm-diff-gutter-deleted"),null===n&&a.classList.add("cm-diff-gutter-inserted")),a},n}(ve.SJ),Vk=(0,ve.v5)({class:"cm-lineNumbers cm-diff-gutter",markers:function(e){var t=e.viewportLineBlocks,n=[],r=Pk(e.state).compareTo,i=e.state.field(Nk,!1),o=function(e,t){n.push({from:e,to:e,value:t})};if(!r||!i){var a=!0,l=!1,c=void 0;try{for(var s,u=t[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var d=s.value,f=e.state.doc.lineAt(d.from).number;if(d.type===ve.kH.Text)o(d.from,new zk(f));else if(Array.isArray(d.type)){var h=!0,p=!1,v=void 0;try{for(var m,g=d.type[Symbol.iterator]();!(h=(m=g.next()).done);h=!0){var Z=m.value;if(Z.type===ve.kH.Text){o(Z.from,new zk(f));break}}}catch(ie){p=!0,v=ie}finally{try{h||null==g.return||g.return()}finally{if(p)throw v}}}}}catch(ie){l=!0,c=ie}finally{try{a||null==u.return||u.return()}finally{if(l)throw c}}return pe.Xs.of(n,!0)}var y=!0,b=!1,w=void 0;try{for(var x,C=t[Symbol.iterator]();!(y=(x=C.next()).done);y=!0){var k=x.value,S=[],E=e.state.doc.lineAt(k.from).number,T=i.line(E);if(T){var R,_=e.defaultLineHeight,I=T.offset,G=T.isDeleted,D=T.insertions,P=1===E?i.startInsertions():null,B=P?P.length:0,U=P?[]:null;if(Array.isArray(k.type)&&k.type.length>=B+(null!==(R=null===D||void 0===D?void 0:D.length)&&void 0!==R?R:0)+1){for(var A=0;A<k.type.length;A++){var N=k.type[A];if((null===N||void 0===N?void 0:N.type)===ve.kH.Text){if(P&&U)for(var L=0;L<P.length;L++){var X,M=P[L],O=k.type[A-L-1];U.push({height:null!==(X=null===O||void 0===O?void 0:O.height)&&void 0!==X?X:_,left:null,right:M.number})}if(S.push({height:N.height,left:E,right:G?null:E+I}),D)for(var W=0;W<D.length;W++){var F,j=D[W],z=k.type[A+W+1];S.push({height:null!==(F=null===z||void 0===z?void 0:z.height)&&void 0!==F?F:_,left:null,right:j.number})}break}}o(k.from,new Hk(S,U))}else{if(P&&U){var H=!0,V=!1,q=void 0;try{for(var $,Y=P[Symbol.iterator]();!(H=($=Y.next()).done);H=!0){var K=$.value;U.push({height:_,left:null,right:K.number})}}catch(ie){V=!0,q=ie}finally{try{H||null==Y.return||Y.return()}finally{if(V)throw q}}}if(S.push({height:k.height,left:E,right:G?null:E+I}),D){var Q=!0,J=!1,ee=void 0;try{for(var te,ne=D[Symbol.iterator]();!(Q=(te=ne.next()).done);Q=!0){var re=te.value;S.push({height:_,left:null,right:re.number})}}catch(ie){J=!0,ee=ie}finally{try{Q||null==ne.return||ne.return()}finally{if(J)throw ee}}}o(k.from,new Hk(S,U))}}}}catch(ie){b=!0,w=ie}finally{try{y||null==C.return||C.return()}finally{if(b)throw w}}return pe.Xs.of(n,!0)},lineMarkerChange:function(e){if(e.docChanged)return!0;var t=!0,n=!1,r=void 0;try{for(var i,o=e.transactions[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){if(Pk(i.value).changed)return!0}}catch(a){n=!0,r=a}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return!1},initialSpacer:function(e){return new zk(e.state.doc.lines)},updateSpacer:function(e,t){var n=t.state.doc.lines;return Pk(t.state).compareTo?new Hk([{height:0,left:n,right:n}]):new zk(n)}}),qk="#0053A644",$k="#c93c3733",Yk=[ve.tk.baseTheme({".cm-diff-inserted":{backgroundColor:qk},".cm-diff-deleted":{backgroundColor:$k},".cm-diff-gutter .cm-diff-gutter-block":{position:"relative",padding:"0"},".cm-diff-gutter-element":{display:"flex",width:"100%",alignItems:"center",columnGap:"8px",padding:"0 6px",borderLeft:"4px solid transparent"},".cm-diff-gutter-part":{display:"inline-block",height:"100%",width:"50%",textAlign:"center"},".cm-diff-gutter-inserted":{backgroundColor:qk,borderLeftColor:"#0053A6"},".cm-diff-gutter-deleted":{backgroundColor:$k,borderLeftColor:"#c93c37"},".cm-diff-gutter + .cm-foldGutter":{width:"0",transform:"translateX(-12px)",overflow:"visible"},".cm-diff-gutter .cm-diff-gutter-element":{paddingRight:"16px"},".cm-diff-gutter .cm-diff-gutter-element-fallback":{paddingRight:"12px"}}),Dk.state,Nk,Wk,Vk,(0,cn.mi)({openText:"\u25bc",closedText:"\u25b6\ufe0e"})],Kk=function(){function e(t){var n=this;(0,ze.Z)(this,e),this.view=t,this.overlay=document.createElement("div"),this.overlay.className="cm-overlay-generic",this.overlay.style.pointerEvents="none",this.overlay.style.contain="size style",this.overlay.setAttribute("aria-hidden","true"),this.view.scrollDOM.appendChild(this.overlay),this.elements=new Map,this.measureRequest={key:this,read:function(){var e=[],t=n.view.scrollDOM.getBoundingClientRect(),r=n.view.scrollDOM.scrollTop,i=n.view.scrollDOM.scrollLeft,o=!0,a=!1,l=void 0;try{for(var c,s=n.elements.values()[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=c.value,d=u.dom,f=u.pos,h=u.offsetX,p=u.offsetY,v=n.view.coordsAtPos(f),m=n.view.lineBlockAt(f);if(v){var g=m.top-r+t.top+n.view.documentPadding.top,Z=Math.round((v.top-g)/n.view.defaultLineHeight)*n.view.defaultLineHeight+g,y=i+v.left-t.left+h,b=r+Z-t.top+p;e.push({dom:d,x:y,y:b})}else e.push({dom:d,x:null,y:null})}}catch(w){a=!0,l=w}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}return e},write:function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=function(){var e=i.value,t=e.dom,n=e.x,r=e.y;if(null===n||null===r)return t.style.visibility="hidden",t.style.transition="none","continue";t.style.visibility="",t.style.transform="translate(".concat(n,"px, ").concat(r,"px)"),t.style.transition.startsWith("none")&&requestAnimationFrame((function(){t.style.transition=""}))},a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0)o()}catch(l){n=!0,r=l}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}}}var t=e.prototype;return t.destroy=function(){this.view.scrollDOM.removeChild(this.overlay)},t.map=function(e){if(e.geometryChanged||e.viewportChanged){if(e.docChanged){var t=Array.from(this.elements.values()),n=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value,c=e.changes.mapPos(l.pos,-1,pe.gc.TrackDel);c?l.pos=c:this.removeElement(l.dom)}}catch(s){r=!0,i=s}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}}this.view.requestMeasure(this.measureRequest)}},t.addElement=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(!this.elements.has(e)){var i={dom:e,pos:t,offsetX:n,offsetY:r};return this.elements.set(e,i),this.overlay.appendChild(e),e.style.visibility="hidden",e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.willChange="transform",e.style.transition="none",this.view.requestMeasure(this.measureRequest),i}},t.removeElement=function(e){this.elements.has(e)&&(this.elements.delete(e),e.parentNode===this.overlay&&this.overlay.removeChild(e))},t.updateElement=function(e,t){var n=t.pos,r=t.offsetX,i=t.offsetY,o=this.elements.get(e);o&&(void 0!==n&&(o.pos=n),void 0!==r&&(o.offsetX=r),void 0!==i&&(o.offsetY=i),this.view.requestMeasure(this.measureRequest))},t.clear=function(){this.elements.clear(),this.overlay.innerHTML=""},e}();!function(e){e[e.Insertion=0]="Insertion",e[e.Deletion=1]="Deletion"}(jk||(jk={}));var Qk=Symbol.iterator,Jk=function(){function e(t){(0,ze.Z)(this,e),this.map=new Map,this.duration=t}var t=e.prototype;return t.set=function(e,t,n,r,i){var o=this.map.get(e);o||(o=new Map,this.map.set(e,o)),o.set(t,{from:e,to:t,time:n,type:r,cursor:i})},t.get=function(e,t){var n=this.map.get(e);if(n)return n.get(t)},t.update=function(t){var n=Date.now(),r=new e(this.duration),i=!0,o=!1,a=void 0;try{for(var l,c=this[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;if(!(n-s.time>this.duration)){var u=t.changes.mapPos(s.from,-1,pe.gc.TrackDel),d=t.changes.mapPos(s.to,-1,pe.gc.TrackDel);if(null!==u&&null!==d){var f=s.cursor;t.docChanged&&(f=!1),r.set(u,d,s.time,s.type,f)}}}}catch(h){o=!0,a=h}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return t.changes.iterChangedRanges((function(e,t,i,o){var a=i!==o?jk.Insertion:jk.Deletion;r.set(i,o,n,a,!0)}),!0),r},t.cursors=function(){var e,t,n,r,i,o,a;return(0,fe.__generator)(this,(function(l){switch(l.label){case 0:e=!0,t=!1,n=void 0,l.label=1;case 1:l.trys.push([1,6,7,8]),r=this[Symbol.iterator](),l.label=2;case 2:return(e=(i=r.next()).done)?[3,5]:(o=i.value).cursor?[4,{type:o.type,pos:o.to}]:[3,4];case 3:l.sent(),l.label=4;case 4:return e=!0,[3,2];case 5:return[3,8];case 6:return a=l.sent(),t=!0,n=a,[3,8];case 7:try{e||null==r.return||r.return()}finally{if(t)throw n}return[7];case 8:return[2]}}))},t[Qk]=function(){var e=[],t=!0,n=!1,r=void 0;try{for(var i,o=this.map.values()[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value,l=!0,c=!1,s=void 0;try{for(var u,d=a.values()[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var f=u.value;e.push(f)}}catch(h){c=!0,s=h}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}}}catch(h){n=!0,r=h}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return e[Symbol.iterator]()},e}(),eS=1e3,tS="cm-flash-insertion",nS="cm-flash-deletion",rS="cm-flash-element",iS=ve.tk.theme((0,o.Z)({},".".concat(tS,", .").concat(nS),{display:"inline-block"}));function oS(e){return ve.p.mark({class:nS,tagName:rS,attributes:{"data-time":e.toString()}})}function aS(e,t){var n=e===jk.Insertion?"rgba(0, 100, 255, 1)":"rgba(255, 32, 32, 1)",r=document.createElement("div");return r.style.width="3px",r.style.height=t,r.style.borderRadius="1px",r.style.backgroundColor=n,r.animate&&r.animate({opacity:[1,0]},{duration:500,delay:400,fill:"forwards"}),r}var lS=function(e){(0,He.Z)(n,e);var t=(0,Ve.Z)(n);function n(){return(0,ze.Z)(this,n),t.apply(this,arguments)}var r=n.prototype;return r.isNested=function(){for(var e=this.parentElement;e&&!e.classList.contains("cm-line");){if((0,fn.Z)(e,n)&&e.type===this.type)return!0;e=e.parentElement}return!1},r.stop=function(){var e,t;null===(e=this.animation)||void 0===e||null===(t=e.cancel)||void 0===t||t.call(e)},r.play=function(){var e=this.isPlaying;if(this.stop(),!this.isNested()){var t=Date.now()-parseInt(this.getAttribute("data-time")||"0",10);if(!(t>eS)){var n=this.type===jk.Insertion?"rgba(100, 255, 0, 0.3)":"rgba(255, 32, 32, 0.25)",r={backgroundColor:e?[n,n,"transparent"]:["transparent",n,"transparent"],offset:[0,.05,1]},i={id:"cm-flash-anim",duration:eS,easing:"ease-in-out",delay:-t};this.animate&&(this.animation=this.animate(r,i))}}},r.connectedCallback=function(){this.play()},r.attributeChangedCallback=function(e,t,n){"data-time"===e&&n&&this.play()},(0,sn.Z)(n,[{key:"type",get:function(){return this.classList.contains(tS)?jk.Insertion:jk.Deletion}},{key:"isPlaying",get:function(){var e;return"running"===(null===(e=this.animation)||void 0===e?void 0:e.playState)}}],[{key:"observedAttributes",get:function(){return["data-time"]}}]),n}((0,dg.Z)(HTMLElement));customElements.get(rS)||customElements.define(rS,lS);var cS=function(){function e(t){(0,ze.Z)(this,e),this.view=t,this.prevFlashes=new Jk(eS),this.decorations=ve.p.set([]),this.hasRenderedOnce=!1,this.overlay=new Kk(t)}var t=e.prototype;return t.destroy=function(){this.overlay.destroy()},t.update=function(e){if(this.hasRenderedOnce){var t,n=this.prevFlashes.update(e),r=[],i=!0,o=!1,a=void 0;try{for(var l,c=n[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;switch(s.type){case jk.Insertion:r.push({from:s.from,to:s.to,value:(t=s.time,ve.p.mark({class:tS,tagName:rS,attributes:{"data-time":t.toString()}}))});break;case jk.Deletion:var u=e.state.wordAt(s.from);u&&r.push({from:u.from,to:s.to,value:oS(s.time)})}}}catch(w){o=!0,a=w}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}this.overlay.clear();var d=this.view.defaultLineHeight.toString()+"px",f=!0,h=!1,p=void 0;try{for(var v,m=n.cursors()[Symbol.iterator]();!(f=(v=m.next()).done);f=!0){var g=v.value,Z=g.type,y=g.pos,b=aS(Z,d);this.overlay.addElement(b,y)}}catch(w){h=!0,p=w}finally{try{f||null==m.return||m.return()}finally{if(h)throw p}}this.prevFlashes=n,this.decorations=ve.p.set(r,!0)}else e.docChanged&&(this.hasRenderedOnce=!0)},e}(),sS=ve.lg.fromClass(cS,{decorations:function(e){return e.decorations}}),uS=pe.Wl.lowest([iS,sS]),dS=function(){function e(t){(0,ze.Z)(this,e),this.changes=[],this.forward=[],this.inverted=[],this.locations=[];var n=!0,r=!1,i=void 0;try{for(var o,a=this,l=function(){var e=o.value,t=e.changes,n=e.invertedChanges,r=null,i=!1;t.iterChangedRanges((function(e,t,n,o){i||(r||(r=o),n!==o&&(i=!0))})),a.forward.push(t),a.inverted.push(n),a.locations.push(r)},c=t[Symbol.iterator]();!(n=(o=c.next()).done);n=!0)l()}catch(s){r=!0,i=s}finally{try{n||null==c.return||c.return()}finally{if(r)throw i}}}var t=e.prototype;return t.slice=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;if(e>this.length||t>this.length||e<0||t<0)throw new Error("Invalid version range");if(e===t){if(0===this.length)return[pe.as.empty(0),null];var n=this.forward[e].newLength;return[pe.as.empty(n),null]}var r,i=fS(e<t?this.forward.slice(e,t):this.inverted.slice(t,e).reverse()),o=e<t?e:t-1,a=null!==(r=this.locations[o])&&void 0!==r?r:null;return null!==a&&a>i.newLength&&(a=i.newLength),[i,a]},t.get=function(e){if(e>this.length||e<0)throw new Error("Invalid version");return this.changes[e]},t.documentFor=function(e){if(e>this.length||e<0)throw new Error("Invalid version");if(0===this.length)return"";var t=(0,a.Z)(this.slice(0,e),1)[0],n=pe.xv.of([""]);return t.apply(n).sliceString(0)},(0,sn.Z)(e,[{key:"length",get:function(){return this.forward.length}}]),e}();function fS(e){if(0===e.length)return pe.as.empty(0);if(1===e.length)return e[0];var t=(0,zf.Z)(e),n=t[0],r=t.slice(1),i=n,o=!0,a=!1,l=void 0;try{for(var c,s=r[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=c.value;i=i.compose(u)}}catch(d){a=!0,l=d}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}return i}function hS(e,t){var n=(0,l.useMemo)((function(){return(null===t||void 0===t?void 0:t.changes)?new dS(t.changes):null}),[null===t||void 0===t?void 0:t.changes]),r=(0,l.useMemo)((function(){return n?n.documentFor(n.length):null}),[n]),i=(0,l.useRef)({current:-1,next:0,pending:!1});(0,l.useEffect)((function(){if(e)return function(){i.current.pending=!1,i.current={current:-1,next:0,pending:!1}}}),[e]),(0,l.useEffect)((function(){if(e&&t&&n){t.comparing?Bk(e,r):Bk(e,null);var o=i.current;o.next=t.version,o.pending||o.current===o.next||(o.pending=!0,requestAnimationFrame((function(){!1!==o.pending&&(o.pending=!1,e&&n&&o.current!==o.next&&(!function(e,t,n,r){var i=(0,a.Z)(t.slice(n+1,r+1),2),o=i[0],l=i[1];if(o.length!==e.state.doc.length){var c=(0,a.Z)(t.slice(0,r+1),1)[0];if(c.length!==e.state.doc.length)throw new Error("Unresolvable mismatch between changes and document");return e.dispatch({changes:{from:0,to:e.state.doc.length}}),void e.dispatch({changes:c})}e.dispatch({changes:o,effects:l?ve.tk.scrollIntoView(l,{yMargin:10}):void 0})}(e,n,o.current,o.next),o.current=o.next))})))}}),[e,t,n,r])}var pS=[uS,Yk];function vS(e){var t=e.filePath,n=(0,a.Z)(rs(),1)[0],r=as(),o=(0,Oo.Z)({filePath:t,noHistory:!0,readOnly:!0,hideGutter:!0,extensions:pS,onException:function(e){r(e,"viewer-codemirror")}}),c=o.view,s=o.ref;return Q(c),function(e){var t=es.current();(0,l.useEffect)((function(){e!==t&&es.set((function(){return e}))}),[e,t])}(c),Xc({view:c}),rc({view:c}),hS(c,n),(0,i.tZ)("div",{css:Mc,children:(0,i.BX)("div",{css:Oc,children:[!n&&(0,i.tZ)("div",{css:Fc,children:(0,i.tZ)($l.Z,{})}),n&&0!==n.count?(0,i.tZ)("div",{css:Oc,children:(0,i.tZ)("div",{ref:s,css:Wc})}):(0,i.tZ)(mS,{})]})})}function mS(){return(0,i.tZ)("div",{css:[Oc,{display:"flex",alignItems:"center",justifyContent:"center"}],children:(0,i.tZ)("span",{children:"This file has no history."})})}var gS={Content:function(e){var t=e.pane,n=e.options;return(0,i.tZ)(ZS,(0,_.Z)((0,R.Z)({},t.data),{replacePane:n.replacePane}))},Icon:function(e){var t=e.size;return(0,i.tZ)(Qc.Z,{size:t})},getTitle:function(e){return e.data.path?"History - ".concat((0,m.UO)(e.data.path)):"History - no file open"}};function ZS(e){var t=e.path,n=e.replacePane,r=os(t,n),o=ad(t);return(0,Hu.L5)((function(){if(o)return{commands:o}}),[o]),t?(0,i.tZ)(A.zt,{scope:$,children:(0,i.tZ)(is.Provider,{value:r,children:(0,i.BX)("div",{css:{position:"relative",display:"flex",flexDirection:"column",overflowY:"hidden",height:"100%",width:"100%"},children:[(0,i.tZ)(rd,{path:t,replacePane:n}),(0,i.tZ)(vS,{filePath:t}),(0,i.tZ)(Rk,{filePath:t})]})})}):null}var yS=n(58685),bS=n.n(yS),wS=n(57484),xS=n(89135);function CS(e){var t=e.activeFile,n=l.useRef(null),r=l.useRef(null),o=(0,f.Z)().fs,c=(0,ki.Z)(),s=c.showError,u=c.showConfirm,d=(0,ks.Z)(),p=(0,a.Z)(l.useState(!1),2),v=p[0],m=p[1],g=(0,h.Z)((function(){var e=n.current;if(!e)return null;e.width=e.offsetWidth,e.height=e.offsetHeight;var t=e.getContext("2d");t&&(t.imageSmoothingEnabled=!1)}),{type:"debounce",wait:100});return l.useEffect((function(){var e=function(){if(!c)throw new Error("Tried to export png but peditCtxRef was null");var e=window.prompt("Export as:");if(e){var t="".concat(e,".png"),n=c.curFrame().toPNG();o.writeFile(t,hc.Z.from(n)).then((function(){u("Successfully exported to ".concat(t))}))}},i=!1;if(t&&n.current){var a=n.current,l=t,c=null,d=l.endsWith(".kbmsprite");return function(){f.apply(this,arguments)}(),function(){i=!0,c&&(c.cleanUp(),c=null),r.current&&(r.current=null)}}function f(){return(f=(0,de.Z)((function(){var t,n,u;return(0,fe.__generator)(this,(function(f){switch(f.label){case 0:return[4,o.readFile(l)];case 1:return t=f.sent(),i?[2]:t.error?(s("failed to read ".concat(l)),[2]):(n=t.content.toString(),u=n&&JSON.parse(n),a.width=a.offsetWidth,a.height=a.offsetHeight,(c=bS()(u?u.fromKaboom?{canvas:a,width:u.width,height:u.height}:{canvas:a,data:d?(0,xS.C)(u):u}:{canvas:a,width:64,height:64})).on("change",h),c.on("save",h),c.on("export",e),r.current=c.save,a.focus(),[2])}}))}))).apply(this,arguments)}function h(){return p.apply(this,arguments)}function p(){return(p=(0,de.Z)((function(){var e;return(0,fe.__generator)(this,(function(t){switch(t.label){case 0:if(i)return[2];if(!c)throw new Error("Expected peditCtx");return e=c.save(),d?[4,(0,xS.u)(e)]:[3,2];case 1:e=t.sent(),t.label=2;case 2:return[4,o.writeFile(l,hc.Z.from(JSON.stringify(e)))];case 3:return t.sent().error&&i&&s("Failed to save ".concat(l,", please try again")),[2]}}))}))).apply(this,arguments)}}),[o,t,n]),(0,i.BX)("div",{className:L().dynamic([["c86cb3d51fed2583",[d?"0 3px 0 3px ".concat(d):"0"]]])+" pedit",children:[(0,i.tZ)(L(),{id:"c86cb3d51fed2583",dynamic:[d?"0 3px 0 3px ".concat(d):"0"],children:".pedit.__jsx-style-dynamic-selector{width:100%;height:100%;position:relative;z-index:3;-webkit-box-shadow:".concat(d?"0 3px 0 3px ".concat(d):"0",";-moz-box-shadow:").concat(d?"0 3px 0 3px ".concat(d):"0",";box-shadow:").concat(d?"0 3px 0 3px ".concat(d):"0","}canvas.__jsx-style-dynamic-selector{width:100%;height:100%;outline:none;position:absolute;top:0;left:0}.upgrade-button.__jsx-style-dynamic-selector{position:absolute;bottom:0;left:0;z-index:100;padding:var(--space-4);border:solid 2px var(--foreground-default);background:var(--background-default);font-weight:700;outline:none}.upgrade-button.__jsx-style-dynamic-selector:hover{cursor:pointer;background:var(--background-higher)}.upgrade-modal.__jsx-style-dynamic-selector{background:var(--background-default);padding:var(--space-32)}")}),(0,i.tZ)("canvas",{ref:function(e){n.current=e,g(e)},tabIndex:0,className:L().dynamic([["c86cb3d51fed2583",[d?"0 3px 0 3px ".concat(d):"0"]]])},t),t&&t.endsWith(".kbmsprite")?(0,i.tZ)("button",{onClick:function(){return m(!0)},className:L().dynamic([["c86cb3d51fed2583",[d?"0 3px 0 3px ".concat(d):"0"]]])+" upgrade-button",children:"Upgrade"}):null,(0,i.tZ)($g.u,{isOpen:v,onRequestClose:function(){return m(!1)},children:(0,i.tZ)(wS.Z,{prompt:"Upgrade to '.pedit'?",desc:"You\u2019re using '.kbmsprite' which is recently deprecated. Do you want to upgrade to the new '.pedit' format? It\u2019ll create a new '.pedit' file with the same content. If you\u2019re using it with Kaboom, the new '.pedit' format won't work with kaboom before v0.4.0.",onCancel:function(){return m(!1)},confirmText:"Upgrade",icon:(0,i.tZ)(kl.Z,{}),onConfirm:function(){if(r.current)if(t){var e=t.replace(/\.kbmsprite$/,".pedit"),n=hc.Z.from(JSON.stringify(r.current()));o.writeFile(e,n).then((function(t){t.error?s("Failed to write to ".concat(e)):u("Successfully written to ".concat(e))})),m(!1)}else s("failed to get active file");else s("Please try again after the file loads")}})})]})}var kS={Content:function(e){var t=e.pane,n=e.options.replacePane;return(0,i.tZ)(SS,{path:t.data.path,replacePane:n})},Icon:function(e){var t=e.size;return(0,i.tZ)(Cd.Z,{size:t})},getTitle:function(e){return(0,m.UO)(e.data.path)}};function SS(e){var t=e.path,n=e.replacePane,r=ad(t);return(0,Hu.L5)((function(){if(r)return{commands:r}}),[r]),(0,i.BX)(i.HY,{children:[(0,i.tZ)(rd,{path:t,replacePane:n}),(0,i.tZ)(td,{children:(0,i.tZ)(CS,{activeFile:t})})]})}var ES=n(24900),TS={Content:function(){return(0,i.tZ)(Z.G7,{css:[Z.l0.p(8),Hu.F3],children:(0,i.tZ)(ES.Z,{})})},Icon:function(e){var t=e.size;return(0,i.tZ)(wr.Z,{size:t})},getTitle:function(){return"Unit Tests"}},RS=n(43758),_S=n(75695),IS=function(e){var t=e.title,n=e.json,r=e.initialExpanded,o=void 0===r||r,a=(0,l.useState)(o),c=a[0],s=a[1];return(0,i.tZ)(Z.Qd,{expanded:c,onClick:function(){return s((function(e){return!e}))},headerContent:(0,i.tZ)(Z.G7,{css:[Z.l0.rowWithGap(8),Z.l0.align.center],children:(0,i.tZ)(Z.xv,{variant:"subheadDefault",children:t})}),children:(0,i.tZ)(Z.G7,{css:[Z.l0.p(12),Z.l0.colWithGap(8),Z.l0.height("100%")],children:(0,i.tZ)(Ci.C,{json:n})})})},GS=function(e){var t=e.title,n=e.text,r=(0,l.useState)(!0),o=r[0],a=r[1];return(0,i.tZ)(Z.Qd,{expanded:o,onClick:function(){return a((function(e){return!e}))},headerContent:(0,i.tZ)(Z.G7,{css:[Z.l0.rowWithGap(8),Z.l0.align.center],children:(0,i.tZ)(Z.xv,{variant:"subheadDefault",children:t})}),children:(0,i.tZ)(Z.G7,{css:[Z.l0.p(12),Z.l0.colWithGap(8),Z.l0.height("100%")],children:(0,i.tZ)(Z.xv,{multiline:!0,css:[Z.l0.fontSize(16),{whiteSpace:"pre-wrap"}],children:n})})})},DS=n(11279),PS=n(74586);function BS(){var e=(0,$r.Z)(["\n  query AdminPanelGitView {\n    currentUser {\n      id\n      gitHubInfo {\n        accessToken\n        installations {\n          id\n          type\n          avatarUrl\n          name\n        }\n        userInfo {\n          name\n          email\n          avatarUrl\n        }\n      }\n    }\n  }\n"]);return BS=function(){return e},e}var US={},AS=(0,Yr.Ps)(BS());function NS(e){var t=e.event,n=t.input,r=t.output,o=t.error,a=t.start,c=t.end,s=t.cached,u=(0,l.useState)(!0),d=u[0],f=u[1],h=(0,Ut.P)({controlName:"flag-use-new-code-rendering"}),p=(0,l.useCallback)((function(){return f((function(e){return!e}))}),[]),v="bash"===n[0]&&"-c"===n[1]?n.slice(2).join(" "):n.join(" "),m=r.trimEnd();return(0,i.BX)(Z.G7,{css:[(0,Z.ec)(o?"negative":"positive"),s?{opacity:.75}:void 0,Z.l0.borderRadius(8)],children:[(0,i.BX)(Z.G7,{onClick:p,onKeyDown:function(e){"Enter"!==e.key&&" "!==e.key||p()},tabIndex:0,css:[Z.l0.rowWithGap(4),Z.l0.justify.spaceBetween,Z.l0.py(4),Z.l0.px(8),Z.l0.font.code,Z.l0.cursor.pointer],children:[(0,i.BX)("span",{css:{whiteSpace:"pre-wrap",wordBreak:"break-word"},children:["$ ",v]}),(0,i.BX)("span",{css:[Z.l0.color.foregroundDimmer,Z.l0.flex.shrink(0)],children:[o?(0,i.tZ)("span",{css:[Z.l0.mr(16)],children:o}):null,s?(0,i.tZ)("span",{children:"CACHED"}):(0,i.BX)("span",{children:[c-a," ms"]})]})]}),d?null:(0,i.tZ)(Z.G7,{css:[Z.l0.px(2),Z.l0.pb(2),Z.l0.borderRadius(0,0,8,8)],children:(0,i.tZ)(Z.Tg,{elevated:!0,css:[Z.l0.p(8),Z.l0.borderRadius(8)],children:h?(0,i.tZ)(Ai.Z,{code:m}):(0,i.tZ)(Ci.ZP,{code:m,hideGutter:!0})})})]})}var LS=n(79504),XS=n(85036);function MS(e){var t=e.t,n=e.children;return(0,i.BX)("span",{css:{display:"flex",alignItems:"flex-start",columnGap:"0.5rem"},children:[(0,i.BX)(Z.xv,{css:{minWidth:"8em"},children:[t,": "]}),(0,i.tZ)("span",{children:n})]})}var OS=n(68327);var WS=l.memo((function(e){var t=e.log,n=e.timeRef,r=e.setTimeRef,o=JSON.stringify(t.cmd,null,2),a=n?t.timestamp-n:t.timestamp;return(0,i.BX)("div",{className:"jsx-c576d52646a14c5f "+("log "+(t.highlighted?"highlighted ":"")+("in"===t.dir?"in":"")||0),children:[(0,i.BX)("div",{className:"jsx-c576d52646a14c5f direction",children:[(0,i.tZ)("div",{className:"jsx-c576d52646a14c5f",children:t.dir}),(0,i.tZ)("div",{className:"jsx-c576d52646a14c5f",children:"in"===t.dir?"\u25b6\ufe0f":"\u2b05\ufe0f"}),(0,i.tZ)("div",{className:"jsx-c576d52646a14c5f",children:(0,i.tZ)(Z.zx,{small:!0,colorway:"positive",onClick:function(){return r(t.timestamp)},text:a.toFixed(0)+"ms"})})]}),(0,i.BX)("div",{className:"jsx-c576d52646a14c5f message",children:[t.channel.service||t.channel.name?(0,i.BX)("div",{className:"jsx-c576d52646a14c5f channel",children:[(0,i.tZ)("div",{className:"jsx-c576d52646a14c5f service",children:t.channel.service}),(0,i.tZ)("div",{className:"jsx-c576d52646a14c5f name",children:t.channel.name})]}):null,(0,i.tZ)("pre",{className:"jsx-c576d52646a14c5f",children:o})]}),(0,i.tZ)(L(),{id:"c576d52646a14c5f",children:".log.jsx-c576d52646a14c5f{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;color:deepskyblue;border:1px solid;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}.in.jsx-c576d52646a14c5f{color:red}.highlighted.jsx-c576d52646a14c5f{background:yellow}.direction.jsx-c576d52646a14c5f{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:space-evenly;-webkit-justify-content:space-evenly;-moz-box-pack:space-evenly;-ms-flex-pack:space-evenly;justify-content:space-evenly;text-align:center;min-width:30px;border-right:1px solid}.direction.jsx-c576d52646a14c5f>div.jsx-c576d52646a14c5f:not(:last-child){border-bottom:1px solid;width:100%}.message.jsx-c576d52646a14c5f{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1}.channel.jsx-c576d52646a14c5f{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;border-bottom:1px solid}.channel.jsx-c576d52646a14c5f>div.jsx-c576d52646a14c5f{-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1}.channel.jsx-c576d52646a14c5f>div.jsx-c576d52646a14c5f:not(:last-child){border-right:1px solid}.message.jsx-c576d52646a14c5f>pre.jsx-c576d52646a14c5f{-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1}"})]},t.index)}),(function(e,t){return e.log.index===t.log.index&&e.log.highlighted===t.log.highlighted&&e.timeRef===t.timeRef})),FS=function(e){var t=e.logs,n=e.timeRef,r=e.setTimeRef;return(0,i.BX)("div",{className:"jsx-ded4128a88e9355f log-list",children:[t.map((function(e){return(0,i.tZ)(WS,{log:e,timeRef:n,setTimeRef:r},e.index)})),(0,i.tZ)("div",{className:"jsx-ded4128a88e9355f bottom-anchor"}),(0,i.tZ)(L(),{id:"ded4128a88e9355f",children:".log-list.jsx-ded4128a88e9355f{overflow:auto;height:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.log-list.jsx-ded4128a88e9355f *.jsx-ded4128a88e9355f{overflow-anchor:none}.bottom-anchor.jsx-ded4128a88e9355f{overflow-anchor:auto!important;min-height:1px}"})]})};function jS(e){return"in"===e||"out"===e||""===e}var zS=function(e){var t=e.filters,n=e.updateFilters;return(0,i.BX)(Z.G7,{css:Z.l0.colWithGap(4),children:[(0,i.tZ)(Z.xv,{variant:"subheadDefault",children:"Regex (regex,flags):"}),(0,i.tZ)(Z.II,{id:"regex",onChange:function(e){var t=null;if(e.currentTarget.value){var r=(0,a.Z)(e.currentTarget.value.split(","),2),i=r[0],o=r[1];try{t=new RegExp(i,o)}catch(l){}}n({regexp:t})},placeholder:"\\w+,gi"}),(0,i.tZ)(Z.xv,{variant:"subheadDefault",children:"Directions:"}),(0,i.tZ)(Z.Ee,{css:Z.l0.rowWithGap(16),name:"direction",value:t.direction,onChange:function(e){var t=e.target.value;n({direction:jS(t)?t:""})},children:[{val:"",text:"Both"},{val:"in",text:"In"},{val:"out",text:"Out"}].map((function(e){return(0,i.BX)(Z.G7,{css:[Z.l0.rowWithGap(8)],children:[(0,i.tZ)(Z.Y8,{id:e.val,value:e.val}),(0,i.tZ)("label",{htmlFor:e.val,children:e.text})]},e.val)}))}),(0,i.tZ)(Z.xv,{variant:"subheadDefault",children:"Filter style:"}),(0,i.tZ)(Z.Ee,{css:Z.l0.rowWithGap(16),name:"filter-style",value:t.highlightOnly?"highlight":"filter",onChange:function(e){return n({highlightOnly:"highlight"===e.target.value})},children:[{val:"highlight",text:"Highlight"},{val:"filter",text:"Filter"}].map((function(e){return(0,i.BX)(Z.G7,{css:[Z.l0.rowWithGap(8)],children:[(0,i.tZ)(Z.Y8,{id:e.val,value:e.val}),(0,i.tZ)("label",{htmlFor:e.val,children:e.text})]},e.val)}))})]})},HS=n(69913),VS=n(60822),qS=n(62322),$S=n(19498);function YS(){var e=(0,$r.Z)(["\n  fragment AdminPanelRepl on Repl {\n    id\n    title\n    description\n    isProject\n    isPrivate\n    timeCreated\n    timeUpdated\n    slug\n    url\n    language\n    user {\n      id\n    }\n    config {\n      isServer\n      isVnc\n    }\n    isRenamed\n    isProjectFork\n    folderId\n    isOwner\n    origin {\n      id\n    }\n    source {\n      release {\n        id\n        repl {\n          id\n          url\n          templateLabel\n        }\n      }\n    }\n  }\n"]);return YS=function(){return e},e}function KS(){var e=(0,$r.Z)(["\n  query AdminPanelReplView($replId: String!) {\n    repl(id: $replId) {\n      ...AdminPanelRepl\n    }\n  }\n  ","\n"]);return KS=function(){return e},e}var QS={},JS=(0,Yr.Ps)(YS()),eE=(0,Yr.Ps)(KS(),JS);var tE=n(75270),nE=n(76382);function rE(e){var t=e.sessionId,n=(0,l.useState)(!1),r=n[0],o=n[1],a=(0,l.useState)(""),c=a[0],s=a[1],u=(0,l.useState)(!1),d=u[0],f=u[1],h=(0,ki.Z)().showConfirm,p=(0,Nd.H)();return null==t?(0,i.tZ)(O.G,{children:(0,i.tZ)(Z.xv,{children:"Something went wrong... no RUM session found... Try refreshing the page"})}):(0,i.BX)(O.G,{css:[W.l0.colWithGap(8)],children:[(0,i.BX)(Z.xv,{variant:"small",children:["RUM Session ID: ",t]}),(0,i.tZ)(Z.xv,{variant:"headerDefault",children:"Submit an Issue"}),(0,i.BX)(O.G,{css:[W.l0.colWithGap(16)],children:[(0,i.tZ)(Z.B,{id:p("message"),placeholder:"What can we do better?",value:c,onChange:function(e){return s(e.target.value)},disabled:r}),(0,i.BX)(O.G,{css:[W.l0.rowWithGap(8)],children:[(0,i.tZ)(Z.XZ,{id:p("issueInRecording"),checked:d,onChange:function(e){return f(e.target.checked)}}),(0,i.tZ)("label",{htmlFor:p("issueInRecording"),children:(0,i.tZ)(Z.xv,{children:"Issue is demoed in recording"})})]}),(0,i.tZ)(Z.zx,{onClick:function(){var e=je()();o(!0),(0,Be.fc)({name:"replitOnReplit:issue",context:{message:c,issueInRecording:d,customEventId:e}}),h("Issue submitted! Have a cookie \ud83c\udf6a",5e3),setTimeout((function(){o(!1),s(""),f(!1)}),5e3)},text:"Submit",disabled:r||0===c.trim().length,colorway:"primary"})]})]})}var iE,oE;!function(e){e.Repl="repl",e.Logs="logs",e.LSP="lsp",e.AI="ai",e.GhostwriterChat="aiChat",e.AST="ast",e.Git="git",e.History2="history2",e.Metadata="metadata",e.Override="override",e.DDRum="rum"}(iE||(iE={}));var aE=(oE={},(0,o.Z)(oE,iE.Repl,(function(){var e,t,n,r,o,a,l,c,s=(0,gi.Z)(),u=function(e){var t=(0,R.Z)({},QS,e);return li.a(eE,t)}({variables:{replId:s}}).data,d="Repl"===(null===u||void 0===u?void 0:u.repl.__typename)?JSON.parse(JSON.stringify(u.repl)):void 0;d&&(delete d.__typename,null===(e=d.user)||void 0===e||delete e.__typename,null===(t=d.origin)||void 0===t||delete t.__typename,delete d.config.__typename,null===(n=d.source)||void 0===n||delete n.__typename,null===(r=d.source)||void 0===r||null===(o=r.release)||void 0===o||delete o.__typename,null===(a=d.source)||void 0===a||null===(l=a.release)||void 0===l||null===(c=l.repl)||void 0===c||delete c.__typename);return(0,i.BX)(O.G,{css:[W.l0.colWithGap(16),W.l0.p(4)],children:[(0,i.tZ)(tE.Z,{replId:s}),(0,i.tZ)("div",{className:"jsx-3187c500f6b377b0",children:d?(0,i.tZ)(Ci.C,{json:d}):null}),(0,i.tZ)(L(),{id:"3187c500f6b377b0",children:"pre.jsx-3187c500f6b377b0{white-space:pre-wrap;word-wrap:break-word}"})]})})),(0,o.Z)(oE,iE.Logs,(function(){var e=(0,a.Z)((0,XS.Z)(!1),2),t=e[0],n=e[1],r=(0,l.useState)(null),o=r[0],c=r[1],s=(0,A.Dv)(OS.Sj),u=(0,a.Z)((0,A.KO)(OS.a0),2),d=u[0],f=u[1],h=(0,a.Z)((0,A.KO)(OS.ot),2),p=h[0],v=h[1],m=(0,A.b9)(OS.UB);return(0,i.BX)(Z.G7,{css:[Z.l0.colWithGap(8)],children:[(0,i.BX)(Z.G7,{css:[Z.l0.colWithGap(8),Z.l0.position.sticky,Z.l0.top(0),Z.l0.px(4),Z.l0.pb(8),Z.l0.backgroundColor.backgroundDefault],children:[(0,i.tZ)(Z.zx,{colorway:d?void 0:"positive",onClick:function(){f((function(e){return!e}))},text:d?"Stop logging goval":"Start logging goval"}),(0,i.BX)(Z.G7,{css:[Z.l0.rowWithGap(4),Z.l0.justify.spaceBetween],children:[(0,i.tZ)(Z.zx,{onClick:n,text:t?"Hide filters":"Show filters"}),o?(0,i.tZ)(Z.zx,{onClick:function(){return c(null)},text:"Reset Time Ref"}):null,(0,i.tZ)(Z.hU,{alt:"Download as JSON",onClick:function(){var e="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(s)),t=document.createElement("a");t.setAttribute("href",e);var n=(new Date).toISOString();t.setAttribute("download","logs-".concat(n.slice(0,n.indexOf(".")).replaceAll("-","").replaceAll(":",""),".json")),t.click()},size:32,children:(0,i.tZ)(vf.Z,{})}),(0,i.tZ)(Z.zx,{colorway:"negative",onClick:function(){return m()},text:"Clear logs"})]}),t?(0,i.tZ)(zS,{filters:p,updateFilters:function(e){v((0,R.Z)({},p,e))}}):null]}),(0,i.tZ)(Z.G7,{css:[Z.l0.flex.growAndShrink(1),Z.l0.overflow("auto"),Z.l0.height("100%")],children:(0,i.tZ)(FS,{logs:s,timeRef:o,setTimeRef:c})})]})})),(0,o.Z)(oE,iE.LSP,HS.L),(0,o.Z)(oE,iE.AI,DS.ho),(0,o.Z)(oE,iE.GhostwriterChat,(function(){var e=(0,RS.v)(),t=(0,gi.Z)(),n=(0,A.Dv)(Qo.gm),r=(0,ta.R3)(),o=(0,Qo.Og)(),c=(0,Qo.Cd)(),s=(0,a.Z)((0,_S.Kz)(),1)[0],u=(0,a.Z)((0,_S.u0)(),1)[0],d="chat-".concat(n,".json"),h=(0,l.useState)(".ghostwriter/".concat(d)),p=h[0],v=h[1],m=(0,f.Z)().fs,g=(0,ki.Z)().showError,y=(0,a.Z)((0,Qo.zu)(),2),b=y[0],w=y[1],x=(0,l.useCallback)((function(){return JSON.stringify({chatModel:e,chatId:n,replId:t,messages:b},null,2)}),[e,n,t,b]),C=(0,l.useCallback)((0,de.Z)((function(){var e,t,n;return(0,fe.__generator)(this,(function(r){switch(r.label){case 0:e=x(),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,m.writeFile(p,hc.Z.from(e))];case 2:if((t=r.sent()).error)throw new Error("fs error: ".concat(t.error));return[3,4];case 3:return n=r.sent(),g(n.message),[3,4];case 4:return[2]}}))})),[x,m,p,g]),k=(0,l.useCallback)((0,de.Z)((function(){var e,t,n;return(0,fe.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,m.readFile(p)];case 1:if((e=r.sent()).error)throw new Error("fs error: ".concat(e.error));if(t=JSON.parse(e.content.toString()),!Array.isArray(t.messages))throw new Error("invalid chat JSON");return w(t.messages),[3,3];case 2:return n=r.sent(),g(n.message),[3,3];case 3:return[2]}}))})),[p,m,w,g]);return(0,i.tZ)(Z.G7,{css:Z.l0.height("100%"),children:(0,i.BX)(Z.mQ,{css:[{width:"100%"}],children:[(0,i.BX)(Z.td,{withDividers:!1,children:[(0,i.tZ)(Z.OK,{iconLeft:(0,i.tZ)(ou.Filetree,{}),children:"File Context"}),(0,i.tZ)(Z.OK,{iconLeft:(0,i.tZ)(ou.Filetree,{}),children:"Debugger"}),(0,i.tZ)(Z.OK,{iconLeft:(0,i.tZ)(ou.Chat,{}),children:"Messages"})]}),(0,i.BX)(Z.nP,{children:[(0,i.BX)(Z.x4,{children:[(0,i.tZ)(IS,{title:"active file",json:r}),(0,i.tZ)(IS,{title:"last stop reason",json:c}),(0,i.tZ)(GS,{title:"last prompt",text:o})]}),(0,i.BX)(Z.x4,{children:[(0,i.tZ)(IS,{title:"buffered output",json:s}),(0,i.tZ)(IS,{title:"debug error context",json:u})]}),(0,i.tZ)(Z.x4,{children:(0,i.BX)(Z.G7,{css:[Z.l0.colWithGap(8),Z.l0.m(8)],children:[(0,i.BX)(Z.Tg,{background:"higher",css:[Z.l0.borderRadius(8),Z.l0.colWithGap(8),Z.l0.p(8)],children:[(0,i.tZ)(Z.xv,{children:"Chat History"}),(0,i.tZ)(Z.II,{type:"text",value:p,onChange:function(e){v(e.target.value)}}),(0,i.BX)(Z.G7,{css:[Z.l0.rowWithGap(8),Z.l0.flex.wrap],children:[(0,i.tZ)(Z.zx,{text:"Download",colorway:"primary",iconLeft:(0,i.tZ)(vf.Z,{}),onClick:function(){var e=x(),t="data:text/json;charset=utf-8,"+encodeURIComponent(e),n=document.createElement("a");n.setAttribute("href",t),n.setAttribute("download","".concat(d)),n.click()}}),(0,i.tZ)(Z.zx,{text:"Save to Repl",onClick:C,iconLeft:(0,i.tZ)(vf.Z,{})}),(0,i.tZ)(Z.zx,{text:"Load from Repl",onClick:k,iconLeft:(0,i.tZ)(pw.Z,{})})]})]}),(0,i.BX)(Z.G7,{css:[Z.l0.colWithGap(8)],children:[(0,i.tZ)("label",{css:Z.l0.color.foregroundDimmer,htmlFor:"gw-debug-chatModel",children:"Chat Model"}),(0,i.tZ)(Z.II,{id:"gw-debug-chatModel",type:"text",readOnly:!0,value:e})]}),(0,i.BX)(Z.G7,{css:[Z.l0.colWithGap(8)],children:[(0,i.tZ)("label",{css:Z.l0.color.foregroundDimmer,htmlFor:"gw-debug-replId",children:"Repl Id"}),(0,i.tZ)(Z.II,{id:"gw-debug-replId",type:"text",readOnly:!0,value:t})]}),(0,i.BX)(Z.G7,{css:[Z.l0.colWithGap(8)],children:[(0,i.tZ)("label",{css:Z.l0.color.foregroundDimmer,htmlFor:"gw-debug-chatId",children:"Chat Id"}),(0,i.tZ)(Z.II,{id:"gw-debug-chatId",type:"text",readOnly:!0,value:n})]})]})})]})]})})})),(0,o.Z)(oE,iE.AST,(function(){var e=(0,ct.Z)(Ql);return e?(0,i.tZ)(ac,{state:e}):null})),(0,o.Z)(oE,iE.Git,(function(){var e=(0,l.useState)([]),t=e[0],n=e[1],r=function(e){var t=(0,R.Z)({},US,e);return li.a(AS,t)}().data,o=(0,ct.Z)(PS.e);return(0,l.useEffect)((function(){o&&n((function(e){return e.length&&e[0].key===o.key?e:[o].concat((0,I.Z)(e)).slice(0,100)}))}),[o]),(0,i.BX)(Z.G7,{css:[Z.l0.p(8)],children:[(0,i.BX)(Z.Tg,{elevated:!0,css:[Z.l0.borderRadius(8),Z.l0.p(8),Z.l0.mb(8)],children:[(0,i.tZ)("span",{children:"Git Service Connection Info"}),(0,i.tZ)("pre",{children:(null===r||void 0===r?void 0:r.currentUser)?JSON.stringify(r,(function(e,t){return"accessToken"===e?"censored":t}),2):"No gitHubInfo"})]}),(0,i.tZ)(Z.G7,{css:[Z.l0.colWithGap(4)],children:t.length?t.map((function(e){return(0,i.tZ)(NS,{event:e},e.key)})):"No events yet..."})]})})),(0,o.Z)(oE,iE.History2,(function(){var e=(0,ct.Z)(Jc)(),t=(0,ct.Z)(es)(),n=(0,a.Z)((0,XS.Z)(!1),2),r=n[0],o=n[1];if(!e)return null;var l=e.filePath,c=e.changes,s=e.users,u=e.version,d=e.playing,f=e.count,h=c[u],p=null===s||void 0===s?void 0:s[h.userId],v=h.timestamp,m=r&&t?function(e,t){try{return(0,LS.ed)(e,t).op}catch(n){return n}}(h.changes,t.state.doc.sliceString(0)):null;return(0,i.BX)(Z.G7,{css:[Z.l0.colWithGap(16),Z.l0.p(4)],children:[(0,i.BX)(Z.G7,{css:[Z.l0.colWithGap(4)],children:[(0,i.tZ)(MS,{t:"File",children:(0,i.tZ)("pre",{children:l})}),(0,i.BX)(MS,{t:"Version",children:[u," / ",f-1]}),(0,i.tZ)(MS,{t:"Playing",children:(0,i.tZ)(Z.ZM,{children:d?"true":"false"})}),(0,i.tZ)(MS,{t:"Date",children:(0,i.tZ)(Z.EK,{date:v})})]}),p?(0,i.BX)(Z.G7,{children:[(0,i.tZ)(MS,{t:"Author",children:p.username}),(0,i.BX)(Z.G7,{css:[Z.l0.pl(8),Z.l0.colWithGap(4)],children:[(0,i.tZ)(MS,{t:"ID",children:p.id}),(0,i.tZ)(MS,{t:"Name",children:p.username}),(0,i.tZ)(MS,{t:"Image",children:(0,i.tZ)("a",{href:p.image,children:p.image})})]})]}):null,(0,i.BX)(Z.G7,{css:[Z.l0.rowWithGap(8),{alignItems:"center"}],children:[(0,i.tZ)(Zk.Z,{id:"toggleIsShowingChanges",isOn:r,onChange:o}),(0,i.tZ)("label",{children:"Changes"})]}),h?null:"No changes",r&&h?(0,i.tZ)(i.HY,{children:(0,i.BX)(Z.G7,{children:[(0,i.tZ)(MS,{t:"Changeset",children:(0,i.tZ)("pre",{children:JSON.stringify(h,null,2)})}),t?(0,i.tZ)(i.HY,{children:(0,i.BX)(Z.G7,{css:[Z.l0.mt(4)],children:[(0,i.tZ)(MS,{t:"OT",children:(0,i.tZ)("pre",{children:JSON.stringify(m,null,2)})}),(0,i.tZ)("p",{children:(0,i.BX)("small",{children:["Note that the OT value is translated ",(0,i.tZ)("em",{children:"back"})," to an operational transformation from the CodeMirror changeset."]})})]})}):null]})}):null]})})),(0,o.Z)(oE,iE.Metadata,(function(){var e=(0,f.Z)().container;(0,qS.Z)();var t=e.getConnectionMetadata();if(!t)return(0,i.tZ)("div",{children:"no token yet, wait for connection"});var n=t.token,r=new URL(t.conmanURL).host,o='./conman-repl -t "'.concat(n,'" -u ').concat(r);return(0,i.BX)("div",{className:"jsx-2e9ac5ab034fc317 token-viewer",children:[(0,i.BX)(O.G,{css:W.l0.rowWithGap(2),children:[(0,i.BX)(Ye.xv,{css:W.l0.flex.shrink(1),children:["conman Repl command: ",(0,i.tZ)(Yg.Z,{children:o})]}),(0,i.tZ)(Ze.h,{alt:"Copy to clipboard",onClick:function(){return(0,Oe.Z)(o)},children:(0,i.tZ)(Ti.Z,{})})]}),(0,i.BX)("div",{className:"jsx-2e9ac5ab034fc317",children:["metadata:",(0,i.tZ)("pre",{className:"jsx-2e9ac5ab034fc317",children:JSON.stringify(t,null,2)})]}),(0,i.tZ)("br",{className:"jsx-2e9ac5ab034fc317"}),(0,i.tZ)("br",{className:"jsx-2e9ac5ab034fc317"}),(0,i.BX)("div",{className:"jsx-2e9ac5ab034fc317",children:["parsed token:",(0,i.tZ)("pre",{className:"jsx-2e9ac5ab034fc317",children:JSON.stringify((0,VS.h)(t.token),null,2)})]}),(0,i.tZ)("br",{className:"jsx-2e9ac5ab034fc317"}),(0,i.tZ)("br",{className:"jsx-2e9ac5ab034fc317"}),(0,i.tZ)(L(),{id:"2e9ac5ab034fc317",children:".token-viewer.jsx-2e9ac5ab034fc317{height:100%;overflow:auto;padding:10px}pre.jsx-2e9ac5ab034fc317{white-space:pre-wrap;word-wrap:break-word}"})]})})),(0,o.Z)(oE,iE.Override,(function(){var e=(0,a.Z)(l.useState(Pl.Z.get("gurl","string")||""),2),t=e[0],n=e[1],r=(0,a.Z)(l.useState(""),2),o=r[0],c=r[1],s=function(){var e=(0,A.b9)(kv),t=(0,A.b9)(Sv);return(0,l.useCallback)((function(n){if(!n)return e(null),void t(null);e({connectionString:n,databaseId:-1,databaseName:"Admin Override",isFrozen:!1,projectId:"mock-project-id-does-not-exist",__typename:"NeonDatabase"}),t(n)}),[t,e])}();return(0,i.BX)("div",{style:{height:"100%",overflow:"auto"},children:[(0,i.tZ)(Zr.ZP,{label:"Custom gurl",placeholder:"ws://localhost:8080",value:t,onChange:function(e){return n(e.currentTarget.value)}}),(0,i.BX)("pre",{children:["metadata override preview:",JSON.stringify((0,$S.t)(t),null,2)]}),(0,i.tZ)("br",{}),(0,i.BX)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,i.tZ)(sr.Z,{color:"positive",onClick:function(){Pl.Z.set("gurl",t),window.location.reload()},children:"Set gurl and reload"}),(0,i.tZ)(sr.Z,{color:"orange",onClick:function(){Pl.Z.remove("gurl"),window.location.reload()},children:"Unset gurl and reload"})]}),(0,i.tZ)("br",{}),(0,i.tZ)("br",{}),(0,i.tZ)("div",{children:Pl.Z.get("gurl","string")?"currently in localStorage: ".concat(Pl.Z.get("gurl","string")):'No gurl set in local storage, using default gurl for this user, check "Token" tab for details'}),(0,i.tZ)("br",{}),(0,i.tZ)("br",{}),"Gurl order of precedence:",(0,i.BX)("ol",{style:{margin:20},children:[(0,i.tZ)("li",{children:"\u2018gurl\u2019 in localStorage (set above)"}),(0,i.BX)("li",{children:["If in development webapp and a there\u2019s a response from",(0,i.tZ)("code",{children:"https://currenthost:4563"})," or",(0,i.tZ)("code",{children:"http://currenthost:4560"}),", then it will use that."]}),(0,i.BX)("li",{children:["default is ",(0,i.tZ)("code",{children:"wss://eval.<usercluster>.replit.com"})]})]}),(0,i.BX)(Z.G7,{css:[Z.l0.pt(16),Z.l0.border({direction:"top"})],children:[(0,i.tZ)(Z.xv,{children:"Override Database"}),(0,i.tZ)(Zr.ZP,{type:"text",value:o,onChange:function(e){c(e.target.value)}}),(0,i.tZ)(Z.G7,{css:[Z.l0.rowWithGap(8)],children:(0,i.tZ)(sr.Z,{color:"positive",onClick:function(){s(o)},children:"Override Postgres connection string"})})]})]})})),(0,o.Z)(oE,iE.DDRum,(function(){var e,t=null===(e=nE.v.getInternalContext())||void 0===e?void 0:e.session_id,n=nE.v.getInitConfiguration(),r=null!=n&&100===n.sampleRate,o=(0,l.useState)(null!=t),a=o[0],c=o[1];return(0,i.tZ)(O.G,{css:[W.l0.colWithGap(16),W.l0.p(4)],children:r?(0,i.BX)(i.HY,{children:[(0,i.tZ)(Z.zx,{onClick:a?function(){nE.v.stopSessionReplayRecording(),document.cookie="_dd_s=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",window.location.href=window.location.href.split("?")[0]}:function(){(0,Be.Oo)({name:"replitOnReplit"}),setTimeout((function(){c(!0)}),1e3)},text:a?"\ud83d\udd34 Recording... Click to stop and reload page":"Start Recording",colorway:a?void 0:"primary",css:(0,R.Z)({},a&&Z.pt.backgroundPulse(W.TV.redDimmest,W.TV.redDimmer))}),a?(0,i.tZ)(rE,{sessionId:t}):null]}):(0,i.tZ)(Z.zx,{onClick:function(){window.location.href=window.location.href.split("?")[0].split("#")[0]+"?rum=1"},text:"Click to reload and start recording",colorway:"primary"})})})),oE),lE=Object.values(iE);function cE(){var e=(0,l.useState)(iE.Repl),t=e[0],n=e[1],r=lE.map((function(e){return(0,i.tZ)(Z.zx,{colorway:e===t?"primary":void 0,onClick:function(){return n(e)},text:e},e)}));return(0,i.BX)(Z.Tg,{background:"default",css:[Z.l0.colWithGap(8),Z.l0.p(4),Z.l0.height("100%")],children:[(0,i.tZ)(Z.G7,{css:{flexWrap:"wrap",flexDirection:"row",gap:"4px"},children:r}),(0,i.tZ)(Z.G7,{css:[Z.l0.flex.growAndShrink(1),Z.l0.overflow("auto")],children:Object.entries(aE).map((function(e){var n=(0,a.Z)(e,2),r=n[0],o=n[1];return(0,i.tZ)(Z.G7,{css:r!==t&&Z.l0.display.none,children:r===iE.Override&&t!==iE.Override?null:(0,i.tZ)(o,{})},r)}))})]})}var sE={Content:function(){return(0,i.tZ)(cE,{})},Icon:function(e){var t=e.size;return(0,i.tZ)(Ei.Z,{size:t})},getTitle:function(){return"Debug"}},uE=n(53709);function dE(){var e=(0,$r.Z)(["\n  query SshConfigurator($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        slug\n        user {\n          id\n          username\n        }\n      }\n    }\n  }\n"]);return dE=function(){return e},e}var fE={},hE=(0,Yr.Ps)(dE());var pE=["ssh-dsa","ssh-ecdsa","ssh-ed25519","ssh-rsa"];function vE(e){return function(t){t.stopPropagation(),e(t)}}function mE(e,t){if(!e)return"Please add a key for this secret";if(!e.trim())return"The key must include a non-space character";if(t.includes(e))return"You already have this key";var n=e.split(" ");return 3!==n.length?"This seems to be an invalid key.":pE.includes(n[0])?null:"Key type is not valid."}function gE(e){return(0,i.BX)(Z.G7,{css:[Z.l0.colWithGap(4)],children:[(0,i.tZ)("label",{htmlFor:e.id,children:(0,i.tZ)(Z.xv,{variant:"small",color:"dimmer",children:e.label})}),e.children,e.error?(0,i.BX)(Z.G7,{css:[Z.l0.rowWithGap(2),Z.l0.align.center],children:[(0,i.tZ)(Ad.Z,{}),(0,i.tZ)(Z.xv,{variant:"small",css:Z.l0.color.accentNegativeStrongest,children:e.error})]}):null]})}function ZE(e){var t=e.authorizedKey,n=e.otherKeys,r=e.onUpdateKey,o=e.onSave,c=(0,a.Z)(l.useState(),2),s=c[0],u=c[1],d=l.useRef(null),f=function(){var e=mE(t.key,n);if(e)return u(e),void(d.current&&d.current.focus());o()};l.useEffect((function(){s&&(mE(t.key,n)||u(null))}),[t.key,s,n]);var h=vE((function(e){"Enter"===e.key&&(e.preventDefault(),f())})),p=(0,Nd.H)()("key"),v='ssh-keygen -t ed25519 -f ~/.ssh/replit -q -N "" && cat ~/.ssh/replit.pub';return(0,i.BX)(Z.Tg,{elevated:!0,css:[Z.l0.p(16),Z.l0.borderRadius(8),Z.l0.colWithGap(16)],children:[n&&0!==n.length?null:(0,i.tZ)(Z.xv,{multiline:!0,children:"Before you can SSH to your Repl, you need to add an SSH key."}),(0,i.tZ)(gE,{id:p,label:"Key (in OpenSSH Public Key format)",error:s,children:(0,i.tZ)(Z.II,{id:p,ref:d,name:"key",value:t.key,spellCheck:!1,onChange:function(e){r(e.currentTarget.value)},onKeyDown:h})}),q.ED||(0,X.isMobile)()?(0,i.tZ)(Z.G7,{css:[Z.l0.colWithGap(8)],children:(0,i.BX)(Z.xv,{multiline:!0,children:["Need a hand? The"," ",(0,i.tZ)("a",{href:"https://docs.replit.com/power-ups/ssh",target:"_blank",children:"SSH documentation"})," ","provides information about generating SSH keys."]})}):(0,i.BX)(Z.G7,{css:[Z.l0.colWithGap(8)],children:[(0,i.tZ)(Z.xv,{multiline:!0,children:"Need a hand? Generate a key:"}),(0,i.BX)(Z.Tg,{tag:"pre",elevated:!0,css:[Z.l0.borderRadius(8),Z.l0.p(8),Z.l0.rowWithGap(8),Z.l0.justify.spaceBetween,Z.l0.align.center],children:[(0,i.tZ)(Z.xv,{css:[Z.l0.overflow("auto"),Z.l0.font.code,Z.l0.flex.growAndShrink(1),{"::-webkit-scrollbar":[Z.l0.display.none]}],maxLines:1,children:v}),(0,i.tZ)(Z.hU,{onClick:function(){return(0,Oe.Z)(v)},alt:"Copy",children:(0,i.tZ)(qu.Z,{})})]}),(0,i.tZ)(Z.xv,{multiline:!0,children:"Paste the result in the form above."})]}),(0,i.tZ)(Z.G7,{css:[Z.l0.rowWithGap(8),Z.l0.justify.spaceBetween],children:(0,i.tZ)(Z.G7,{css:Z.l0.rowWithGap(8),children:(0,i.tZ)(Z.zx,{colorway:"primary",onClick:vE(f),text:"Add SSH Key"})})})]})}function yE(e){var t=e.onAdd,n=e.otherKeys,r=(0,a.Z)(l.useState({key:""}),2),o=r[0],c=r[1];return(0,i.tZ)(ZE,{authorizedKey:o,otherKeys:n,onUpdateKey:function(e){c((function(t){return t?(0,_.Z)((0,R.Z)({},t),{key:e}):t}))},onSave:function(){c({key:""}),o.key&&t(o)}})}function bE(e){var t=e.authorizedKey,n=e.onDelete;return(0,i.BX)(Z.G7,{css:[Z.gU.filled,Z.l0.p(8),Z.l0.rowWithGap(8),Z.l0.align.center,Z.l0.justify.spaceBetween,Z.l0.borderRadius(8)],children:[(0,i.tZ)(yo.Z,{size:24}),(0,i.BX)(Z.xv,{css:[Z.l0.flex.growAndShrink(1)],maxLines:1,children:[t.keytype," ",t.key.substring(0,8),"...",t.key.substring(t.key.length-8)," ",t.comment]}),(0,i.tZ)(Z.hU,{onClick:function(){return n(t)},alt:"Delete",size:28,children:(0,i.tZ)(uE.Z,{})})]})}function wE(e){if(!e.length)return null;var t=e.split(" ");return t.length<3?null:{keytype:t[0],key:t[1],comment:t[2]}}function xE(e){var t=e.sshUser,n=e.sshHostname;return(0,i.BX)(i.HY,{children:[(0,i.tZ)(Z.xv,{multiline:!0,children:"When configuring your SSH client to connect to this Repl, you will need the following configuration values:"}),(0,i.BX)(Z.G7,{css:Z.l0.colWithGap(2),children:[(0,i.tZ)(Z.xv,{children:"Hostname"}),(0,i.BX)(Z.Tg,{tag:"pre",elevated:!0,css:[Z.l0.borderRadius(8),Z.l0.p(8),Z.l0.rowWithGap(8)],children:[(0,i.tZ)(Z.xv,{css:[Z.l0.overflow("auto"),Z.l0.font.code,Z.l0.flex.growAndShrink(1),{"::-webkit-scrollbar":[Z.l0.display.none]}],maxLines:1,children:n}),(0,i.tZ)(Z.hU,{onClick:function(){return(0,Oe.Z)(n)},alt:"Copy",children:(0,i.tZ)(qu.Z,{})})]})]}),(0,i.BX)(Z.G7,{css:Z.l0.colWithGap(2),children:[(0,i.tZ)(Z.xv,{children:"Username"}),(0,i.BX)(Z.Tg,{tag:"pre",elevated:!0,css:[Z.l0.borderRadius(8),Z.l0.p(8),Z.l0.rowWithGap(8)],children:[(0,i.tZ)(Z.xv,{css:[Z.l0.overflow("auto"),Z.l0.font.code,Z.l0.flex.growAndShrink(1),{"::-webkit-scrollbar":[Z.l0.display.none]}],maxLines:1,children:t}),(0,i.tZ)(Z.hU,{onClick:function(){return(0,Oe.Z)(t)},alt:"Copy",children:(0,i.tZ)(qu.Z,{})})]})]})]})}function CE(e){var t,n=e.repl,r=e.onlyCommand,o=void 0===r||r;if("Repl"!==n.__typename)return null;var a=n.id,l="".concat(n.slug,".").concat(null===(t=n.user)||void 0===t?void 0:t.username,".repl.co"),c="ssh -i ~/.ssh/replit ".concat(a,"@").concat(l),s="Host ".concat(l,"\n  User ").concat(a,"\n  IdentityFile ~/.ssh/replit"),u="ssh ".concat(l);return q.ED||(0,X.isMobile)()?o?null:(0,i.BX)(Z.G7,{css:Z.l0.colWithGap(16),children:[(0,i.tZ)(xd.Z,{level:4,children:"Client Configuration"}),(0,i.tZ)(xE,{sshUser:a,sshHostname:l}),(0,i.BX)(Z.xv,{multiline:!0,children:["For more detailed configuration instructions",q.ED?" on Windows":null,", check the"," ",(0,i.tZ)("a",{href:"https://docs.replit.com/power-ups/ssh",target:"_blank",children:"SSH Power-Up documentation"}),"."]})]}):(0,i.tZ)(Z.G7,{css:Z.l0.colWithGap(16),children:o?(0,i.BX)(i.HY,{children:[(0,i.tZ)(xd.Z,{level:4,children:"Quick-Start SSH Command"}),(0,i.BX)(Z.Tg,{tag:"pre",elevated:!0,css:[Z.l0.borderRadius(8),Z.l0.p(8),Z.l0.rowWithGap(8)],children:[(0,i.tZ)(Z.xv,{css:[Z.l0.overflow("auto"),Z.l0.font.code,Z.l0.flex.growAndShrink(1),{"::-webkit-scrollbar":[Z.l0.display.none]}],maxLines:1,children:c}),(0,i.tZ)(Z.hU,{onClick:function(){return(0,Oe.Z)(c)},alt:"Copy",children:(0,i.tZ)(qu.Z,{})})]})]}):(0,i.BX)(i.HY,{children:[(0,i.tZ)(xd.Z,{level:4,children:"Client Configuration"}),(0,i.tZ)(xE,{sshUser:a,sshHostname:l}),(0,i.tZ)(xd.Z,{level:5,children:"SSH Configuration File"}),(0,i.BX)(Z.xv,{multiline:!0,children:["You can add this snippet to your SSH configuration file (typically"," ",(0,i.tZ)(Z.xv,{css:[Z.l0.font.code,Z.l0.display.inline,Z.l0.align.baseline],multiline:!0,children:"~/.ssh/config"}),"):"]}),(0,i.BX)(Z.Tg,{tag:"pre",elevated:!0,css:[Z.l0.borderRadius(8),Z.l0.p(8),Z.l0.rowWithGap(8)],children:[(0,i.tZ)(Z.xv,{css:[Z.l0.overflow("auto"),Z.l0.font.code,Z.l0.flex.growAndShrink(1),{"::-webkit-scrollbar":[Z.l0.display.none]}],multiline:!0,children:s}),(0,i.tZ)(Z.hU,{onClick:function(){return(0,Oe.Z)(s)},alt:"Copy",children:(0,i.tZ)(qu.Z,{})})]}),(0,i.tZ)(Z.xv,{multiline:!0,children:"Then, to connect to your Repl you can simply run:"}),(0,i.BX)(Z.Tg,{tag:"pre",elevated:!0,css:[Z.l0.borderRadius(8),Z.l0.p(8),Z.l0.rowWithGap(8)],children:[(0,i.tZ)(Z.xv,{css:[Z.l0.overflow("auto"),Z.l0.font.code,Z.l0.flex.growAndShrink(1),{"::-webkit-scrollbar":[Z.l0.display.none]}],maxLines:1,children:u}),(0,i.tZ)(Z.hU,{onClick:function(){return(0,Oe.Z)(u)},alt:"Copy",children:(0,i.tZ)(qu.Z,{})})]})]})})}function kE(e){return SE.apply(this,arguments)}function SE(){return(SE=(0,de.Z)((function(e){return(0,fe.__generator)(this,(function(t){switch(t.label){case 0:return[4,e.createDir(".config")];case 1:return t.sent(),[4,e.createDir(".config/ssh")];case 2:return t.sent(),[2]}}))}))).apply(this,arguments)}function EE(e){var t=e.fs,n=(0,it.Z)(),r=(0,a.Z)(l.useState(null),2),o=r[0],c=r[1],s=function(e){var t=(0,R.Z)({},fE,e);return li.a(hE,t)}({variables:{replId:(0,gi.Z)()}}).data,u="Repl"===(null===s||void 0===s?void 0:s.repl.__typename)?s.repl:null;l.useEffect((function(){function e(){return(e=(0,de.Z)((function(){var e,r;return(0,fe.__generator)(this,(function(i){switch(i.label){case 0:return[4,kE(t)];case 1:return i.sent(),[4,t.readFile(".config/ssh/.authorized_keys")];case 2:if((e=i.sent()).error===y.Df.NotFound)return n.current&&c({}),[2];if(e.error)throw new Error("Error getting .authorized_keys");return n.current?(r={},e.content.toString().split("\n").forEach((function(e){if(!e.startsWith("#")){var t=wE(e);null!==t&&(r[t.key]=t)}})),c(r),[2]):[2]}}))}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t,c,n]);var d=function(){var e=(0,de.Z)((function(e){var n,r;return(0,fe.__generator)(this,(function(i){switch(i.label){case 0:if(!o)throw new Error("trying to write authorized keys before loading");return n=function(e,t){var n=(0,R.Z)({},e);if("add"===t.type){var r=wE(t.key);r&&(n[r.key]=r)}else delete n[t.key];return n}(o,e),c(n),r="# generated file, use the SSH tool instead of editing\n"+Object.values(n).map((function(e){return"".concat((t=e).keytype," ").concat(t.key," ").concat(t.comment);var t})).join("\n"),[4,t.writeFile(".config/ssh/.authorized_keys",hc.Z.from(r))];case 1:return i.sent(),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=(0,de.Z)((function(e){return(0,fe.__generator)(this,(function(t){switch(t.label){case 0:return[4,d((0,R.Z)({type:"add"},e))];case 1:return t.sent(),(0,Ue.j)(Ue.U3.SSH_CONFIGURATOR_USED,{action:"added"}),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=(0,de.Z)((function(e){return(0,fe.__generator)(this,(function(t){switch(t.label){case 0:return[4,d({type:"delete",key:e.key})];case 1:return t.sent(),(0,Ue.j)(Ue.U3.SSH_CONFIGURATOR_USED,{action:"deleted"}),[2]}}))}));return function(t){return e.apply(this,arguments)}}();return o&&u?(0,i.tZ)(Z.G7,{css:Z.l0.colWithGap(32),children:(0,i.BX)(Z.G7,{css:Z.l0.colWithGap(16),children:[Object.keys(o).length>0?(0,i.tZ)(CE,{repl:u,onlyCommand:!0}):null,(0,i.tZ)(xd.Z,{level:4,children:"Manage SSH Keys"}),Object.values(o).map((function(e){return(0,i.tZ)(bE,{authorizedKey:e,onDelete:h},e.key)})),(0,i.tZ)(yE,{onAdd:f,otherKeys:Object.keys(o)}),Object.keys(o).length>0?(0,i.tZ)(CE,{repl:u,onlyCommand:!1}):null]})}):(0,i.tZ)(Z.G7,{css:[Z.l0.center,Z.l0.coverContainer],children:(0,i.tZ)(ur.Z,{size:24})})}function TE(e){var t=e.children;return(0,i.tZ)(Z.G7,{css:[Z.l0.height("100%"),Z.l0.overflowY("auto"),Hu.F3],children:(0,i.BX)(Z.G7,{css:[Z.l0.p(8),Z.l0.colWithGap(8),Z.l0.flex.grow(1)],children:[(0,i.tZ)(Z.G7,{css:[Z.l0.rowWithGap(8)],children:(0,i.tZ)(xd.Z,{truncate:!0,level:4,children:"SSH Configuration"})}),(0,i.BX)(Z.xv,{variant:"small",color:"dimmer",multiline:!0,children:["Add authorized keys to configure SSH access to this Repl."," ",(0,i.tZ)("a",{href:"https://docs.replit.com/power-ups/ssh",target:"_blank",children:"Learn more here"}),"."]}),(0,i.tZ)(Z.G7,{css:[Z.l0.flex.grow(1),Z.l0.py(8),Z.l0.position.relative],children:t})]})})}var RE=n(57773),_E={Content:function(){return(0,i.tZ)(IE,{})},Icon:function(e){var t=e.size;return(0,i.tZ)(RE.Z,{size:t})},getTitle:function(){return"SSH"}};function IE(){var e=(0,f.Z)().fs;return(0,i.tZ)(TE,{children:(0,i.tZ)(EE,{fs:e})})}var GE=n(36193),DE=n(55500),PE=function(e){var t=e.currentUser,n=e.inputRef,r=(0,ta.Bx)(),o=(0,Il.Z)(),c=o.ref,s=o.update,u=(0,a.Z)((0,Qo.Jc)(),2),d=u[0],h=u[1],p=(0,a.Z)((0,Qo.gp)(),1)[0],v=(0,Qo.ql)(),m=(0,f.Z)(),g=m.fs,y=m.dotReplit,b=function(e){if(e.preventDefault(),!d)return null;h(""),requestAnimationFrame((function(){s()})),v({text:d,type:Jo.NK.Chat,fs:g,dotReplit:y,recentFiles:r})},w=(0,DE.j3)(),x=(0,DE.em)(),C=(0,l.useCallback)((function(){var e;x(),null===(e=n.current)||void 0===e||e.focus()}),[x,n]),k=(0,DE.MY)();return(0,i.BX)(Z.Tg,{elevated:!0,css:[Z.l0.flex.growAndShrink(0),Z.l0.p(8),Z.l0.colWithGap(12),Z.l0.borderRadius(0,0,8,8),{borderTop:"1px solid ".concat(Z.TV.outlineDimmer)}],children:[(0,i.BX)(Z.G7,{css:[Z.l0.flex.row,Z.l0.justify.spaceBetween,Z.l0.align.end],children:[(0,i.tZ)(Wr.Z,{feature:Or.l.GhostWriter}),(0,i.tZ)(GE.Z,{maxLength:500,value:d,hideLabel:!0,fontSize:"inherit"})]}),(0,i.BX)(Z.G7,{css:[Z.l0.rowWithGap(8),Z.l0.align.center],tag:"form",disabled:p,onSubmit:b,children:[(0,i.tZ)(Z.qE,{src:t.image,username:t.username,size:24}),(0,i.tZ)(Z.G7,{css:[[Z.l0.flex.growAndShrink(1),Z.l0.maxHeight(300)]],children:(0,i.tZ)(Z.B,{readOnly:p,type:"text",inputMode:"text",maxLength:500,placeholder:"Ask a question about code\u2026",ref:(0,Wl.l)(c,n),css:[Z.l0.height(32),Z.l0.align.start,{resize:"vertical",width:"100%",flexGrow:1}],onChange:function(e){return h(e.target.value)},value:d,onFocus:function(){(0,Ue.j)(Ue.U3.GHOSTWRITER_CHAT_INPUT_FOCUSED)},onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),e.shiftKey?(h((function(e){var t,r;return e.slice(0,null===n||void 0===n||null===(t=n.current)||void 0===t?void 0:t.selectionStart)+"\n"+e.slice(null===n||void 0===n||null===(r=n.current)||void 0===r?void 0:r.selectionEnd,e.length)})),requestAnimationFrame((function(){s()}))):b(e))}})}),p&&w&&!k?(0,i.tZ)(Z.hU,{size:28,alt:"Stop generating",onClick:C,children:(0,i.tZ)(ko.Z,{})}):(0,i.tZ)(Z.hU,{alt:"Send message",size:28,type:"submit",disabled:p,css:[Z.l0.backgroundColor.blueDefault,Z.l0.borderRadius(8),{"@media (hover: hover)":{":not([disabled]):hover":{"background-color":Z.TV.blueDefault}}}],children:(0,i.tZ)(Sl.Z,{})})]})]})},BE=function(e){var t=e.title,n=e.children,r=e.link;return(0,i.BX)("a",{href:r,target:"__blank",css:[Z.l0.color.foregroundDimmer,Z.l0.p(12),Z.l0.borderRadius(8),Z.l0.maxWidth("100%"),Z.l0.flex.growAndShrink(1),Z.gU.filled,Z.l0.focusRing,Z.l0.colWithGap(4)],children:[(0,i.BX)(Z.G7,{css:[Z.l0.flex.row,Z.l0.justify.spaceBetween],children:[(0,i.tZ)(Z.xv,{variant:"subheadDefault",children:t}),(0,i.tZ)(ou.ExternalLink,{})]}),n]})},UE=function(e){var t=e.inputRef,n=function(e){var n;r(e),(0,Ue.j)(Ue.U3.GHOSTWRITER_CHAT_EXAMPLE_CLICKED,{prompt:e}),null===t||void 0===t||null===(n=t.current)||void 0===n||n.focus()},r=(0,a.Z)((0,Qo.Jc)(),2)[1];return(0,i.BX)(Z.G7,{css:[Z.l0.py(24),Z.l0.px(8),Z.l0.colWithGap(16),Z.l0.width("100%"),Z.l0.overflow("auto"),Z.l0.flex.growAndShrink(1),Z.l0.color.foregroundDimmer],children:[(0,i.BX)(Z.G7,{css:[Z.l0.colWithGap(8)],children:[(0,i.tZ)(Z.xv,{variant:"subheadDefault",children:"Getting started"}),(0,i.tZ)(Z.xv,{variant:"text",css:Z.l0.color.foregroundDimmest,multiline:!0,children:"You can chat with Ghostwriter like a real pair programmer. Trying asking questions about your code or follow-ups about a previous message."})]}),(0,i.tZ)(Z.G7,{children:(0,i.tZ)(Z.G7,{css:[Z.l0.colWithGap(8)],children:(0,i.BX)(Z.G7,{css:[Z.l0.colWithGap(8),Z.l0.align.start,Z.l0.flex.growAndShrink(1)],children:[(0,i.tZ)(Z.xv,{variant:"text",children:"Example prompts"}),(0,i.tZ)(Z.zx,{iconLeft:(0,i.tZ)(Sl.Z,{}),text:'"How do I scrape a website for <a> tags?"',onClick:function(){n("How do I scrape a website for <a> tags?")}}),(0,i.tZ)(Z.zx,{iconLeft:(0,i.tZ)(Sl.Z,{}),text:'"Write a login page in HTML and CSS"',onClick:function(){n("Write a login page in HTML and CSS")}}),(0,i.tZ)(Z.zx,{iconLeft:(0,i.tZ)(Sl.Z,{}),text:(0,i.BX)("text",{children:['"How can I improve the code in ',(0,i.tZ)("em",{children:"filename.js"}),'?"']}),onClick:function(){n("How can I improve the code in ")}}),(0,i.tZ)(Z.zx,{iconLeft:(0,i.tZ)(Sl.Z,{}),text:'"How do I use the pandas apply function?"',onClick:function(){n("How do I use the pandas apply function?")}})]})})}),(0,i.BX)(Z.G7,{css:[Z.l0.colWithGap(8)],children:[(0,i.tZ)(Z.xv,{variant:"text",children:"Learn more"}),(0,i.BX)(Z.G7,{css:[Z.l0.rowWithGap(8)],children:[(0,i.tZ)(BE,{title:"Using the Debugger",link:"https://docs.replit.com/power-ups/ghostwriter/ghostwriter-chat",children:(0,i.tZ)(Z.xv,{variant:"text",css:[Z.l0.color.foregroundDimmest],multiline:!0,children:"Detect and solve bugs when you run your Repl."})}),(0,i.tZ)(BE,{title:"Prompt Writing 101",link:"https://docs.replit.com/power-ups/ghostwriter/complete-code#prompt-engineering",children:(0,i.tZ)(Z.xv,{variant:"text",css:[Z.l0.color.foregroundDimmest],multiline:!0,children:"Learn best practices for working with Ghostwriter."})})]})]})]})};function AE(){var e=(0,$r.Z)(["\n  query GhostwriterChatCurrentUserQuery {\n    currentUser {\n      username\n      id\n      image\n      isStaff: hasRole(role: REPLIT_STAFF)\n    }\n  }\n"]);return AE=function(){return e},e}var NE={},LE=(0,Yr.Ps)(AE());var XE=function(){return(0,i.BX)(Z.G7,{css:[Z.l0.colWithGap(16),Z.l0.align.center,Z.l0.p(24),Z.l0.height("100%"),Z.l0.justify.center],children:[(0,i.tZ)(Z.G7,{css:[Z.l0.maxWidth(200)],children:(0,i.tZ)(Rv.Z,{src:"/public/images/ghostwriter/orb.jpg",css:[{userSelect:"none",mixBlendMode:"screen",filter:"brightness(110%) saturate(1.2)",maskImage:"linear-gradient(".concat(Z.TV.backgroundRoot,", transparent)")}],width:200,height:200,objectFit:"contain","aria-hidden":"true",alt:"",draggable:!1})}),(0,i.tZ)(Z.xv,{variant:"subheadBig",children:"Chat with Ghostwriter"}),(0,i.BX)(Z.G7,{css:[Z.l0.rowWithGap(8),Z.l0.align.center],children:[(0,i.tZ)(ur.Z,{}),(0,i.tZ)(Z.xv,{color:"dimmer",children:"Loading\u2026"})]})]})},ME=function(){(0,Ue.j)(Ue.U3.GHOSTWRITER_CHAT_CODE_COPIED)},OE=function(e){var t=(0,G.T3)(),n=(0,Ut.P)({controlName:"flag-use-new-code-rendering"});return e.inline?n?(0,i.tZ)(At.Z,(0,R.Z)({onCodeCopied:ME},e)):(0,i.tZ)(Bt.Z,(0,R.Z)({alwaysShowCopyButton:t,onCodeCopied:ME},e)):(0,i.tZ)(Z.G7,{css:[Z.l0.colWithGap(12)],children:n?(0,i.tZ)(At.Z,(0,R.Z)({onCodeCopied:ME},e)):(0,i.tZ)(Bt.Z,(0,R.Z)({alwaysShowCopyButton:t,onCodeCopied:ME},e))})},WE=n(57011),FE=n(58513),jE=(0,l.createContext)(void 0);function zE(){var e=(0,l.useContext)(jE);if(!e)throw new Error("Expected store in context");return e}var HE=(0,FE.cn)(!1);function VE(e){var t=e.children,n=e.debugMode,r=void 0!==n&&n,o=(0,l.useRef)();return o.current||(o.current=(0,FE.MT)()),(0,l.useEffect)((function(){o.current&&o.current.set(HE,r)}),[r]),(0,i.tZ)(jE.Provider,{value:o.current,children:t})}var qE=n(70782),$E=n.n(qE),YE=n(96086),KE=$E()((function(){return n.e(1661).then(n.bind(n,71661))}),{loadableGenerated:{webpack:function(){return[71661]}}}),QE=function(e){var t=e.author;return(0,i.tZ)(Z.n5,{src:t.image,username:t.username})},JE=function(e){return(0,i.tZ)(Z.G7,{children:(0,i.tZ)(Z.xv,{multiline:!0,children:e.children})})},eT=(0,l.memo)((function(e){var t=e.message,n=e.autoScroll,r=t.text,o=t.author,a=t.loading,s=t.error,u=t.attribution,d=t.inferenceId,f=function(){var e=zE();return(0,WE.Dv)(HE,{store:e})}(),h="Assistant"===u,p=(0,l.useRef)(null),v=(0,YE.rM)();(0,l.useLayoutEffect)((function(){n&&p.current&&requestAnimationFrame((function(){n&&p.current&&((0,c.Z)(p.current,{behavior:"auto",scrollMode:"always"}),v(!0))}))}),[r,n,v]);var m=Z.TV.foregroundDefault;return h&&a&&(m=Z.TV.foregroundDimmer),(0,i.BX)(Z.G7,{css:[Z.l0.px(8),Z.l0.py(12),Z.l0.colWithGap(8),"Assistant"===u?{background:"linear-gradient(90.7deg, rgba(82, 57, 204, 0.1) 0.6%, rgba(166, 148, 255, 0.1) 137.79%)",borderWidth:"1px 0px",borderStyle:"solid",borderColor:"rgba(121, 94, 255, 0.5)"}:null],children:[(0,i.BX)(Z.G7,{css:[Z.l0.flex.row,Z.l0.justify.spaceBetween,Z.l0.align.center],children:[(0,i.tZ)(QE,{author:o}),d?(0,i.tZ)(Z.G7,{css:[Z.l0.rowWithGap(8),Z.l0.align.center],children:(0,i.tZ)(ii,{inferenceClass:qr.Sg.Chat,inferenceId:d,language:""})}):null]}),(0,i.BX)(Z.G7,{css:[Z.l0.rowWithGap(8),Z.l0.align.center],children:[h&&a?(0,i.tZ)(ur.Z,{}):null,r?(0,i.tZ)(Dt.ZP,{rehypePlugins:[],components:{h1:JE,h2:JE,h3:JE,h4:JE,h5:JE,h6:JE,code:OE},css:[Cv.Z,{p:{color:m,lineHeight:1.875}},Z.l0.px(16),Z.l0.width("100%"),Z.l0.maxWidth("100%")],lineBreaks:!0,children:r}):null]}),h&&"string"===typeof s?(0,i.tZ)(Z.G7,{children:(0,i.tZ)(Z.xv,{css:[Z.l0.color.accentNegativeStronger,Z.l0.fontSize(16)],multiline:!0,children:s})}):null,f?(0,i.tZ)(KE,{message:t}):null,n?(0,i.tZ)(Z.G7,{css:{marginTop:-8,marginBottom:0},innerRef:p}):null]})}),(function(e,t){return t.autoScroll===e.autoScroll&&Es()(t.message,e.message)})),tT=n(89817),nT=function(){var e,t=(0,G.T3)(),n=(0,a.Z)((0,Qo.zu)(),1)[0],r=(0,RS.v)(),o=function(e){var t=(0,R.Z)({},NE,e);return li.a(LE,t)}(),c=o.data,s=o.loading,u=o.error,d=(0,gi.Z)(),f=(0,tT.v3)();(0,l.useEffect)((function(){(null===c||void 0===c?void 0:c.currentUser)&&f({chatModel:r,replId:d,currentUser:null===c||void 0===c?void 0:c.currentUser})}),[r,null===c||void 0===c?void 0:c.currentUser,d,f]);var h=null===c||void 0===c||null===(e=c.currentUser)||void 0===e?void 0:e.isStaff,p=(0,a.Z)(function(){var e=zE();return(0,WE.KO)(HE,{store:e})}(),2),v=p[0],m=p[1],g=(0,Qo.ZT)(),y=(0,tt.Z)((function(){var e=h?{type:"action",icon:(0,i.tZ)(Ei.Z,{fill:v?Z.TV.accentPrimaryDefault:Z.TV.foregroundDefault}),label:"Toggle debug mode",run:function(){m((function(e){return!e}))}}:null,t={type:"action",label:"Clear chat history",icon:(0,i.tZ)(pf.Z,{}),run:function(){g()}};return e?[e,t]:[t]}),[v,m,h,g]),b=(0,l.useRef)(null);(0,Hu.L5)((function(){return{actions:y,focus:function(){var e;null===b||void 0===b||null===(e=b.current)||void 0===e||e.focus()}}}),[y]);var w=(0,a.Z)((0,YE.Z_)(),2),x=w[0],C=w[1],k=(0,a.Z)((0,YE.Z9)(),2),S=k[0],E=k[1],T=(0,l.useCallback)((function(e){S?E(!1):e.target.scrollHeight-e.target.scrollTop!==e.target.clientHeight?C(!1):C(!0)}),[S,C,E]);return s?(0,i.tZ)(XE,{}):u||!(null===c||void 0===c?void 0:c.currentUser)?(0,i.BX)(Z.G7,{children:["error: ",u||"User not found, please log in or reload"]}):(0,i.BX)(Z.G7,{css:[Z.l0.flex.column,Z.l0.maxHeight("100%"),Z.l0.maxWidth("100%"),Z.l0.flex.grow(1),!t&&Z.l0.overflow("hidden")],children:[n.length?(0,i.tZ)(Z.G7,{css:[Z.l0.colWithGap(16),Z.l0.overflow("auto"),Z.l0.flex.growAndShrink(1),Z.l0.pt(12)],onScroll:T,role:"log",children:n.map((function(e,t){return(0,i.tZ)(eT,{message:e,autoScroll:x&&t===n.length-1},t)}))}):(0,i.tZ)(UE,{inputRef:b}),(0,i.tZ)(PE,{currentUser:c.currentUser,inputRef:b})]})},rT=function(){return(0,i.tZ)(VE,{children:(0,i.tZ)(nT,{})})},iT={Content:function(){return(0,i.tZ)(rT,{})},Icon:function(e){var t=e.size;return(0,i.tZ)(Wn.Z,{size:t})},getTitle:function(){return"Ghostwriter"}},oT=n(7537);function aT(){return{filetree:oT.Z,codeEditor:pd,webview:Lv.R,media:am,pedit:kS,vnc:Ov,unitTests:TS,preferences:af,adminPanel:sE,runnerOutput:yd,shell:zv,packager:Ff,envEditor:tf,draw:rm,git:VC,history:gS,database:_h,neon:Nv,markdown:T,sshConfigurator:_E,ghostwriterChat:iT}}},7899:function(e,t,n){n.d(t,{Np:function(){return E},Xo:function(){return T},fg:function(){return _},jY:function(){return R}});var r=n(2272),i=n(9970),o=n(89188),a=n(81202),l=n.n(a),c=n(92153),s=n(59496),u=n(58513),d=n(46862),f=n(28609),h=(0,u.cn)(null),p=(0,u.cn)(new Map),v=(0,u.cn)([]),m=(0,u.cn)(null,(function(e,t,n){t(p,(function(e){return(0,c.ZP)(e,(function(e){var t=e.get(n.paneId),r=Date.now();if(t){var i=t.panes.at(-1);t.lastActiveAt=r,l()(n.pane,i)||t.panes.push(n.pane)}else e.set(n.paneId,{panes:[n.pane],lastActiveAt:r})}))})),t(h,n.paneId)})),g=(0,u.cn)(null,(function(e,t,n){var r=e(h),i=e(p).get(n);i&&t(v,(function(e){return(0,c.ZP)(e,(function(e){e.push(i.panes)}))})),t(p,(function(e){return(0,c.ZP)(e,(function(e){e.delete(n)}))})),r===n&&t(h,null)})),Z=(0,u.cn)(null,(function(e,t,n){t(p,(function(e){return(0,c.ZP)(e,(function(e){var t=e.get(n);t&&(t.lastActiveAt=Date.now())}))})),t(h,n)})),y=(0,u.cn)(null,(function(e,t){t(h,null)})),b=(0,u.cn)((function(e){return(0,i.Z)(e(p).values()).sort((function(e,t){return t.lastActiveAt-e.lastActiveAt})).map((function(e){return e.panes}))})),w=(0,u.cn)((function(e){var t=e(p),n=[];return t.forEach((function(e,t){var r=e.panes.at(-1);r&&n.push([t,r,e.lastActiveAt])})),n.sort((function(e,t){return e[2]-t[2]}))})),x=(0,u.cn)((function(e){var t=[],n=!0,i=!1,a=void 0;try{for(var l,c=e(w)[Symbol.iterator]();!(n=(l=c.next()).done);n=!0){var s=(0,r.Z)(l.value,2),u=(s[0],s[1]),d=(0,o.Ur)(u)?u.data.path:null;d&&t.push(d)}}catch(f){i=!0,a=f}finally{try{n||null==c.return||c.return()}finally{if(i)throw a}}return t})),C=(0,u.cn)((function(e){var t=[],n=!0,r=!1,o=void 0;try{for(var a,l=e(b)[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var c,s=a.value;s.length<=1||(c=t).push.apply(c,(0,i.Z)(s.slice(0,-1)))}}catch(Z){r=!0,o=Z}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}var u=!0,d=!1,f=void 0;try{for(var h,p=e(v)[Symbol.iterator]();!(u=(h=p.next()).done);u=!0){var m,g=h.value;(m=t).push.apply(m,(0,i.Z)(g))}}catch(Z){d=!0,f=Z}finally{try{u||null==p.return||p.return()}finally{if(d)throw f}}return t})),k=(0,u.cn)((function(e){var t=[],n=!0,r=!1,i=void 0;try{for(var a,l=e(C)[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var c=a.value,s=(0,o.Ur)(c)?c.data.path:null;s&&t.push(s)}}catch(u){r=!0,i=u}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}return t})),S=((0,u.cn)((function(e){return(0,i.Z)(e(x)).concat((0,i.Z)(e(k)))})),(0,u.cn)((function(e){var t=e(h);if(!t)return null;var n=e(p).get(t);return(null===n||void 0===n?void 0:n.panes.at(-1))||null})));(0,u.cn)((function(e){var t=e(S);return t&&(0,o.Ur)(t)&&t.data.path||null}));function E(e,t){var n=(0,d.$X)(m),r=(0,d.$X)(g);(0,s.useEffect)((function(){n({paneId:e,pane:t})}),[n,e,t]),(0,s.useEffect)((function(){return function(){r(e)}}),[r,e])}function T(){return(0,d.$X)(Z)}function R(){return(0,d.$X)(y)}function _(){var e=(0,d.yL)(x);return(0,f.Z)((function(){return function(t){return new Promise((function(n,r){var i=e.subscribe((function(e){e.includes(t)||(i(),n())}))}))}}),[e])}},34870:function(e,t,n){n.d(t,{U:function(){return r},v:function(){return i}});var r={"self-hosted-large":{},"self-hosted-santa-1b":{infill:!0},"gwtraining-test1":{},"gwtraining-test2":{},"gwtraining-test3":{},"hacky-gpt-3.5-turbo":{}},i=new Set(Object.keys(r))}}]);
//# sourceMappingURL=6695-ffce02a04db66fb3.js.map